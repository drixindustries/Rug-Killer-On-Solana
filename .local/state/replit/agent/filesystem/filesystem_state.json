{"file_contents":{"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"server/jupiter-service.ts":{"content":"import type { JupiterPriceData } from \"@shared/schema\";\n\nconst JUPITER_PRICE_API_URL = \"https://api.jup.ag/price/v2\";\n\nexport class JupiterPriceService {\n  async getTokenPrice(tokenAddress: string): Promise<JupiterPriceData | null> {\n    try {\n      const response = await fetch(\n        `${JUPITER_PRICE_API_URL}?ids=${tokenAddress}`,\n        {\n          signal: AbortSignal.timeout(10000),\n        }\n      );\n\n      if (!response.ok) {\n        console.error(`Jupiter API error: ${response.status} ${response.statusText}`);\n        return null;\n      }\n\n      const data = await response.json();\n      \n      if (!data.data || !data.data[tokenAddress]) {\n        console.log(`Jupiter: No price data available for token ${tokenAddress}`);\n        return null;\n      }\n\n      const priceData = data.data[tokenAddress];\n      \n      return {\n        id: priceData.id,\n        type: priceData.type,\n        price: priceData.price,\n        extraInfo: priceData.extraInfo,\n      };\n    } catch (error) {\n      console.error(\"Jupiter API error:\", error);\n      return null;\n    }\n  }\n}\n","size_bytes":1080},"client/src/components/token-input.tsx":{"content":"import { useState } from \"react\";\nimport { Search, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface TokenInputProps {\n  onAnalyze: (tokenAddress: string) => void;\n  isAnalyzing?: boolean;\n}\n\nconst EXAMPLE_TOKENS = [\n  { address: \"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v\", label: \"USDC\" },\n  { address: \"So11111111111111111111111111111111111111112\", label: \"SOL\" },\n];\n\nexport function TokenInput({ onAnalyze, isAnalyzing }: TokenInputProps) {\n  const [tokenAddress, setTokenAddress] = useState(\"\");\n  const [recentSearches, setRecentSearches] = useState<string[]>([]);\n  const [error, setError] = useState<string>(\"\");\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!tokenAddress.trim()) {\n      setError(\"Please enter a token address\");\n      return;\n    }\n    \n    if (tokenAddress.length < 32 || tokenAddress.length > 44) {\n      setError(\"Invalid Solana address format\");\n      return;\n    }\n    \n    setError(\"\");\n    onAnalyze(tokenAddress);\n    \n    if (!recentSearches.includes(tokenAddress)) {\n      setRecentSearches(prev => [tokenAddress, ...prev.slice(0, 4)]);\n    }\n  };\n\n  const handleRemoveRecent = (address: string) => {\n    setRecentSearches(prev => prev.filter(a => a !== address));\n  };\n\n  return (\n    <div className=\"w-full max-w-3xl mx-auto space-y-4\">\n      <form onSubmit={handleSubmit} className=\"space-y-3\">\n        {/* Mobile-first: Stack vertically on small screens, inline on larger screens */}\n        <div className=\"flex flex-col sm:flex-row gap-3 sm:gap-2\">\n          <div className=\"relative flex-1\">\n            <Search className=\"absolute left-3 sm:left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n            <Input\n              type=\"text\"\n              placeholder=\"Enter token address...\"\n              value={tokenAddress}\n              onChange={(e) => {\n                setTokenAddress(e.target.value);\n                setError(\"\");\n              }}\n              className=\"pl-10 sm:pl-12 h-12 sm:h-14 text-sm sm:text-base font-mono\"\n              data-testid=\"input-token-address\"\n              disabled={isAnalyzing}\n            />\n          </div>\n          <Button\n            type=\"submit\"\n            className=\"h-12 sm:h-14 min-w-[120px] sm:min-w-[140px]\"\n            disabled={isAnalyzing}\n            data-testid=\"button-analyze\"\n          >\n            <Search className=\"h-4 w-4 sm:hidden mr-2\" />\n            {isAnalyzing ? \"Analyzing...\" : \"Analyze\"}\n          </Button>\n        </div>\n      </form>\n      \n      {error && (\n        <p className=\"text-sm text-destructive\" data-testid=\"text-error\">\n          {error}\n        </p>\n      )}\n      \n      {recentSearches.length > 0 && (\n        <div className=\"flex flex-wrap gap-2\">\n          <span className=\"text-xs text-muted-foreground uppercase tracking-wide font-medium\">\n            Recent:\n          </span>\n          {recentSearches.map((address) => (\n            <Badge\n              key={address}\n              variant=\"secondary\"\n              className=\"gap-1 font-mono text-xs\"\n              data-testid={`badge-recent-${address.slice(0, 8)}`}\n            >\n              {address.slice(0, 4)}...{address.slice(-4)}\n              <button\n                onClick={() => handleRemoveRecent(address)}\n                className=\"ml-1 hover:text-destructive\"\n                data-testid={`button-remove-recent-${address.slice(0, 8)}`}\n              >\n                <X className=\"h-3 w-3\" />\n              </button>\n            </Badge>\n          ))}\n        </div>\n      )}\n      \n      <div className=\"flex flex-wrap gap-2\">\n        <span className=\"text-xs text-muted-foreground uppercase tracking-wide font-medium\">\n          Try example:\n        </span>\n        {EXAMPLE_TOKENS.map((token) => (\n          <Button\n            key={token.address}\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => {\n              setTokenAddress(token.address);\n              setError(\"\");\n            }}\n            disabled={isAnalyzing}\n            data-testid={`button-example-${token.label.toLowerCase()}`}\n            className=\"h-7 text-xs\"\n          >\n            {token.label}\n          </Button>\n        ))}\n      </div>\n    </div>\n  );\n}\n","size_bytes":4372},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/market-data-card.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { TrendingUp, TrendingDown, Activity, Droplets, DollarSign, BarChart3 } from \"lucide-react\";\nimport type { DexScreenerData, DexScreenerPair } from \"@shared/schema\";\n\ninterface MarketDataCardProps {\n  data: DexScreenerData;\n  tokenAddress: string;\n}\n\nexport function MarketDataCard({ data, tokenAddress }: MarketDataCardProps) {\n  if (!data.pairs || data.pairs.length === 0) {\n    return null;\n  }\n\n  const getMostLiquidPair = (): DexScreenerPair => {\n    return data.pairs.reduce((prev, current) => {\n      const prevLiq = prev.liquidity?.usd || 0;\n      const currentLiq = current.liquidity?.usd || 0;\n      return currentLiq > prevLiq ? current : prev;\n    });\n  };\n\n  const mainPair = getMostLiquidPair();\n  const priceUsd = parseFloat(mainPair.priceUsd || '0');\n  const priceChange24h = mainPair.priceChange.h24;\n  const volume24h = mainPair.volume.h24;\n  const liquidity = mainPair.liquidity?.usd || 0;\n  const marketCap = mainPair.marketCap || 0;\n  const fdv = mainPair.fdv || 0;\n\n  const formatCurrency = (value: number): string => {\n    if (value >= 1_000_000) {\n      return `$${(value / 1_000_000).toFixed(2)}M`;\n    } else if (value >= 1_000) {\n      return `$${(value / 1_000).toFixed(2)}K`;\n    } else if (value >= 1) {\n      return `$${value.toFixed(2)}`;\n    } else if (value > 0) {\n      return `$${value.toFixed(8)}`;\n    }\n    return '$0.00';\n  };\n\n  const formatPrice = (value: number): string => {\n    if (value >= 1) {\n      return `$${value.toFixed(4)}`;\n    } else if (value > 0) {\n      const decimals = Math.max(2, -Math.floor(Math.log10(value)) + 2);\n      return `$${value.toFixed(Math.min(decimals, 10))}`;\n    }\n    return '$0.00';\n  };\n\n  const isPriceUp = priceChange24h > 0;\n\n  return (\n    <Card className=\"p-6\" data-testid=\"card-market-data\">\n      <div className=\"flex items-start justify-between mb-4\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Market Data</h3>\n          <p className=\"text-sm text-muted-foreground\">\n            Powered by DexScreener â€¢ {mainPair.dexId}\n          </p>\n        </div>\n        <Badge variant={isPriceUp ? \"default\" : \"secondary\"} className=\"gap-1\">\n          {isPriceUp ? (\n            <TrendingUp className=\"h-4 w-4 text-green-600\" />\n          ) : (\n            <TrendingDown className=\"h-4 w-4 text-red-600\" />\n          )}\n          {priceChange24h > 0 ? '+' : ''}{priceChange24h.toFixed(2)}%\n        </Badge>\n      </div>\n\n      <div className=\"space-y-4\">\n        <div className=\"p-4 bg-muted/50 rounded-md\">\n          <p className=\"text-sm text-muted-foreground mb-1\">Current Price</p>\n          <p className=\"text-2xl font-bold font-mono\" data-testid=\"market-price\">\n            {formatPrice(priceUsd)}\n          </p>\n          <p className=\"text-xs text-muted-foreground mt-1\">\n            {mainPair.baseToken.symbol} / {mainPair.quoteToken.symbol}\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <BarChart3 className=\"h-4 w-4\" />\n              <span>24h Volume</span>\n            </div>\n            <div className=\"font-mono font-semibold\" data-testid=\"market-volume\">\n              {formatCurrency(volume24h)}\n            </div>\n          </div>\n\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <Droplets className=\"h-4 w-4\" />\n              <span>Liquidity</span>\n            </div>\n            <div className=\"font-mono font-semibold\" data-testid=\"market-liquidity\">\n              {formatCurrency(liquidity)}\n            </div>\n          </div>\n\n          {marketCap > 0 && (\n            <div className=\"space-y-1\">\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                <DollarSign className=\"h-4 w-4\" />\n                <span>Market Cap</span>\n              </div>\n              <div className=\"font-mono font-semibold\" data-testid=\"market-cap\">\n                {formatCurrency(marketCap)}\n              </div>\n            </div>\n          )}\n\n          {fdv > 0 && (\n            <div className=\"space-y-1\">\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                <DollarSign className=\"h-4 w-4\" />\n                <span>FDV</span>\n              </div>\n              <div className=\"font-mono font-semibold\" data-testid=\"market-fdv\">\n                {formatCurrency(fdv)}\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"pt-4 border-t\">\n          <p className=\"text-sm font-semibold text-muted-foreground mb-2\">24h Trading Activity</p>\n          <div className=\"grid grid-cols-2 gap-3\">\n            <div className=\"flex items-center justify-between p-2 bg-green-500/10 rounded-md\">\n              <span className=\"text-sm text-muted-foreground\">Buys</span>\n              <span className=\"font-mono font-semibold text-green-600\" data-testid=\"market-buys\">\n                {mainPair.txns.h24.buys}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between p-2 bg-red-500/10 rounded-md\">\n              <span className=\"text-sm text-muted-foreground\">Sells</span>\n              <span className=\"font-mono font-semibold text-red-600\" data-testid=\"market-sells\">\n                {mainPair.txns.h24.sells}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {data.pairs.length > 1 && (\n          <div className=\"pt-4 border-t\">\n            <p className=\"text-sm text-muted-foreground mb-2\">\n              Trading on {data.pairs.length} pair{data.pairs.length > 1 ? 's' : ''} across{' '}\n              {new Set(data.pairs.map(p => p.dexId)).size} DEX{new Set(data.pairs.map(p => p.dexId)).size > 1 ? 'es' : ''}\n            </p>\n            <div className=\"flex gap-2 flex-wrap\">\n              {Array.from(new Set(data.pairs.map(p => p.dexId))).map(dexId => (\n                <Badge key={dexId} variant=\"secondary\" className=\"text-xs\">\n                  {dexId}\n                </Badge>\n              ))}\n            </div>\n          </div>\n        )}\n\n        <div className=\"pt-2 border-t\">\n          <a\n            href={`https://dexscreener.com/solana/${mainPair.pairAddress}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-sm text-primary hover:underline inline-flex items-center gap-1\"\n            data-testid=\"link-dexscreener\"\n          >\n            View on DexScreener\n            <svg className=\"h-3 w-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n            </svg>\n          </a>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":7028},"shared/schema.ts":{"content":"import { z } from \"zod\";\nimport { sql } from \"drizzle-orm\";\nimport {\n  index,\n  jsonb,\n  pgTable,\n  timestamp,\n  varchar,\n  boolean,\n  integer,\n  bigint,\n  uniqueIndex,\n  serial,\n  decimal,\n  text,\n} from \"drizzle-orm/pg-core\";\n\n// Token Analysis Request\nexport const analyzeTokenSchema = z.object({\n  tokenAddress: z.string().min(32).max(44),\n});\n\nexport type AnalyzeTokenRequest = z.infer<typeof analyzeTokenSchema>;\n\n// Risk Levels\nexport type RiskLevel = \"LOW\" | \"MODERATE\" | \"HIGH\" | \"EXTREME\";\n\n// Authority Status\nexport interface AuthorityStatus {\n  hasAuthority: boolean;\n  authorityAddress: string | null;\n  isRevoked: boolean;\n}\n\n// Holder Information\nexport interface HolderInfo {\n  rank: number;\n  address: string;\n  balance: number;\n  percentage: number;\n}\n\n// Transaction Info\nexport interface TransactionInfo {\n  signature: string;\n  type: \"swap\" | \"transfer\" | \"mint\" | \"burn\";\n  timestamp: number;\n  from?: string;\n  to?: string;\n  amount?: number;\n  suspicious?: boolean;\n}\n\n// Liquidity Pool Status\nexport interface LiquidityPoolStatus {\n  exists: boolean;\n  isLocked?: boolean; // Only set when burn data is available\n  isBurned?: boolean; // Only set when burn data is available\n  totalLiquidity?: number;\n  status: \"SAFE\" | \"RISKY\" | \"UNKNOWN\";\n  burnPercentage?: number; // Undefined = unknown, not 0%\n  lpMintAddress?: string;\n  lpReserve?: number;\n  actualSupply?: number;\n  lpAddresses?: string[];\n}\n\n// Token Metadata\nexport interface TokenMetadata {\n  name: string;\n  symbol: string;\n  decimals: number;\n  supply: number;\n  logoUri?: string;\n  hasMetadata: boolean;\n  isMutable: boolean;\n}\n\n// Risk Flag\nexport interface RiskFlag {\n  type: \"mint_authority\" | \"freeze_authority\" | \"low_liquidity\" | \"holder_concentration\" | \"suspicious_transactions\" | \"mutable_metadata\" | \"recent_creation\";\n  severity: \"low\" | \"medium\" | \"high\" | \"critical\";\n  title: string;\n  description: string;\n}\n\n// Rugcheck Data\nexport interface RugcheckData {\n  score: number;\n  risks: string[];\n  markets: Array<{\n    name: string;\n    liquidity: number;\n    lpBurn: number;\n  }>;\n  topHolders: Array<{\n    address: string;\n    pct: number;\n  }>;\n  fileMeta?: {\n    error?: string;\n  };\n}\n\n// GoPlus Security Data\nexport interface GoPlusSecurityData {\n  is_mintable: string;\n  is_freezable: string;\n  is_scam: string;\n  buy_tax: string;\n  sell_tax: string;\n  transfer_fee_enable: string;\n  can_take_back_ownership: string;\n  is_open_source: string;\n  is_true_token: string;\n  holder_count: string;\n  total_supply: string;\n  liquidity: string;\n  securityRisks: string[];\n}\n\n// DexScreener Market Data\nexport interface DexScreenerPair {\n  chainId: string;\n  dexId: string;\n  pairAddress: string;\n  baseToken: {\n    address: string;\n    name: string;\n    symbol: string;\n  };\n  quoteToken: {\n    address: string;\n    name: string;\n    symbol: string;\n  };\n  priceUsd: string;\n  priceNative: string;\n  txns: {\n    m5: { buys: number; sells: number };\n    h1: { buys: number; sells: number };\n    h6: { buys: number; sells: number };\n    h24: { buys: number; sells: number };\n  };\n  volume: {\n    h24: number;\n    h6: number;\n    h1: number;\n    m5: number;\n  };\n  priceChange: {\n    m5: number;\n    h1: number;\n    h6: number;\n    h24: number;\n  };\n  liquidity?: {\n    usd: number;\n    base: number;\n    quote: number;\n  };\n  fdv?: number;\n  marketCap?: number;\n  pairCreatedAt?: number;\n}\n\nexport interface DexScreenerData {\n  pairs: DexScreenerPair[];\n  schemaVersion: string;\n}\n\n// Jupiter Price Data\nexport interface JupiterPriceData {\n  id: string;\n  type: string;\n  price: string;\n  extraInfo?: {\n    lastSwappedPrice?: {\n      lastJupiterSellAt: number;\n      lastJupiterSellPrice: string;\n      lastJupiterBuyAt: number;\n      lastJupiterBuyPrice: string;\n    };\n    quotedPrice?: {\n      buyPrice: string;\n      buyAt: number;\n      sellPrice: string;\n      sellAt: number;\n    };\n    confidenceLevel?: string;\n  };\n}\n\n// Holder Filtering Metadata\nexport interface FilteredAddress {\n  address: string;\n  type: 'lp' | 'exchange' | 'protocol' | 'bundled';\n  label?: string;\n  reason: string;\n}\n\nexport interface HolderFilteringMetadata {\n  totals: {\n    lp: number;\n    exchanges: number;\n    protocols: number;\n    bundled: number;\n    total: number;\n  };\n  excluded: FilteredAddress[];\n  bundledDetection?: {\n    strategy: 'percentageMatch' | 'sameBlock' | 'fundingSource';\n    confidence: 'low' | 'medium' | 'high';\n    details?: string;\n    bundleSupplyPct?: number; // % of total supply controlled by bundled wallets\n    bundledSupplyAmount?: number; // Actual token amount held by bundled wallets\n  };\n}\n\n// Complete Token Analysis Response\nexport interface MarketData {\n  priceUsd: number | null;\n  priceNative: number | null;\n  marketCap: number | null;\n  fdv: number | null;\n  volume24h: number | null;\n  priceChange24h: number | null;\n  txns24h: { buys: number; sells: number } | null;\n  liquidityUsd: number | null;\n  source: 'dexscreener' | 'rugcheck' | null;\n  pairAddress?: string | null;\n  dexId?: string | null;\n  updatedAt?: number | null;\n}\n\n// Birdeye Data\nexport interface BirdeyeData {\n  price: number;\n  mc: number;\n  liquidity: number;\n  v24hUSD: number;\n  priceChange24hPercent: number;\n  lpBurned: boolean;\n  twitter?: string;\n  telegram?: string;\n  website?: string;\n}\n\n// Pump.fun Data\nexport interface PumpFunData {\n  isPumpFun: boolean;\n  devBought: number;\n  bondingCurve: number;\n}\n\n// AI Verdict\nexport interface AIVerdict {\n  rating: string;\n  verdict: string;\n}\n\nexport interface TokenAnalysisResponse {\n  tokenAddress: string;\n  riskScore: number;\n  riskLevel: RiskLevel;\n  analyzedAt: number;\n  \n  // Authority checks\n  mintAuthority: AuthorityStatus;\n  freezeAuthority: AuthorityStatus;\n  \n  // Token info\n  metadata: TokenMetadata;\n  \n  // Holder analysis\n  holderCount: number;\n  topHolders: HolderInfo[];\n  topHolderConcentration: number;\n  holderFiltering: HolderFilteringMetadata;\n  \n  // Liquidity\n  liquidityPool: LiquidityPoolStatus;\n  \n  // Market data (normalized from DexScreener/Rugcheck)\n  marketData?: MarketData;\n  \n  // Transactions\n  recentTransactions: TransactionInfo[];\n  suspiciousActivityDetected: boolean;\n  \n  // Risk assessment\n  redFlags: RiskFlag[];\n  \n  // Creation info\n  creationDate?: number;\n  \n  // AI-powered analysis\n  aiVerdict?: AIVerdict;\n  pumpFunData?: PumpFunData;\n  birdeyeData?: BirdeyeData;\n  \n  // External API data (raw for debugging)\n  rugcheckData?: RugcheckData;\n  goplusData?: GoPlusSecurityData;\n  dexscreenerData?: DexScreenerData;\n  jupiterPriceData?: JupiterPriceData;\n}\n\n// Storage schema (not used for in-memory but kept for consistency)\nexport const tokenAnalysisSchema = z.object({\n  tokenAddress: z.string(),\n  riskScore: z.number(),\n  riskLevel: z.enum([\"LOW\", \"MODERATE\", \"HIGH\", \"EXTREME\"]),\n  analyzedAt: z.number(),\n});\n\nexport type TokenAnalysis = z.infer<typeof tokenAnalysisSchema>;\n\n// ============================================================================\n// DATABASE TABLES (Replit Auth + Subscription System)\n// ============================================================================\n\n// Session storage table (required by Replit Auth)\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// User storage table (required by Replit Auth)\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\").unique(),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  whopUserId: varchar(\"whop_user_id\").unique(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport type UpsertUser = typeof users.$inferInsert;\nexport type User = typeof users.$inferSelect;\n\n// Subscriptions table\n// Maps to Whop memberships: status values align with Whop lifecycle (valid, past_due, cancelled, expired)\n// currentPeriodEnd maps to Whop's valid_until timestamp\nexport const subscriptions = pgTable(\"subscriptions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  tier: varchar(\"tier\").notNull(), // \"free_trial\", \"individual\", \"group\"\n  status: varchar(\"status\").notNull(), // Whop states: \"valid\", \"past_due\", \"cancelled\", \"expired\", \"trialing\"\n  whopMembershipId: varchar(\"whop_membership_id\").unique(), // Canonical Whop membership reference (nullable for free trials)\n  whopPlanId: varchar(\"whop_plan_id\"), // Whop plan ID (nullable for free trials)\n  trialEndsAt: timestamp(\"trial_ends_at\"), // For free trial tracking\n  currentPeriodEnd: timestamp(\"current_period_end\").notNull(), // Maps to Whop's valid_until\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_subscriptions_user_id\").on(table.userId),\n  index(\"idx_subscriptions_status\").on(table.status),\n  index(\"idx_subscriptions_whop_membership\").on(table.whopMembershipId),\n]);\n\nexport type Subscription = typeof subscriptions.$inferSelect;\nexport type InsertSubscription = typeof subscriptions.$inferInsert;\n\n// Subscription codes table (for lifetime access codes)\nexport const subscriptionCodes = pgTable(\"subscription_codes\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  code: varchar(\"code\").notNull().unique(),\n  tier: varchar(\"tier\").notNull(), // \"lifetime\", \"individual\", \"group\"\n  maxUses: integer(\"max_uses\").default(1), // null for unlimited\n  usedCount: integer(\"used_count\").notNull().default(0),\n  isActive: boolean(\"is_active\").notNull().default(true),\n  expiresAt: timestamp(\"expires_at\"), // null for no expiration\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_code\").on(table.code),\n  index(\"idx_code_active\").on(table.isActive),\n]);\n\nexport type SubscriptionCode = typeof subscriptionCodes.$inferSelect;\nexport type InsertSubscriptionCode = typeof subscriptionCodes.$inferInsert;\n\n// Code redemptions table (tracks who redeemed which codes)\nexport const codeRedemptions = pgTable(\"code_redemptions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  codeId: varchar(\"code_id\").notNull().references(() => subscriptionCodes.id),\n  code: varchar(\"code\").notNull(), // Denormalized for easier lookups\n  redeemedAt: timestamp(\"redeemed_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_redemption_user\").on(table.userId),\n  index(\"idx_redemption_code\").on(table.codeId),\n]);\n\nexport type CodeRedemption = typeof codeRedemptions.$inferSelect;\nexport type InsertCodeRedemption = typeof codeRedemptions.$inferInsert;\n\n// Wallet connections table (for token-gated access)\nexport const walletConnections = pgTable(\"wallet_connections\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  walletAddress: varchar(\"wallet_address\").notNull().unique(),\n  tokenBalance: bigint(\"token_balance\", { mode: \"number\" }).notNull().default(0),\n  lastVerifiedAt: timestamp(\"last_verified_at\").defaultNow(),\n  isEligible: boolean(\"is_eligible\").notNull().default(false), // true if balance >= 10M tokens\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_wallet_user_id\").on(table.userId),\n  index(\"idx_wallet_eligible\").on(table.isEligible),\n]);\n\nexport type WalletConnection = typeof walletConnections.$inferSelect;\nexport type InsertWalletConnection = typeof walletConnections.$inferInsert;\n\n// Wallet verification challenges table (prevents signature replay attacks)\nexport const walletChallenges = pgTable(\"wallet_challenges\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  challenge: varchar(\"challenge\").notNull().unique(), // Random nonce\n  expiresAt: timestamp(\"expires_at\").notNull(), // Expires after 5 minutes\n  usedAt: timestamp(\"used_at\"), // null if unused, timestamp if consumed\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_challenge_user\").on(table.userId),\n  index(\"idx_challenge_expires\").on(table.expiresAt),\n]);\n\nexport type WalletChallenge = typeof walletChallenges.$inferSelect;\nexport type InsertWalletChallenge = typeof walletChallenges.$inferInsert;\n\n// ============================================================================\n// INFLUENTIAL WALLET TRACKING\n// ============================================================================\n\n// Smart money wallet tracking for coordinated activity detection and influence analysis\nexport const kolWallets = pgTable(\"kol_wallets\", {\n  id: serial(\"id\").primaryKey(),\n  walletAddress: varchar(\"wallet_address\", { length: 255 }).notNull().unique(),\n  displayName: varchar(\"display_name\", { length: 255 }),\n  twitterHandle: varchar(\"twitter_handle\", { length: 255 }),\n  telegramHandle: varchar(\"telegram_handle\", { length: 255 }),\n  rank: integer(\"rank\"),\n  profitSol: decimal(\"profit_sol\", { precision: 20, scale: 9 }),\n  wins: integer(\"wins\").default(0),\n  losses: integer(\"losses\").default(0),\n  influenceScore: integer(\"influence_score\").default(50), // 0-100, higher = more influential\n  isVerified: boolean(\"is_verified\").default(false),\n  source: varchar(\"source\", { length: 50 }).default(\"kolscan\"), // kolscan, manual, etc\n  notes: text(\"notes\"),\n  lastActiveAt: timestamp(\"last_active_at\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n}, (table) => [\n  index(\"idx_kol_wallet_address\").on(table.walletAddress),\n  index(\"idx_kol_rank\").on(table.rank),\n  index(\"idx_kol_influence\").on(table.influenceScore),\n]);\n\nexport type KolWallet = typeof kolWallets.$inferSelect;\nexport type InsertKolWallet = typeof kolWallets.$inferInsert;\n\n// ============================================================================\n// CRYPTO PAYMENTS TABLES\n// ============================================================================\n\n// Crypto payment addresses table\nexport const cryptoAddresses = pgTable(\"crypto_addresses\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  chain: varchar(\"chain\").notNull(), // \"SOL\", \"ETH\", \"BTC\"\n  address: varchar(\"address\").notNull().unique(), // UNIQUE: Each blockchain address can only be used once\n  tier: varchar(\"tier\").notNull(), // \"basic\", \"premium\"\n  expiresAt: timestamp(\"expires_at\").notNull(), // Payment address expires after 1 hour\n  isPaid: boolean(\"is_paid\").notNull().default(false),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_crypto_addresses_user\").on(table.userId),\n  index(\"idx_crypto_addresses_chain\").on(table.chain),\n]);\n\nexport type CryptoAddress = typeof cryptoAddresses.$inferSelect;\nexport type InsertCryptoAddress = typeof cryptoAddresses.$inferInsert;\n\n// Payments table - tracks all crypto payments\nexport const payments = pgTable(\"payments\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  cryptoAddressId: varchar(\"crypto_address_id\").notNull().unique().references(() => cryptoAddresses.id), // UNIQUE: One payment per address\n  chain: varchar(\"chain\").notNull(), // \"SOL\", \"ETH\", \"BTC\"\n  tier: varchar(\"tier\").notNull(), // \"basic\", \"premium\"\n  amountExpected: varchar(\"amount_expected\").notNull(), // Expected amount in crypto (as string for precision)\n  amountReceived: varchar(\"amount_received\"), // Actual amount received\n  txHash: varchar(\"tx_hash\").unique(), // UNIQUE: Prevent duplicate blockchain transaction processing\n  fromAddress: varchar(\"from_address\"), // Sender address\n  status: varchar(\"status\").notNull().default(\"pending\"), // \"pending\", \"confirmed\", \"failed\", \"expired\"\n  confirmations: integer(\"confirmations\").notNull().default(0),\n  confirmedAt: timestamp(\"confirmed_at\"),\n  subscriptionActivatedAt: timestamp(\"subscription_activated_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_payments_user\").on(table.userId),\n  index(\"idx_payments_status\").on(table.status),\n]);\n\nexport type Payment = typeof payments.$inferSelect;\nexport type InsertPayment = typeof payments.$inferInsert;\n\n// Payment audit log - tracks all blockchain checks\nexport const paymentAudit = pgTable(\"payment_audit\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  paymentId: varchar(\"payment_id\").notNull().references(() => payments.id, { onDelete: \"cascade\" }),\n  checkType: varchar(\"check_type\").notNull(), // \"blockchain_scan\", \"confirmation_update\", \"status_change\"\n  details: jsonb(\"details\"), // Store check results\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_payment_audit_payment\").on(table.paymentId),\n]);\n\nexport type PaymentAudit = typeof paymentAudit.$inferSelect;\nexport type InsertPaymentAudit = typeof paymentAudit.$inferInsert;\n\n// ============================================================================\n// AI BLACKLIST TABLES\n// ============================================================================\n\n// Analysis runs - stores historical token analysis for ML training\nexport const analysisRuns = pgTable(\"analysis_runs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  tokenAddress: varchar(\"token_address\").notNull(),\n  userId: varchar(\"user_id\").references(() => users.id),\n  riskScore: integer(\"risk_score\").notNull(), // 0-100\n  riskLevel: varchar(\"risk_level\").notNull(), // \"LOW\", \"MODERATE\", \"HIGH\", \"EXTREME\"\n  analysisData: jsonb(\"analysis_data\").notNull(), // Full TokenAnalysisResponse\n  rugDetected: boolean(\"rug_detected\").default(false), // Manual flag for confirmed rugs\n  userReported: boolean(\"user_reported\").default(false), // User reported as rug\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_analysis_token\").on(table.tokenAddress),\n  index(\"idx_analysis_rug\").on(table.rugDetected),\n  index(\"idx_analysis_created\").on(table.createdAt),\n]);\n\nexport type AnalysisRun = typeof analysisRuns.$inferSelect;\nexport type InsertAnalysisRun = typeof analysisRuns.$inferInsert;\n\n// Bad actor labels - blacklist database\nexport const badActorLabels = pgTable(\"bad_actor_labels\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  walletAddress: varchar(\"wallet_address\").notNull().unique(),\n  labelType: varchar(\"label_type\").notNull(), // \"rugger_dev\", \"scammer\", \"honeypot_creator\", \"wash_trader\", \"serial_rugger\"\n  severity: integer(\"severity\").notNull(), // 0-100 (higher = more dangerous)\n  rugCount: integer(\"rug_count\").notNull().default(0), // Number of confirmed rugs\n  totalVictims: integer(\"total_victims\").default(0), // Estimated victims\n  totalLosses: varchar(\"total_losses\"), // Estimated SOL lost by victims\n  evidenceData: jsonb(\"evidence_data\"), // Store evidence/patterns\n  detectionMethod: varchar(\"detection_method\").notNull(), // \"rules_engine\", \"ml_model\", \"manual_report\", \"community_vote\"\n  confidence: integer(\"confidence\").notNull(), // 0-100 confidence score\n  isActive: boolean(\"is_active\").notNull().default(true), // Can be deactivated if false positive\n  reviewedBy: varchar(\"reviewed_by\"), // Admin user ID who reviewed\n  reviewedAt: timestamp(\"reviewed_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_bad_actors_wallet\").on(table.walletAddress),\n  index(\"idx_bad_actors_severity\").on(table.severity),\n  index(\"idx_bad_actors_active\").on(table.isActive),\n  index(\"idx_bad_actors_label_type\").on(table.labelType),\n]);\n\nexport type BadActorLabel = typeof badActorLabels.$inferSelect;\nexport type InsertBadActorLabel = typeof badActorLabels.$inferInsert;\n\n// Bot configuration table\nexport const botConfig = pgTable(\"bot_config\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  platform: varchar(\"platform\").notNull(), // \"telegram\", \"discord\"\n  platformUserId: varchar(\"platform_user_id\").notNull(), // Telegram chat ID or Discord user ID\n  platformUsername: varchar(\"platform_username\"),\n  isActive: boolean(\"is_active\").notNull().default(true),\n  alertsEnabled: boolean(\"alerts_enabled\").notNull().default(true),\n  minRiskLevel: varchar(\"min_risk_level\").default(\"MODERATE\"), // Only alert for HIGH and EXTREME by default\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_bot_config_user\").on(table.userId),\n  index(\"idx_bot_config_platform\").on(table.platform),\n  uniqueIndex(\"unique_bot_platform_user\").on(table.platform, table.platformUserId), // UNIQUE: Prevent duplicate bot registrations\n]);\n\nexport type BotConfig = typeof botConfig.$inferSelect;\nexport type InsertBotConfig = typeof botConfig.$inferInsert;\n\n// ============================================================================\n// USER FEATURES TABLES (Option B: Watchlist, Portfolio, Alerts)\n// ============================================================================\n\n// Watchlist entries - users save tokens to track\nexport const watchlistEntries = pgTable(\"watchlist_entries\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  tokenAddress: varchar(\"token_address\", { length: 44 }).notNull(),\n  label: varchar(\"label\", { length: 120 }), // Optional user label/note\n  metadata: jsonb(\"metadata\"), // Cached token name, symbol for quick display\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_watchlist_user\").on(table.userId),\n  uniqueIndex(\"unique_watchlist_user_token\").on(table.userId, table.tokenAddress),\n]);\n\nexport type WatchlistEntry = typeof watchlistEntries.$inferSelect;\nexport type InsertWatchlistEntry = typeof watchlistEntries.$inferInsert;\n\n// Portfolio positions - aggregated holdings per token\nexport const portfolioPositions = pgTable(\"portfolio_positions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  tokenAddress: varchar(\"token_address\", { length: 44 }).notNull(),\n  quantity: decimal(\"quantity\", { precision: 38, scale: 12 }).notNull(),\n  avgCostUsd: decimal(\"avg_cost_usd\", { precision: 24, scale: 8 }), // Average purchase price\n  realizedPnlUsd: decimal(\"realized_pnl_usd\", { precision: 24, scale: 8 }).default(\"0\"),\n  latestPriceUsd: decimal(\"latest_price_usd\", { precision: 24, scale: 8 }), // Cached from price worker\n  unrealizedPnlUsd: decimal(\"unrealized_pnl_usd\", { precision: 24, scale: 8 }), // Cached calculation\n  pnlPct: decimal(\"pnl_pct\", { precision: 10, scale: 4 }), // Percentage gain/loss\n  lastRebalancedAt: timestamp(\"last_rebalanced_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_portfolio_user\").on(table.userId),\n  uniqueIndex(\"unique_portfolio_user_token\").on(table.userId, table.tokenAddress),\n]);\n\nexport type PortfolioPosition = typeof portfolioPositions.$inferSelect;\nexport type InsertPortfolioPosition = typeof portfolioPositions.$inferInsert;\n\n// Portfolio transactions - detailed transaction history\nexport const portfolioTransactions = pgTable(\"portfolio_transactions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  positionId: varchar(\"position_id\").notNull().references(() => portfolioPositions.id, { onDelete: \"cascade\" }),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }), // Redundant for filtering\n  txType: varchar(\"tx_type\").notNull(), // \"buy\", \"sell\", \"airdrop\", \"manual_adjust\"\n  quantity: decimal(\"quantity\", { precision: 38, scale: 12 }).notNull(),\n  priceUsd: decimal(\"price_usd\", { precision: 24, scale: 8 }),\n  feeUsd: decimal(\"fee_usd\", { precision: 24, scale: 8 }).default(\"0\"),\n  note: text(\"note\"), // User notes\n  executedAt: timestamp(\"executed_at\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_transaction_user_date\").on(table.userId, table.executedAt),\n  index(\"idx_transaction_position_date\").on(table.positionId, table.executedAt),\n]);\n\nexport type PortfolioTransaction = typeof portfolioTransactions.$inferSelect;\nexport type InsertPortfolioTransaction = typeof portfolioTransactions.$inferInsert;\n\n// Price alerts - user-configured price notifications\nexport const priceAlerts = pgTable(\"price_alerts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  tokenAddress: varchar(\"token_address\", { length: 44 }).notNull(),\n  alertType: varchar(\"alert_type\").notNull(), // \"price_above\", \"price_below\", \"percent_change\", \"percent_drop\"\n  targetValue: decimal(\"target_value\", { precision: 24, scale: 8 }).notNull(), // Price threshold or percentage\n  lookbackWindowMinutes: integer(\"lookback_window_minutes\"), // For percent_change/percent_drop\n  isActive: boolean(\"is_active\").notNull().default(true),\n  lastPrice: decimal(\"last_price\", { precision: 24, scale: 8 }), // Last checked price\n  triggeredAt: timestamp(\"triggered_at\"), // When alert fired\n  cancelledAt: timestamp(\"cancelled_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_alerts_active_scan\").on(table.isActive, table.alertType, table.tokenAddress),\n  index(\"idx_alerts_user_status\").on(table.userId, table.isActive),\n  uniqueIndex(\"unique_alert_config\").on(table.userId, table.tokenAddress, table.alertType, table.targetValue),\n]);\n\nexport type PriceAlert = typeof priceAlerts.$inferSelect;\nexport type InsertPriceAlert = typeof priceAlerts.$inferInsert;\n\n// Zod schemas for validation\nexport const insertWatchlistSchema = z.object({\n  tokenAddress: z.string().min(32).max(44),\n  label: z.string().max(120).optional(),\n});\n\nexport const insertPortfolioPositionSchema = z.object({\n  tokenAddress: z.string().min(32).max(44),\n  quantity: z.string().or(z.number()),\n  avgCostUsd: z.string().or(z.number()).optional(),\n});\n\nexport const insertPortfolioTransactionSchema = z.object({\n  tokenAddress: z.string().min(32).max(44), // Will be used to find position\n  txType: z.enum([\"buy\", \"sell\", \"airdrop\", \"manual_adjust\"]),\n  quantity: z.string().or(z.number()),\n  priceUsd: z.string().or(z.number()).optional(),\n  feeUsd: z.string().or(z.number()).optional(),\n  note: z.string().optional(),\n  executedAt: z.string().or(z.date()).optional(), // ISO string or Date\n});\n\nexport const insertPriceAlertSchema = z.object({\n  tokenAddress: z.string().min(32).max(44),\n  alertType: z.enum([\"price_above\", \"price_below\", \"percent_change\", \"percent_drop\"]),\n  targetValue: z.string().or(z.number()),\n  lookbackWindowMinutes: z.number().int().positive().optional(),\n});\n\nexport type InsertWatchlistRequest = z.infer<typeof insertWatchlistSchema>;\nexport type InsertPortfolioPositionRequest = z.infer<typeof insertPortfolioPositionSchema>;\nexport type InsertPortfolioTransactionRequest = z.infer<typeof insertPortfolioTransactionSchema>;\nexport type InsertPriceAlertRequest = z.infer<typeof insertPriceAlertSchema>;\n\n// ============================================================================\n// ANALYTICS TABLES (Option C: Advanced Analytics Dashboard)\n// ============================================================================\n\n// Token snapshots - historical data points for trend analysis\nexport const tokenSnapshots = pgTable(\"token_snapshots\", {\n  id: serial(\"id\").primaryKey(),\n  tokenAddress: varchar(\"token_address\", { length: 44 }).notNull(),\n  capturedAt: timestamp(\"captured_at\").notNull().defaultNow(),\n  priceUsd: decimal(\"price_usd\", { precision: 20, scale: 8 }),\n  riskScore: integer(\"risk_score\").notNull(),\n  holderCount: integer(\"holder_count\"),\n  volume24h: decimal(\"volume_24h\", { precision: 20, scale: 2 }),\n  liquidityUsd: decimal(\"liquidity_usd\", { precision: 20, scale: 2 }),\n  riskFlags: jsonb(\"risk_flags\").$type<string[]>(), // Array of risk flag types\n  txCount24h: integer(\"tx_count_24h\"),\n  analyzerVersion: varchar(\"analyzer_version\", { length: 10 }).default(\"1.0\"),\n}, (table) => [\n  index(\"idx_snapshots_token\").on(table.tokenAddress),\n  index(\"idx_snapshots_captured\").on(table.capturedAt),\n  index(\"idx_snapshots_token_time\").on(table.tokenAddress, table.capturedAt),\n]);\n\nexport type TokenSnapshot = typeof tokenSnapshots.$inferSelect;\nexport type InsertTokenSnapshot = typeof tokenSnapshots.$inferInsert;\n\n// Trending tokens - calculated scores for hot/trending analysis\nexport const trendingTokens = pgTable(\"trending_tokens\", {\n  tokenAddress: varchar(\"token_address\", { length: 44 }).primaryKey(),\n  score: decimal(\"score\", { precision: 10, scale: 2 }).notNull(),\n  scoreBreakdown: jsonb(\"score_breakdown\").$type<{\n    volumeScore: number;\n    velocityScore: number;\n    analysisScore: number;\n  }>().notNull(),\n  rank: integer(\"rank\").notNull(),\n  volume24h: decimal(\"volume_24h\", { precision: 20, scale: 2 }),\n  velocity: decimal(\"velocity\", { precision: 10, scale: 2 }), // Rate of change\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n}, (table) => [\n  index(\"idx_trending_rank\").on(table.rank),\n  index(\"idx_trending_score\").on(table.score),\n  index(\"idx_trending_updated\").on(table.updatedAt),\n]);\n\nexport type TrendingToken = typeof trendingTokens.$inferSelect;\nexport type InsertTrendingToken = typeof trendingTokens.$inferInsert;\n\n// Risk statistics - aggregated risk data for dashboard insights\nexport const riskStatistics = pgTable(\"risk_statistics\", {\n  id: serial(\"id\").primaryKey(),\n  windowStart: timestamp(\"window_start\").notNull(),\n  windowEnd: timestamp(\"window_end\").notNull(),\n  totalAnalyzed: integer(\"total_analyzed\").notNull().default(0),\n  rugDetected: integer(\"rug_detected\").notNull().default(0),\n  falsePositives: integer(\"false_positives\").notNull().default(0),\n  commonFlags: jsonb(\"common_flags\").$type<Record<string, number>>().notNull(), // { \"mint_authority\": 42, ... }\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n}, (table) => [\n  index(\"idx_risk_stats_window\").on(table.windowStart, table.windowEnd),\n  index(\"idx_risk_stats_updated\").on(table.updatedAt),\n]);\n\nexport type RiskStatistic = typeof riskStatistics.$inferSelect;\nexport type InsertRiskStatistic = typeof riskStatistics.$inferInsert;\n\n// Zod schemas for analytics\nexport const insertTokenSnapshotSchema = z.object({\n  tokenAddress: z.string().min(32).max(44),\n  priceUsd: z.string().or(z.number()).optional(),\n  riskScore: z.number().int().min(0).max(100),\n  holderCount: z.number().int().optional(),\n  volume24h: z.string().or(z.number()).optional(),\n  liquidityUsd: z.string().or(z.number()).optional(),\n  riskFlags: z.array(z.string()).optional(),\n  txCount24h: z.number().int().optional(),\n  analyzerVersion: z.string().max(10).optional(),\n});\n\nexport const insertTrendingTokenSchema = z.object({\n  tokenAddress: z.string().min(32).max(44),\n  score: z.string().or(z.number()),\n  scoreBreakdown: z.object({\n    volumeScore: z.number(),\n    velocityScore: z.number(),\n    analysisScore: z.number(),\n  }),\n  rank: z.number().int(),\n  volume24h: z.string().or(z.number()).optional(),\n  velocity: z.string().or(z.number()).optional(),\n});\n\nexport const insertRiskStatisticSchema = z.object({\n  windowStart: z.string().or(z.date()),\n  windowEnd: z.string().or(z.date()),\n  totalAnalyzed: z.number().int(),\n  rugDetected: z.number().int(),\n  falsePositives: z.number().int(),\n  commonFlags: z.record(z.number()),\n});\n\nexport type InsertTokenSnapshotRequest = z.infer<typeof insertTokenSnapshotSchema>;\nexport type InsertTrendingTokenRequest = z.infer<typeof insertTrendingTokenSchema>;\nexport type InsertRiskStatisticRequest = z.infer<typeof insertRiskStatisticSchema>;\n\n// ============================================================================\n// SOCIAL FEATURES TABLES (Option D: Community Features)\n// ============================================================================\n\n// User profiles - extended user information for social features\nexport const userProfiles = pgTable(\"user_profiles\", {\n  userId: varchar(\"user_id\").primaryKey().references(() => users.id, { onDelete: \"cascade\" }),\n  username: varchar(\"username\", { length: 50 }).unique(),\n  bio: text(\"bio\"),\n  avatarUrl: text(\"avatar_url\"),\n  reputationScore: integer(\"reputation_score\").notNull().default(0),\n  contributionCount: integer(\"contribution_count\").notNull().default(0),\n  visibility: varchar(\"visibility\", { length: 20 }).notNull().default(\"public\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_user_profiles_reputation\").on(table.reputationScore),\n  index(\"idx_user_profiles_username\").on(table.username),\n]);\n\nexport type UserProfile = typeof userProfiles.$inferSelect;\nexport type InsertUserProfile = typeof userProfiles.$inferInsert;\n\n// Token comments - user comments and ratings on tokens\nexport const tokenComments = pgTable(\"token_comments\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  tokenAddress: varchar(\"token_address\", { length: 44 }).notNull(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  commentText: text(\"comment_text\").notNull(),\n  rating: integer(\"rating\"), // 1-5 stars, nullable\n  upvoteCount: integer(\"upvote_count\").notNull().default(0),\n  downvoteCount: integer(\"downvote_count\").notNull().default(0),\n  flagged: boolean(\"flagged\").notNull().default(false),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_token_comments_token\").on(table.tokenAddress),\n  index(\"idx_token_comments_user\").on(table.userId),\n  index(\"idx_token_comments_created\").on(table.createdAt),\n]);\n\nexport type TokenComment = typeof tokenComments.$inferSelect;\nexport type InsertTokenComment = typeof tokenComments.$inferInsert;\n\n// Comment votes - upvote/downvote tracking for comments\nexport const commentVotes = pgTable(\"comment_votes\", {\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  commentId: varchar(\"comment_id\").notNull().references(() => tokenComments.id, { onDelete: \"cascade\" }),\n  voteType: varchar(\"vote_type\", { length: 10 }).notNull(), // 'up' or 'down'\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => [\n  uniqueIndex(\"unique_comment_vote\").on(table.userId, table.commentId),\n  index(\"idx_comment_votes_comment\").on(table.commentId),\n]);\n\nexport type CommentVote = typeof commentVotes.$inferSelect;\nexport type InsertCommentVote = typeof commentVotes.$inferInsert;\n\n// Community votes - user votes on token safety (safe/risky/scam)\nexport const communityVotes = pgTable(\"community_votes\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  tokenAddress: varchar(\"token_address\", { length: 44 }).notNull(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  voteType: varchar(\"vote_type\", { length: 10 }).notNull(), // 'safe', 'risky', 'scam'\n  confidence: integer(\"confidence\").notNull(), // 1-5\n  reason: text(\"reason\"),\n  weight: decimal(\"weight\", { precision: 10, scale: 2 }).notNull().default(\"1.0\"), // Reputation-based weighting\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => [\n  uniqueIndex(\"unique_community_vote\").on(table.tokenAddress, table.userId),\n  index(\"idx_community_votes_token\").on(table.tokenAddress),\n  index(\"idx_community_votes_user\").on(table.userId),\n]);\n\nexport type CommunityVote = typeof communityVotes.$inferSelect;\nexport type InsertCommunityVote = typeof communityVotes.$inferInsert;\n\n// Community vote summaries - aggregated consensus for each token\nexport const communityVoteSummaries = pgTable(\"community_vote_summaries\", {\n  tokenAddress: varchar(\"token_address\", { length: 44 }).primaryKey(),\n  safeWeight: decimal(\"safe_weight\", { precision: 20, scale: 2 }).notNull().default(\"0\"),\n  riskyWeight: decimal(\"risky_weight\", { precision: 20, scale: 2 }).notNull().default(\"0\"),\n  scamWeight: decimal(\"scam_weight\", { precision: 20, scale: 2 }).notNull().default(\"0\"),\n  totalVotes: integer(\"total_votes\").notNull().default(0),\n  consensus: varchar(\"consensus\", { length: 10 }), // 'safe', 'risky', 'scam', 'mixed'\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_community_vote_summaries_consensus\").on(table.consensus),\n]);\n\nexport type CommunityVoteSummary = typeof communityVoteSummaries.$inferSelect;\nexport type InsertCommunityVoteSummary = typeof communityVoteSummaries.$inferInsert;\n\n// Shared watchlists - public watchlists that users can share and follow\nexport const sharedWatchlists = pgTable(\"shared_watchlists\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  ownerId: varchar(\"owner_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  name: varchar(\"name\", { length: 120 }).notNull(),\n  description: text(\"description\"),\n  isPublic: boolean(\"is_public\").notNull().default(false),\n  shareSlug: varchar(\"share_slug\", { length: 20 }).notNull().unique(),\n  followersCount: integer(\"followers_count\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_shared_watchlists_owner\").on(table.ownerId),\n  index(\"idx_shared_watchlists_public\").on(table.isPublic),\n  index(\"idx_shared_watchlists_slug\").on(table.shareSlug),\n]);\n\nexport type SharedWatchlist = typeof sharedWatchlists.$inferSelect;\nexport type InsertSharedWatchlist = typeof sharedWatchlists.$inferInsert;\n\n// Watchlist followers - tracks who follows which shared watchlists\nexport const watchlistFollowers = pgTable(\"watchlist_followers\", {\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  watchlistId: varchar(\"watchlist_id\").notNull().references(() => sharedWatchlists.id, { onDelete: \"cascade\" }),\n  followedAt: timestamp(\"followed_at\").defaultNow(),\n}, (table) => [\n  uniqueIndex(\"unique_watchlist_follower\").on(table.userId, table.watchlistId),\n  index(\"idx_watchlist_followers_user\").on(table.userId),\n  index(\"idx_watchlist_followers_watchlist\").on(table.watchlistId),\n]);\n\nexport type WatchlistFollower = typeof watchlistFollowers.$inferSelect;\nexport type InsertWatchlistFollower = typeof watchlistFollowers.$inferInsert;\n\n// Token reports - user-submitted rug pull reports\nexport const tokenReports = pgTable(\"token_reports\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  tokenAddress: varchar(\"token_address\", { length: 44 }).notNull(),\n  reporterId: varchar(\"reporter_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  reportType: varchar(\"report_type\", { length: 20 }).notNull(), // 'scam', 'honeypot', 'soft_rug', 'other'\n  evidence: text(\"evidence\").notNull(),\n  status: varchar(\"status\", { length: 20 }).notNull().default(\"pending\"), // 'pending', 'under_review', 'verified', 'dismissed'\n  reviewerId: varchar(\"reviewer_id\").references(() => users.id),\n  resolutionNotes: text(\"resolution_notes\"),\n  severityScore: integer(\"severity_score\"), // 1-5\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_token_reports_token\").on(table.tokenAddress),\n  index(\"idx_token_reports_reporter\").on(table.reporterId),\n  index(\"idx_token_reports_status\").on(table.status),\n]);\n\nexport type TokenReport = typeof tokenReports.$inferSelect;\nexport type InsertTokenReport = typeof tokenReports.$inferInsert;\n\n// User activities - tracks all user actions for reputation calculation\nexport const userActivities = pgTable(\"user_activities\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  activityType: varchar(\"activity_type\", { length: 20 }).notNull(), // 'comment', 'vote', 'report', 'helpful_vote', 'watchlist_share', 'follow'\n  targetToken: varchar(\"target_token\", { length: 44 }),\n  targetWatchlist: varchar(\"target_watchlist\"),\n  points: integer(\"points\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_user_activities_user\").on(table.userId),\n  index(\"idx_user_activities_created\").on(table.createdAt),\n  index(\"idx_user_activities_type\").on(table.activityType),\n]);\n\nexport type UserActivity = typeof userActivities.$inferSelect;\nexport type InsertUserActivity = typeof userActivities.$inferInsert;\n\n// Zod schemas for social features using createInsertSchema\nimport { createInsertSchema } from \"drizzle-zod\";\n\nexport const insertUserProfileSchema = createInsertSchema(userProfiles).omit({ \n  createdAt: true \n}).extend({\n  username: z.string().min(3).max(50).regex(/^[a-zA-Z0-9_-]+$/, \"Username can only contain letters, numbers, underscores, and hyphens\"),\n  bio: z.string().max(500).optional(),\n  visibility: z.enum([\"public\", \"private\"]).default(\"public\"),\n});\n\nexport const insertTokenCommentSchema = createInsertSchema(tokenComments).omit({\n  id: true,\n  createdAt: true,\n  upvoteCount: true,\n  downvoteCount: true,\n  flagged: true,\n}).extend({\n  tokenAddress: z.string().min(32).max(44),\n  commentText: z.string().min(1).max(2000),\n  rating: z.number().int().min(1).max(5).optional(),\n});\n\nexport const insertCommentVoteSchema = createInsertSchema(commentVotes).omit({\n  createdAt: true,\n}).extend({\n  voteType: z.enum([\"up\", \"down\"]),\n});\n\nexport const insertCommunityVoteSchema = createInsertSchema(communityVotes).omit({\n  id: true,\n  createdAt: true,\n  weight: true,\n}).extend({\n  tokenAddress: z.string().min(32).max(44),\n  voteType: z.enum([\"safe\", \"risky\", \"scam\"]),\n  confidence: z.number().int().min(1).max(5),\n  reason: z.string().max(1000).optional(),\n});\n\nexport const insertSharedWatchlistSchema = createInsertSchema(sharedWatchlists).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n  shareSlug: true,\n  followersCount: true,\n}).extend({\n  name: z.string().min(1).max(120),\n  description: z.string().max(500).optional(),\n});\n\nexport const insertTokenReportSchema = createInsertSchema(tokenReports).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n  status: true,\n  reviewerId: true,\n  resolutionNotes: true,\n}).extend({\n  tokenAddress: z.string().min(32).max(44),\n  reportType: z.enum([\"scam\", \"honeypot\", \"soft_rug\", \"other\"]),\n  evidence: z.string().min(10).max(5000),\n  severityScore: z.number().int().min(1).max(5).optional(),\n});\n\nexport const insertUserActivitySchema = createInsertSchema(userActivities).omit({\n  id: true,\n  createdAt: true,\n}).extend({\n  activityType: z.enum([\"comment\", \"vote\", \"report\", \"helpful_vote\", \"watchlist_share\", \"follow\"]),\n  points: z.number().int(),\n});\n\nexport type InsertUserProfileRequest = z.infer<typeof insertUserProfileSchema>;\nexport type InsertTokenCommentRequest = z.infer<typeof insertTokenCommentSchema>;\nexport type InsertCommentVoteRequest = z.infer<typeof insertCommentVoteSchema>;\nexport type InsertCommunityVoteRequest = z.infer<typeof insertCommunityVoteSchema>;\nexport type InsertSharedWatchlistRequest = z.infer<typeof insertSharedWatchlistSchema>;\nexport type InsertTokenReportRequest = z.infer<typeof insertTokenReportSchema>;\nexport type InsertUserActivityRequest = z.infer<typeof insertUserActivitySchema>;\n","size_bytes":44142},"server/ai-blacklist.ts":{"content":"import { db } from \"./db\";\nimport { badActorLabels, analysisRuns } from \"@shared/schema\";\nimport type { TokenAnalysisResponse } from \"@shared/schema\";\nimport { eq, and, desc, sql } from \"drizzle-orm\";\nimport { storage } from \"./storage\";\n\n// ============================================================================\n// PHASE 1: RULES-BASED BLACKLIST ENGINE\n// ============================================================================\n\nexport interface BlacklistCheckResult {\n  isBlacklisted: boolean;\n  severity: number; // 0-100\n  labels: Array<{\n    type: string;\n    severity: number;\n    rugCount: number;\n    confidence: number;\n  }>;\n  warnings: string[];\n}\n\n/**\n * Check if a wallet address is blacklisted\n */\nexport async function checkBlacklist(walletAddress: string): Promise<BlacklistCheckResult> {\n  try {\n    const labels = await db\n      .select()\n      .from(badActorLabels)\n      .where(\n        and(\n          eq(badActorLabels.walletAddress, walletAddress),\n          eq(badActorLabels.isActive, true)\n        )\n      );\n    \n    if (labels.length === 0) {\n      return {\n        isBlacklisted: false,\n        severity: 0,\n        labels: [],\n        warnings: [],\n      };\n    }\n    \n    const maxSeverity = Math.max(...labels.map(l => l.severity));\n    const warnings = labels.map(l => {\n      if (l.rugCount > 0) {\n        return `âš ï¸ ${l.labelType}: ${l.rugCount} confirmed rugs`;\n      }\n      return `âš ï¸ ${l.labelType}`;\n    });\n    \n    return {\n      isBlacklisted: true,\n      severity: maxSeverity,\n      labels: labels.map(l => ({\n        type: l.labelType,\n        severity: l.severity,\n        rugCount: l.rugCount,\n        confidence: l.confidence,\n      })),\n      warnings,\n    };\n  } catch (error) {\n    console.error(\"Error checking blacklist:\", error);\n    return {\n      isBlacklisted: false,\n      severity: 0,\n      labels: [],\n      warnings: [],\n    };\n  }\n}\n\n/**\n * Analyze token and automatically flag suspicious actors\n * Uses deterministic rules based on risk patterns\n */\nexport async function analyzeAndFlag(\n  analysis: TokenAnalysisResponse,\n  userId?: string\n): Promise<void> {\n  try {\n    // Store analysis run for ML training later\n    await db.insert(analysisRuns).values({\n      tokenAddress: analysis.tokenAddress,\n      userId,\n      riskScore: analysis.riskScore,\n      riskLevel: analysis.riskLevel,\n      analysisData: analysis as any,\n      rugDetected: false, // Will be updated manually if confirmed\n      userReported: false,\n    });\n    \n    // RULE 1: Honeypot Detection (GoPlus scam flag)\n    if (analysis.goplusData?.is_scam === '1') {\n      await flagWallet(\n        analysis.tokenAddress,\n        'honeypot_creator',\n        90,\n        'GoPlus API detected honeypot',\n        'rules_engine'\n      );\n    }\n    \n    // RULE 2: High sell tax (>10%)\n    if (analysis.goplusData?.sell_tax) {\n      const sellTax = parseFloat(analysis.goplusData.sell_tax);\n      if (sellTax > 0.1) {\n        await flagWallet(\n          analysis.tokenAddress,\n          'scammer',\n          80,\n          `Excessive sell tax: ${(sellTax * 100).toFixed(1)}%`,\n          'rules_engine'\n        );\n      }\n    }\n    \n    // RULE 3: Active mint authority + high risk\n    if (\n      analysis.mintAuthority.hasAuthority &&\n      !analysis.mintAuthority.isRevoked &&\n      analysis.riskScore <= 30 &&\n      analysis.mintAuthority.authorityAddress\n    ) {\n      await flagWallet(\n        analysis.mintAuthority.authorityAddress,\n        'rugger_dev',\n        75,\n        'Active mint authority on high-risk token',\n        'rules_engine'\n      );\n    }\n    \n    // RULE 4: Active freeze authority + high risk\n    if (\n      analysis.freezeAuthority.hasAuthority &&\n      !analysis.freezeAuthority.isRevoked &&\n      analysis.riskScore <= 30 &&\n      analysis.freezeAuthority.authorityAddress\n    ) {\n      await flagWallet(\n        analysis.freezeAuthority.authorityAddress,\n        'rugger_dev',\n        75,\n        'Active freeze authority on high-risk token',\n        'rules_engine'\n      );\n    }\n    \n    // RULE 5: Extreme holder concentration (>80% in top 10)\n    if (analysis.topHolderConcentration > 80) {\n      // Flag top holder if they hold >50%\n      const topHolder = analysis.topHolders[0];\n      if (topHolder && topHolder.percentage > 50) {\n        await flagWallet(\n          topHolder.address,\n          'wash_trader',\n          70,\n          `Controls ${topHolder.percentage.toFixed(1)}% of supply`,\n          'rules_engine'\n        );\n      }\n    }\n    \n    // RULE 6: Low liquidity + high risk\n    if (\n      analysis.liquidityPool.status === 'RISKY' &&\n      analysis.riskScore <= 20 &&\n      analysis.dexscreenerData?.pairs?.[0]\n    ) {\n      const pair = analysis.dexscreenerData.pairs[0];\n      if (pair.liquidity && pair.liquidity.usd < 1000) {\n        await flagWallet(\n          analysis.tokenAddress,\n          'scammer',\n          85,\n          `Low liquidity ($${pair.liquidity.usd.toFixed(0)}) + high risk score`,\n          'rules_engine'\n        );\n      }\n    }\n    \n    // RULE 7: Coordinated Pump Detection\n    // Detect when multiple influential wallets are in top holders (potential coordinated pump)\n    if (analysis.topHolders && analysis.topHolders.length > 0) {\n      const holderAddresses = analysis.topHolders.map(h => h.address);\n      const kolHolders = await storage.getKolWalletsByAddresses(holderAddresses);\n      \n      if (kolHolders.length >= 3) {\n        // 3+ influential wallets in top 20 holders is HIGHLY suspicious for coordinated buying\n        const kolNames = kolHolders.map(k => k.displayName || k.walletAddress.substring(0, 8)).join(', ');\n        const totalKolPercentage = kolHolders.reduce((sum, kol) => {\n          const holder = analysis.topHolders.find(h => h.address === kol.walletAddress);\n          return sum + (holder?.percentage || 0);\n        }, 0);\n        \n        await flagWallet(\n          analysis.tokenAddress,\n          'cabal_token',\n          85,\n          `${kolHolders.length} influential wallets in top holders (${totalKolPercentage.toFixed(1)}% supply): ${kolNames}`,\n          'rules_engine'\n        );\n        \n        // Flag individual wallets as potential coordinated pump participants\n        for (const kol of kolHolders) {\n          await flagWallet(\n            kol.walletAddress,\n            'cabal_member',\n            65,\n            `Participated in coordinated early buying with ${kolHolders.length - 1} other wallets on ${analysis.metadata.symbol}`,\n            'rules_engine'\n          );\n        }\n      } else if (kolHolders.length === 2) {\n        // 2 influential wallets is moderately suspicious\n        const kolNames = kolHolders.map(k => k.displayName || k.walletAddress.substring(0, 8)).join(', ');\n        await flagWallet(\n          analysis.tokenAddress,\n          'possible_cabal',\n          60,\n          `2 influential wallets in top holders: ${kolNames}`,\n          'rules_engine'\n        );\n      }\n    }\n    \n    // RULE 8: Bundling Detection (Multiple buyers at same time/block)\n    // Analyze transaction timing for coordinated buying patterns\n    if (analysis.recentTransactions && analysis.recentTransactions.length > 5) {\n      const buyTransactions = analysis.recentTransactions\n        .filter(tx => tx.type === 'swap')\n        .slice(0, 20); // Check first 20 buys\n      \n      if (buyTransactions.length >= 5) {\n        // Group transactions by timestamp (within 5-second windows)\n        const timeGroups: { [key: number]: typeof buyTransactions } = {};\n        \n        for (const tx of buyTransactions) {\n          const timeKey = Math.floor(tx.timestamp / 5); // 5-second buckets\n          if (!timeGroups[timeKey]) {\n            timeGroups[timeKey] = [];\n          }\n          timeGroups[timeKey].push(tx);\n        }\n        \n        // Find groups with 3+ simultaneous buys (bundling pattern)\n        for (const [timeKey, txGroup] of Object.entries(timeGroups)) {\n          if (txGroup.length >= 3) {\n            const uniqueWallets = new Set(txGroup.map(tx => tx.from).filter(Boolean));\n            \n            if (uniqueWallets.size >= 3) {\n              // Multiple unique wallets buying simultaneously = bundling\n              await flagWallet(\n                analysis.tokenAddress,\n                'bundled_token',\n                75,\n                `Bundling detected: ${uniqueWallets.size} wallets bought within 5 seconds`,\n                'rules_engine'\n              );\n              \n              // Check if any bundled wallets are influential\n              const bundledAddresses = Array.from(uniqueWallets) as string[];\n              const bundledKols = await storage.getKolWalletsByAddresses(bundledAddresses);\n              \n              if (bundledKols.length >= 2) {\n                await flagWallet(\n                  analysis.tokenAddress,\n                  'kol_bundle',\n                  90,\n                  `Coordinated bundling detected: ${bundledKols.length} influential wallets bought simultaneously`,\n                  'rules_engine'\n                );\n              }\n              \n              break; // Only flag once for bundling\n            }\n          }\n        }\n      }\n    }\n    \n    // RULE 9: High-Influence Wallet Participation Warning\n    // Not necessarily malicious, but worth flagging for transparency\n    if (analysis.topHolders && analysis.topHolders.length > 0) {\n      const holderAddresses = analysis.topHolders.slice(0, 10).map(h => h.address);\n      const topKols = await storage.getKolWalletsByAddresses(holderAddresses);\n      \n      // Check for high-influence wallets (influence score > 70)\n      const highInfluenceKols = topKols.filter(k => (k.influenceScore || 0) > 70);\n      \n      if (highInfluenceKols.length > 0) {\n        const kolNames = highInfluenceKols.map(k => k.displayName || k.walletAddress.substring(0, 8)).join(', ');\n        await flagWallet(\n          analysis.tokenAddress,\n          'kol_promoted',\n          45, // Lower severity - not necessarily bad\n          `High-influence wallet participation: ${kolNames}`,\n          'rules_engine'\n        );\n      }\n    }\n    \n  } catch (error) {\n    console.error(\"Error in analyzeAndFlag:\", error);\n  }\n}\n\n/**\n * Flag a wallet as a bad actor\n */\nasync function flagWallet(\n  walletAddress: string,\n  labelType: string,\n  severity: number,\n  evidence: string,\n  detectionMethod: string\n): Promise<void> {\n  try {\n    // Check if wallet is already flagged with this label type\n    const [existing] = await db\n      .select()\n      .from(badActorLabels)\n      .where(\n        and(\n          eq(badActorLabels.walletAddress, walletAddress),\n          eq(badActorLabels.labelType, labelType)\n        )\n      )\n      .limit(1);\n    \n    if (existing) {\n      // Only update if new severity is higher or if we have new evidence\n      const existingEvidence = (existing.evidenceData as any) || {};\n      const timestamp = new Date().toISOString();\n      \n      // Check if this exact evidence already exists to prevent spam\n      const evidenceExists = Object.values(existingEvidence).includes(evidence);\n      \n      if (!evidenceExists && (severity > existing.severity || Object.keys(existingEvidence).length < 10)) {\n        // Only increment rugCount when:\n        // 1. This is NEW evidence (evidenceExists === false, already checked)\n        // 2. Severity is severe (> 80)\n        // 3. This is a new occurrence (not just a higher severity for same wallet)\n        const shouldIncrementRugCount = severity > 80 && severity > existing.severity;\n        \n        await db\n          .update(badActorLabels)\n          .set({\n            severity: Math.max(severity, existing.severity), // Take higher severity\n            rugCount: shouldIncrementRugCount ? existing.rugCount + 1 : existing.rugCount,\n            evidenceData: {\n              ...existingEvidence,\n              [timestamp]: evidence,\n            },\n            updatedAt: new Date(),\n          })\n          .where(eq(badActorLabels.id, existing.id));\n      }\n    } else {\n      // Create new label\n      await db.insert(badActorLabels).values({\n        walletAddress,\n        labelType,\n        severity,\n        rugCount: 0,\n        evidenceData: {\n          [new Date().toISOString()]: evidence,\n        },\n        detectionMethod,\n        confidence: 80,\n        isActive: true,\n      });\n    }\n  } catch (error) {\n    // Ignore unique constraint violations (wallet already flagged with this type)\n    if ((error as any).code !== '23505') {\n      console.error(\"Error flagging wallet:\", error);\n    }\n  }\n}\n\n/**\n * Report a wallet as suspicious (user-initiated)\n */\nexport async function reportWallet(\n  walletAddress: string,\n  reportType: string,\n  evidence: string,\n  reportedBy?: string\n): Promise<void> {\n  try {\n    await flagWallet(\n      walletAddress,\n      reportType,\n      60,\n      `User report: ${evidence}`,\n      'manual_report'\n    );\n  } catch (error) {\n    console.error(\"Error reporting wallet:\", error);\n    throw error;\n  }\n}\n\n/**\n * Get all blacklisted wallets\n */\nexport async function getBlacklist() {\n  try {\n    const wallets = await db\n      .select()\n      .from(badActorLabels)\n      .where(eq(badActorLabels.isActive, true));\n    \n    return wallets;\n  } catch (error) {\n    console.error(\"Error getting blacklist:\", error);\n    return [];\n  }\n}\n\n/**\n * Get blacklist statistics\n */\nexport async function getBlacklistStats() {\n  try {\n    const [stats] = await db\n      .select({\n        total: sql<number>`count(*)`,\n        active: sql<number>`count(*) filter (where ${badActorLabels.isActive} = true)`,\n        ruggers: sql<number>`count(*) filter (where ${badActorLabels.labelType} = 'rugger_dev')`,\n        scammers: sql<number>`count(*) filter (where ${badActorLabels.labelType} = 'scammer')`,\n        honeypots: sql<number>`count(*) filter (where ${badActorLabels.labelType} = 'honeypot_creator')`,\n        avgSeverity: sql<number>`avg(${badActorLabels.severity})`,\n      })\n      .from(badActorLabels);\n    \n    return stats;\n  } catch (error) {\n    console.error(\"Error getting blacklist stats:\", error);\n    return {\n      total: 0,\n      active: 0,\n      ruggers: 0,\n      scammers: 0,\n      honeypots: 0,\n      avgSeverity: 0,\n    };\n  }\n}\n\n/**\n * Get top flagged wallets\n */\nexport async function getTopFlaggedWallets(limit: number = 100) {\n  try {\n    const wallets = await db\n      .select()\n      .from(badActorLabels)\n      .where(eq(badActorLabels.isActive, true))\n      .orderBy(desc(badActorLabels.severity), desc(badActorLabels.rugCount))\n      .limit(limit);\n    \n    return wallets;\n  } catch (error) {\n    console.error(\"Error getting top flagged wallets:\", error);\n    return [];\n  }\n}\n\n/**\n * Mark a rug as confirmed (admin function)\n */\nexport async function confirmRug(\n  tokenAddress: string,\n  reviewedBy: string,\n  victimCount?: number,\n  totalLosses?: string\n): Promise<void> {\n  try {\n    // Update analysis run\n    await db\n      .update(analysisRuns)\n      .set({ rugDetected: true })\n      .where(eq(analysisRuns.tokenAddress, tokenAddress));\n    \n    // Update bad actor labels for all associated wallets\n    const analysis = await db\n      .select()\n      .from(analysisRuns)\n      .where(eq(analysisRuns.tokenAddress, tokenAddress))\n      .limit(1);\n    \n    if (analysis.length > 0) {\n      const analysisData = analysis[0].analysisData as any as TokenAnalysisResponse;\n      \n      // Flag mint authority as serial rugger\n      if (analysisData.mintAuthority.authorityAddress) {\n        const [label] = await db\n          .select()\n          .from(badActorLabels)\n          .where(eq(badActorLabels.walletAddress, analysisData.mintAuthority.authorityAddress))\n          .limit(1);\n        \n        if (label) {\n          await db\n            .update(badActorLabels)\n            .set({\n              labelType: 'serial_rugger',\n              severity: Math.min(100, label.severity + 10),\n              rugCount: label.rugCount + 1,\n              totalVictims: victimCount,\n              totalLosses,\n              reviewedBy,\n              reviewedAt: new Date(),\n            })\n            .where(eq(badActorLabels.id, label.id));\n        }\n      }\n    }\n    \n    console.log(`âœ… Confirmed rug for token ${tokenAddress}`);\n  } catch (error) {\n    console.error(\"Error confirming rug:\", error);\n    throw error;\n  }\n}\n","size_bytes":16379},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"Inter\", \"-apple-system\", \"BlinkMacSystemFont\", \"sans-serif\"],\n        serif: [\"Georgia\", \"serif\"],\n        mono: [\"JetBrains Mono\", \"Consolas\", \"monospace\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4114},"client/src/hooks/useAuth.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport type { User } from \"@shared/schema\";\n\n// Toggle this to switch between mock and real authentication\nconst USE_MOCK_AUTH = true;\n\nexport function useAuth() {\n  // Real authentication using Replit OIDC\n  const { data: user, isLoading } = useQuery<User | null>({\n    queryKey: [\"/api/auth/user\"],\n    queryFn: async () => {\n      if (USE_MOCK_AUTH) {\n        // Mock mode - return stub user\n        return { id: 'guest', email: 'guest@solanarug.killer' } as User;\n      }\n      \n      // Real mode - fetch from backend\n      try {\n        const response = await fetch(\"/api/auth/user\", {\n          credentials: \"include\",\n        });\n        \n        if (response.status === 401) {\n          return null;\n        }\n        \n        if (!response.ok) {\n          throw new Error(`Authentication check failed: ${response.status}`);\n        }\n        \n        return await response.json();\n      } catch (error) {\n        console.error(\"Auth check error:\", error);\n        throw error;\n      }\n    },\n    retry: false,\n    staleTime: USE_MOCK_AUTH ? Infinity : 30 * 1000,\n  });\n\n  return {\n    user: user || null,\n    isLoading: USE_MOCK_AUTH ? false : isLoading,\n    isAuthenticated: !!user,\n    isMockAuth: USE_MOCK_AUTH,\n    hasPremiumAccess: !USE_MOCK_AUTH && !!user,\n  };\n}\n","size_bytes":1330},"design_guidelines.md":{"content":"# Solana Rug Killer - Design Guidelines\n\n## Design Approach\n**System:** Dark cyberpunk dashboard inspired by Linear's clarity + Dexscreener's density + crypto terminal aesthetics. Professional security-focused interface with warm, high-tech visual treatment.\n\n**Core Principle:** Instant risk assessment through bold typography, glowing accents, and high-contrast data hierarchy in a sophisticated dark environment.\n\n---\n\n## Color Palette\n\n**Backgrounds:**\n- Primary: `#0A0A0A` (near-black base)\n- Card Surface: `#121212` with subtle warm gradient overlay\n- Elevated Surface: `#1A1A1A`\n- Input Fields: `#0F0F0F` with `#1F1F1F` focus state\n\n**Accents (Warm Cyberpunk):**\n- Primary Orange: `#FF6B2C` (CTAs, highlights)\n- Amber Warning: `#FFA500` (moderate alerts)\n- Deep Red: `#DC2626` (critical alerts, extreme risk)\n- Safe Green: `#10B981` (low risk indicators)\n- Cyan Info: `#06B6D4` (metadata, secondary info)\n\n**Text:**\n- Primary: `#FFFFFF` (headings, values)\n- Secondary: `#A0A0A0` (labels, descriptions)\n- Tertiary: `#666666` (timestamps, meta)\n- Monospace: `#FFB366` (addresses, numbers - warm tint)\n\n**Borders & Dividers:**\n- Subtle: `#1F1F1F`\n- Emphasized: `#2A2A2A`\n- Glow Borders: `#FF6B2C` with 50% opacity\n\n---\n\n## Typography System\n\n**Font Stack:**\n- Primary: 'Inter' - UI elements\n- Monospace: 'JetBrains Mono' - addresses, data\n\n**Hierarchy:**\n- Risk Score: text-7xl font-black (with warm glow effect)\n- Page Titles: text-4xl font-bold\n- Section Headers: text-2xl font-semibold text-white\n- Metric Values: text-2xl font-bold text-white\n- Metric Labels: text-xs font-medium uppercase tracking-widest text-gray-400\n- Addresses: text-sm font-mono text-amber-200\n- Body: text-sm text-gray-300\n\n---\n\n## Layout System\n\n**Spacing:** Tailwind units 2, 4, 6, 8, 12, 16\n\n**Structure:**\n- Container: max-w-7xl mx-auto px-6\n- Dashboard Grid: lg:grid-cols-3 gap-6\n  - Main (col-span-2): Risk display + metrics\n  - Sidebar (col-span-1): Quick stats + timeline\n- Card Padding: p-6\n- Section Spacing: space-y-8\n\n---\n\n## Component Library\n\n### 1. Navigation Header\nFixed top, backdrop blur, dark background with subtle bottom border glow (`border-b border-orange-500/20`). Logo left, \"New Analysis\" button (orange gradient background) right.\n\n### 2. Token Input Section\nFull-width search with glowing orange border on focus. Dark background, search icon left, analyze button integrated right. Warm shadow on active state. Recent searches as dismissible chips with orange/10 background.\n\n### 3. Risk Score Hero Card\nCentered oversized score (0-100) with animated circular progress ring in gradient (redâ†’amberâ†’green based on risk). Card has subtle warm radial gradient background. Risk level text in uppercase with corresponding color. Glow effect around high-risk scores. Quick summary below in muted text.\n\n### 4. Critical Alerts Stack\nEach alert: dark card with colored left border accent (4px), warning icon, bold title, explanation text. Spacing: space-y-3. Icons from Heroicons with color matching alert severity.\n\n### 5. Metrics Grid\n3-column responsive grid. Each card: dark background, subtle border, warm gradient on hover. Icon (colored), uppercase label, large value in white, secondary info in gray-400. Icons use accent colors (orange, amber, cyan).\n\n### 6. Top Holders Table\nDark background with zebra striping using white/5 opacity. Sticky header. Monospace addresses in amber-200. Copy icons on hover. Percentage bars inline with warm gradient fills.\n\n### 7. Holder Distribution Chart\nHorizontal bar chart with warm gradient bars (orangeâ†’amber). Dark background, grid lines in white/10. Y-axis shows truncated addresses in monospace. Legend with accent color.\n\n### 8. Transaction Timeline\nVertical timeline with orange accent line on left. Each entry: timestamp (gray-500), transaction type icon (colored), address snippet (monospace amber). Suspicious transactions highlighted with red border-l-4.\n\n### 9. Token Metadata Card\nCompact dark card. Circular token logo with orange border. Name/symbol in white, metadata in grid layout. Status badges with colored backgrounds (green/red/amber).\n\n### 10. Footer\nDark with subtle warm gradient. Links in gray-400 hover:text-orange-400. Disclaimer text in gray-600. Version number right-aligned.\n\n---\n\n## Visual Effects\n\n**Glows:** Apply to high-risk elements, active states, and score displays using `shadow-[0_0_20px_rgba(255,107,44,0.3)]`\n\n**Gradients:** Card backgrounds use subtle radial gradients from `#121212` to `#0F0F0F`. Buttons use orangeâ†’amber linear gradients.\n\n**Borders:** 1px solid with low opacity, glowing accent borders on focus/hover.\n\n---\n\n## Icon System\n**Library:** Heroicons\n**Colors:** Match component context (orange for actions, red for warnings, cyan for info, green for safe)\n\n---\n\n## Images\nNo hero image. Header flows directly into search functionality - this is a data utility dashboard prioritizing immediate access to analysis tools.\n\n---\n\n## Animations\nMinimal: Score counter on load, skeleton loaders (dark with warm shimmer), smooth chart rendering. No decorative animations.\n\n---\n\n## Accessibility\nHigh contrast ratios maintained despite dark theme (WCAG AA). Focus states use orange rings. ARIA labels on icons. Keyboard navigation throughout. Color not sole indicator (icons + text for alerts).","size_bytes":5299},"client/src/components/token-metadata-card.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Coins, Globe, FileText, AlertCircle, CheckCircle } from \"lucide-react\";\nimport type { TokenMetadata } from \"@shared/schema\";\n\ninterface TokenMetadataCardProps {\n  metadata?: TokenMetadata;\n  tokenAddress: string;\n}\n\nexport function TokenMetadataCard({ metadata, tokenAddress }: TokenMetadataCardProps) {\n  if (!metadata) {\n    return (\n      <Card className=\"p-6\" data-testid=\"card-token-metadata\">\n        <h2 className=\"text-xl font-semibold mb-4\">Token Metadata</h2>\n        <p className=\"text-sm text-muted-foreground\">Metadata unavailable</p>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"p-6\" data-testid=\"card-token-metadata\">\n      <h2 className=\"text-xl font-semibold mb-4\">Token Metadata</h2>\n      \n      <div className=\"space-y-4\">\n        <div className=\"flex items-start gap-4\">\n          <div className=\"w-16 h-16 rounded-full border-2 border-border bg-muted flex items-center justify-center flex-shrink-0\">\n            {metadata?.logoUri ? (\n              <img \n                src={metadata.logoUri} \n                alt={metadata.name || \"Token\"}\n                className=\"w-full h-full rounded-full object-cover\"\n              />\n            ) : (\n              <Coins className=\"h-8 w-8 text-muted-foreground\" />\n            )}\n          </div>\n          \n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"text-lg font-semibold\" data-testid=\"text-token-name\">\n              {metadata?.name || \"Unknown Token\"}\n            </h3>\n            <p className=\"text-sm text-muted-foreground font-mono\" data-testid=\"text-token-symbol\">\n              ${metadata?.symbol || \"???\"}\n            </p>\n            <div className=\"flex flex-wrap gap-2 mt-2\">\n              {metadata?.hasMetadata ? (\n                <Badge variant=\"secondary\" className=\"gap-1\">\n                  <CheckCircle className=\"h-3 w-3\" />\n                  Has Metadata\n                </Badge>\n              ) : (\n                <Badge variant=\"destructive\" className=\"gap-1\">\n                  <AlertCircle className=\"h-3 w-3\" />\n                  No Metadata\n                </Badge>\n              )}\n              \n              {metadata?.isMutable && (\n                <Badge variant=\"outline\" className=\"gap-1 text-yellow-600 border-yellow-600\">\n                  <AlertCircle className=\"h-3 w-3\" />\n                  Mutable\n                </Badge>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"space-y-2 pt-4 border-t\">\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-sm text-muted-foreground\">Token Address</span>\n            <span className=\"text-sm font-mono\" data-testid=\"text-token-address\">\n              {tokenAddress.slice(0, 6)}...{tokenAddress.slice(-6)}\n            </span>\n          </div>\n          \n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-sm text-muted-foreground\">Decimals</span>\n            <span className=\"text-sm font-semibold\" data-testid=\"text-token-decimals\">\n              {metadata?.decimals || 0}\n            </span>\n          </div>\n          \n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-sm text-muted-foreground\">Total Supply</span>\n            <span className=\"text-sm font-semibold\" data-testid=\"text-token-supply\">\n              {metadata?.supply && metadata?.decimals \n                ? (metadata.supply / Math.pow(10, metadata.decimals)).toLocaleString()\n                : \"Unknown\"}\n            </span>\n          </div>\n        </div>\n\n        <div className=\"flex gap-2 pt-4 border-t\">\n          <a\n            href={`https://solscan.io/token/${tokenAddress}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"flex items-center gap-1 text-sm text-primary hover:underline\"\n            data-testid=\"link-explorer\"\n          >\n            <Globe className=\"h-4 w-4\" />\n            View on Solscan\n          </a>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":4160},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* DARK WARM CYBERPUNK THEME */\n:root {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,107,44, .08);\n  --elevate-2: rgba(255,107,44, .15);\n  \n  /* Near-black backgrounds with warm undertones */\n  --background: 0 0% 4%;\n  --foreground: 0 0% 100%;\n  \n  /* Card surfaces - slightly lighter than background */\n  --card: 0 0% 7%;\n  --card-foreground: 0 0% 100%;\n  --card-border: 0 0% 12%;\n  \n  /* Borders - subtle warm gray */\n  --border: 0 0% 12%;\n  \n  /* Sidebar - slightly elevated */\n  --sidebar: 0 0% 6%;\n  --sidebar-foreground: 0 0% 100%;\n  --sidebar-border: 0 0% 12%;\n  --sidebar-primary: 16 100% 58%;\n  --sidebar-primary-foreground: 0 0% 10%;\n  --sidebar-accent: 0 0% 10%;\n  --sidebar-accent-foreground: 0 0% 100%;\n  --sidebar-ring: 16 100% 58%;\n  \n  /* Popovers */\n  --popover: 0 0% 7%;\n  --popover-foreground: 0 0% 100%;\n  --popover-border: 0 0% 12%;\n  \n  /* Primary - Warm orange */\n  --primary: 16 100% 58%;\n  --primary-foreground: 0 0% 10%;\n  \n  /* Secondary - Dark gray */\n  --secondary: 0 0% 10%;\n  --secondary-foreground: 0 0% 100%;\n  \n  /* Muted - Medium gray */\n  --muted: 0 0% 10%;\n  --muted-foreground: 0 0% 63%;\n  \n  /* Accent - Slightly elevated gray */\n  --accent: 0 0% 12%;\n  --accent-foreground: 0 0% 100%;\n  \n  /* Destructive - Critical red */\n  --destructive: 0 84% 51%;\n  --destructive-foreground: 0 0% 100%;\n  \n  /* Input fields */\n  --input: 0 0% 12%;\n  \n  /* Focus rings - warm orange */\n  --ring: 16 100% 58%;\n  \n  /* Chart colors - warm palette */\n  --chart-1: 16 100% 58%;\n  --chart-2: 39 100% 50%;\n  --chart-3: 0 84% 51%;\n  --chart-4: 160 84% 39%;\n  --chart-5: 188 95% 43%;\n  \n  /* Typography */\n  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n  --font-serif: 'Inter', sans-serif;\n  --font-mono: 'JetBrains Mono', 'Menlo', 'Monaco', monospace;\n  \n  /* Border radius */\n  --radius: 0.375rem;\n  \n  /* Shadows - subtle glows */\n  --shadow-2xs: 0px 0px 4px 0px rgba(255, 107, 44, 0.1);\n  --shadow-xs: 0px 0px 6px 0px rgba(255, 107, 44, 0.15);\n  --shadow-sm: 0px 0px 8px 0px rgba(255, 107, 44, 0.15);\n  --shadow: 0px 0px 12px 0px rgba(255, 107, 44, 0.2);\n  --shadow-md: 0px 0px 16px 0px rgba(255, 107, 44, 0.25);\n  --shadow-lg: 0px 0px 24px 0px rgba(255, 107, 44, 0.3);\n  --shadow-xl: 0px 0px 32px 0px rgba(255, 107, 44, 0.35);\n  --shadow-2xl: 0px 0px 48px 0px rgba(255, 107, 44, 0.4);\n  \n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,107,44, .08);\n  --elevate-2: rgba(255,107,44, .15);\n  \n  --background: 0 0% 4%;\n  --foreground: 0 0% 100%;\n  --card: 0 0% 7%;\n  --card-foreground: 0 0% 100%;\n  --card-border: 0 0% 12%;\n  --border: 0 0% 12%;\n  --sidebar: 0 0% 6%;\n  --sidebar-foreground: 0 0% 100%;\n  --sidebar-border: 0 0% 12%;\n  --sidebar-primary: 16 100% 58%;\n  --sidebar-primary-foreground: 0 0% 10%;\n  --sidebar-accent: 0 0% 10%;\n  --sidebar-accent-foreground: 0 0% 100%;\n  --sidebar-ring: 16 100% 58%;\n  --popover: 0 0% 7%;\n  --popover-foreground: 0 0% 100%;\n  --popover-border: 0 0% 12%;\n  --primary: 16 100% 58%;\n  --primary-foreground: 0 0% 10%;\n  --secondary: 0 0% 10%;\n  --secondary-foreground: 0 0% 100%;\n  --muted: 0 0% 10%;\n  --muted-foreground: 0 0% 63%;\n  --accent: 0 0% 12%;\n  --accent-foreground: 0 0% 100%;\n  --destructive: 0 84% 51%;\n  --destructive-foreground: 0 0% 100%;\n  --input: 0 0% 12%;\n  --ring: 16 100% 58%;\n  --chart-1: 16 100% 58%;\n  --chart-2: 39 100% 50%;\n  --chart-3: 0 84% 51%;\n  --chart-4: 160 84% 39%;\n  --chart-5: 188 95% 43%;\n  --shadow-2xs: 0px 0px 4px 0px rgba(255, 107, 44, 0.1);\n  --shadow-xs: 0px 0px 6px 0px rgba(255, 107, 44, 0.15);\n  --shadow-sm: 0px 0px 8px 0px rgba(255, 107, 44, 0.15);\n  --shadow: 0px 0px 12px 0px rgba(255, 107, 44, 0.2);\n  --shadow-md: 0px 0px 16px 0px rgba(255, 107, 44, 0.25);\n  --shadow-lg: 0px 0px 24px 0px rgba(255, 107, 44, 0.3);\n  --shadow-xl: 0px 0px 32px 0px rgba(255, 107, 44, 0.35);\n  --shadow-2xl: 0px 0px 48px 0px rgba(255, 107, 44, 0.4);\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n  \n  /* Apply dark mode by default */\n  html {\n    @apply dark;\n  }\n}\n\n/**\n * Using the elevate system with warm orange glow.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n  \n  /* Warm glow effect for high-risk elements */\n  .glow-orange {\n    box-shadow: 0 0 20px rgba(255, 107, 44, 0.3);\n  }\n  \n  .glow-red {\n    box-shadow: 0 0 20px rgba(220, 38, 38, 0.4);\n  }\n  \n  .glow-amber {\n    box-shadow: 0 0 20px rgba(255, 165, 0, 0.3);\n  }\n}\n","size_bytes":12271},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/goplus-card.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ShieldCheck, ShieldX, AlertTriangle, DollarSign, Lock, Code } from \"lucide-react\";\nimport type { GoPlusSecurityData } from \"@shared/schema\";\n\ninterface GoPlusCardProps {\n  data: GoPlusSecurityData;\n  tokenAddress: string;\n}\n\nexport function GoPlusCard({ data, tokenAddress }: GoPlusCardProps) {\n  const isHighRisk = data.is_scam === '1' || \n                     parseFloat(data.sell_tax) > 10 || \n                     data.securityRisks.length > 3;\n  \n  const isMediumRisk = data.securityRisks.length > 0 && !isHighRisk;\n\n  const getRiskBadge = () => {\n    if (isHighRisk) {\n      return {\n        variant: \"destructive\" as const,\n        icon: <ShieldX className=\"h-4 w-4\" />,\n        text: \"High Risk\",\n      };\n    } else if (isMediumRisk) {\n      return {\n        variant: \"secondary\" as const,\n        icon: <AlertTriangle className=\"h-4 w-4 text-yellow-600\" />,\n        text: \"Medium Risk\",\n      };\n    } else {\n      return {\n        variant: \"default\" as const,\n        icon: <ShieldCheck className=\"h-4 w-4 text-green-600\" />,\n        text: \"Low Risk\",\n      };\n    }\n  };\n\n  const badge = getRiskBadge();\n  const buyTax = parseFloat(data.buy_tax || '0');\n  const sellTax = parseFloat(data.sell_tax || '0');\n\n  return (\n    <Card className=\"p-6\" data-testid=\"card-goplus\">\n      <div className=\"flex items-start justify-between mb-4\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">GoPlus Security Scan</h3>\n          <p className=\"text-sm text-muted-foreground\">Honeypot & contract analysis</p>\n        </div>\n        <Badge variant={badge.variant} className=\"gap-1\">\n          {badge.icon}\n          {badge.text}\n        </Badge>\n      </div>\n\n      <div className=\"space-y-4\">\n        {data.is_scam === '1' && (\n          <div className=\"p-3 bg-red-500/10 border border-red-500/20 rounded-md\">\n            <div className=\"flex items-start gap-2\">\n              <ShieldX className=\"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0\" />\n              <div>\n                <p className=\"font-semibold text-red-600\">SCAM DETECTED</p>\n                <p className=\"text-sm text-muted-foreground\">This token has been flagged as malicious</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <Lock className=\"h-4 w-4\" />\n              <span>Mintable</span>\n            </div>\n            <div className=\"flex items-center gap-1 font-semibold\" data-testid=\"goplus-mintable\">\n              <span>{data.is_mintable === '1' ? 'Yes' : 'No'}</span>\n              {data.is_mintable === '1' ? (\n                <AlertTriangle className=\"h-4 w-4 text-orange-600\" />\n              ) : (\n                <ShieldCheck className=\"h-4 w-4 text-green-600\" />\n              )}\n            </div>\n          </div>\n\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <Lock className=\"h-4 w-4\" />\n              <span>Freezable</span>\n            </div>\n            <div className=\"flex items-center gap-1 font-semibold\" data-testid=\"goplus-freezable\">\n              <span>{data.is_freezable === '1' ? 'Yes' : 'No'}</span>\n              {data.is_freezable === '1' ? (\n                <AlertTriangle className=\"h-4 w-4 text-orange-600\" />\n              ) : (\n                <ShieldCheck className=\"h-4 w-4 text-green-600\" />\n              )}\n            </div>\n          </div>\n\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <DollarSign className=\"h-4 w-4\" />\n              <span>Buy Tax</span>\n            </div>\n            <div className=\"font-mono font-semibold\" data-testid=\"goplus-buy-tax\">\n              {buyTax.toFixed(2)}%\n            </div>\n          </div>\n\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <DollarSign className=\"h-4 w-4\" />\n              <span>Sell Tax</span>\n            </div>\n            <div className=\"flex items-center gap-1 font-mono font-semibold\" data-testid=\"goplus-sell-tax\">\n              <span>{sellTax.toFixed(2)}%</span>\n              {sellTax > 10 && <AlertTriangle className=\"h-4 w-4 text-orange-600\" />}\n            </div>\n          </div>\n\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <Code className=\"h-4 w-4\" />\n              <span>Open Source</span>\n            </div>\n            <div className=\"flex items-center gap-1 font-semibold\" data-testid=\"goplus-open-source\">\n              <span>{data.is_open_source === '1' ? 'Yes' : 'No'}</span>\n              {data.is_open_source === '1' ? (\n                <ShieldCheck className=\"h-4 w-4 text-green-600\" />\n              ) : (\n                <AlertTriangle className=\"h-4 w-4 text-orange-600\" />\n              )}\n            </div>\n          </div>\n\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <ShieldCheck className=\"h-4 w-4\" />\n              <span>Verified</span>\n            </div>\n            <div className=\"flex items-center gap-1 font-semibold\" data-testid=\"goplus-verified\">\n              <span>{data.is_true_token === '1' ? 'Yes' : 'No'}</span>\n              {data.is_true_token === '1' ? (\n                <ShieldCheck className=\"h-4 w-4 text-green-600\" />\n              ) : (\n                <AlertTriangle className=\"h-4 w-4 text-orange-600\" />\n              )}\n            </div>\n          </div>\n        </div>\n\n        {data.securityRisks && data.securityRisks.length > 0 && (\n          <div className=\"pt-4 border-t space-y-2\">\n            <p className=\"text-sm font-semibold text-muted-foreground\">Security Risks Detected:</p>\n            <div className=\"space-y-1\">\n              {data.securityRisks.map((risk, index) => (\n                <div \n                  key={index}\n                  className=\"flex items-start gap-2 text-sm\"\n                  data-testid={`goplus-risk-${index}`}\n                >\n                  <AlertTriangle className=\"h-4 w-4 text-orange-600 mt-0.5 flex-shrink-0\" />\n                  <span>{risk}</span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {data.securityRisks.length === 0 && data.is_scam !== '1' && (\n          <div className=\"flex items-center gap-2 text-sm text-green-600 bg-green-500/10 p-3 rounded-md\">\n            <ShieldCheck className=\"h-5 w-5\" />\n            <span className=\"font-medium\">No major security risks detected</span>\n          </div>\n        )}\n\n        <div className=\"pt-2 border-t\">\n          <a\n            href={`https://gopluslabs.io/token-security/solana/${tokenAddress}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-sm text-primary hover:underline inline-flex items-center gap-1\"\n            data-testid=\"link-goplus\"\n          >\n            View full report on GoPlus\n            <svg className=\"h-3 w-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n            </svg>\n          </a>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":7647},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"server/rugcheck-service.ts":{"content":"import type { RugcheckData } from \"@shared/schema\";\n\nconst RUGCHECK_API_URL = \"https://api.rugcheck.xyz/v1\";\nconst RUGCHECK_API_KEY = process.env.RUGCHECK_API_KEY;\n\nexport class RugcheckService {\n  async getTokenReport(mintAddress: string): Promise<RugcheckData | null> {\n    try {\n      const headers: Record<string, string> = {\n        \"Content-Type\": \"application/json\",\n      };\n\n      if (RUGCHECK_API_KEY) {\n        headers[\"X-API-KEY\"] = RUGCHECK_API_KEY;\n      }\n\n      const response = await fetch(\n        `${RUGCHECK_API_URL}/tokens/${mintAddress}/report`,\n        {\n          headers,\n          signal: AbortSignal.timeout(10000),\n        }\n      );\n\n      if (!response.ok) {\n        if (response.status === 404) {\n          console.log(`Rugcheck: Token ${mintAddress} not found`);\n          return null;\n        }\n        console.error(`Rugcheck API error: ${response.status} ${response.statusText}`);\n        return null;\n      }\n\n      const data = await response.json();\n      \n      return this.parseRugcheckResponse(data);\n    } catch (error) {\n      console.error(\"Rugcheck API error:\", error);\n      return null;\n    }\n  }\n\n  private parseRugcheckResponse(data: any): RugcheckData {\n    const risks: string[] = [];\n    \n    if (data.risks) {\n      Object.keys(data.risks).forEach(key => {\n        if (data.risks[key]?.level === \"danger\" || data.risks[key]?.level === \"warn\") {\n          risks.push(data.risks[key]?.name || key);\n        }\n      });\n    }\n\n    const markets = (data.markets || []).map((market: any) => ({\n      name: market.name || \"Unknown\",\n      marketType: market.marketType || null,\n      pubkey: market.pubkey || null,  // Pair/program address\n      liquidityA: market.liquidityA || null,  // Token account for base token\n      liquidityB: market.liquidityB || null,  // Token account for quote token (SOL)\n      liquidity: market.lp?.lpLockedUSD || market.lp?.lpUSD || 0,\n      lpBurn: market.lp?.lpBurn || 0,\n      lp: market.lp || null,  // Preserve full LP data for Pump.fun tokens\n    }));\n\n    const topHolders = (data.topHolders || []).map((holder: any) => ({\n      address: holder.owner || \"\",  // Map 'owner' to 'address' for consistency\n      pct: holder.pct || 0,\n    }));\n\n    return {\n      score: data.score || 0,\n      risks,\n      markets,\n      topHolders,\n      fileMeta: data.fileMeta,\n    };\n  }\n\n  async getTokenSummary(mintAddress: string): Promise<any> {\n    try {\n      const headers: Record<string, string> = {\n        \"Content-Type\": \"application/json\",\n      };\n\n      if (RUGCHECK_API_KEY) {\n        headers[\"X-API-KEY\"] = RUGCHECK_API_KEY;\n      }\n\n      const response = await fetch(\n        `${RUGCHECK_API_URL}/tokens/${mintAddress}/report/summary`,\n        {\n          headers,\n          signal: AbortSignal.timeout(5000),\n        }\n      );\n\n      if (!response.ok) {\n        return null;\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error(\"Rugcheck summary API error:\", error);\n      return null;\n    }\n  }\n}\n","size_bytes":3023},"server/crypto-payments.ts":{"content":"import { Connection, PublicKey, LAMPORTS_PER_SOL } from \"@solana/web3.js\";\nimport { db } from \"./db\";\nimport { cryptoAddresses, payments, paymentAudit, subscriptions } from \"@shared/schema\";\nimport { eq, and } from \"drizzle-orm\";\nimport { nanoid } from \"nanoid\";\n\n// Payment configuration\nconst PAYMENT_PRICES = {\n  basic: {\n    SOL: 0.1, // $20 worth of SOL (adjust based on market price)\n    ETH: 0.01, // $20 worth of ETH\n    BTC: 0.0005, // $20 worth of BTC\n  },\n  premium: {\n    SOL: 0.5, // $100 worth of SOL\n    ETH: 0.05, // $100 worth of ETH\n    BTC: 0.0025, // $100 worth of BTC\n  },\n};\n\nconst PAYMENT_EXPIRY_HOURS = 1; // Payment addresses expire after 1 hour\nconst REQUIRED_CONFIRMATIONS = 6; // Number of confirmations before activating subscription\n\n// Solana connection\nconst getSolanaConnection = () => {\n  const rpcUrl = process.env.HELIUS_API_KEY\n    ? `https://mainnet.helius-rpc.com/?api-key=${process.env.HELIUS_API_KEY}`\n    : \"https://api.mainnet-beta.solana.com\";\n  \n  return new Connection(rpcUrl, \"confirmed\");\n};\n\n/**\n * Generate a unique payment address for a user\n * For SOL: Use the main wallet address with a memo system\n * For ETH/BTC: Would generate unique addresses (implemented in separate functions)\n */\nexport async function generatePaymentAddress(\n  userId: string,\n  chain: \"SOL\" | \"ETH\" | \"BTC\",\n  tier: \"basic\" | \"premium\"\n) {\n  const expiresAt = new Date(Date.now() + PAYMENT_EXPIRY_HOURS * 60 * 60 * 1000);\n  \n  // Validate environment configuration\n  if (chain === \"SOL\" && !process.env.PHANTOM_WALLET_ADDRESS) {\n    throw new Error('CRITICAL: PHANTOM_WALLET_ADDRESS environment variable not configured. Crypto payments are disabled until this is set.');\n  }\n  \n  // Only SOL is currently supported - ETH/BTC will lose funds!\n  if (chain !== \"SOL\") {\n    throw new Error(`CRITICAL: Chain ${chain} is not yet supported. Only SOL is currently available. Attempting to use ${chain} will result in lost funds!`);\n  }\n  \n  // Use configured SOL wallet address\n  const address = process.env.PHANTOM_WALLET_ADDRESS;\n  \n  // Create crypto address record\n  const [cryptoAddress] = await db\n    .insert(cryptoAddresses)\n    .values({\n      userId,\n      chain,\n      address,\n      tier,\n      expiresAt,\n      isPaid: false,\n    })\n    .returning();\n  \n  // Create pending payment record\n  const expectedAmount = PAYMENT_PRICES[tier][chain].toString();\n  \n  const [payment] = await db\n    .insert(payments)\n    .values({\n      userId,\n      cryptoAddressId: cryptoAddress.id,\n      chain,\n      tier,\n      amountExpected: expectedAmount,\n      status: \"pending\",\n      confirmations: 0,\n    })\n    .returning();\n  \n  return {\n    cryptoAddress,\n    payment,\n    amountToPay: expectedAmount,\n    expiresAt,\n  };\n}\n\n/**\n * Check for SOL payment to the main wallet address\n * Looks for transactions with memo matching the payment ID\n */\nexport async function checkSolPayment(paymentId: string) {\n  try {\n    const connection = getSolanaConnection();\n    \n    // Get payment record\n    const [payment] = await db\n      .select()\n      .from(payments)\n      .where(eq(payments.id, paymentId))\n      .limit(1);\n    \n    if (!payment || payment.status === \"confirmed\") {\n      return payment;\n    }\n    \n    // Get crypto address\n    const [cryptoAddress] = await db\n      .select()\n      .from(cryptoAddresses)\n      .where(eq(cryptoAddresses.id, payment.cryptoAddressId))\n      .limit(1);\n    \n    if (!cryptoAddress) {\n      throw new Error(\"Crypto address not found\");\n    }\n    \n    // Check if payment address has expired\n    if (new Date() > cryptoAddress.expiresAt) {\n      await db\n        .update(payments)\n        .set({ status: \"expired\" })\n        .where(eq(payments.id, paymentId));\n      \n      return null;\n    }\n    \n    // Get wallet transactions\n    const walletPubkey = new PublicKey(cryptoAddress.address);\n    const signatures = await connection.getSignaturesForAddress(walletPubkey, {\n      limit: 50,\n    });\n    \n    // Check each transaction for payment\n    for (const signatureInfo of signatures) {\n      const tx = await connection.getTransaction(signatureInfo.signature, {\n        maxSupportedTransactionVersion: 0,\n      });\n      \n      if (!tx) continue;\n      \n      // Check if transaction was created after the payment request\n      const txTime = tx.blockTime ? tx.blockTime * 1000 : 0;\n      const paymentCreatedTime = new Date(payment.createdAt!).getTime();\n      \n      if (txTime < paymentCreatedTime) continue;\n      \n      // Check transaction amount\n      const preBalances = tx.meta?.preBalances || [];\n      const postBalances = tx.meta?.postBalances || [];\n      \n      // Find the account index for our wallet\n      const accountIndex = tx.transaction.message.staticAccountKeys.findIndex(\n        (key) => key.toString() === walletPubkey.toString()\n      );\n      \n      if (accountIndex === -1) continue;\n      \n      const received = (postBalances[accountIndex] - preBalances[accountIndex]) / LAMPORTS_PER_SOL;\n      \n      if (received <= 0) continue;\n      \n      // Check if amount matches expected amount (with 5% tolerance)\n      const expectedAmount = parseFloat(payment.amountExpected);\n      const tolerance = expectedAmount * 0.05;\n      \n      if (received >= expectedAmount - tolerance) {\n        // Payment found! Update record\n        const confirmations = signatureInfo.confirmationStatus === \"finalized\" ? 32 : 1;\n        \n        await db\n          .update(payments)\n          .set({\n            txHash: signatureInfo.signature,\n            amountReceived: received.toString(),\n            fromAddress: tx.transaction.message.staticAccountKeys[0].toString(),\n            confirmations,\n            status: confirmations >= REQUIRED_CONFIRMATIONS ? \"confirmed\" : \"pending\",\n            confirmedAt: confirmations >= REQUIRED_CONFIRMATIONS ? new Date() : undefined,\n          })\n          .where(eq(payments.id, paymentId));\n        \n        // Log audit trail\n        await db.insert(paymentAudit).values({\n          paymentId,\n          checkType: \"blockchain_scan\",\n          details: {\n            signature: signatureInfo.signature,\n            received,\n            confirmations,\n            txTime,\n          },\n        });\n        \n        // If confirmed, activate subscription\n        if (confirmations >= REQUIRED_CONFIRMATIONS) {\n          await activateSubscription(payment.userId, payment.tier as \"basic\" | \"premium\", paymentId);\n        }\n        \n        // Return updated payment\n        const [updatedPayment] = await db\n          .select()\n          .from(payments)\n          .where(eq(payments.id, paymentId))\n          .limit(1);\n        \n        return updatedPayment;\n      }\n    }\n    \n    // No matching payment found\n    return payment;\n  } catch (error) {\n    console.error(\"Error checking SOL payment:\", error);\n    throw error;\n  }\n}\n\n/**\n * Activate subscription after successful payment\n */\nasync function activateSubscription(\n  userId: string,\n  tier: \"basic\" | \"premium\",\n  paymentId: string\n) {\n  const now = new Date();\n  const periodEnd = new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000); // 30 days\n  \n  // Check if user already has a subscription\n  const [existing] = await db\n    .select()\n    .from(subscriptions)\n    .where(eq(subscriptions.userId, userId))\n    .limit(1);\n  \n  if (existing) {\n    // Update existing subscription\n    await db\n      .update(subscriptions)\n      .set({\n        tier,\n        status: \"active\",\n        currentPeriodStart: now,\n        currentPeriodEnd: periodEnd,\n        updatedAt: now,\n      })\n      .where(eq(subscriptions.id, existing.id));\n  } else {\n    // Create new subscription\n    await db.insert(subscriptions).values({\n      userId,\n      tier,\n      status: \"active\",\n      currentPeriodStart: now,\n      currentPeriodEnd: periodEnd,\n    });\n  }\n  \n  // Update payment record\n  await db\n    .update(payments)\n    .set({ subscriptionActivatedAt: now })\n    .where(eq(payments.id, paymentId));\n  \n  console.log(`âœ… Subscription activated for user ${userId} - ${tier} tier via crypto payment`);\n}\n\n/**\n * Background job to check pending payments\n * Should be called periodically (e.g., every 5 minutes)\n */\nexport async function checkPendingPayments() {\n  try {\n    // Get all pending payments\n    const pendingPayments = await db\n      .select()\n      .from(payments)\n      .where(eq(payments.status, \"pending\"));\n    \n    console.log(`Checking ${pendingPayments.length} pending crypto payments...`);\n    \n    for (const payment of pendingPayments) {\n      if (payment.chain === \"SOL\") {\n        await checkSolPayment(payment.id);\n      }\n    }\n  } catch (error) {\n    console.error(\"Error checking pending payments:\", error);\n  }\n}\n\n/**\n * Get payment status for a user\n */\nexport async function getPaymentStatus(paymentId: string) {\n  const [payment] = await db\n    .select()\n    .from(payments)\n    .where(eq(payments.id, paymentId))\n    .limit(1);\n  \n  return payment;\n}\n","size_bytes":8956},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/pages/subscription.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { CheckCircle2, XCircle, Loader2, Zap, Users, Gift } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\n\ninterface Subscription {\n  id: string;\n  userId: string;\n  tier: string;\n  status: string;\n  trialEndsAt: string | null;\n  currentPeriodEnd: string | null;\n}\n\nexport default function SubscriptionPage() {\n  const { toast } = useToast();\n  const [location] = useLocation();\n  const searchParams = new URLSearchParams(location.split('?')[1]);\n  const success = searchParams.get('success');\n  const cancelled = searchParams.get('cancelled');\n  const [redemptionCode, setRedemptionCode] = useState(\"\");\n\n  const { data: subscription, isLoading } = useQuery<Subscription>({\n    queryKey: ['/api/subscription/status'],\n  });\n\n  const createSubscriptionMutation = useMutation({\n    mutationFn: async (tier: 'individual' | 'group') => {\n      const response = await apiRequest('POST', '/api/create-subscription', { tier });\n      const data = await response.json();\n      return data;\n    },\n    onSuccess: async (data) => {\n      // Redirect to Whop checkout\n      if (data.url) {\n        window.location.href = data.url;\n      }\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Subscription Error\",\n        description: error.message || \"Failed to create subscription\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const cancelSubscriptionMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest('POST', '/api/cancel-subscription', {});\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/subscription/status'] });\n      toast({\n        title: \"Subscription Cancelled\",\n        description: \"Your subscription will end at the end of the current billing period\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to cancel subscription\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const redeemCodeMutation = useMutation({\n    mutationFn: async (code: string) => {\n      const response = await apiRequest('POST', '/api/redeem-code', { code });\n      return response.json();\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['/api/subscription/status'] });\n      setRedemptionCode(\"\");\n      toast({\n        title: \"Success!\",\n        description: data.message,\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Redemption Failed\",\n        description: error.message || \"Invalid or expired code\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (success) {\n    toast({\n      title: \"Success!\",\n      description: \"Your subscription is now active\",\n    });\n  }\n\n  if (cancelled) {\n    toast({\n      title: \"Cancelled\",\n      description: \"Subscription checkout was cancelled\",\n      variant: \"destructive\",\n    });\n  }\n\n  // Helper: Check if subscription is in an active state (Whop statuses)\n  const isActive = (status?: string) => {\n    const activeStatuses = ['valid', 'trialing', 'past_due'];\n    return status && activeStatuses.includes(status);\n  };\n  \n  const isOnFreeTrial = subscription?.tier === 'free_trial' && isActive(subscription?.status);\n  const hasActivePaidSub = subscription?.tier !== 'free_trial' && isActive(subscription?.status);\n  const trialDaysLeft = subscription?.trialEndsAt \n    ? Math.ceil((new Date(subscription.trialEndsAt).getTime() - Date.now()) / (1000 * 60 * 60 * 24))\n    : 0;\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-primary\" data-testid=\"loading-spinner\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background p-4 md:p-8\">\n      <div className=\"max-w-6xl mx-auto\">\n        <div className=\"text-center mb-12\">\n          <h1 className=\"text-4xl font-bold mb-4\" data-testid=\"heading-subscription\">\n            Choose Your Plan\n          </h1>\n          <p className=\"text-lg text-muted-foreground\" data-testid=\"text-subscription-description\">\n            Get real-time alerts for new Solana token launches and rug pull detection\n          </p>\n          \n          {isOnFreeTrial && (\n            <div className=\"mt-6\">\n              <Badge variant=\"default\" className=\"text-base px-4 py-2\" data-testid=\"badge-trial-status\">\n                Free Trial Active - {trialDaysLeft} days remaining\n              </Badge>\n            </div>\n          )}\n\n          {hasActivePaidSub && subscription && (\n            <div className=\"mt-6\">\n              <Badge variant=\"default\" className=\"text-base px-4 py-2\" data-testid=\"badge-active-subscription\">\n                {subscription.tier.charAt(0).toUpperCase() + subscription.tier.slice(1)} Plan Active\n              </Badge>\n            </div>\n          )}\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto\">\n          <Card className=\"border-2\" data-testid=\"card-plan-basic\">\n            <CardHeader>\n              <div className=\"flex items-center justify-between mb-2\">\n                <CardTitle className=\"text-2xl\">Basic</CardTitle>\n                <Zap className=\"w-6 h-6 text-primary\" />\n              </div>\n              <div className=\"mb-4\">\n                <span className=\"text-4xl font-bold\" data-testid=\"text-price-basic\">$20</span>\n                <span className=\"text-muted-foreground\">/month</span>\n              </div>\n              <CardDescription>Perfect for individual traders and investors</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"space-y-3\">\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle2 className=\"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-sm\">Real-time token analysis</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle2 className=\"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-sm\">Rug pull risk detection</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle2 className=\"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-sm\">Discord DM alerts</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle2 className=\"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-sm\">Telegram DM alerts</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <XCircle className=\"w-5 h-5 text-muted-foreground mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-sm text-muted-foreground\">Group/Channel alerts</span>\n                </div>\n              </div>\n            </CardContent>\n            <CardFooter>\n              <Button\n                className=\"w-full\"\n                size=\"lg\"\n                onClick={() => createSubscriptionMutation.mutate('individual')}\n                disabled={createSubscriptionMutation.isPending || (subscription?.tier === 'individual' && isActive(subscription?.status) || false)}\n                data-testid=\"button-subscribe-basic\"\n              >\n                {createSubscriptionMutation.isPending ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                    Processing...\n                  </>\n                ) : subscription?.tier === 'individual' && isActive(subscription?.status) ? (\n                  'Current Plan'\n                ) : (\n                  'Subscribe to Basic'\n                )}\n              </Button>\n            </CardFooter>\n          </Card>\n\n          <Card className=\"border-2 border-primary relative\" data-testid=\"card-plan-premium\">\n            <div className=\"absolute -top-3 left-1/2 -translate-x-1/2\">\n              <Badge variant=\"default\" className=\"px-4 py-1\">Popular</Badge>\n            </div>\n            <CardHeader>\n              <div className=\"flex items-center justify-between mb-2\">\n                <CardTitle className=\"text-2xl\">Premium</CardTitle>\n                <Users className=\"w-6 h-6 text-primary\" />\n              </div>\n              <div className=\"mb-4\">\n                <span className=\"text-4xl font-bold\" data-testid=\"text-price-premium\">$100</span>\n                <span className=\"text-muted-foreground\">/month</span>\n              </div>\n              <CardDescription>For teams and serious crypto traders</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"space-y-3\">\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle2 className=\"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-sm\">Real-time token analysis</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle2 className=\"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-sm\">Rug pull risk detection</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle2 className=\"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-sm\">Discord DM alerts</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle2 className=\"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-sm\">Telegram DM alerts</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle2 className=\"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-sm font-semibold\">Discord group/channel alerts</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle2 className=\"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-sm font-semibold\">Telegram group/channel alerts</span>\n                </div>\n              </div>\n            </CardContent>\n            <CardFooter>\n              <Button\n                className=\"w-full\"\n                size=\"lg\"\n                onClick={() => createSubscriptionMutation.mutate('group')}\n                disabled={createSubscriptionMutation.isPending || (subscription?.tier === 'group' && isActive(subscription?.status) || false)}\n                data-testid=\"button-subscribe-premium\"\n              >\n                {createSubscriptionMutation.isPending ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                    Processing...\n                  </>\n                ) : subscription?.tier === 'group' && isActive(subscription?.status) ? (\n                  'Current Plan'\n                ) : (\n                  'Subscribe to Premium'\n                )}\n              </Button>\n            </CardFooter>\n          </Card>\n        </div>\n\n        {hasActivePaidSub && subscription && (\n          <div className=\"mt-12 max-w-2xl mx-auto\">\n            <Card data-testid=\"card-manage-subscription\">\n              <CardHeader>\n                <CardTitle>Manage Subscription</CardTitle>\n                <CardDescription>\n                  Your subscription renews on {subscription.currentPeriodEnd \n                    ? new Date(subscription.currentPeriodEnd).toLocaleDateString('en-US', { \n                        year: 'numeric', \n                        month: 'long', \n                        day: 'numeric' \n                      })\n                    : 'N/A'}\n                </CardDescription>\n              </CardHeader>\n              <CardFooter>\n                <Button\n                  variant=\"destructive\"\n                  onClick={() => cancelSubscriptionMutation.mutate()}\n                  disabled={cancelSubscriptionMutation.isPending}\n                  data-testid=\"button-cancel-subscription\"\n                >\n                  {cancelSubscriptionMutation.isPending ? (\n                    <>\n                      <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                      Cancelling...\n                    </>\n                  ) : (\n                    'Cancel Subscription'\n                  )}\n                </Button>\n              </CardFooter>\n            </Card>\n          </div>\n        )}\n\n        {/* Subscription Code Redemption */}\n        <div className=\"mt-12 max-w-2xl mx-auto\">\n          <Card data-testid=\"card-redeem-code\">\n            <CardHeader>\n              <div className=\"flex items-center gap-2\">\n                <Gift className=\"w-5 h-5 text-primary\" />\n                <CardTitle>Redeem Subscription Code</CardTitle>\n              </div>\n              <CardDescription>\n                Have a lifetime access code? Enter it here to activate your subscription.\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex gap-3\">\n                <Input\n                  placeholder=\"Enter code\"\n                  value={redemptionCode}\n                  onChange={(e) => setRedemptionCode(e.target.value.toUpperCase())}\n                  disabled={redeemCodeMutation.isPending}\n                  className=\"font-mono\"\n                  data-testid=\"input-redeem-code\"\n                />\n                <Button\n                  onClick={() => redemptionCode && redeemCodeMutation.mutate(redemptionCode)}\n                  disabled={!redemptionCode || redeemCodeMutation.isPending}\n                  data-testid=\"button-redeem-code\"\n                >\n                  {redeemCodeMutation.isPending ? (\n                    <>\n                      <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                      Redeeming...\n                    </>\n                  ) : (\n                    'Redeem'\n                  )}\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":14784},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}\n","size_bytes":116},"client/src/components/holder-distribution-chart.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Cell } from \"recharts\";\nimport type { HolderInfo } from \"@shared/schema\";\n\ninterface HolderDistributionChartProps {\n  holders: HolderInfo[];\n  totalConcentration: number;\n}\n\nexport function HolderDistributionChart({ holders, totalConcentration }: HolderDistributionChartProps) {\n  const top10 = holders.slice(0, 10);\n\n  const chartData = top10.map((holder) => ({\n    name: `${holder.address.slice(0, 4)}...${holder.address.slice(-4)}`,\n    percentage: holder.percentage,\n    rank: holder.rank,\n  }));\n\n  const getBarColor = (percentage: number) => {\n    if (percentage > 15) return \"hsl(var(--destructive))\";\n    if (percentage > 10) return \"hsl(var(--chart-4))\";\n    if (percentage > 5) return \"hsl(var(--chart-2))\";\n    return \"hsl(var(--primary))\";\n  };\n\n  return (\n    <Card className=\"p-6\" data-testid=\"card-holder-distribution\">\n      <div className=\"space-y-4\">\n        <div>\n          <h2 className=\"text-xl font-semibold\">Holder Distribution</h2>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Top 10 holders control <span className=\"font-semibold text-foreground\">{totalConcentration.toFixed(1)}%</span> of total supply\n          </p>\n        </div>\n\n        <div className=\"w-full h-[600px]\">\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <BarChart\n              data={chartData}\n              layout=\"vertical\"\n              margin={{ top: 20, right: 40, left: 100, bottom: 20 }}\n              barGap={8}\n              barCategoryGap=\"20%\"\n            >\n              <CartesianGrid strokeDasharray=\"3 3\" opacity={0.1} />\n              <XAxis \n                type=\"number\" \n                domain={[0, 'auto']}\n                label={{ value: '% of Total Supply', position: 'insideBottom', offset: -10 }}\n              />\n              <YAxis \n                type=\"category\" \n                dataKey=\"name\" \n                width={100}\n                style={{ fontSize: '13px', fontFamily: 'JetBrains Mono, monospace' }}\n              />\n              <Tooltip\n                formatter={(value: number) => [`${value.toFixed(2)}%`, 'Percentage']}\n                contentStyle={{\n                  backgroundColor: 'hsl(var(--card))',\n                  border: '1px solid hsl(var(--border))',\n                  borderRadius: '6px',\n                }}\n              />\n              <Bar dataKey=\"percentage\" radius={[0, 4, 4, 0]} barSize={40}>\n                {chartData.map((entry, index) => (\n                  <Cell key={`cell-${index}`} fill={getBarColor(entry.percentage)} />\n                ))}\n              </Bar>\n            </BarChart>\n          </ResponsiveContainer>\n        </div>\n\n        <div className=\"flex flex-wrap gap-3 text-xs\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-3 h-3 rounded\" style={{ backgroundColor: \"hsl(var(--primary))\" }} />\n            <span className=\"text-muted-foreground\">&lt;5%: Low concentration</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-3 h-3 rounded\" style={{ backgroundColor: \"hsl(var(--chart-2))\" }} />\n            <span className=\"text-muted-foreground\">5-10%: Moderate</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-3 h-3 rounded\" style={{ backgroundColor: \"hsl(var(--chart-4))\" }} />\n            <span className=\"text-muted-foreground\">10-15%: High</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-3 h-3 rounded\" style={{ backgroundColor: \"hsl(var(--destructive))\" }} />\n            <span className=\"text-muted-foreground\">&gt;15%: Critical</span>\n          </div>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":3875},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"server/goplus-service.ts":{"content":"import type { GoPlusSecurityData } from \"@shared/schema\";\n\nconst GOPLUS_API_URL = \"https://api.gopluslabs.io/api/v1\";\n\nexport class GoPlusSecurityService {\n  async getTokenSecurity(tokenAddress: string): Promise<GoPlusSecurityData | null> {\n    try {\n      const response = await fetch(\n        `${GOPLUS_API_URL}/token_security/solana?contract_addresses=${tokenAddress}`,\n        {\n          signal: AbortSignal.timeout(10000),\n        }\n      );\n\n      if (!response.ok) {\n        console.error(`GoPlus API error: ${response.status} ${response.statusText}`);\n        return null;\n      }\n\n      const data = await response.json();\n      \n      if (data.code !== 1) {\n        console.error(\"GoPlus API returned error:\", data.message);\n        return null;\n      }\n\n      if (!data.result || data.result === null) {\n        console.log(`GoPlus: No security data available for token ${tokenAddress}`);\n        return null;\n      }\n\n      let tokenData = data.result[tokenAddress];\n      \n      if (!tokenData) {\n        console.log(`GoPlus: Token ${tokenAddress} not found in result map`);\n        return null;\n      }\n\n      if (Array.isArray(tokenData)) {\n        tokenData = tokenData[0];\n      }\n\n      if (!tokenData) {\n        console.error(\"GoPlus: Token data array is empty\");\n        return null;\n      }\n\n      return this.parseGoPlusResponse(tokenData);\n    } catch (error) {\n      console.error(\"GoPlus API error:\", error);\n      return null;\n    }\n  }\n\n  private parseGoPlusResponse(result: any): GoPlusSecurityData {\n    const securityRisks: string[] = [];\n    \n    if (result.is_mintable === '1') {\n      securityRisks.push(`Mintable - Authority can create unlimited tokens (${result.mint_authority || 'Unknown'})`);\n    }\n    \n    if (result.is_freezable === '1') {\n      securityRisks.push(`Freezable - Accounts can be frozen (${result.freeze_authority || 'Unknown'})`);\n    }\n    \n    if (result.is_scam === '1') {\n      securityRisks.push('SCAM - Flagged as malicious by GoPlus');\n    }\n    \n    const buyTax = parseFloat(result.buy_tax || '0');\n    const sellTax = parseFloat(result.sell_tax || '0');\n    \n    if (buyTax > 10) {\n      securityRisks.push(`High buy tax: ${buyTax}%`);\n    }\n    \n    if (sellTax > 10) {\n      securityRisks.push(`High sell tax: ${sellTax}% (possible honeypot)`);\n    }\n    \n    if (result.can_take_back_ownership === '1') {\n      securityRisks.push('Owner can reclaim ownership after renouncement');\n    }\n    \n    if (result.is_open_source === '0') {\n      securityRisks.push('Contract not verified/open source');\n    }\n    \n    if (result.is_true_token === '0') {\n      securityRisks.push('Not recognized as a legitimate token');\n    }\n    \n    if (result.transfer_fee_enable === '1') {\n      securityRisks.push('Transfer fees enabled');\n    }\n\n    return {\n      is_mintable: result.is_mintable || '0',\n      is_freezable: result.is_freezable || '0',\n      is_scam: result.is_scam || '0',\n      buy_tax: result.buy_tax || '0',\n      sell_tax: result.sell_tax || '0',\n      transfer_fee_enable: result.transfer_fee_enable || '0',\n      can_take_back_ownership: result.can_take_back_ownership || '0',\n      is_open_source: result.is_open_source || '0',\n      is_true_token: result.is_true_token || '0',\n      holder_count: result.holder_count || '0',\n      total_supply: result.total_supply || '0',\n      liquidity: result.liquidity || '0',\n      securityRisks,\n    };\n  }\n}\n","size_bytes":3426},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"server/replitAuth.ts":{"content":"import * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\n\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage\";\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: true,\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(\n  claims: any,\n) {\n  await storage.upsertUser({\n    id: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const user = {};\n    updateUserSession(user, tokens);\n    await upsertUser(tokens.claims());\n    verified(null, user);\n  };\n\n  // Keep track of registered strategies\n  const registeredStrategies = new Set<string>();\n\n  // Helper function to ensure strategy exists for a domain\n  const ensureStrategy = (domain: string) => {\n    const strategyName = `replitauth:${domain}`;\n    if (!registeredStrategies.has(strategyName)) {\n      const strategy = new Strategy(\n        {\n          name: strategyName,\n          config,\n          scope: \"openid email profile offline_access\",\n          callbackURL: `https://${domain}/api/callback`,\n        },\n        verify,\n      );\n      passport.use(strategy);\n      registeredStrategies.add(strategyName);\n    }\n  };\n\n  passport.serializeUser((user: Express.User, cb) => cb(null, user));\n  passport.deserializeUser((user: Express.User, cb) => cb(null, user));\n\n  app.get(\"/api/login\", (req, res, next) => {\n    ensureStrategy(req.hostname);\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/callback\", (req, res, next) => {\n    ensureStrategy(req.hostname);\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      successReturnToOrRedirect: \"/\",\n      failureRedirect: \"/api/login\",\n    })(req, res, next);\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\n        client.buildEndSessionUrl(config, {\n          client_id: process.env.REPL_ID!,\n          post_logout_redirect_uri: `${req.protocol}://${req.hostname}`,\n        }).href\n      );\n    });\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req: any, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    return next();\n  } catch (error) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n};\n","size_bytes":4477},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/metrics-grid.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Users, Coins, Droplet, Calendar, TrendingUp, Wallet, AlertTriangle } from \"lucide-react\";\n\ninterface MetricsGridProps {\n  totalSupply: number;\n  holderCount: number;\n  topHolderConcentration: number;\n  liquidityStatus: string;\n  creationDate?: number;\n  decimals: number;\n  bundledCount?: number;\n  bundleConfidence?: 'low' | 'medium' | 'high';\n  bundleSupplyPct?: number; // % of supply controlled by bundles (DevsNightmare)\n}\n\nexport function MetricsGrid({\n  totalSupply,\n  holderCount,\n  topHolderConcentration,\n  liquidityStatus,\n  creationDate,\n  decimals,\n  bundledCount = 0,\n  bundleConfidence,\n  bundleSupplyPct,\n}: MetricsGridProps) {\n  const formatNumber = (num: number) => {\n    if (num >= 1e9) return `${(num / 1e9).toFixed(2)}B`;\n    if (num >= 1e6) return `${(num / 1e6).toFixed(2)}M`;\n    if (num >= 1e3) return `${(num / 1e3).toFixed(2)}K`;\n    return num.toFixed(2);\n  };\n\n  const getBundleSecondaryText = () => {\n    if (bundledCount === 0) {\n      return \"No suspicious bundles detected\";\n    }\n    if (bundleConfidence === 'high') {\n      return `High confidence detection`;\n    }\n    if (bundleConfidence === 'medium') {\n      return `Medium confidence detection`;\n    }\n    return `Low confidence detection`;\n  };\n\n  // Build metrics array - show bundle percentage prominently if detected\n  const metrics = bundleSupplyPct !== undefined && bundleSupplyPct > 0 ? [\n    {\n      icon: Coins,\n      label: \"Total Supply\",\n      value: formatNumber(totalSupply / Math.pow(10, decimals)),\n      secondary: `${decimals} decimals`,\n      testId: \"metric-total-supply\",\n    },\n    {\n      icon: Users,\n      label: \"Holder Count\",\n      value: holderCount.toLocaleString(),\n      secondary: \"unique addresses\",\n      testId: \"metric-holder-count\",\n    },\n    {\n      icon: AlertTriangle,\n      label: \"Bundle Supply % (DevsNightmare)\",\n      value: `${bundleSupplyPct.toFixed(2)}%`,\n      secondary: `${bundledCount} bundled wallet${bundledCount !== 1 ? 's' : ''} control this supply`,\n      testId: \"metric-bundle-percentage\",\n      warning: true,\n      highlight: true, // Special orange highlight\n    },\n    {\n      icon: TrendingUp,\n      label: \"Top Holder Concentration\",\n      value: `${topHolderConcentration.toFixed(1)}%`,\n      secondary: \"top 10 wallets\",\n      testId: \"metric-concentration\",\n    },\n    {\n      icon: Droplet,\n      label: \"Liquidity Pool\",\n      value: liquidityStatus,\n      secondary: \"LP status\",\n      testId: \"metric-liquidity\",\n    },\n    {\n      icon: Calendar,\n      label: \"Creation Date\",\n      value: creationDate ? new Date(creationDate).toLocaleDateString() : \"Unknown\",\n      secondary: creationDate ? getTimeAgo(creationDate) : \"\",\n      testId: \"metric-creation-date\",\n    },\n  ] : [\n    {\n      icon: Coins,\n      label: \"Total Supply\",\n      value: formatNumber(totalSupply / Math.pow(10, decimals)),\n      secondary: `${decimals} decimals`,\n      testId: \"metric-total-supply\",\n    },\n    {\n      icon: Users,\n      label: \"Holder Count\",\n      value: holderCount.toLocaleString(),\n      secondary: \"unique addresses\",\n      testId: \"metric-holder-count\",\n    },\n    {\n      icon: TrendingUp,\n      label: \"Top Holder Concentration\",\n      value: `${topHolderConcentration.toFixed(1)}%`,\n      secondary: \"top 10 wallets\",\n      testId: \"metric-concentration\",\n    },\n    {\n      icon: AlertTriangle,\n      label: \"Bundled Wallets\",\n      value: bundledCount.toLocaleString(),\n      secondary: getBundleSecondaryText(),\n      testId: \"metric-bundled-wallets\",\n      warning: bundledCount > 0,\n    },\n    {\n      icon: Droplet,\n      label: \"Liquidity Pool\",\n      value: liquidityStatus,\n      secondary: \"LP status\",\n      testId: \"metric-liquidity\",\n    },\n    {\n      icon: Calendar,\n      label: \"Creation Date\",\n      value: creationDate ? new Date(creationDate).toLocaleDateString() : \"Unknown\",\n      secondary: creationDate ? getTimeAgo(creationDate) : \"\",\n      testId: \"metric-creation-date\",\n    },\n  ];\n\n  function getTimeAgo(timestamp: number) {\n    const now = Date.now();\n    const diff = now - timestamp;\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n    \n    if (days === 0) return \"today\";\n    if (days === 1) return \"yesterday\";\n    if (days < 30) return `${days} days ago`;\n    if (days < 365) return `${Math.floor(days / 30)} months ago`;\n    return `${Math.floor(days / 365)} years ago`;\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n      {metrics.map((metric) => {\n        const Icon = metric.icon;\n        const isWarning = 'warning' in metric && metric.warning;\n        const isHighlight = 'highlight' in metric && metric.highlight;\n        return (\n          <Card \n            key={metric.label} \n            className={`p-6 ${isHighlight ? 'border-orange-500 bg-orange-500/5' : isWarning ? 'border-orange-500/50' : ''}`}\n            data-testid={metric.testId}\n          >\n            <div className=\"flex items-start gap-4\">\n              <div className={`p-2 rounded-md ${isWarning ? 'bg-orange-500/10' : 'bg-primary/10'}`}>\n                <Icon className={`h-5 w-5 ${isWarning ? 'text-orange-500' : 'text-primary'}`} />\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-muted-foreground uppercase tracking-wide\">\n                  {metric.label}\n                </p>\n                <p className={`text-xl font-semibold mt-1 ${isWarning ? 'text-orange-500' : ''}`} data-testid={`${metric.testId}-value`}>\n                  {metric.value}\n                </p>\n                {metric.secondary && (\n                  <p className={`text-xs mt-1 ${isWarning ? 'text-orange-600 dark:text-orange-400' : 'text-muted-foreground'}`}>\n                    {metric.secondary}\n                  </p>\n                )}\n              </div>\n            </div>\n          </Card>\n        );\n      })}\n    </div>\n  );\n}\n","size_bytes":5985},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"server/discord-bot.ts":{"content":"import { Client, GatewayIntentBits, EmbedBuilder, SlashCommandBuilder, REST, Routes } from 'discord.js';\nimport { tokenAnalyzer } from './solana-analyzer';\nimport type { TokenAnalysisResponse } from '@shared/schema';\n\n// Client instance - only created when startDiscordBot() is called\nlet clientInstance: Client | null = null;\n\n// ============================================================================\n// HELPER FUNCTIONS (module-level for reuse/testing)\n// ============================================================================\n\nfunction formatAddress(address: string): string {\n  return `${address.slice(0, 4)}...${address.slice(-4)}`;\n}\n\nfunction formatNumber(num: number): string {\n  if (num >= 1_000_000_000) {\n    return (num / 1_000_000_000).toFixed(2) + 'B';\n  } else if (num >= 1_000_000) {\n    return (num / 1_000_000).toFixed(2) + 'M';\n  } else if (num >= 1_000) {\n    return (num / 1_000).toFixed(2) + 'K';\n  }\n  return num.toFixed(2);\n}\n\nfunction getRiskColor(riskLevel: string): number {\n  switch (riskLevel) {\n    case 'LOW':\n      return 0x00ff00; // Green\n    case 'MODERATE':\n      return 0xffff00; // Yellow\n    case 'HIGH':\n      return 0xff6600; // Orange\n    case 'EXTREME':\n      return 0xff0000; // Red\n    default:\n      return 0x808080; // Gray\n  }\n}\n\nfunction getRiskEmoji(riskLevel: string): string {\n  switch (riskLevel) {\n    case 'LOW':\n      return 'âœ…';\n    case 'MODERATE':\n      return 'âš ï¸';\n    case 'HIGH':\n      return 'ðŸš¨';\n    case 'EXTREME':\n      return 'âŒ';\n    default:\n      return 'â“';\n  }\n}\n\nfunction getLiquidityFieldValue(liquidityPool: any): string {\n  let value = `Status: ${liquidityPool.status}`;\n  \n  // Add LP Burn Information - only show if data is available\n  if (liquidityPool.burnPercentage !== undefined) {\n    const burnPct = liquidityPool.burnPercentage;\n    let burnEmoji = '';\n    \n    if (liquidityPool.isBurned || burnPct >= 99.99) {\n      burnEmoji = 'âœ…ðŸ”¥';\n    } else if (burnPct >= 90) {\n      burnEmoji = 'âš ï¸ðŸ”¥';\n    } else if (burnPct >= 50) {\n      burnEmoji = 'ðŸŸ¡';\n    } else {\n      burnEmoji = 'âŒ';\n    }\n    \n    value += `\\nLP Burn: ${burnEmoji} ${burnPct.toFixed(2)}%`;\n  } else {\n    // Data unavailable - don't mislead users\n    value += `\\nLP Burn: â“ Unknown`;\n  }\n  \n  return value;\n}\n\nfunction createAnalysisEmbed(analysis: TokenAnalysisResponse): EmbedBuilder {\n  const emoji = getRiskEmoji(analysis.riskLevel);\n  const color = getRiskColor(analysis.riskLevel);\n  \n  const embed = new EmbedBuilder()\n    .setColor(color)\n    .setTitle(`${emoji} ${analysis.metadata.name} (${analysis.metadata.symbol})`)\n    .setDescription(`**${analysis.riskScore}/100** (${analysis.riskLevel})\\n_Higher = Safer (0=Dangerous, 100=Safe)_`)\n    .setFooter({ text: `Contract: ${formatAddress(analysis.tokenAddress)}` })\n    .setTimestamp();\n  \n  // CONTRACT ADDRESS (prominently displayed)\n  embed.addFields({\n    name: 'ðŸ“‹ Contract Address',\n    value: `\\`${analysis.tokenAddress}\\``,\n    inline: false\n  });\n  \n  // AI VERDICT\n  if (analysis.aiVerdict) {\n    embed.addFields({\n      name: 'ðŸ¤– AI VERDICT',\n      value: `${analysis.aiVerdict.rating} - ${analysis.aiVerdict.verdict}`,\n      inline: false\n    });\n  }\n  \n  // PRICE DATA\n  if (analysis.dexscreenerData?.pairs?.[0]) {\n    const pair = analysis.dexscreenerData.pairs[0];\n    const priceChange = pair.priceChange.h24 >= 0 ? 'ðŸ“ˆ' : 'ðŸ“‰';\n    embed.addFields({\n      name: 'ðŸ’° PRICE',\n      value: `Price: $${parseFloat(pair.priceUsd).toFixed(8)}\\n24h Vol: $${formatNumber(pair.volume.h24)}\\n24h Change: ${priceChange} ${pair.priceChange.h24.toFixed(2)}%\\nMCap: $${formatNumber(pair.marketCap || 0)}`,\n      inline: true\n    });\n  }\n  \n  // SECURITY\n  const burnPct = analysis.liquidityPool.burnPercentage;\n  const burnEmoji = burnPct !== undefined ? (burnPct >= 99.99 ? 'âœ…' : burnPct >= 50 ? 'âš ï¸' : 'âŒ') : 'â“';\n  const burnText = burnPct !== undefined ? `${burnPct.toFixed(1)}%` : 'Unknown';\n  \n  embed.addFields({\n    name: 'ðŸ” SECURITY',\n    value: `Mint: ${analysis.mintAuthority.hasAuthority ? 'âŒ Active' : 'âœ… Revoked'}\\nFreeze: ${analysis.freezeAuthority.hasAuthority ? 'âŒ Active' : 'âœ… Revoked'}\\nLP Burn: ${burnEmoji} ${burnText}`,\n    inline: true\n  });\n  \n  // PUMP.FUN INFO\n  if (analysis.pumpFunData?.isPumpFun) {\n    embed.addFields({\n      name: 'ðŸŽ¯ PUMP.FUN',\n      value: `Dev Bought: ${analysis.pumpFunData.devBought.toFixed(2)}%\\nBonding Curve: ${analysis.pumpFunData.bondingCurve.toFixed(2)}%`,\n      inline: true\n    });\n  }\n  \n  // HOLDERS\n  embed.addFields({\n    name: 'ðŸ‘› HOLDERS',\n    value: `Total: ${analysis.holderCount}\\nTop 10: ${analysis.topHolderConcentration.toFixed(2)}%\\nSupply: ${formatNumber(analysis.metadata.supply)}`,\n    inline: true\n  });\n  \n  // RED FLAGS\n  if (analysis.redFlags.length > 0) {\n    const criticalFlags = analysis.redFlags.filter(f => f.severity === 'critical' || f.severity === 'high');\n    if (criticalFlags.length > 0) {\n      embed.addFields({\n        name: 'âš ï¸ ALERTS',\n        value: criticalFlags.slice(0, 3).map(f => `${f.severity === 'critical' ? 'ðŸ”´' : 'ðŸŸ '} ${f.title}`).join('\\n').slice(0, 1024)\n      });\n    }\n  }\n  \n  // QUICK LINKS\n  embed.addFields({\n    name: 'ðŸ”— QUICK LINKS',\n    value: `[Solscan](https://solscan.io/token/${analysis.tokenAddress}) â€¢ [DexScreener](https://dexscreener.com/solana/${analysis.tokenAddress}) â€¢ [Rugcheck](https://rugcheck.xyz/tokens/${analysis.tokenAddress})\\n[AXiom](https://axiom.trade) â€¢ [Padre Bot](https://t.me/padre_tg_bot?start=${analysis.tokenAddress}) â€¢ [GMGN](https://gmgn.ai/sol/token/${analysis.tokenAddress}) â€¢ [Birdeye](https://birdeye.so/token/${analysis.tokenAddress}?chain=solana)`\n  });\n  \n  embed.setURL(`https://solscan.io/token/${analysis.tokenAddress}`);\n  \n  return embed;\n}\n\n// ============================================================================\n// SLASH COMMANDS DEFINITION\n// ============================================================================\n\nconst commands = [\n  new SlashCommandBuilder()\n    .setName('help')\n    .setDescription('Show all available commands and how to use the bot'),\n  new SlashCommandBuilder()\n    .setName('execute')\n    .setDescription('Full 52-metric rug detection scan')\n    .addStringOption(option =>\n      option.setName('address')\n        .setDescription('Token contract address')\n        .setRequired(true)\n    ),\n  new SlashCommandBuilder()\n    .setName('first20')\n    .setDescription('Analyze top 20 token holders')\n    .addStringOption(option =>\n      option.setName('address')\n        .setDescription('Token contract address')\n        .setRequired(true)\n    ),\n  new SlashCommandBuilder()\n    .setName('devtorture')\n    .setDescription('Track dev wallet history')\n    .addStringOption(option =>\n      option.setName('address')\n        .setDescription('Token contract address')\n        .setRequired(true)\n    ),\n  new SlashCommandBuilder()\n    .setName('blacklist')\n    .setDescription('Check if wallet is flagged')\n    .addStringOption(option =>\n      option.setName('wallet')\n        .setDescription('Wallet address to check')\n        .setRequired(true)\n    ),\n].map(command => command.toJSON());\n\n// ============================================================================\n// CLIENT FACTORY (creates and configures Discord client)\n// ============================================================================\n\nfunction createDiscordClient(botToken: string, clientId: string): Client {\n  // Use Guilds, GuildMessages, and MessageContent for slash commands + direct message analysis\n  const client = new Client({\n    intents: [\n      GatewayIntentBits.Guilds,\n      GatewayIntentBits.GuildMessages,\n      GatewayIntentBits.MessageContent,\n    ],\n  });\n  \n  // Register slash commands\n  const registerCommands = async () => {\n    try {\n      const rest = new REST().setToken(botToken);\n      console.log('Started refreshing Discord application (/) commands.');\n      \n      await rest.put(\n        Routes.applicationCommands(clientId),\n        { body: commands },\n      );\n      \n      console.log('Successfully reloaded Discord application (/) commands.');\n    } catch (error) {\n      console.error('Error registering Discord commands:', error);\n    }\n  };\n  \n  // Handle interactions\n  client.on('interactionCreate', async interaction => {\n    if (!interaction.isChatInputCommand()) return;\n    \n    try {\n      if (interaction.commandName === 'help') {\n        const helpEmbed = new EmbedBuilder()\n          .setColor(0x5865f2)\n          .setTitle('ðŸ”¥ SOLANA RUG KILLER')\n          .setDescription('Protect yourself from rug pulls with comprehensive token analysis!')\n          .addFields(\n            {\n              name: 'ðŸ“‹ Available Commands',\n              value: '`/execute <address>` - Full 52-metric scan\\n`/first20 <address>` - Top 20 holder analysis\\n`/devtorture <address>` - Dev wallet history\\n`/blacklist <wallet>` - Check if wallet is flagged\\n`/help` - Show this help message'\n            },\n            {\n              name: 'ðŸ’¡ Quick Tip',\n              value: 'You can also paste any Solana token address directly in chat for instant analysis!'\n            }\n          )\n          .setFooter({ text: 'Solana Rug Killer â€¢ Protecting the Solana ecosystem' })\n          .setTimestamp();\n        \n        await interaction.reply({ embeds: [helpEmbed], ephemeral: true });\n        \n      } else if (interaction.commandName === 'execute') {\n        const tokenAddress = interaction.options.getString('address', true);\n        \n        await interaction.deferReply();\n        \n        const analysis = await tokenAnalyzer.analyzeToken(tokenAddress);\n        const embed = createAnalysisEmbed(analysis);\n        \n        await interaction.editReply({ embeds: [embed] });\n        \n      } else if (interaction.commandName === 'first20') {\n        const tokenAddress = interaction.options.getString('address', true);\n        \n        await interaction.deferReply();\n        \n        const analysis = await tokenAnalyzer.analyzeToken(tokenAddress);\n        \n        const embed = new EmbedBuilder()\n          .setColor(0x3498db)\n          .setTitle(`ðŸ“Š Top 20 Holders - ${analysis.metadata.symbol}`)\n          .setDescription(`Total Top 10 Concentration: **${analysis.topHolderConcentration.toFixed(2)}%**`)\n          .setTimestamp();\n        \n        // Split holders into 3 fields (Discord has 1024 char limit per field)\n        const holders = analysis.topHolders.slice(0, 20);\n        const fieldsData = [\n          holders.slice(0, 7),\n          holders.slice(7, 14),\n          holders.slice(14, 20),\n        ];\n        \n        fieldsData.forEach((group, index) => {\n          if (group.length > 0) {\n            embed.addFields({\n              name: index === 0 ? 'Top Holders' : '\\u200b',\n              value: group.map((h, i) => {\n                const rank = (index * 7) + i + 1;\n                return `${rank}. \\`${formatAddress(h.address)}\\` - ${h.percentage.toFixed(2)}%`;\n              }).join('\\n'),\n              inline: false\n            });\n          }\n        });\n        \n        if (analysis.topHolderConcentration > 50) {\n          embed.setFooter({ text: 'âš ï¸ WARNING: High holder concentration detected!' });\n        }\n        \n        await interaction.editReply({ embeds: [embed] });\n        \n      } else if (interaction.commandName === 'devtorture') {\n        const tokenAddress = interaction.options.getString('address', true);\n        \n        await interaction.deferReply();\n        \n        const analysis = await tokenAnalyzer.analyzeToken(tokenAddress);\n        \n        const embed = new EmbedBuilder()\n          .setColor(0xff6b2c)\n          .setTitle(`ðŸ”¥ Dev Torture Report - ${analysis.metadata.symbol}`)\n          .setDescription(`Contract: \\`${formatAddress(tokenAddress)}\\``)\n          .setTimestamp();\n        \n        // Mint authority\n        if (analysis.mintAuthority.hasAuthority && !analysis.mintAuthority.isRevoked) {\n          embed.addFields({\n            name: 'âŒ Mint Authority Active',\n            value: `Dev can mint unlimited tokens!\\nAuthority: \\`${formatAddress(analysis.mintAuthority.authorityAddress || 'Unknown')}\\``\n          });\n        }\n        \n        // Freeze authority\n        if (analysis.freezeAuthority.hasAuthority && !analysis.freezeAuthority.isRevoked) {\n          embed.addFields({\n            name: 'âŒ Freeze Authority Active',\n            value: `Dev can freeze accounts!\\nAuthority: \\`${formatAddress(analysis.freezeAuthority.authorityAddress || 'Unknown')}\\``\n          });\n        }\n        \n        if (analysis.creationDate) {\n          const age = Math.floor((Date.now() - analysis.creationDate) / (1000 * 60 * 60 * 24));\n          let ageText = `Token Age: ${age} days`;\n          if (age < 7) {\n            ageText += '\\nâš ï¸ Very new token - high risk!';\n          }\n          embed.addFields({\n            name: 'ðŸ“… Age',\n            value: ageText\n          });\n        }\n        \n        await interaction.editReply({ embeds: [embed] });\n        \n      } else if (interaction.commandName === 'blacklist') {\n        const walletAddress = interaction.options.getString('wallet', true);\n        \n        await interaction.deferReply();\n        \n        const embed = new EmbedBuilder()\n          .setColor(0x00ff00)\n          .setTitle('ðŸ” Blacklist Check')\n          .setDescription(`Wallet: \\`${formatAddress(walletAddress)}\\``)\n          .addFields({\n            name: 'Status',\n            value: 'âœ… Not currently flagged'\n          })\n          .setTimestamp();\n        \n        await interaction.editReply({ embeds: [embed] });\n      }\n      \n    } catch (error) {\n      console.error('Discord command error:', error);\n      \n      if (interaction.deferred) {\n        await interaction.editReply({ content: 'âŒ Error executing command. Please check the address and try again.' });\n      } else {\n        await interaction.reply({ content: 'âŒ Error executing command. Please check the address and try again.', ephemeral: true });\n      }\n    }\n  });\n  \n  // Handle direct messages with token addresses (like Telegram bot)\n  client.on('messageCreate', async message => {\n    // Ignore bot messages\n    if (message.author.bot) return;\n    \n    // Ignore empty messages\n    if (!message.content) return;\n    \n    const text = message.content.trim();\n    \n    // Check if it's a Solana address (base58, 32-44 chars, no spaces)\n    if (text.length >= 32 && text.length <= 44 && !/\\s/.test(text)) {\n      try {\n        // Send \"analyzing\" message\n        const processingMsg = await message.reply('ðŸ” Quick analysis...');\n        \n        // Analyze the token\n        const analysis = await tokenAnalyzer.analyzeToken(text);\n        const embed = createAnalysisEmbed(analysis);\n        \n        // Delete the \"analyzing\" message and send the result\n        await processingMsg.delete();\n        await message.reply({ embeds: [embed] });\n      } catch (error) {\n        // Silently ignore - not a valid token address\n        // This prevents spam when users send normal messages\n      }\n    }\n  });\n  \n  // Ready event\n  client.once('ready', () => {\n    console.log(`âœ… Discord bot logged in as ${client.user?.tag}`);\n    registerCommands();\n  });\n  \n  return client;\n}\n\n// ============================================================================\n// PUBLIC API\n// ============================================================================\n\nexport async function startDiscordBot() {\n  const BOT_TOKEN = process.env.DISCORD_BOT_TOKEN;\n  const CLIENT_ID = process.env.DISCORD_CLIENT_ID;\n  \n  if (!BOT_TOKEN || BOT_TOKEN === 'PLACEHOLDER_TOKEN' || !CLIENT_ID || CLIENT_ID === 'PLACEHOLDER_ID') {\n    console.log('âš ï¸  Discord bot token not configured. Set DISCORD_BOT_TOKEN and DISCORD_CLIENT_ID to enable bot.');\n    return;\n  }\n  \n  // Prevent duplicate instances\n  if (clientInstance) {\n    console.log('âš ï¸  Discord bot already running');\n    return;\n  }\n  \n  try {\n    clientInstance = createDiscordClient(BOT_TOKEN, CLIENT_ID);\n    await clientInstance.login(BOT_TOKEN);\n    console.log('âœ… Discord bot started successfully');\n  } catch (error) {\n    console.error('Error starting Discord bot:', error);\n    clientInstance = null;\n    throw error;\n  }\n}\n\n// Optional: Export getter for client instance (returns null until started)\nexport function getDiscordClient(): Client | null {\n  return clientInstance;\n}\n","size_bytes":16465},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/top-holders-table.tsx":{"content":"import { useState } from \"react\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Copy, Check } from \"lucide-react\";\nimport type { HolderInfo } from \"@shared/schema\";\n\ninterface TopHoldersTableProps {\n  holders: HolderInfo[];\n  decimals: number;\n}\n\nexport function TopHoldersTable({ holders, decimals }: TopHoldersTableProps) {\n  const [showAll, setShowAll] = useState(false);\n  const [copiedAddress, setCopiedAddress] = useState<string | null>(null);\n\n  const displayedHolders = showAll ? holders : holders.slice(0, 10);\n\n  const copyToClipboard = async (address: string) => {\n    await navigator.clipboard.writeText(address);\n    setCopiedAddress(address);\n    setTimeout(() => setCopiedAddress(null), 2000);\n  };\n\n  const formatBalance = (balance: number) => {\n    const actual = balance / Math.pow(10, decimals);\n    if (actual >= 1e9) return `${(actual / 1e9).toFixed(2)}B`;\n    if (actual >= 1e6) return `${(actual / 1e6).toFixed(2)}M`;\n    if (actual >= 1e3) return `${(actual / 1e3).toFixed(2)}K`;\n    return actual.toFixed(2);\n  };\n\n  return (\n    <Card className=\"p-6\" data-testid=\"card-top-holders\">\n      <h2 className=\"text-xl font-semibold mb-4\">Top Holders</h2>\n      \n      <div className=\"overflow-x-auto\">\n        <table className=\"w-full\">\n          <thead className=\"sticky top-0 bg-card border-b\">\n            <tr className=\"text-sm text-muted-foreground uppercase tracking-wide\">\n              <th className=\"text-left py-3 px-2 font-medium\">Rank</th>\n              <th className=\"text-left py-3 px-2 font-medium\">Address</th>\n              <th className=\"text-right py-3 px-2 font-medium\">Balance</th>\n              <th className=\"text-right py-3 px-2 font-medium\">% of Supply</th>\n              <th className=\"w-12\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {displayedHolders.map((holder, index) => (\n              <tr\n                key={holder.address}\n                className=\"border-b last:border-b-0 hover:bg-muted/50\"\n                data-testid={`row-holder-${index}`}\n              >\n                <td className=\"py-3 px-2 text-sm font-medium\">\n                  #{holder.rank}\n                </td>\n                <td className=\"py-3 px-2 font-mono text-sm\" data-testid={`text-holder-address-${index}`}>\n                  {holder.address.slice(0, 4)}...{holder.address.slice(-4)}\n                </td>\n                <td className=\"py-3 px-2 text-sm text-right font-semibold\" data-testid={`text-holder-balance-${index}`}>\n                  {formatBalance(holder.balance)}\n                </td>\n                <td className=\"py-3 px-2 text-sm text-right font-semibold\" data-testid={`text-holder-percentage-${index}`}>\n                  {holder.percentage.toFixed(2)}%\n                </td>\n                <td className=\"py-3 px-2\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={() => copyToClipboard(holder.address)}\n                    data-testid={`button-copy-${index}`}\n                    className=\"h-8 w-8\"\n                  >\n                    {copiedAddress === holder.address ? (\n                      <Check className=\"h-4 w-4 text-green-600\" />\n                    ) : (\n                      <Copy className=\"h-4 w-4\" />\n                    )}\n                  </Button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {holders.length > 10 && (\n        <div className=\"mt-4 text-center\">\n          <Button\n            variant=\"outline\"\n            onClick={() => setShowAll(!showAll)}\n            data-testid=\"button-toggle-holders\"\n          >\n            {showAll ? \"Show Less\" : `Show All ${holders.length} Holders`}\n          </Button>\n        </div>\n      )}\n    </Card>\n  );\n}\n","size_bytes":3869},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":483},"client/src/components/risk-score-card.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { Card } from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { AlertTriangle, ShieldCheck, ShieldAlert, ShieldX } from \"lucide-react\";\nimport type { RiskLevel } from \"@shared/schema\";\n\ninterface RiskScoreCardProps {\n  score: number;\n  riskLevel: RiskLevel;\n  redFlagsCount: number;\n  analyzedAt: number;\n}\n\nexport function RiskScoreCard({ score, riskLevel, redFlagsCount, analyzedAt }: RiskScoreCardProps) {\n  const [displayScore, setDisplayScore] = useState(0);\n\n  const safeScore = isNaN(score) || !isFinite(score) ? 100 : Math.min(100, Math.max(0, score));\n\n  useEffect(() => {\n    const duration = 1000;\n    const steps = 60;\n    const increment = safeScore / steps;\n    let current = 0;\n\n    const timer = setInterval(() => {\n      current += increment;\n      if (current >= safeScore) {\n        setDisplayScore(safeScore);\n        clearInterval(timer);\n      } else {\n        setDisplayScore(Math.floor(current));\n      }\n    }, duration / steps);\n\n    return () => clearInterval(timer);\n  }, [safeScore]);\n\n  const getRiskColor = () => {\n    switch (riskLevel) {\n      case \"LOW\":\n        return \"text-green-600\";\n      case \"MODERATE\":\n        return \"text-yellow-600\";\n      case \"HIGH\":\n        return \"text-orange-600\";\n      case \"EXTREME\":\n        return \"text-red-600\";\n      default:\n        return \"text-muted-foreground\";\n    }\n  };\n\n  const getRiskIcon = () => {\n    switch (riskLevel) {\n      case \"LOW\":\n        return <ShieldCheck className=\"h-12 w-12 text-green-600\" />;\n      case \"MODERATE\":\n        return <ShieldAlert className=\"h-12 w-12 text-yellow-600\" />;\n      case \"HIGH\":\n        return <AlertTriangle className=\"h-12 w-12 text-orange-600\" />;\n      case \"EXTREME\":\n        return <ShieldX className=\"h-12 w-12 text-red-600\" />;\n    }\n  };\n\n  const getProgressColor = () => {\n    // REVERSED: 70-100 (green), 40-70 (yellow), 20-40 (orange), 0-20 (red)\n    if (safeScore >= 70) return \"bg-green-600\";\n    if (safeScore >= 40) return \"bg-yellow-600\";\n    if (safeScore >= 20) return \"bg-orange-600\";\n    return \"bg-red-600\";\n  };\n\n  const safeAnalyzedAt = isNaN(analyzedAt) || !isFinite(analyzedAt) || analyzedAt === 0 \n    ? Date.now() \n    : analyzedAt;\n\n  return (\n    <Card className=\"p-8\" data-testid=\"card-risk-score\">\n      <div className=\"flex flex-col items-center text-center space-y-6\">\n        {getRiskIcon()}\n        \n        <div className=\"space-y-2\">\n          <div className={`text-6xl font-bold ${getRiskColor()}`} data-testid=\"text-risk-score\">\n            {displayScore}\n          </div>\n          <div className=\"text-sm text-muted-foreground uppercase tracking-wide\">\n            Risk Score (0-100)\n          </div>\n        </div>\n\n        <div className=\"w-full max-w-md\">\n          <Progress \n            value={displayScore} \n            className=\"h-2\" \n            data-testid=\"progress-risk-score\"\n          />\n        </div>\n\n        <div className=\"space-y-1\">\n          <div className={`text-2xl font-semibold ${getRiskColor()}`} data-testid=\"text-risk-level\">\n            {riskLevel} RISK\n          </div>\n          <div className=\"text-sm text-muted-foreground\" data-testid=\"text-red-flags\">\n            {redFlagsCount}/10 red flags detected\n          </div>\n        </div>\n\n        <div className=\"text-xs text-muted-foreground\" data-testid=\"text-analyzed-at\">\n          Analyzed {new Date(safeAnalyzedAt).toLocaleString()}\n        </div>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":3525},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nexport const app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"â€¦\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  // Start bots only if credentials are configured\n  if (process.env.TELEGRAM_BOT_TOKEN && process.env.TELEGRAM_BOT_TOKEN !== 'PLACEHOLDER_TOKEN') {\n    const { startTelegramBot } = await import('./telegram-bot');\n    startTelegramBot().catch(err => {\n      console.error('Failed to start Telegram bot:', err);\n    });\n  }\n  \n  if (process.env.DISCORD_BOT_TOKEN && process.env.DISCORD_BOT_TOKEN !== 'PLACEHOLDER_TOKEN' &&\n      process.env.DISCORD_CLIENT_ID && process.env.DISCORD_CLIENT_ID !== 'PLACEHOLDER_ID') {\n    const { startDiscordBot } = await import('./discord-bot');\n    startDiscordBot().catch(err => {\n      console.error('Failed to start Discord bot:', err);\n    });\n  }\n\n  // Start alpha alert service if configured\n  if (process.env.ALPHA_ALERTS_ENABLED === 'true') {\n    const { getAlphaAlertService } = await import('./alpha-alerts');\n    const alphaService = getAlphaAlertService();\n    alphaService.start().catch(err => {\n      console.error('Failed to start Alpha Alert service:', err);\n    });\n  }\n\n  // Start analytics worker (always enabled for dashboard)\n  const { analyticsWorker } = await import('./workers/analytics-worker');\n  analyticsWorker.start();\n  \n  // Start social worker (always enabled for community features)\n  const { socialWorker } = await import('./workers/social-worker');\n  socialWorker.start();\n  \n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":3561},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { analyzeTokenSchema, insertWatchlistSchema } from \"@shared/schema\";\nimport { tokenAnalyzer } from \"./solana-analyzer\";\nimport { setupAuth, isAuthenticated } from \"./replitAuth\";\nimport { storage } from \"./storage\";\nimport { \n  createWhopCheckout, \n  getWhopMembership, \n  cancelWhopMembership,\n  mapWhopStatus,\n  mapPlanToTier,\n  WHOP_PLAN_IDS \n} from \"./whop-client\";\nimport { VanityAddressGenerator } from \"./vanity-generator\";\nimport { z } from \"zod\";\nimport { rpcBalancer } from \"./services/rpc-balancer\";\n\nexport const hasActiveAccess = async (req: any, res: any, next: any) => {\n  return next();\n};\n\n// Admin middleware - checks if user is authorized admin access\nconst isAdmin = async (req: any, res: any, next: any) => {\n  if (!req.isAuthenticated() || !req.user?.claims?.sub) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n  \n  // Check if user is admin (you can customize this logic)\n  const adminEmails = (process.env.ADMIN_EMAILS || '').split(',').map(e => e.trim());\n  const userEmail = req.user.claims.email;\n  \n  if (!adminEmails.includes(userEmail)) {\n    return res.status(403).json({ message: \"Admin access required\" });\n  }\n  \n  next();\n};\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Setup authentication\n  await setupAuth(app);\n\n  // Auth routes\n  app.get('/api/auth/user', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n\n  // RPC Health Check\n  app.get(\"/api/rpc/health\", (req, res) => {\n    const stats = rpcBalancer.getHealthStats();\n    res.json({ providers: stats });\n  });\n\n  // Subscription routes\n  app.get('/api/subscription/status', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const subscription = await storage.getSubscription(userId);\n      \n      if (!subscription) {\n        // No subscription yet - create free trial\n        const trialEndsAt = new Date();\n        trialEndsAt.setDate(trialEndsAt.getDate() + 7); // 7 days from now\n        \n        const newSubscription = await storage.createSubscription({\n          userId,\n          tier: \"free_trial\",\n          status: \"trialing\", // Whop status for trial period\n          trialEndsAt,\n          currentPeriodEnd: trialEndsAt,\n        });\n        \n        return res.json(newSubscription);\n      }\n      \n      res.json(subscription);\n    } catch (error) {\n      console.error(\"Error fetching subscription:\", error);\n      res.status(500).json({ message: \"Failed to fetch subscription\" });\n    }\n  });\n\n  // Wallet connection routes - return proper status codes\n  app.get('/api/wallet/status', async (req: any, res) => {\n    try {\n      // Return 401 if not authenticated - frontend will handle this gracefully\n      if (!req.isAuthenticated() || !req.user?.claims?.sub) {\n        return res.status(401).json({ message: \"Authentication required\" });\n      }\n      \n      const userId = req.user.claims.sub;\n      const wallet = await storage.getWalletConnection(userId);\n      res.json(wallet || null);\n    } catch (error) {\n      console.error(\"Error fetching wallet:\", error);\n      res.status(500).json({ message: \"Failed to fetch wallet status\" });\n    }\n  });\n\n  // GET /api/wallet/challenge - Generate a one-time challenge for wallet verification\n  // This prevents signature replay attacks by requiring fresh signatures\n  app.get('/api/wallet/challenge', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      // Generate a fresh challenge that expires in 5 minutes\n      const challenge = await storage.createChallenge(userId);\n      \n      res.json({\n        challenge: challenge.challenge,\n        expiresAt: challenge.expiresAt,\n        message: \"Sign this message with your wallet to prove ownership. This challenge expires in 5 minutes.\",\n      });\n    } catch (error: any) {\n      console.error(\"Error creating challenge:\", error);\n      res.status(500).json({ \n        message: \"Failed to create challenge: \" + error.message \n      });\n    }\n  });\n\n  // POST /api/wallet/verify - Verify token holder status (10M+ tokens)\n  // Note: Uses isAuthenticated (not hasActiveAccess) to allow users to verify eligibility\n  // SECURITY: Requires signature proof of wallet ownership AND validates official token mint\n  app.post('/api/wallet/verify', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { walletAddress, signature, challenge: challengeStr } = req.body;\n      \n      // SECURITY: Official token mint address - hardcoded to prevent bypass with junk tokens\n      // This should be configured via environment variable in production\n      const OFFICIAL_TOKEN_MINT = process.env.OFFICIAL_TOKEN_MINT_ADDRESS;\n      \n      if (!OFFICIAL_TOKEN_MINT) {\n        return res.status(503).json({\n          message: \"Token gating is not configured yet. Please contact support or use a paid subscription.\"\n        });\n      }\n      \n      if (!walletAddress) {\n        return res.status(400).json({ message: \"Wallet address is required\" });\n      }\n\n      if (!signature || !challengeStr) {\n        return res.status(400).json({\n          message: \"Signature and challenge are required. First call GET /api/wallet/challenge to get a challenge, then sign it with your wallet.\"\n        });\n      }\n\n      // SECURITY: Validate challenge to prevent replay attacks\n      const challenge = await storage.getChallenge(challengeStr);\n      \n      if (!challenge) {\n        return res.status(403).json({\n          message: \"Invalid challenge. Please request a new challenge via GET /api/wallet/challenge.\"\n        });\n      }\n      \n      if (challenge.userId !== userId) {\n        console.warn(`âŒ Challenge mismatch: ${challenge.userId} vs ${userId}`);\n        return res.status(403).json({\n          message: \"Challenge was issued to a different user.\"\n        });\n      }\n      \n      if (challenge.usedAt) {\n        console.warn(`âŒ Challenge already used: ${challengeStr} by user ${userId}`);\n        return res.status(403).json({\n          message: \"This challenge has already been used. Please request a new challenge.\"\n        });\n      }\n      \n      const now = new Date();\n      if (challenge.expiresAt < now) {\n        console.warn(`âŒ Challenge expired: ${challengeStr} by user ${userId}`);\n        return res.status(403).json({\n          message: \"This challenge has expired. Please request a new challenge.\"\n        });\n      }\n\n      // Import Solana connection and crypto utilities\n      const { Connection, PublicKey } = await import('@solana/web3.js');\n      const { getAssociatedTokenAddress, getAccount, getMint } = await import('@solana/spl-token');\n      const nacl = await import('tweetnacl');\n      const bs58 = await import('bs58');\n      \n      const connection = new Connection(\n        process.env.SOLANA_RPC_URL || 'https://api.mainnet-beta.solana.com',\n        'confirmed'\n      );\n\n      try {\n        const walletPubkey = new PublicKey(walletAddress);\n        const mintPubkey = new PublicKey(OFFICIAL_TOKEN_MINT);\n        \n        // SECURITY: Verify wallet ownership via signature\n        const messageBytes = new TextEncoder().encode(challengeStr);\n        const signatureBytes = bs58.default.decode(signature);\n        const publicKeyBytes = walletPubkey.toBytes();\n        \n        const isValidSignature = nacl.default.sign.detached.verify(\n          messageBytes,\n          signatureBytes,\n          publicKeyBytes\n        );\n        \n        if (!isValidSignature) {\n          return res.status(403).json({\n            message: \"Invalid signature. Please sign the challenge message with the correct wallet.\"\n          });\n        }\n        \n        await storage.markChallengeUsed(challenge.id);\n        \n        // Get token mint info for correct decimals\n        const mintInfo = await getMint(connection, mintPubkey);\n        const decimals = mintInfo.decimals;\n        \n        // Get associated token account\n        const tokenAccount = await getAssociatedTokenAddress(\n          mintPubkey,\n          walletPubkey\n        );\n        \n        // Get token account info\n        const accountInfo = await getAccount(connection, tokenAccount);\n        const balance = Number(accountInfo.amount) / Math.pow(10, decimals);\n        \n        // Check if eligible (10M+ tokens)\n        const isEligible = balance >= 10_000_000;\n        \n        // Check if wallet connection already exists\n        const existing = await storage.getWalletByAddress(walletAddress);\n        \n        // Security: Only allow if wallet not already claimed by another user\n        if (existing && existing.userId !== userId) {\n          return res.status(403).json({\n            message: \"This wallet is already connected to another account.\"\n          });\n        }\n        \n        let wallet;\n        if (existing) {\n          // Update existing\n          wallet = await storage.updateWalletBalance(walletAddress, balance, isEligible);\n        } else {\n          // Create new\n          wallet = await storage.createWalletConnection({\n            userId,\n            walletAddress,\n            tokenBalance: balance,\n            isEligible,\n          });\n        }\n        \n        res.json({\n          wallet,\n          message: isEligible \n            ? `Congratulations! You hold ${balance.toLocaleString()} tokens and have full access.`\n            : `You hold ${balance.toLocaleString()} tokens. You need 10M+ tokens for access.`,\n        });\n        \n      } catch (error: any) {\n        // Handle wallet/token not found\n        if (error.message?.includes('could not find account')) {\n          return res.status(404).json({ \n            message: \"No token account found for this wallet and token mint. Make sure you're using the correct addresses.\" \n          });\n        }\n        throw error;\n      }\n      \n    } catch (error: any) {\n      console.error(\"Error verifying wallet:\", error);\n      res.status(500).json({ \n        message: \"Failed to verify wallet: \" + error.message \n      });\n    }\n  });\n\n  // Whop subscription routes\n  app.post('/api/create-subscription', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { tier } = req.body;\n\n      if (!tier || !['basic', 'premium'].includes(tier)) {\n        return res.status(400).json({ message: \"Invalid tier. Must be 'basic' or 'premium'\" });\n      }\n\n      const user = await storage.getUser(userId);\n      if (!user?.email) {\n        return res.status(400).json({ message: \"User email is required\" });\n      }\n\n      const planId = tier === 'individual' ? WHOP_PLAN_IDS.INDIVIDUAL : WHOP_PLAN_IDS.GROUP;\n      \n      if (!planId) {\n        return res.status(500).json({ \n          message: `Whop plan ID not configured for ${tier} tier. Set WHOP_PLAN_ID_${tier.toUpperCase()}`\n        });\n      }\n\n      const checkout = await createWhopCheckout({\n        planId,\n        userId: user.id,\n        userEmail: user.email,\n        metadata: { tier }\n      });\n\n      res.json({ url: checkout.checkoutUrl, sessionId: checkout.sessionId });\n    } catch (error: any) {\n      console.error(\"Error creating Whop checkout:\", error);\n      res.status(500).json({ message: \"Error creating subscription: \" + error.message });\n    }\n  });\n\n  app.post('/api/cancel-subscription', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const subscription = await storage.getSubscription(userId);\n\n      if (!subscription?.whopMembershipId) {\n        return res.status(400).json({ message: \"No active subscription found\" });\n      }\n\n      const cancelled = await cancelWhopMembership(subscription.whopMembershipId);\n      \n      if (cancelled) {\n        await storage.updateSubscription(subscription.id, {\n          status: 'cancelled',\n        });\n        res.json({ message: \"Subscription cancelled successfully\" });\n      } else {\n        res.status(500).json({ message: \"Failed to cancel subscription\" });\n      }\n    } catch (error: any) {\n      console.error(\"Error cancelling subscription:\", error);\n      res.status(500).json({ message: \"Error cancelling subscription: \" + error.message });\n    }\n  });\n\n  app.post('/api/whop/webhook', async (req, res) => {\n    try {\n      const event = req.body;\n\n      switch (event.action) {\n        case 'payment.succeeded': {\n          const payment = event.data;\n          break;\n        }\n        \n        case 'membership.went_valid': {\n          const membership = event.data;\n          const whopUserId = membership.user?.id;\n          const whopMembershipId = membership.id;\n          const planId = membership.plan;\n          const validUntil = membership.valid_until ? new Date(membership.valid_until * 1000) : new Date(Date.now() + 30 * 24 * 60 * 60 * 1000);\n          const tier = mapPlanToTier(planId);\n          const status = mapWhopStatus(membership.status);\n\n          // Try to find user by whopUserId or metadata\n          const userId = membership.metadata?.user_id;\n          \n          if (userId) {\n            const dbSubscription = await storage.getSubscription(userId);\n            \n            if (dbSubscription?.tier === 'lifetime') {\n              break;\n            }\n            \n            if (dbSubscription) {\n              await storage.updateSubscription(dbSubscription.id, {\n                tier,\n                status,\n                whopMembershipId,\n                whopPlanId: planId,\n                currentPeriodEnd: validUntil,\n              });\n            } else {\n              await storage.createSubscription({\n                userId,\n                tier,\n                status,\n                whopMembershipId,\n                whopPlanId: planId,\n                currentPeriodEnd: validUntil,\n              });\n            }\n          }\n          \n          break;\n        }\n        \n        case 'membership.went_invalid': {\n          const membership = event.data;\n          const whopMembershipId = membership.id;\n          \n          const dbSubscription = await storage.getSubscriptionByWhopId(whopMembershipId);\n          \n          if (dbSubscription?.tier === 'lifetime') {\n            break;\n          }\n          \n          if (dbSubscription) {\n            await storage.updateSubscription(dbSubscription.id, {\n              status: 'expired',\n            });\n          }\n          \n          break;\n        }\n      }\n\n      res.sendStatus(200);\n    } catch (error: any) {\n      console.error(\"Whop webhook error:\", error);\n      res.status(500).send('Webhook processing failed');\n    }\n  });\n\n  // ============================================================================\n  // CRYPTO PAYMENT ROUTES\n  // ============================================================================\n  \n  // Import crypto payment service\n  const cryptoPayments = await import('./crypto-payments');\n  \n  // POST /api/create-crypto-payment - Generate crypto payment address\n  app.post('/api/create-crypto-payment', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { chain, tier } = req.body;\n      \n      // Only allow SOL payments until ETH/BTC are fully implemented\n      if (!chain || chain !== 'SOL') {\n        return res.status(400).json({ \n          message: \"Only SOL payments are currently supported. ETH and BTC coming soon!\",\n          supported_chains: ['SOL']\n        });\n      }\n      \n      // Verify PHANTOM_WALLET_ADDRESS is configured\n      if (!process.env.PHANTOM_WALLET_ADDRESS) {\n        console.error(\"PHANTOM_WALLET_ADDRESS not configured!\");\n        return res.status(503).json({ \n          message: \"Crypto payments are currently unavailable. Please use Whop subscription instead or contact support.\",\n        });\n      }\n      \n      if (!tier || !['basic', 'premium'].includes(tier)) {\n        return res.status(400).json({ message: \"Invalid tier. Must be 'basic' or 'premium'\" });\n      }\n      \n      const result = await cryptoPayments.generatePaymentAddress(userId, chain, tier);\n      \n      res.json({\n        paymentId: result.payment.id,\n        address: result.cryptoAddress.address,\n        amount: result.amountToPay,\n        chain,\n        tier,\n        expiresAt: result.expiresAt,\n      });\n    } catch (error: any) {\n      console.error(\"Error creating crypto payment:\", error);\n      res.status(500).json({ message: \"Error creating crypto payment: \" + error.message });\n    }\n  });\n  \n  // GET /api/crypto-payment/:paymentId - Check payment status\n  app.get('/api/crypto-payment/:paymentId', isAuthenticated, async (req: any, res) => {\n    try {\n      const { paymentId } = req.params;\n      const payment = await cryptoPayments.getPaymentStatus(paymentId);\n      \n      if (!payment) {\n        return res.status(404).json({ message: \"Payment not found\" });\n      }\n      \n      res.json(payment);\n    } catch (error: any) {\n      console.error(\"Error fetching payment status:\", error);\n      res.status(500).json({ message: \"Error fetching payment status: \" + error.message });\n    }\n  });\n  \n  // POST /api/crypto-payment/:paymentId/check - Manually check for payment\n  app.post('/api/crypto-payment/:paymentId/check', isAuthenticated, async (req: any, res) => {\n    try {\n      const { paymentId } = req.params;\n      \n      // Trigger manual check\n      const payment = await cryptoPayments.checkSolPayment(paymentId);\n      \n      res.json(payment);\n    } catch (error: any) {\n      console.error(\"Error checking payment:\", error);\n      res.status(500).json({ message: \"Error checking payment: \" + error.message });\n    }\n  });\n  \n  // ============================================================================\n  // BOT INVITE LINKS\n  // ============================================================================\n  \n  // GET /api/bot/invite-links - Get Telegram and Discord bot invite links\n  // OPEN ACCESS - No authentication required\n  app.get('/api/bot/invite-links', async (req: any, res) => {\n    try {\n      const links: { telegram?: string; discord?: string; message: string } = {\n        message: \"You have access to premium bot features!\",\n      };\n      \n      // Telegram bot link (if configured)\n      const telegramToken = process.env.TELEGRAM_BOT_TOKEN;\n      if (telegramToken) {\n        // Extract bot username from token (format: BOTID:TOKEN)\n        // For now, return generic link - in production, you'd get username via Telegram API\n        links.telegram = process.env.TELEGRAM_BOT_URL || `https://t.me/YOUR_BOT_USERNAME`;\n      }\n      \n      // Discord bot link (if configured)\n      const discordClientId = process.env.DISCORD_CLIENT_ID;\n      if (discordClientId) {\n        // OAuth2 invite URL with necessary permissions\n        // Permissions: Send Messages (2048), Embed Links (16384), Use Slash Commands (2147483648)\n        const permissions = '2147502080';\n        links.discord = `https://discord.com/api/oauth2/authorize?client_id=${discordClientId}&permissions=${permissions}&scope=bot%20applications.commands`;\n      }\n      \n      if (!links.telegram && !links.discord) {\n        return res.status(503).json({\n          message: \"Bot services are not configured yet. Please contact support.\"\n        });\n      }\n      \n      res.json(links);\n    } catch (error: any) {\n      console.error(\"Error getting bot invite links:\", error);\n      res.status(500).json({ \n        message: \"Failed to get bot invite links: \" + error.message \n      });\n    }\n  });\n  \n  // ============================================================================\n  // AI BLACKLIST ROUTES\n  // ============================================================================\n  \n  const blacklist = await import('./ai-blacklist');\n  \n  // GET /api/blacklist/check/:wallet - Check if wallet is blacklisted\n  app.get('/api/blacklist/check/:wallet', async (req, res) => {\n    try {\n      const { wallet } = req.params;\n      const result = await blacklist.checkBlacklist(wallet);\n      res.json(result);\n    } catch (error: any) {\n      console.error(\"Error checking blacklist:\", error);\n      res.status(500).json({ message: \"Error checking blacklist: \" + error.message });\n    }\n  });\n  \n  // POST /api/blacklist/report - Report a suspicious wallet\n  app.post('/api/blacklist/report', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { walletAddress, reportType, evidence } = req.body;\n      \n      if (!walletAddress || !reportType || !evidence) {\n        return res.status(400).json({ message: \"Missing required fields\" });\n      }\n      \n      await blacklist.reportWallet(walletAddress, reportType, evidence, userId);\n      \n      res.json({ message: \"Report submitted successfully\" });\n    } catch (error: any) {\n      console.error(\"Error reporting wallet:\", error);\n      res.status(500).json({ message: \"Error reporting wallet: \" + error.message });\n    }\n  });\n  \n  // GET /api/blacklist/stats - Get blacklist statistics\n  app.get('/api/blacklist/stats', async (req, res) => {\n    try {\n      const stats = await blacklist.getBlacklistStats();\n      res.json(stats);\n    } catch (error: any) {\n      console.error(\"Error getting blacklist stats:\", error);\n      res.status(500).json({ message: \"Error getting blacklist stats: \" + error.message });\n    }\n  });\n  \n  // GET /api/blacklist/top - Get top flagged wallets\n  app.get('/api/blacklist/top', async (req, res) => {\n    try {\n      const limit = parseInt(req.query.limit as string) || 100;\n      const wallets = await blacklist.getTopFlaggedWallets(limit);\n      res.json(wallets);\n    } catch (error: any) {\n      console.error(\"Error getting top flagged wallets:\", error);\n      res.status(500).json({ message: \"Error getting top flagged wallets: \" + error.message });\n    }\n  });\n  \n  // ============================================================================\n  // WATCHLIST ROUTES\n  // ============================================================================\n  \n  // GET /api/watchlist - Get user's watchlist\n  app.get('/api/watchlist', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const watchlist = await storage.getWatchlist(userId);\n      res.json(watchlist);\n    } catch (error: any) {\n      console.error(\"Error fetching watchlist:\", error);\n      res.status(500).json({ message: \"Failed to fetch watchlist: \" + error.message });\n    }\n  });\n  \n  // POST /api/watchlist - Add token to watchlist\n  app.post('/api/watchlist', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      const result = insertWatchlistSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        return res.status(400).json({\n          message: \"Invalid request\",\n          errors: result.error.errors,\n        });\n      }\n      \n      const { tokenAddress, label } = result.data;\n      \n      const entry = await storage.addToWatchlist({\n        userId,\n        tokenAddress,\n        label,\n        metadata: null,\n      });\n      \n      res.status(201).json(entry);\n    } catch (error: any) {\n      console.error(\"Error adding to watchlist:\", error);\n      \n      if (error.message?.includes('unique constraint') || error.code === '23505') {\n        return res.status(409).json({ \n          message: \"This token is already in your watchlist\" \n        });\n      }\n      \n      res.status(500).json({ \n        message: \"Failed to add to watchlist: \" + error.message \n      });\n    }\n  });\n  \n  // DELETE /api/watchlist/:tokenAddress - Remove token from watchlist\n  app.delete('/api/watchlist/:tokenAddress', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { tokenAddress } = req.params;\n      \n      if (!tokenAddress || tokenAddress.length < 32 || tokenAddress.length > 44) {\n        return res.status(400).json({ \n          message: \"Invalid token address\" \n        });\n      }\n      \n      await storage.removeFromWatchlist(userId, tokenAddress);\n      \n      res.status(204).send();\n    } catch (error: any) {\n      console.error(\"Error removing from watchlist:\", error);\n      res.status(500).json({ \n        message: \"Failed to remove from watchlist: \" + error.message \n      });\n    }\n  });\n  \n  // ============================================================================\n  // PRICE API ROUTES (Shared Cache for Watchlist, Portfolio, Alerts)\n  // ============================================================================\n  \n  // GET /api/prices/:tokenAddress - Get price for single token\n  app.get('/api/prices/:tokenAddress', async (req, res) => {\n    try {\n      const { priceService } = await import('./services/price-service');\n      const { tokenAddress } = req.params;\n      \n      const price = await priceService.getPrice(tokenAddress);\n      \n      if (!price) {\n        return res.status(404).json({ \n          message: \"Price not found for this token\" \n        });\n      }\n      \n      res.json(price);\n    } catch (error: any) {\n      console.error(\"Error fetching price:\", error);\n      res.status(500).json({ \n        message: \"Failed to fetch price: \" + error.message \n      });\n    }\n  });\n  \n  // POST /api/prices/batch - Get prices for multiple tokens\n  app.post('/api/prices/batch', async (req, res) => {\n    try {\n      const { priceService } = await import('./services/price-service');\n      const { tokenAddresses } = req.body;\n      \n      if (!Array.isArray(tokenAddresses)) {\n        return res.status(400).json({ \n          message: \"tokenAddresses must be an array\" \n        });\n      }\n      \n      if (tokenAddresses.length > 100) {\n        return res.status(400).json({ \n          message: \"Maximum 100 tokens per request\" \n        });\n      }\n      \n      const prices = await priceService.getPrices(tokenAddresses);\n      \n      // Convert Map to object for JSON response\n      const pricesObject: Record<string, any> = {};\n      for (const [address, price] of Array.from(prices.entries())) {\n        pricesObject[address] = price;\n      }\n      \n      res.json(pricesObject);\n    } catch (error: any) {\n      console.error(\"Error fetching batch prices:\", error);\n      res.status(500).json({ \n        message: \"Failed to fetch prices: \" + error.message \n      });\n    }\n  });\n  \n  // ============================================================================\n  // ANALYTICS ROUTES (Option C: Advanced Analytics Dashboard)\n  // ============================================================================\n  \n  // GET /api/analytics/market-overview - Market overview with trending tokens\n  app.get('/api/analytics/market-overview', async (req, res) => {\n    try {\n      const { priceCache } = await import('./services/price-cache');\n      const { getBlacklist } = await import('./ai-blacklist');\n      \n      // Get trending tokens (top 10)\n      const trending = await storage.getTrendingTokens(10);\n      \n      // Get recent snapshots for stats\n      const recentTokens = priceCache.getRecentlyUpdated(60); // Last hour\n      const totalAnalyzed = recentTokens.length;\n      \n      // Get blacklist count for rugs detected\n      const blacklist = await getBlacklist();\n      const rugsDetected = blacklist.length;\n      \n      // Calculate average risk score from trending tokens\n      let avgRiskScore = 0;\n      if (trending.length > 0) {\n        const riskScores = await Promise.all(\n          trending.slice(0, 5).map(async (t) => {\n            const snapshots = await storage.getHistoricalData(t.tokenAddress, 1);\n            return snapshots.length > 0 ? snapshots[snapshots.length - 1].riskScore : 0;\n          })\n        );\n        avgRiskScore = Math.round(riskScores.reduce((a, b) => a + b, 0) / riskScores.length);\n      }\n      \n      // Get active alerts count\n      const activeAlerts = await storage.getActivePriceAlerts();\n      \n      res.json({\n        totalAnalyzed,\n        rugsDetected,\n        avgRiskScore,\n        activeAlerts: activeAlerts.length,\n        trending: trending.map(t => ({\n          tokenAddress: t.tokenAddress,\n          score: parseFloat(t.score as string),\n          rank: t.rank,\n          volume24h: t.volume24h ? parseFloat(t.volume24h as string) : null,\n          velocity: t.velocity ? parseFloat(t.velocity as string) : null,\n        })),\n      });\n    } catch (error: any) {\n      console.error(\"Error fetching market overview:\", error);\n      res.status(500).json({ message: \"Failed to fetch market overview: \" + error.message });\n    }\n  });\n  \n  // GET /api/analytics/historical/:tokenAddress - Historical token data\n  app.get('/api/analytics/historical/:tokenAddress', async (req, res) => {\n    try {\n      const { tokenAddress } = req.params;\n      const days = parseInt(req.query.days as string) || 7;\n      \n      if (!tokenAddress || tokenAddress.length < 32 || tokenAddress.length > 44) {\n        return res.status(400).json({ message: \"Invalid token address\" });\n      }\n      \n      if (days < 1 || days > 90) {\n        return res.status(400).json({ message: \"Days must be between 1 and 90\" });\n      }\n      \n      const historical = await storage.getHistoricalData(tokenAddress, days);\n      \n      res.json({\n        tokenAddress,\n        days,\n        dataPoints: historical.length,\n        data: historical.map(h => ({\n          timestamp: h.capturedAt,\n          priceUsd: h.priceUsd ? parseFloat(h.priceUsd as string) : null,\n          riskScore: h.riskScore,\n          holderCount: h.holderCount,\n          volume24h: h.volume24h ? parseFloat(h.volume24h as string) : null,\n          liquidityUsd: h.liquidityUsd ? parseFloat(h.liquidityUsd as string) : null,\n          riskFlags: h.riskFlags,\n          txCount24h: h.txCount24h,\n        })),\n      });\n    } catch (error: any) {\n      console.error(\"Error fetching historical data:\", error);\n      res.status(500).json({ message: \"Failed to fetch historical data: \" + error.message });\n    }\n  });\n  \n  // GET /api/analytics/risk-insights - Aggregate risk patterns\n  app.get('/api/analytics/risk-insights', async (req, res) => {\n    try {\n      const stats7d = await storage.getRiskStatistics(7);\n      const stats30d = await storage.getRiskStatistics(30);\n      \n      res.json({\n        last7Days: stats7d ? {\n          totalAnalyzed: stats7d.totalAnalyzed,\n          rugDetected: stats7d.rugDetected,\n          falsePositives: stats7d.falsePositives,\n          detectionRate: stats7d.totalAnalyzed > 0 \n            ? (stats7d.rugDetected / stats7d.totalAnalyzed * 100).toFixed(2)\n            : 0,\n          commonFlags: stats7d.commonFlags,\n        } : null,\n        last30Days: stats30d ? {\n          totalAnalyzed: stats30d.totalAnalyzed,\n          rugDetected: stats30d.rugDetected,\n          falsePositives: stats30d.falsePositives,\n          detectionRate: stats30d.totalAnalyzed > 0 \n            ? (stats30d.rugDetected / stats30d.totalAnalyzed * 100).toFixed(2)\n            : 0,\n          commonFlags: stats30d.commonFlags,\n        } : null,\n      });\n    } catch (error: any) {\n      console.error(\"Error fetching risk insights:\", error);\n      res.status(500).json({ message: \"Failed to fetch risk insights: \" + error.message });\n    }\n  });\n  \n  // GET /api/analytics/hot-tokens - Real-time trending tokens feed\n  app.get('/api/analytics/hot-tokens', async (req, res) => {\n    try {\n      const limit = Math.min(parseInt(req.query.limit as string) || 20, 50);\n      const trending = await storage.getTrendingTokens(limit);\n      \n      // Enrich with latest price data\n      const { priceService } = await import('./services/price-service');\n      const enriched = await Promise.all(\n        trending.map(async (t) => {\n          const priceData = await priceService.getPrice(t.tokenAddress);\n          const snapshots = await storage.getHistoricalData(t.tokenAddress, 1);\n          const latestSnapshot = snapshots.length > 0 ? snapshots[snapshots.length - 1] : null;\n          \n          return {\n            tokenAddress: t.tokenAddress,\n            score: parseFloat(t.score as string),\n            rank: t.rank,\n            volume24h: t.volume24h ? parseFloat(t.volume24h as string) : null,\n            velocity: t.velocity ? parseFloat(t.velocity as string) : null,\n            priceUsd: priceData?.priceUsd || null,\n            priceChange24h: priceData?.priceChange24h || null,\n            riskScore: latestSnapshot?.riskScore || null,\n            updatedAt: t.updatedAt,\n          };\n        })\n      );\n      \n      res.json(enriched);\n    } catch (error: any) {\n      console.error(\"Error fetching hot tokens:\", error);\n      res.status(500).json({ message: \"Failed to fetch hot tokens: \" + error.message });\n    }\n  });\n  \n  // GET /api/analytics/performance - Detection performance metrics\n  app.get('/api/analytics/performance', async (req, res) => {\n    try {\n      const stats7d = await storage.getRiskStatistics(7);\n      const stats30d = await storage.getRiskStatistics(30);\n      \n      const performance = {\n        last7Days: stats7d ? {\n          detectionRate: stats7d.totalAnalyzed > 0 \n            ? ((stats7d.rugDetected / stats7d.totalAnalyzed) * 100).toFixed(2)\n            : \"0.00\",\n          falsePositiveRate: stats7d.totalAnalyzed > 0 \n            ? ((stats7d.falsePositives / stats7d.totalAnalyzed) * 100).toFixed(2)\n            : \"0.00\",\n          coverage: stats7d.totalAnalyzed,\n          avgAnalysisTime: \"~2s\", // Static for now\n        } : null,\n        last30Days: stats30d ? {\n          detectionRate: stats30d.totalAnalyzed > 0 \n            ? ((stats30d.rugDetected / stats30d.totalAnalyzed) * 100).toFixed(2)\n            : \"0.00\",\n          falsePositiveRate: stats30d.totalAnalyzed > 0 \n            ? ((stats30d.falsePositives / stats30d.totalAnalyzed) * 100).toFixed(2)\n            : \"0.00\",\n          coverage: stats30d.totalAnalyzed,\n          avgAnalysisTime: \"~2s\", // Static for now\n        } : null,\n      };\n      \n      res.json(performance);\n    } catch (error: any) {\n      console.error(\"Error fetching performance metrics:\", error);\n      res.status(500).json({ message: \"Failed to fetch performance metrics: \" + error.message });\n    }\n  });\n  \n  // ============================================================================\n  // PORTFOLIO ROUTES\n  // ============================================================================\n  \n  // GET /api/portfolio/positions - Get user's portfolio positions\n  app.get('/api/portfolio/positions', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const positions = await storage.getPortfolioPositions(userId);\n      res.json(positions);\n    } catch (error: any) {\n      console.error(\"Error fetching portfolio:\", error);\n      res.status(500).json({ message: \"Failed to fetch portfolio: \" + error.message });\n    }\n  });\n  \n  // POST /api/portfolio/transactions - Record a new transaction\n  app.post('/api/portfolio/transactions', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { insertPortfolioTransactionSchema } = await import('@shared/schema');\n      \n      const result = insertPortfolioTransactionSchema.safeParse(req.body);\n      if (!result.success) {\n        return res.status(400).json({\n          message: \"Invalid request\",\n          errors: result.error.errors,\n        });\n      }\n      \n      const { tokenAddress, txType, quantity, priceUsd, feeUsd, note, executedAt } = result.data;\n      \n      const txResult = await storage.recordTransaction(userId, {\n        tokenAddress,\n        txType,\n        quantity: String(quantity),\n        priceUsd: priceUsd !== undefined ? String(priceUsd) : undefined,\n        feeUsd: feeUsd !== undefined ? String(feeUsd) : undefined,\n        note,\n        executedAt: executedAt ? new Date(executedAt) : new Date(),\n      });\n      \n      res.status(201).json(txResult);\n    } catch (error: any) {\n      console.error(\"Error recording transaction:\", error);\n      \n      if (error.message?.includes('Insufficient holdings') || \n          error.message?.includes('negative quantity')) {\n        return res.status(400).json({ message: error.message });\n      }\n      \n      res.status(500).json({ message: \"Failed to record transaction: \" + error.message });\n    }\n  });\n  \n  // GET /api/portfolio/transactions - Get transaction history\n  app.get('/api/portfolio/transactions', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const tokenAddress = req.query.tokenAddress as string | undefined;\n      \n      const transactions = await storage.getTransactionHistory(userId, tokenAddress);\n      res.json(transactions);\n    } catch (error: any) {\n      console.error(\"Error fetching transactions:\", error);\n      res.status(500).json({ message: \"Failed to fetch transactions: \" + error.message });\n    }\n  });\n  \n  // DELETE /api/portfolio/positions/:tokenAddress - Delete a position\n  app.delete('/api/portfolio/positions/:tokenAddress', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { tokenAddress } = req.params;\n      \n      await storage.deletePosition(userId, tokenAddress);\n      res.status(204).send();\n    } catch (error: any) {\n      console.error(\"Error deleting position:\", error);\n      res.status(500).json({ message: \"Failed to delete position: \" + error.message });\n    }\n  });\n  \n  // ============================================================================\n  // PRICE ALERTS ROUTES\n  // ============================================================================\n  \n  // GET /api/alerts - Get user's price alerts\n  app.get('/api/alerts', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const alerts = await storage.getPriceAlerts(userId);\n      res.json(alerts);\n    } catch (error: any) {\n      console.error(\"Error fetching alerts:\", error);\n      res.status(500).json({ message: \"Failed to fetch alerts: \" + error.message });\n    }\n  });\n  \n  // POST /api/alerts - Create a new price alert\n  app.post('/api/alerts', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { insertPriceAlertSchema } = await import('@shared/schema');\n      \n      const result = insertPriceAlertSchema.safeParse(req.body);\n      if (!result.success) {\n        return res.status(400).json({\n          message: \"Invalid request\",\n          errors: result.error.errors,\n        });\n      }\n      \n      const { tokenAddress, alertType, targetValue, lookbackWindowMinutes } = result.data;\n      \n      const alert = await storage.createPriceAlert({\n        userId,\n        tokenAddress,\n        alertType,\n        targetValue: typeof targetValue === 'number' ? targetValue.toString() : targetValue,\n        lookbackWindowMinutes,\n        isActive: true,\n        lastPrice: null,\n        triggeredAt: null,\n        cancelledAt: null,\n      });\n      \n      res.status(201).json(alert);\n    } catch (error: any) {\n      console.error(\"Error creating alert:\", error);\n      \n      if (error.message?.includes('unique constraint') || error.code === '23505') {\n        return res.status(409).json({ \n          message: \"You already have this alert configured\" \n        });\n      }\n      \n      res.status(500).json({ message: \"Failed to create alert: \" + error.message });\n    }\n  });\n  \n  // PATCH /api/alerts/:id - Update alert (toggle active/inactive)\n  app.patch('/api/alerts/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      const { isActive } = req.body;\n      \n      // Verify ownership\n      const alerts = await storage.getPriceAlerts(userId);\n      if (!alerts.find(a => a.id === id)) {\n        return res.status(404).json({ message: \"Alert not found\" });\n      }\n      \n      const updated = await storage.updatePriceAlert(id, { isActive });\n      res.json(updated);\n    } catch (error: any) {\n      console.error(\"Error updating alert:\", error);\n      res.status(500).json({ message: \"Failed to update alert: \" + error.message });\n    }\n  });\n  \n  // DELETE /api/alerts/:id - Delete alert\n  app.delete('/api/alerts/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      \n      await storage.deletePriceAlert(userId, id);\n      res.status(204).send();\n    } catch (error: any) {\n      console.error(\"Error deleting alert:\", error);\n      res.status(500).json({ message: \"Failed to delete alert: \" + error.message });\n    }\n  });\n  \n  // POST /api/analyze-token - Analyze a Solana token for rug pull risks\n  // PROTECTED: Requires active subscription OR 10M+ tokens\n  app.post(\"/api/analyze-token\", hasActiveAccess, async (req, res) => {\n    try {\n      // Validate request body\n      const result = analyzeTokenSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        return res.status(400).json({\n          error: \"Invalid request\",\n          details: result.error.errors,\n        });\n      }\n\n      const { tokenAddress } = result.data;\n\n      // Perform token analysis\n      const analysis = await tokenAnalyzer.analyzeToken(tokenAddress);\n      \n      // Get userId if authenticated\n      const userId = (req as any).user?.claims?.sub;\n      \n      // Run AI blacklist analysis in background (don't block response)\n      blacklist.analyzeAndFlag(analysis, userId).catch(err => {\n        console.error(\"Background blacklist analysis error:\", err);\n      });\n      \n      // Check if mint/freeze authority is blacklisted\n      const blacklistChecks = await Promise.all([\n        analysis.mintAuthority.authorityAddress \n          ? blacklist.checkBlacklist(analysis.mintAuthority.authorityAddress)\n          : Promise.resolve({ isBlacklisted: false, severity: 0, labels: [], warnings: [] }),\n        analysis.freezeAuthority.authorityAddress\n          ? blacklist.checkBlacklist(analysis.freezeAuthority.authorityAddress)\n          : Promise.resolve({ isBlacklisted: false, severity: 0, labels: [], warnings: [] }),\n        blacklist.checkBlacklist(tokenAddress),\n      ]);\n      \n      // Add blacklist info to response\n      const responseWithBlacklist = {\n        ...analysis,\n        blacklistInfo: {\n          mintAuthority: blacklistChecks[0],\n          freezeAuthority: blacklistChecks[1],\n          token: blacklistChecks[2],\n        },\n      };\n\n      return res.json(responseWithBlacklist);\n    } catch (error) {\n      console.error(\"Token analysis error:\", error);\n      \n      return res.status(500).json({\n        error: \"Analysis failed\",\n        message: error instanceof Error ? error.message : \"Unknown error occurred\",\n      });\n    }\n  });\n\n  // POST /api/compare-tokens - Compare multiple tokens side-by-side\n  // Validation schema: accept array of 2-5 token addresses\n  const compareTokensSchema = z.object({\n    tokenAddresses: z.array(z.string().min(32).max(44)).min(2).max(5),\n  });\n\n  app.post(\"/api/compare-tokens\", async (req, res) => {\n    try {\n      // Validate request body\n      const result = compareTokensSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        return res.status(400).json({\n          error: \"Invalid request\",\n          details: result.error.errors,\n          message: \"Please provide 2-5 valid token addresses\",\n        });\n      }\n\n      const { tokenAddresses } = result.data;\n\n      // Analyze each token in parallel\n      const analysisPromises = tokenAddresses.map(async (tokenAddress) => {\n        try {\n          const analysis = await tokenAnalyzer.analyzeToken(tokenAddress);\n          \n          // Get userId if authenticated (optional)\n          const userId = (req as any).user?.claims?.sub;\n          \n          // Run AI blacklist analysis in background (don't block response)\n          if (userId) {\n            blacklist.analyzeAndFlag(analysis, userId).catch(err => {\n              console.error(\"Background blacklist analysis error:\", err);\n            });\n          }\n          \n          // Check if mint/freeze authority is blacklisted\n          const blacklistChecks = await Promise.all([\n            analysis.mintAuthority.authorityAddress \n              ? blacklist.checkBlacklist(analysis.mintAuthority.authorityAddress)\n              : Promise.resolve({ isBlacklisted: false, severity: 0, labels: [], warnings: [] }),\n            analysis.freezeAuthority.authorityAddress\n              ? blacklist.checkBlacklist(analysis.freezeAuthority.authorityAddress)\n              : Promise.resolve({ isBlacklisted: false, severity: 0, labels: [], warnings: [] }),\n            blacklist.checkBlacklist(tokenAddress),\n          ]);\n          \n          return {\n            ...analysis,\n            blacklistInfo: {\n              mintAuthority: blacklistChecks[0],\n              freezeAuthority: blacklistChecks[1],\n              token: blacklistChecks[2],\n            },\n          };\n        } catch (error) {\n          console.error(`Error analyzing token ${tokenAddress}:`, error);\n          // Return error object for this specific token\n          return {\n            tokenAddress,\n            error: true,\n            message: error instanceof Error ? error.message : \"Analysis failed\",\n          };\n        }\n      });\n\n      // Wait for all analyses to complete\n      const results = await Promise.all(analysisPromises);\n\n      return res.json({\n        comparisons: results,\n        comparedAt: Date.now(),\n      });\n    } catch (error) {\n      console.error(\"Token comparison error:\", error);\n      \n      return res.status(500).json({\n        error: \"Comparison failed\",\n        message: error instanceof Error ? error.message : \"Unknown error occurred\",\n      });\n    }\n  });\n\n  // Subscription code redemption\n  const redeemCodeSchema = z.object({\n    code: z.string().min(1).max(50).trim().toUpperCase(),\n  });\n\n  app.post('/api/redeem-code', isAuthenticated, async (req: any, res) => {\n    try {\n      const { code } = redeemCodeSchema.parse(req.body);\n      const userId = req.user.claims.sub;\n\n      const result = await storage.redeemCode(userId, code);\n\n      if (!result.success) {\n        return res.status(400).json({ message: result.message });\n      }\n\n      return res.json({\n        message: result.message,\n        subscription: result.subscription,\n      });\n    } catch (error) {\n      console.error(\"Code redemption error:\", error);\n      return res.status(500).json({\n        error: \"Redemption failed\",\n        message: error instanceof Error ? error.message : \"Unknown error\",\n      });\n    }\n  });\n\n  // Vanity address generator routes\n  const vanityEstimateSchema = z.object({\n    pattern: z.string().min(1).max(10),\n    matchType: z.enum(['prefix', 'suffix', 'contains']),\n  });\n\n  app.post('/api/vanity/estimate', isAuthenticated, async (req, res) => {\n    try {\n      const { pattern, matchType } = vanityEstimateSchema.parse(req.body);\n      const estimate = VanityAddressGenerator.estimateDifficulty(pattern, matchType);\n      return res.json(estimate);\n    } catch (error) {\n      console.error(\"Vanity estimate error:\", error);\n      return res.status(400).json({\n        error: \"Invalid request\",\n        message: error instanceof Error ? error.message : \"Unknown error\",\n      });\n    }\n  });\n\n  const vanityGenerateSchema = z.object({\n    pattern: z.string().min(1).max(10),\n    matchType: z.enum(['prefix', 'suffix', 'contains']),\n    caseSensitive: z.boolean().optional(),\n    maxAttempts: z.number().min(1000).max(50_000_000).optional(),\n  });\n\n  app.post('/api/vanity/generate', isAuthenticated, async (req, res) => {\n    try {\n      const options = vanityGenerateSchema.parse(req.body);\n      const generator = new VanityAddressGenerator();\n      \n      // Set a timeout to prevent hanging forever\n      const timeout = setTimeout(() => {\n        generator.stop();\n      }, 60_000); // 60 second max\n\n      const result = await generator.generate(options);\n      clearTimeout(timeout);\n\n      if (!result) {\n        return res.status(404).json({\n          error: \"No match found\",\n          message: `Could not find a matching address within ${options.maxAttempts || 10_000_000} attempts`,\n        });\n      }\n\n      return res.json(result);\n    } catch (error) {\n      console.error(\"Vanity generation error:\", error);\n      return res.status(500).json({\n        error: \"Generation failed\",\n        message: error instanceof Error ? error.message : \"Unknown error\",\n      });\n    }\n  });\n\n  // ========================================\n  // SOCIAL FEATURES - COMMENTS API\n  // ========================================\n  \n  // POST /api/comments - Create comment\n  app.post('/api/comments', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { socialService } = await import('./services/social-service');\n      \n      // Rate limiting\n      const rateLimit = await socialService.checkRateLimit(userId, 'comment');\n      if (!rateLimit.allowed) {\n        return res.status(429).json({ \n          message: `Rate limit exceeded. Please wait before commenting again.`,\n          remaining: rateLimit.remaining \n        });\n      }\n      \n      // Validate input\n      const { tokenAddress, content, rating } = req.body;\n      if (!tokenAddress || !content) {\n        return res.status(400).json({ message: 'Token address and content required' });\n      }\n      \n      // Sanitize content\n      const sanitizedContent = socialService.sanitizeContent(content);\n      \n      // Spam detection\n      const isSpam = await socialService.detectSpam(sanitizedContent);\n      if (isSpam) {\n        return res.status(400).json({ message: 'Content flagged as spam' });\n      }\n      \n      const comment = await storage.createComment({\n        userId,\n        tokenAddress,\n        commentText: sanitizedContent,\n        rating: rating || null,\n      });\n      \n      // Award points for commenting\n      await socialService.awardPoints(userId, 'comment', 5, tokenAddress);\n      \n      res.json(comment);\n    } catch (error) {\n      console.error('Error creating comment:', error);\n      res.status(500).json({ message: 'Failed to create comment' });\n    }\n  });\n  \n  // GET /api/comments/:tokenAddress - Get all comments\n  app.get('/api/comments/:tokenAddress', async (req, res) => {\n    try {\n      const { tokenAddress } = req.params;\n      const comments = await storage.getCommentsByToken(tokenAddress);\n      res.json(comments);\n    } catch (error) {\n      console.error('Error fetching comments:', error);\n      res.status(500).json({ message: 'Failed to fetch comments' });\n    }\n  });\n  \n  // GET /api/comments/flagged - Get flagged comments (admin only)\n  app.get('/api/comments/flagged', isAdmin, async (req, res) => {\n    try {\n      const comments = await storage.getFlaggedComments();\n      res.json(comments);\n    } catch (error) {\n      console.error('Error fetching flagged comments:', error);\n      res.status(500).json({ message: 'Failed to fetch flagged comments' });\n    }\n  });\n  \n  // POST /api/comments/:id/vote - Upvote/downvote\n  app.post('/api/comments/:id/vote', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      const { voteType } = req.body;\n      \n      if (!['upvote', 'downvote'].includes(voteType)) {\n        return res.status(400).json({ message: 'Invalid vote type' });\n      }\n      \n      // Check if already voted\n      const existingVote = await storage.getUserCommentVote(userId, id);\n      if (existingVote) {\n        if (existingVote.voteType === voteType) {\n          // Remove vote\n          await storage.removeCommentVote(userId, id);\n        } else {\n          // Update vote\n          await storage.removeCommentVote(userId, id);\n          await storage.voteComment({ userId, commentId: id, voteType: voteType as 'upvote' | 'downvote' });\n        }\n      } else {\n        await storage.voteComment({ userId, commentId: id, voteType: voteType as 'upvote' | 'downvote' });\n      }\n      \n      // Update vote counts\n      await storage.updateCommentVoteCounts(id);\n      \n      res.json({ success: true });\n    } catch (error) {\n      console.error('Error voting on comment:', error);\n      res.status(500).json({ message: 'Failed to vote on comment' });\n    }\n  });\n  \n  // DELETE /api/comments/:id - Delete own comment\n  app.delete('/api/comments/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      \n      await storage.deleteComment(id, userId);\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Error deleting comment:', error);\n      res.status(500).json({ message: 'Failed to delete comment' });\n    }\n  });\n  \n  // POST /api/comments/:id/flag - Flag inappropriate\n  app.post('/api/comments/:id/flag', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const comment = await storage.flagComment(id);\n      res.json(comment);\n    } catch (error) {\n      console.error('Error flagging comment:', error);\n      res.status(500).json({ message: 'Failed to flag comment' });\n    }\n  });\n  \n  // ========================================\n  // SOCIAL FEATURES - COMMUNITY VOTES API\n  // ========================================\n  \n  // POST /api/community-votes - Submit vote\n  app.post('/api/community-votes', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { socialService } = await import('./services/social-service');\n      \n      // Rate limiting\n      const rateLimit = await socialService.checkRateLimit(userId, 'vote');\n      if (!rateLimit.allowed) {\n        return res.status(429).json({ \n          message: `Rate limit exceeded. ${rateLimit.remaining} votes remaining.`,\n          remaining: rateLimit.remaining \n        });\n      }\n      \n      const { tokenAddress, voteType, confidence } = req.body;\n      if (!tokenAddress || !voteType) {\n        return res.status(400).json({ message: 'Token address and vote type required' });\n      }\n      \n      if (!['safe', 'risky', 'scam'].includes(voteType)) {\n        return res.status(400).json({ message: 'Invalid vote type' });\n      }\n      \n      // Check if already voted\n      const existingVote = await storage.getUserCommunityVote(tokenAddress, userId);\n      if (existingVote) {\n        // Update vote\n        const updated = await storage.updateCommunityVote(existingVote.id, {\n          voteType: voteType as 'safe' | 'risky' | 'scam',\n          confidence: confidence || 50,\n        });\n        \n        // Recalculate consensus\n        await socialService.aggregateVotes(tokenAddress);\n        \n        return res.json(updated);\n      }\n      \n      const vote = await storage.createCommunityVote({\n        userId,\n        tokenAddress,\n        voteType: voteType as 'safe' | 'risky' | 'scam',\n        confidence: confidence || 50,\n      });\n      \n      // Award points for voting\n      await socialService.awardPoints(userId, 'vote', 2, tokenAddress);\n      \n      // Recalculate consensus\n      await socialService.aggregateVotes(tokenAddress);\n      \n      res.json(vote);\n    } catch (error) {\n      console.error('Error submitting vote:', error);\n      res.status(500).json({ message: 'Failed to submit vote' });\n    }\n  });\n  \n  // GET /api/community-votes/:tokenAddress/summary - Get consensus\n  app.get('/api/community-votes/:tokenAddress/summary', async (req, res) => {\n    try {\n      const { tokenAddress } = req.params;\n      const summary = await storage.getCommunityVoteSummary(tokenAddress);\n      res.json(summary || null);\n    } catch (error) {\n      console.error('Error fetching vote summary:', error);\n      res.status(500).json({ message: 'Failed to fetch vote summary' });\n    }\n  });\n  \n  // PUT /api/community-votes/:id - Update vote\n  app.put('/api/community-votes/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const { voteType, confidence } = req.body;\n      \n      const updated = await storage.updateCommunityVote(id, {\n        voteType: voteType as 'safe' | 'risky' | 'scam',\n        confidence,\n      });\n      \n      res.json(updated);\n    } catch (error) {\n      console.error('Error updating vote:', error);\n      res.status(500).json({ message: 'Failed to update vote' });\n    }\n  });\n  \n  // DELETE /api/community-votes/:id - Delete vote\n  app.delete('/api/community-votes/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      \n      await storage.deleteCommunityVote(id, userId);\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Error deleting vote:', error);\n      res.status(500).json({ message: 'Failed to delete vote' });\n    }\n  });\n  \n  // ========================================\n  // SOCIAL FEATURES - USER PROFILES API\n  // ========================================\n  \n  // GET /api/profile/:userId - Get profile\n  app.get('/api/profile/:userId', async (req, res) => {\n    try {\n      const { userId } = req.params;\n      const profile = await storage.getUserProfile(userId);\n      \n      if (!profile) {\n        return res.status(404).json({ message: 'Profile not found' });\n      }\n      \n      res.json(profile);\n    } catch (error) {\n      console.error('Error fetching profile:', error);\n      res.status(500).json({ message: 'Failed to fetch profile' });\n    }\n  });\n  \n  // PUT /api/profile - Update own profile\n  app.put('/api/profile', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { socialService } = await import('./services/social-service');\n      \n      const { username, bio, visibility } = req.body;\n      \n      // Sanitize text inputs\n      const sanitizedBio = bio ? socialService.sanitizeContent(bio) : undefined;\n      \n      // Check if profile exists\n      let profile = await storage.getUserProfile(userId);\n      if (!profile) {\n        // Create profile\n        profile = await storage.createUserProfile({\n          userId,\n          username: username || null,\n          bio: sanitizedBio || null,\n          visibility: visibility || 'public',\n          reputationScore: 0,\n          contributionCount: 0,\n        });\n      } else {\n        // Update profile\n        profile = await storage.updateUserProfile(userId, {\n          username,\n          bio: sanitizedBio,\n          visibility,\n        });\n      }\n      \n      res.json(profile);\n    } catch (error) {\n      console.error('Error updating profile:', error);\n      res.status(500).json({ message: 'Failed to update profile' });\n    }\n  });\n  \n  // GET /api/profile/:userId/activities - Activity feed\n  app.get('/api/profile/:userId/activities', async (req, res) => {\n    try {\n      const { userId } = req.params;\n      const limit = parseInt(req.query.limit as string) || 50;\n      \n      const activities = await storage.getUserActivities(userId, limit);\n      res.json(activities);\n    } catch (error) {\n      console.error('Error fetching activities:', error);\n      res.status(500).json({ message: 'Failed to fetch activities' });\n    }\n  });\n  \n  // GET /api/leaderboard - Top users\n  app.get('/api/leaderboard', async (req, res) => {\n    try {\n      const limit = parseInt(req.query.limit as string) || 50;\n      const users = await storage.getTopUsers(limit);\n      res.json(users);\n    } catch (error) {\n      console.error('Error fetching leaderboard:', error);\n      res.status(500).json({ message: 'Failed to fetch leaderboard' });\n    }\n  });\n  \n  // ========================================\n  // SOCIAL FEATURES - WATCHLIST SHARING API\n  // ========================================\n  \n  // POST /api/watchlists/share - Make public, get share_slug\n  app.post('/api/watchlists/share', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { socialService } = await import('./services/social-service');\n      const { name, description, tokenAddresses, isPublic } = req.body;\n      \n      if (!name || !tokenAddresses || !Array.isArray(tokenAddresses)) {\n        return res.status(400).json({ message: 'Name and token addresses required' });\n      }\n      \n      const slug = socialService.generateShareSlug();\n      const sanitizedDescription = description ? socialService.sanitizeContent(description) : null;\n      \n      const sharedWatchlist = await storage.createSharedWatchlist({\n        ownerId: userId,\n        name,\n        description: sanitizedDescription,\n        shareSlug: slug,\n        isPublic: isPublic !== undefined ? isPublic : true,\n        followersCount: 0,\n      });\n      \n      res.json(sharedWatchlist);\n    } catch (error) {\n      console.error('Error sharing watchlist:', error);\n      res.status(500).json({ message: 'Failed to share watchlist' });\n    }\n  });\n  \n  // GET /api/watchlists/shared/:slug - Get by slug (public)\n  app.get('/api/watchlists/shared/:slug', async (req, res) => {\n    try {\n      const { slug } = req.params;\n      const watchlist = await storage.getSharedWatchlistBySlug(slug);\n      \n      if (!watchlist) {\n        return res.status(404).json({ message: 'Watchlist not found' });\n      }\n      \n      if (!watchlist.isPublic) {\n        return res.status(403).json({ message: 'This watchlist is private' });\n      }\n      \n      res.json(watchlist);\n    } catch (error) {\n      console.error('Error fetching shared watchlist:', error);\n      res.status(500).json({ message: 'Failed to fetch watchlist' });\n    }\n  });\n  \n  // POST /api/watchlists/:id/follow - Follow\n  app.post('/api/watchlists/:id/follow', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      \n      const follower = await storage.followWatchlist(userId, id);\n      res.json(follower);\n    } catch (error) {\n      console.error('Error following watchlist:', error);\n      res.status(500).json({ message: 'Failed to follow watchlist' });\n    }\n  });\n  \n  // DELETE /api/watchlists/:id/unfollow - Unfollow\n  app.delete('/api/watchlists/:id/unfollow', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      \n      await storage.unfollowWatchlist(userId, id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Error unfollowing watchlist:', error);\n      res.status(500).json({ message: 'Failed to unfollow watchlist' });\n    }\n  });\n  \n  // GET /api/watchlists/following - Get followed lists\n  app.get('/api/watchlists/following', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const watchlists = await storage.getFollowedWatchlists(userId);\n      res.json(watchlists);\n    } catch (error) {\n      console.error('Error fetching followed watchlists:', error);\n      res.status(500).json({ message: 'Failed to fetch followed watchlists' });\n    }\n  });\n  \n  // GET /api/watchlists/public - Browse public watchlists\n  app.get('/api/watchlists/public', async (req, res) => {\n    try {\n      const limit = parseInt(req.query.limit as string) || 20;\n      const watchlists = await storage.getPublicWatchlists(limit);\n      res.json(watchlists);\n    } catch (error) {\n      console.error('Error fetching public watchlists:', error);\n      res.status(500).json({ message: 'Failed to fetch public watchlists' });\n    }\n  });\n  \n  // ========================================\n  // SOCIAL FEATURES - TOKEN REPORTS API\n  // ========================================\n  \n  // POST /api/reports - Submit report\n  app.post('/api/reports', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { socialService } = await import('./services/social-service');\n      \n      // Rate limiting\n      const rateLimit = await socialService.checkRateLimit(userId, 'report');\n      if (!rateLimit.allowed) {\n        return res.status(429).json({ \n          message: `Rate limit exceeded. ${rateLimit.remaining} reports remaining.`,\n          remaining: rateLimit.remaining \n        });\n      }\n      \n      const { tokenAddress, reportType, evidence, severity } = req.body;\n      \n      if (!tokenAddress || !reportType || !evidence) {\n        return res.status(400).json({ message: 'Token address, report type, and evidence required' });\n      }\n      \n      if (!['scam', 'honeypot', 'soft_rug', 'other'].includes(reportType)) {\n        return res.status(400).json({ message: 'Invalid report type' });\n      }\n      \n      const sanitizedEvidence = socialService.sanitizeContent(evidence);\n      \n      const report = await storage.createTokenReport({\n        reporterId: userId,\n        tokenAddress,\n        reportType: reportType as 'scam' | 'honeypot' | 'soft_rug' | 'other',\n        evidence: sanitizedEvidence,\n        severityScore: severity || 3,\n        status: 'pending',\n      });\n      \n      // Award points for reporting\n      await socialService.awardPoints(userId, 'report', 10, tokenAddress);\n      \n      res.json(report);\n    } catch (error) {\n      console.error('Error submitting report:', error);\n      res.status(500).json({ message: 'Failed to submit report' });\n    }\n  });\n  \n  // GET /api/reports/:tokenAddress - Get reports\n  app.get('/api/reports/:tokenAddress', async (req, res) => {\n    try {\n      const { tokenAddress } = req.params;\n      const reports = await storage.getTokenReports(tokenAddress);\n      res.json(reports);\n    } catch (error) {\n      console.error('Error fetching reports:', error);\n      res.status(500).json({ message: 'Failed to fetch reports' });\n    }\n  });\n  \n  // PUT /api/reports/:id/review - Admin review\n  app.put('/api/reports/:id/review', isAdmin, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const { status, resolutionNotes } = req.body;\n      \n      if (!['pending', 'approved', 'dismissed'].includes(status)) {\n        return res.status(400).json({ message: 'Invalid status' });\n      }\n      \n      const report = await storage.updateTokenReport(id, {\n        status: status as 'pending' | 'approved' | 'dismissed',\n        resolutionNotes,\n      });\n      \n      res.json(report);\n    } catch (error) {\n      console.error('Error reviewing report:', error);\n      res.status(500).json({ message: 'Failed to review report' });\n    }\n  });\n  \n  // GET /api/reports/pending - Admin pending queue\n  app.get('/api/reports/pending', isAdmin, async (req, res) => {\n    try {\n      const reports = await storage.getPendingReports();\n      res.json(reports);\n    } catch (error) {\n      console.error('Error fetching pending reports:', error);\n      res.status(500).json({ message: 'Failed to fetch pending reports' });\n    }\n  });\n  \n  // ========================================\n  // SOCIAL FEATURES - SOCIAL SHARING API\n  // ========================================\n  \n  // GET /api/share/preview/:tokenAddress - OG meta tags\n  app.get('/api/share/preview/:tokenAddress', async (req, res) => {\n    try {\n      const { tokenAddress } = req.params;\n      \n      // You could fetch token analysis here to generate preview\n      const baseUrl = process.env.REPL_SLUG \n        ? `https://${process.env.REPL_SLUG}.${process.env.REPL_OWNER}.repl.co`\n        : 'http://localhost:5000';\n      \n      const preview = {\n        url: `${baseUrl}/?token=${tokenAddress}`,\n        title: `Solana Rug Killer - Token Analysis`,\n        description: `Analyze ${tokenAddress} for rug pull risks`,\n        image: `${baseUrl}/favicon.png`,\n      };\n      \n      res.json(preview);\n    } catch (error) {\n      console.error('Error generating preview:', error);\n      res.status(500).json({ message: 'Failed to generate preview' });\n    }\n  });\n  \n  // GET /api/share/twitter/:tokenAddress - Twitter URL\n  app.get('/api/share/twitter/:tokenAddress', async (req, res) => {\n    try {\n      const { tokenAddress } = req.params;\n      const baseUrl = process.env.REPL_SLUG \n        ? `https://${process.env.REPL_SLUG}.${process.env.REPL_OWNER}.repl.co`\n        : 'http://localhost:5000';\n      \n      const url = `${baseUrl}/?token=${tokenAddress}`;\n      const text = `Check out this token analysis on Solana Rug Killer`;\n      const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;\n      \n      res.json({ url: twitterUrl });\n    } catch (error) {\n      console.error('Error generating Twitter URL:', error);\n      res.status(500).json({ message: 'Failed to generate Twitter URL' });\n    }\n  });\n  \n  // GET /api/share/telegram/:tokenAddress - Telegram URL\n  app.get('/api/share/telegram/:tokenAddress', async (req, res) => {\n    try {\n      const { tokenAddress } = req.params;\n      const baseUrl = process.env.REPL_SLUG \n        ? `https://${process.env.REPL_SLUG}.${process.env.REPL_OWNER}.repl.co`\n        : 'http://localhost:5000';\n      \n      const url = `${baseUrl}/?token=${tokenAddress}`;\n      const text = `Check out this token analysis on Solana Rug Killer`;\n      const telegramUrl = `https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`;\n      \n      res.json({ url: telegramUrl });\n    } catch (error) {\n      console.error('Error generating Telegram URL:', error);\n      res.status(500).json({ message: 'Failed to generate Telegram URL' });\n    }\n  });\n\n  // ========================================\n  // ADMIN ROUTES\n  // ========================================\n\n  // Check if current user has admin access\n  app.get('/api/admin/check', isAuthenticated, async (req: any, res) => {\n    const adminEmails = (process.env.ADMIN_EMAILS || '').split(',').map(e => e.trim());\n    const userEmail = req.user.claims.email;\n    res.json({ isAdmin: adminEmails.includes(userEmail) });\n  });\n\n  // ========================================\n  // CREATOR WALLET ROUTES (Admin Only)\n  // ========================================\n\n  // GET /api/admin/creator-wallet - View creator wallet info (NO private key)\n  app.get('/api/admin/creator-wallet', isAdmin, async (req, res) => {\n    try {\n      const { getCreatorWallet } = await import('./creator-wallet');\n      const wallet = getCreatorWallet();\n      const info = await wallet.getWalletInfo();\n      \n      res.json({\n        publicKey: info.publicKey,\n        balance: info.balance,\n        isConfigured: info.isConfigured,\n        pumpFunUrl: info.publicKey ? `https://pump.fun/profile/${info.publicKey}` : null,\n      });\n    } catch (error) {\n      console.error(\"Error fetching creator wallet:\", error);\n      res.status(500).json({ message: \"Failed to fetch creator wallet\" });\n    }\n  });\n\n  // POST /api/admin/creator-wallet/generate - Generate new wallet (returns private key ONCE)\n  app.post('/api/admin/creator-wallet/generate', isAdmin, async (req, res) => {\n    try {\n      const { CreatorWalletService } = await import('./creator-wallet');\n      const newWallet = CreatorWalletService.generateNewWallet();\n      \n      res.json({\n        publicKey: newWallet.publicKey,\n        privateKey: newWallet.privateKey,\n        warning: 'SAVE THIS PRIVATE KEY IMMEDIATELY! Import it into Phantom wallet. It will never be shown again.',\n        nextSteps: [\n          '1. Copy the private key above',\n          '2. Open Phantom wallet â†’ Settings â†’ Import Private Key',\n          '3. Paste the private key',\n          '4. Add CREATOR_WALLET_PRIVATE_KEY to Replit Secrets',\n          '5. Restart the application',\n          '6. Use this wallet to create tokens on pump.fun',\n        ],\n      });\n    } catch (error) {\n      console.error(\"Error generating creator wallet:\", error);\n      res.status(500).json({ message: \"Failed to generate wallet\" });\n    }\n  });\n\n  // ========================================\n  // TOKEN DEPLOYMENT ROUTES (Admin Only)\n  // ========================================\n  // NOTE: Token deployment functionality is not yet implemented.\n  // These routes are disabled until the token-deployer module is created.\n\n  // POST /api/admin/token/deploy - Deploy SPL token (NOT IMPLEMENTED)\n  app.post('/api/admin/token/deploy', isAdmin, async (req, res) => {\n    res.status(501).json({ \n      message: 'Token deployment feature is not yet implemented. Please use Solana CLI or other tools for now.' \n    });\n  });\n\n  // GET /api/admin/token/info/:mintAddress - Get token info (NOT IMPLEMENTED)\n  app.get('/api/admin/token/info/:mintAddress', isAdmin, async (req, res) => {\n    res.status(501).json({ \n      message: 'Token info feature is not yet implemented.' \n    });\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":73243},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"replit.md":{"content":"# Solana Rug Killer - Token Risk Analysis Platform\n\n## Overview\n\nSolana Rug Killer is a comprehensive web application designed to protect Solana traders from rug pulls and scams. It provides real-time token analysis using 52+ risk metrics, integrating data from multiple sources including Rugcheck, GoPlus Security, DexScreener, Jupiter, and Birdeye. The platform features AI-powered blacklist detection, Telegram and Discord bots for instant analysis, and premium features like smart money tracking and PumpFun launch alerts.\n\nThe application uses an inverted risk scoring system (0=dangerous, 100=safe) with color-coded risk levels: GREEN (70-100), YELLOW (40-70), ORANGE (20-40), RED (0-20). It includes subscription-based access control via Whop integration and token-gated access for holders of 10M+ $ANTIRUG tokens (contract: `2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt`).\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## Recent Changes\n\n**November 13, 2025:**\n- Created comprehensive Bot Usage Guide page (`/bot-guide`):\n  - Detailed command reference for both Telegram and Discord bots\n  - Full examples with sample responses for each command\n  - Usage tips, best practices, and red flag warnings\n  - Tabbed interface separating Telegram and Discord instructions\n  - Accessible from header navigation (Automations > Bot Usage Guide), footer, and documentation page\n- Implemented Telegram bot command autocomplete menu using setMyCommands() API (5 commands: start, execute, first20, devtorture, blacklist)\n- **Telegram bot is currently ungated** - all features are publicly accessible with no subscription/token requirements\n- Comprehensive codebase cleanup for GitHub deployment:\n  - Removed all TODO/FIXME comments\n  - Removed excessive console.log statements (retained only critical startup and error messages)\n  - Removed commented-out code blocks\n  - Cleaned up development comments and references\n  - Streamlined logging for clean production logs\n- Added quick links in bot responses for cross-platform analysis:\n  - AXiom trading platform (axiom.trade - Y Combinator-backed Solana DEX)\n  - Padre bot (corrected username to @padre_tg_bot)\n  - Birdeye analytics platform\n  - GMGN, Solscan, DexScreener, and Rugcheck\n- Improved API error handling:\n  - Birdeye API calls skip gracefully when API key is not configured\n  - Jupiter API failures handled silently without error spam\n  - Better validation for invalid Solana addresses\n  - Analysis continues to work with core RPC data even when optional APIs fail\n- Codebase is production-ready and GitHub-ready\n\n## System Architecture\n\n### Frontend Architecture\n\n**Technology Stack:**\n- React 18 with TypeScript for type safety\n- Vite for fast development and optimized production builds\n- TanStack Query (React Query) for server state management\n- Wouter for client-side routing\n- Tailwind CSS with shadcn/ui component library\n- Recharts for data visualization\n\n**Design Patterns:**\n- Component-based architecture with reusable UI components from shadcn/ui\n- Custom hooks for authentication (`useAuth`) and API interactions\n- Dark theme with warm cyberpunk aesthetic (near-black backgrounds with warm orange accents)\n- Responsive design with mobile-first approach\n\n**Key Frontend Features:**\n- Token analysis dashboard with real-time risk scoring\n- Portfolio tracking and watchlist management\n- Price alerts and notification system\n- Social features (comments, votes, leaderboard)\n- Analytics dashboard with historical tracking\n\n### Backend Architecture\n\n**Technology Stack:**\n- Node.js with Express.js REST API\n- TypeScript for type-safe server code\n- Drizzle ORM for database interactions\n- Passport.js with OpenID Connect for Replit Auth\n- WebSocket support for real-time updates (Telegram/Discord bots)\n\n**Design Patterns:**\n- Service-oriented architecture with dedicated services for each external API\n- RPC balancer for load distribution across multiple Solana RPC providers (Helius, Alchemy, Ankr, Serum, Public)\n- Worker pattern for background jobs (analytics, alerts, social aggregation)\n- Caching layer with TTL-based price cache (20-second default)\n- Middleware-based authentication and access control\n\n**Core Services:**\n- `SolanaTokenAnalyzer`: Main analysis engine coordinating all data sources\n- `RugcheckService`: Rugcheck API integration\n- `GoPlusSecurityService`: GoPlus security data\n- `DexScreenerService`: Market data and liquidity info\n- `JupiterPriceService`: Price data from Jupiter aggregator\n- `BirdeyeAPI`: Enhanced market data with LP burn status\n- `PumpFunAPI`: Pump.fun token detection and bonding curve tracking\n- `LPChecker`: Liquidity pool burn verification\n- `RpcBalancer`: Intelligent RPC provider selection with fallback\n\n**Risk Analysis Engine:**\n- 52-metric comprehensive analysis including:\n  - Mint/freeze authority checks\n  - Top holder concentration (excludes known exchanges, protocols, bundlers)\n  - Bundle detection for coordinated wallet activity\n  - Liquidity pool status and burn verification\n  - Market cap and volume analysis\n  - Social sentiment from Rugcheck and GoPlus\n- AI-powered verdict system with natural language recommendations\n- Automatic blacklist flagging based on 6 detection rules\n\n### Data Storage Solutions\n\n**Database:** PostgreSQL via Neon (serverless)\n\n**Schema Design:**\n- `users`: User accounts and profiles\n- `subscriptions`: Subscription tiers and status (Whop integration)\n- `subscription_codes`: Lifetime access codes with redemption tracking\n- `wallet_connections`: Solana wallet addresses for token-gated access\n- `watchlist_entries`: User token watchlists\n- `portfolio_positions`: Trading portfolio tracking\n- `price_alerts`: User-configured price alerts\n- `token_snapshots`: Historical token data for trend analysis\n- `trending_tokens`: Hot tokens feed with auto-refresh\n- `risk_statistics`: Aggregate rug pull metrics\n- `bad_actor_labels`: AI blacklist system\n- `kol_wallets`: KOL (Key Opinion Leader) wallet tracking for smart money alerts\n- `user_profiles`: Social features (reputation, bio)\n- `token_comments`: Community discussion\n- `community_votes`: Token safety voting\n- `shared_watchlists`: Public watchlist sharing\n\n**Session Management:**\n- PostgreSQL-backed session store via connect-pg-simple\n- 7-day session TTL with automatic renewal\n- Secure cookies (httpOnly, secure flags)\n\n### Authentication and Authorization\n\n**Authentication:**\n- Replit Auth via OpenID Connect (Passport.js strategy)\n- Session-based authentication with encrypted cookies\n- Token refresh handling for expired sessions\n\n**Authorization Tiers:**\n- **Public**: Landing pages, documentation\n- **Free**: Basic token analysis (rate-limited)\n- **Individual ($20)**: Full analysis, bot access, limited alerts\n- **Group ($100)**: Team features, unlimited alerts\n- **Lifetime**: Token-gated (10M+ $ANTIRUG) or redeemable codes\n\n**Access Control:**\n- `hasActiveAccess` middleware gates premium endpoints\n- Checks both Whop subscription status AND token holdings\n- Admin bypass via `ADMIN_EMAILS` environment variable\n- Subscription verification includes expiration and payment status\n\n### External Dependencies\n\n**Solana Blockchain:**\n- `@solana/web3.js`: Blockchain interaction (v1.98.4)\n- `@solana/spl-token`: Token program operations\n- Multiple RPC providers with automatic failover:\n  - Helius (primary, requires `HELIUS_KEY`)\n  - Alchemy (secondary, requires `ALCHEMY_KEY`)\n  - Ankr (backup)\n  - Serum (backup)\n  - Public Solana RPC (fallback)\n\n**Third-Party APIs:**\n- **Rugcheck** (`https://api.rugcheck.xyz/v1`): Token safety reports (optional `RUGCHECK_API_KEY`)\n- **GoPlus Security** (`https://api.gopluslabs.io/api/v1`): Security analysis\n- **DexScreener** (`https://api.dexscreener.com`): Market data and liquidity\n- **Jupiter** (`https://api.jup.ag/price/v2`): Price aggregation\n- **Birdeye** (`https://public-api.birdeye.so`): Enhanced market data (optional `BIRDEYE_API_KEY`)\n- **Pump.fun** (`https://pump.fun/api`): Token launch detection\n\n**Payment & Subscription:**\n- **Whop SDK**: Subscription management (requires `WHOP_API_KEY`, `WHOP_APP_ID`, `WHOP_COMPANY_ID`)\n- Solana crypto payments (requires `PHANTOM_WALLET_ADDRESS` for receiving)\n\n**Bot Platforms:**\n- **Telegram** via `telegraf`: Bot commands and alerts (requires `TELEGRAM_BOT_TOKEN`)\n- **Discord** via `discord.js`: Slash commands and rich embeds (requires `DISCORD_BOT_TOKEN`, `DISCORD_CLIENT_ID`)\n\n**Development Tools:**\n- **Playwright**: E2E testing\n- **Jest**: Unit and integration testing\n- **Supertest**: API integration testing\n- **Nock**: HTTP mocking for tests\n- **TypeScript**: Type safety across stack\n- **ESBuild**: Production bundling\n- **Drizzle Kit**: Database migrations\n\n**Infrastructure:**\n- **Replit**: Hosting and deployment\n- **Neon**: Serverless PostgreSQL database (requires `DATABASE_URL`)\n- **WebSocket**: Real-time bot communication","size_bytes":8890},"client/src/components/footer.tsx":{"content":"import { Shield, Copy } from \"lucide-react\";\nimport { SiTelegram, SiDiscord, SiGithub } from \"react-icons/si\";\nimport { Button } from \"@/components/ui/button\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { CONTRACT_ADDRESS } from \"@/constants\";\n\ninterface BotInviteLinks {\n  telegram?: string;\n  discord?: string;\n  message?: string;\n}\n\nexport function Footer() {\n  const { toast } = useToast();\n  const { data: botLinks } = useQuery<BotInviteLinks>({\n    queryKey: ['/api/bot/invite-links'],\n    retry: false,\n    refetchOnWindowFocus: false,\n  });\n\n  const copyCA = () => {\n    navigator.clipboard.writeText(CONTRACT_ADDRESS);\n    toast({\n      title: \"Copied!\",\n      description: \"Contract address copied to clipboard\",\n    });\n  };\n\n  return (\n    <footer className=\"border-t bg-background\">\n      <div className=\"max-w-7xl mx-auto px-6 py-8\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8 mb-6\">\n          <div>\n            <div className=\"flex items-center gap-2 mb-3\">\n              <Shield className=\"h-5 w-5 text-primary\" />\n              <span className=\"text-sm font-semibold\">Solana Rug Killer</span>\n            </div>\n            <p className=\"text-sm text-muted-foreground mb-3\">\n              Protecting Solana investors from rug pulls since 2025\n            </p>\n            <div className=\"text-xs text-muted-foreground\">\n              <p className=\"font-semibold mb-1\">Official Token: $ANTIRUG</p>\n              <div \n                className=\"flex items-center gap-1 bg-muted px-2 py-1 rounded group cursor-pointer hover-elevate\" \n                onClick={copyCA}\n                data-testid=\"button-copy-ca-footer\"\n              >\n                <code className=\"font-mono text-[10px] flex-1 truncate\">\n                  {CONTRACT_ADDRESS}\n                </code>\n                <Copy className=\"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0\" />\n              </div>\n            </div>\n          </div>\n          \n          <div>\n            <h3 className=\"text-sm font-semibold mb-3\">Resources</h3>\n            <ul className=\"space-y-2 text-sm text-muted-foreground\">\n              <li><a href=\"/pricing\" className=\"hover:text-foreground\">Pricing</a></li>\n              <li><a href=\"/documentation\" className=\"hover:text-foreground\">Documentation</a></li>\n              <li><a href=\"/bot-guide\" className=\"hover:text-foreground\">Bot Guide</a></li>\n              <li><a href=\"/about\" className=\"hover:text-foreground\">About</a></li>\n              <li><a href=\"https://github.com/drixindustries/rugkillleronsol#roadmap\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"hover:text-foreground\" data-testid=\"footer-link-roadmap\">Roadmap</a></li>\n              <li><a href=\"https://docs.solana.com\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"hover:text-foreground\">Solana Docs</a></li>\n            </ul>\n          </div>\n          \n          <div>\n            <h3 className=\"text-sm font-semibold mb-3\">Legal</h3>\n            <ul className=\"space-y-2 text-sm text-muted-foreground\">\n              <li><a href=\"/terms\" className=\"hover:text-foreground\" data-testid=\"footer-link-terms\">Terms of Service</a></li>\n              <li><a href=\"/privacy\" className=\"hover:text-foreground\" data-testid=\"footer-link-privacy\">Privacy Policy</a></li>\n            </ul>\n          </div>\n          \n          <div className=\"lg:col-span-2\">\n            <h3 className=\"text-sm font-semibold mb-3\">Community</h3>\n            <div className=\"space-y-3\">\n              <div className=\"flex gap-2\">\n                <Button \n                  variant=\"outline\"\n                  size=\"icon\"\n                  asChild\n                  className=\"min-h-[44px] min-w-[44px]\"\n                  data-testid=\"footer-button-github\"\n                >\n                  <a href=\"https://github.com/drixindustries/rugkillleronsol\" target=\"_blank\" rel=\"noopener noreferrer\" title=\"GitHub\" aria-label=\"View on GitHub\">\n                    <SiGithub className=\"h-5 w-5\" />\n                  </a>\n                </Button>\n                \n                {botLinks?.telegram && (\n                  <Button \n                    variant=\"outline\"\n                    size=\"icon\"\n                    asChild\n                    className=\"min-h-[44px] min-w-[44px]\"\n                    data-testid=\"footer-button-telegram\"\n                  >\n                    <a href={botLinks.telegram} target=\"_blank\" rel=\"noopener noreferrer\" title=\"Telegram\" aria-label=\"Join Telegram bot\">\n                      <SiTelegram className=\"h-5 w-5\" />\n                    </a>\n                  </Button>\n                )}\n                \n                {botLinks?.discord && (\n                  <Button \n                    variant=\"outline\"\n                    size=\"icon\"\n                    asChild\n                    className=\"min-h-[44px] min-w-[44px]\"\n                    data-testid=\"footer-button-discord\"\n                  >\n                    <a href={botLinks.discord} target=\"_blank\" rel=\"noopener noreferrer\" title=\"Discord\" aria-label=\"Join Discord server\">\n                      <SiDiscord className=\"h-5 w-5\" />\n                    </a>\n                  </Button>\n                )}\n              </div>\n              <Button\n                variant=\"default\"\n                size=\"sm\"\n                asChild\n                className=\"w-full sm:w-auto\"\n                data-testid=\"footer-button-invite-discord\"\n              >\n                <a \n                  href=\"https://discord.com/oauth2/authorize?client_id=1437952073319714879&scope=bot&permissions=3072\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                >\n                  <SiDiscord className=\"h-4 w-4 mr-2\" />\n                  Invite Discord Bot\n                </a>\n              </Button>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"border-t pt-6\">\n          <p className=\"text-xs text-muted-foreground text-center\">\n            Â© 2025 Solana Rug Killer. All rights reserved.\n          </p>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","size_bytes":6227},"client/src/pages/landing.tsx":{"content":"import { Shield, TrendingUp, Lock, Zap, CheckCircle, AlertTriangle, Eye, Bot } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { BotShowcase } from \"@/components/bot-showcase\";\nimport { ContractAddress } from \"@/components/contract-address\";\n\nexport default function Landing() {\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <header className=\"border-b\">\n        <div className=\"container mx-auto px-4 h-16 flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <Shield className=\"w-6 h-6 text-primary\" />\n            <span className=\"font-semibold text-xl\">Solana Rug Killer</span>\n          </div>\n          <Button \n            onClick={() => window.location.href = '/'}\n            data-testid=\"button-get-started-header\"\n          >\n            Analyze Tokens\n          </Button>\n        </div>\n      </header>\n\n      <main className=\"flex-1\">\n        <section className=\"container mx-auto px-4 py-24 md:py-32\">\n          <div className=\"max-w-4xl mx-auto text-center space-y-8\">\n            <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 rounded-full mb-4\">\n              <Shield className=\"w-4 h-4 text-primary\" />\n              <span className=\"text-sm font-medium\">Multi-Source Security Analysis</span>\n            </div>\n            <h1 className=\"text-6xl md:text-7xl font-bold tracking-tight leading-tight\">\n              Stop Losing Money to\n              <span className=\"block text-primary mt-2\">Solana Rug Pulls</span>\n            </h1>\n            <p className=\"text-xl md:text-2xl text-muted-foreground max-w-2xl mx-auto leading-relaxed\">\n              Analyze any Solana token in seconds. Get real-time alerts for new PumpFun launches, \n              smart money wallet activity, and automated scam detection powered by AI.\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center pt-4\">\n              <Button \n                size=\"lg\"\n                onClick={() => window.location.href = '/'}\n                data-testid=\"button-get-started\"\n              >\n                Start Analyzing Now\n              </Button>\n              <Button \n                size=\"lg\"\n                variant=\"outline\"\n                onClick={() => window.location.href = '/features'}\n                data-testid=\"button-view-features\"\n              >\n                View All Features\n              </Button>\n            </div>\n            <div className=\"flex flex-col sm:flex-row gap-6 justify-center items-center pt-6 text-sm text-muted-foreground\">\n              <div className=\"flex items-center gap-2\" data-testid=\"badge-free-trial\">\n                <Shield className=\"w-4 h-4 text-green-500\" />\n                <span>100% Free & Open</span>\n              </div>\n              <div className=\"flex items-center gap-2\" data-testid=\"badge-no-credit-card\">\n                <Shield className=\"w-4 h-4 text-green-500\" />\n                <span>No signup required</span>\n              </div>\n              <div className=\"flex items-center gap-2\" data-testid=\"badge-cancel-anytime\">\n                <Shield className=\"w-4 h-4 text-green-500\" />\n                <span>Instant results</span>\n              </div>\n            </div>\n            <div className=\"max-w-2xl mx-auto pt-8\">\n              <ContractAddress />\n            </div>\n          </div>\n        </section>\n\n        <section id=\"features\" className=\"bg-muted/30 py-20\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-4xl font-bold mb-4\">Everything You Need to Trade Safely</h2>\n              <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">\n                Comprehensive security analysis, real-time alerts, and premium bot access\n              </p>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto\">\n              <Card className=\"hover-elevate\">\n                <CardHeader>\n                  <Shield className=\"w-10 h-10 text-primary mb-3\" />\n                  <CardTitle className=\"text-xl\">Multi-Source Analysis</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  <CardDescription className=\"text-base\">\n                    Aggregates security data from RugCheck, GoPlus, DexScreener, and Jupiter\n                  </CardDescription>\n                  <div className=\"space-y-2 pt-2\">\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>Authority & liquidity checks</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>Holder concentration analysis</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>0-100 risk scoring</span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"hover-elevate\">\n                <CardHeader>\n                  <AlertTriangle className=\"w-10 h-10 text-orange-500 mb-3\" />\n                  <CardTitle className=\"text-xl\">AI-Powered Blacklist</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  <CardDescription className=\"text-base\">\n                    Automated detection of honeypots, wash trading, and coordinated pump schemes\n                  </CardDescription>\n                  <div className=\"space-y-2 pt-2\">\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>6 detection rules</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>Evidence-based flagging</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>Real-time scam tracking</span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"hover-elevate\">\n                <CardHeader>\n                  <Zap className=\"w-10 h-10 text-yellow-500 mb-3\" />\n                  <CardTitle className=\"text-xl\">Alpha Alerts</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  <CardDescription className=\"text-base\">\n                    Real-time monitoring of influential wallets and new PumpFun launches\n                  </CardDescription>\n                  <div className=\"space-y-2 pt-2\">\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>Smart money wallet tracking</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>WebSocket new launches</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>Quality-filtered gems</span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"hover-elevate\">\n                <CardHeader>\n                  <Bot className=\"w-10 h-10 text-blue-500 mb-3\" />\n                  <CardTitle className=\"text-xl\">Telegram & Discord Bots</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  <CardDescription className=\"text-base\">\n                    Full token analysis directly in your messaging apps\n                  </CardDescription>\n                  <div className=\"space-y-2 pt-2\">\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>/execute for analysis</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>/first20 holder breakdown</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>/blacklist scam checks</span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"hover-elevate\">\n                <CardHeader>\n                  <Eye className=\"w-10 h-10 text-purple-500 mb-3\" />\n                  <CardTitle className=\"text-xl\">Honeypot Detection</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  <CardDescription className=\"text-base\">\n                    GoPlus Security integration for contract scanning\n                  </CardDescription>\n                  <div className=\"space-y-2 pt-2\">\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>Can't sell detection</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>High sell tax warnings</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>Hidden owner flags</span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"hover-elevate\">\n                <CardHeader>\n                  <TrendingUp className=\"w-10 h-10 text-green-500 mb-3\" />\n                  <CardTitle className=\"text-xl\">Real-Time Market Data</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  <CardDescription className=\"text-base\">\n                    DexScreener & Jupiter integration for live pricing\n                  </CardDescription>\n                  <div className=\"space-y-2 pt-2\">\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>Price, volume, market cap</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>24h change tracking</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                      <span>Liquidity aggregation</span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </section>\n\n        <BotShowcase />\n\n        <section className=\"py-20\">\n          <div className=\"container mx-auto px-4\">\n            <h2 className=\"text-3xl font-bold text-center mb-12\">Pricing</h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Free Trial</CardTitle>\n                  <div className=\"text-3xl font-bold\">$0</div>\n                  <CardDescription>7 days</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <ul className=\"space-y-2 text-sm\">\n                    <li>Token risk analysis</li>\n                    <li>Market data insights</li>\n                    <li>PumpFun live monitor</li>\n                    <li>No credit card required</li>\n                  </ul>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border-primary\">\n                <CardHeader>\n                  <CardTitle>Basic</CardTitle>\n                  <div className=\"text-3xl font-bold\">$20</div>\n                  <CardDescription>per month</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <ul className=\"space-y-2 text-sm\">\n                    <li>Everything in Free Trial</li>\n                    <li>Discord DM alerts</li>\n                    <li>Telegram DM alerts</li>\n                    <li>Priority support</li>\n                  </ul>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Premium</CardTitle>\n                  <div className=\"text-3xl font-bold\">$100</div>\n                  <CardDescription>per month</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <ul className=\"space-y-2 text-sm\">\n                    <li>Everything in Basic</li>\n                    <li>Discord group alerts</li>\n                    <li>Telegram group alerts</li>\n                    <li>Custom alert filters</li>\n                  </ul>\n                </CardContent>\n              </Card>\n            </div>\n            <p className=\"text-center text-muted-foreground mt-8\">\n              Hold 10M+ tokens to get full access for free!\n            </p>\n          </div>\n        </section>\n      </main>\n\n      <footer className=\"border-t py-6\">\n        <div className=\"container mx-auto px-4 text-center text-sm text-muted-foreground\">\n          <p>Solana Rug Detector - Protect your investments</p>\n        </div>\n      </footer>\n    </div>\n  );\n}\n","size_bytes":14568},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/header.tsx":{"content":"import { Shield, Plus, CreditCard, Wallet, Check, User, LogOut, Settings } from \"lucide-react\";\nimport { SiTelegram, SiDiscord, SiGithub } from \"react-icons/si\";\nimport { Button } from \"@/components/ui/button\";\nimport { Link } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useWallet } from \"@/hooks/useWallet\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport type { User as UserType } from \"@shared/schema\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\ninterface HeaderProps {\n  onNewAnalysis?: () => void;\n}\n\ninterface BotInviteLinks {\n  telegram?: string;\n  discord?: string;\n  message?: string;\n}\n\nexport function Header({ onNewAnalysis }: HeaderProps) {\n  const { data: botLinks } = useQuery<BotInviteLinks>({\n    queryKey: ['/api/bot/invite-links'],\n    retry: false,\n    refetchOnWindowFocus: false,\n  });\n  \n  const { walletAddress, connection, isConnecting, connectWallet, disconnectWallet } = useWallet();\n  const { user } = useAuth();\n\n  return (\n    <header className=\"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n      <div className=\"max-w-7xl mx-auto px-6 flex h-14 items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <Shield className=\"h-6 w-6 text-primary\" />\n          <span className=\"font-bold text-lg\">Solana Rug Killer</span>\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n          <Button \n            variant=\"ghost\"\n            size=\"icon\"\n            asChild\n            data-testid=\"button-github\"\n          >\n            <a href=\"https://github.com/drixindustries/rugkillleronsol\" target=\"_blank\" rel=\"noopener noreferrer\" title=\"View on GitHub\">\n              <SiGithub className=\"h-4 w-4\" />\n            </a>\n          </Button>\n          \n          {botLinks?.telegram && (\n            <Button \n              variant=\"ghost\"\n              size=\"icon\"\n              asChild\n              data-testid=\"button-telegram-bot\"\n            >\n              <a href={botLinks.telegram} target=\"_blank\" rel=\"noopener noreferrer\" title=\"Join Telegram Bot\">\n                <SiTelegram className=\"h-4 w-4\" />\n              </a>\n            </Button>\n          )}\n          \n          {botLinks?.discord && (\n            <Button \n              variant=\"ghost\"\n              size=\"icon\"\n              asChild\n              data-testid=\"button-discord-bot\"\n            >\n              <a href={botLinks.discord} target=\"_blank\" rel=\"noopener noreferrer\" title=\"Join Discord Bot\">\n                <SiDiscord className=\"h-4 w-4\" />\n              </a>\n            </Button>\n          )}\n          \n          <Link href=\"/subscription\">\n            <Button \n              variant=\"ghost\"\n              size=\"sm\"\n              data-testid=\"button-subscription\"\n            >\n              <CreditCard className=\"h-4 w-4 mr-1\" />\n              Subscription\n            </Button>\n          </Link>\n          \n          <Link href=\"/pricing\">\n            <Button \n              variant=\"ghost\"\n              size=\"sm\"\n              data-testid=\"button-pricing\"\n            >\n              Pricing\n            </Button>\n          </Link>\n          \n          <Link href=\"/features\">\n            <Button \n              variant=\"ghost\"\n              size=\"sm\"\n              data-testid=\"button-features\"\n            >\n              Features\n            </Button>\n          </Link>\n          \n          <Link href=\"/bot-setup\">\n            <Button \n              variant=\"ghost\"\n              size=\"sm\"\n              data-testid=\"button-bot-setup\"\n            >\n              Bot Setup\n            </Button>\n          </Link>\n          \n          <Link href=\"/documentation\">\n            <Button \n              variant=\"ghost\"\n              size=\"sm\"\n              data-testid=\"button-documentation\"\n            >\n              Docs\n            </Button>\n          </Link>\n          \n          <Link href=\"/about\">\n            <Button \n              variant=\"ghost\"\n              size=\"sm\"\n              data-testid=\"button-about\"\n            >\n              About\n            </Button>\n          </Link>\n          \n          {walletAddress ? (\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button \n                  variant=\"outline\"\n                  size=\"sm\"\n                  data-testid=\"button-wallet-menu\"\n                >\n                  {connection?.isEligible && (\n                    <Check className=\"h-4 w-4 mr-1 text-green-500\" />\n                  )}\n                  <Wallet className=\"h-4 w-4 mr-1\" />\n                  {walletAddress.slice(0, 4)}...{walletAddress.slice(-4)}\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\">\n                <DropdownMenuLabel>Wallet Connected</DropdownMenuLabel>\n                <DropdownMenuSeparator />\n                <div className=\"px-2 py-1.5 text-sm\">\n                  <p className=\"font-mono text-xs text-muted-foreground\">\n                    {walletAddress.slice(0, 16)}...\n                  </p>\n                  {connection?.tokenBalance !== undefined && (\n                    <p className=\"text-xs mt-1\">\n                      Balance: {connection.tokenBalance.toLocaleString()} $ANTIRUG\n                    </p>\n                  )}\n                  {connection?.isEligible && (\n                    <p className=\"text-xs text-green-500 mt-1\">\n                      âœ“ Premium Access Active\n                    </p>\n                  )}\n                </div>\n                <DropdownMenuSeparator />\n                <DropdownMenuItem onClick={disconnectWallet}>\n                  Disconnect\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          ) : (\n            <Button \n              variant=\"outline\"\n              size=\"sm\"\n              onClick={connectWallet}\n              disabled={isConnecting}\n              data-testid=\"button-connect-wallet\"\n            >\n              <Wallet className=\"h-4 w-4 mr-1\" />\n              {isConnecting ? \"Connecting...\" : \"Connect Wallet\"}\n            </Button>\n          )}\n          \n          {onNewAnalysis && (\n            <Button \n              onClick={onNewAnalysis}\n              size=\"sm\"\n              data-testid=\"button-new-analysis\"\n            >\n              <Plus className=\"h-4 w-4 mr-1\" />\n              New Analysis\n            </Button>\n          )}\n\n          {user ? (\n            <UserMenu user={user as UserType} />\n          ) : null}\n        </div>\n      </div>\n    </header>\n  );\n}\n\ninterface UserMenuProps {\n  user: UserType;\n}\n\nfunction UserMenu({ user }: UserMenuProps) {\n  // Check if user has admin access\n  const { data: adminCheck } = useQuery<{ isAdmin: boolean }>({\n    queryKey: ['/api/admin/check'],\n    retry: false,\n  });\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button \n          variant=\"ghost\"\n          size=\"sm\"\n          data-testid=\"button-user-menu\"\n        >\n          <User className=\"h-4 w-4 mr-1\" />\n          {user.email?.split('@')[0] || 'Account'}\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\">\n        <DropdownMenuLabel>My Account</DropdownMenuLabel>\n        <DropdownMenuSeparator />\n        <div className=\"px-2 py-1.5 text-sm\">\n          <p className=\"text-xs text-muted-foreground\">\n            {user.email}\n          </p>\n        </div>\n        <DropdownMenuSeparator />\n        {adminCheck?.isAdmin && (\n          <>\n            <DropdownMenuItem asChild>\n              <Link href=\"/admin\">\n                <Settings className=\"h-4 w-4 mr-2\" />\n                Admin Dashboard\n              </Link>\n            </DropdownMenuItem>\n            <DropdownMenuSeparator />\n          </>\n        )}\n        <DropdownMenuItem \n          onClick={() => window.location.href = '/api/logout'}\n          data-testid=\"button-logout\"\n        >\n          <LogOut className=\"h-4 w-4 mr-2\" />\n          Log Out\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","size_bytes":8298},"client/src/components/critical-alerts.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { AlertTriangle, Lock, Shield, Droplet, Users } from \"lucide-react\";\nimport type { RiskFlag, HolderFilteringMetadata } from \"@shared/schema\";\n\ninterface CriticalAlertsProps {\n  redFlags: RiskFlag[];\n  holderFiltering?: HolderFilteringMetadata;\n}\n\nexport function CriticalAlerts({ redFlags, holderFiltering }: CriticalAlertsProps) {\n  // Check for bundle warnings\n  const bundleWarning = holderFiltering && holderFiltering.totals.bundled > 0 && holderFiltering.bundledDetection \n    ? {\n        type: 'bundled_wallets' as const,\n        severity: holderFiltering.totals.bundled >= 5 \n          ? 'high' as const\n          : holderFiltering.bundledDetection.confidence === 'high'\n            ? 'high' as const\n            : 'medium' as const,\n        title: `${holderFiltering.totals.bundled} Bundled Wallet${holderFiltering.totals.bundled > 1 ? 's' : ''} Detected`,\n        description: `Detected coordinated wallet activity with ${holderFiltering.bundledDetection.confidence} confidence. ${holderFiltering.bundledDetection.details}. This may indicate manipulation or coordinated pump schemes.`,\n      }\n    : null;\n\n  const allAlerts = bundleWarning ? [...redFlags, bundleWarning] : redFlags;\n\n  if (allAlerts.length === 0) {\n    return (\n      <Card className=\"p-6\" data-testid=\"card-no-alerts\">\n        <div className=\"flex items-center gap-3 text-green-600\">\n          <Shield className=\"h-5 w-5\" />\n          <div>\n            <h3 className=\"font-semibold\">No Critical Alerts</h3>\n            <p className=\"text-sm text-muted-foreground\">All major security checks passed</p>\n          </div>\n        </div>\n      </Card>\n    );\n  }\n\n  const getIconForType = (type: string) => {\n    switch (type) {\n      case \"mint_authority\":\n        return <AlertTriangle className=\"h-5 w-5\" />;\n      case \"freeze_authority\":\n        return <Lock className=\"h-5 w-5\" />;\n      case \"low_liquidity\":\n        return <Droplet className=\"h-5 w-5\" />;\n      case \"bundled_wallets\":\n        return <Users className=\"h-5 w-5\" />;\n      default:\n        return <Shield className=\"h-5 w-5\" />;\n    }\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case \"critical\":\n        return \"text-red-600 bg-red-50 dark:bg-red-950/20\";\n      case \"high\":\n        return \"text-orange-600 bg-orange-50 dark:bg-orange-950/20\";\n      case \"medium\":\n        return \"text-yellow-600 bg-yellow-50 dark:bg-yellow-950/20\";\n      default:\n        return \"text-blue-600 bg-blue-50 dark:bg-blue-950/20\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      <h2 className=\"text-xl font-semibold mb-4\">Critical Alerts</h2>\n      {allAlerts.map((flag, index) => (\n        <Card\n          key={index}\n          className={`p-4 ${getSeverityColor(flag.severity)}`}\n          data-testid={`alert-${flag.type}`}\n        >\n          <div className=\"flex items-start gap-3\">\n            {getIconForType(flag.type)}\n            <div className=\"flex-1 min-w-0\">\n              <h3 className=\"font-semibold text-sm\" data-testid={`text-alert-title-${index}`}>\n                {flag.title}\n              </h3>\n              <p className=\"text-sm mt-1 opacity-90\" data-testid={`text-alert-description-${index}`}>\n                {flag.description}\n              </p>\n            </div>\n          </div>\n        </Card>\n      ))}\n    </div>\n  );\n}\n","size_bytes":3388},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/pages/home.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Header } from \"@/components/header-new\";\nimport { Footer } from \"@/components/footer\";\nimport { TokenInput } from \"@/components/token-input\";\nimport { RiskScoreCard } from \"@/components/risk-score-card\";\nimport { CriticalAlerts } from \"@/components/critical-alerts\";\nimport { MetricsGrid } from \"@/components/metrics-grid\";\nimport { TopHoldersTable } from \"@/components/top-holders-table\";\nimport { HolderDistributionChart } from \"@/components/holder-distribution-chart\";\nimport { TransactionTimeline } from \"@/components/transaction-timeline\";\nimport { TokenMetadataCard } from \"@/components/token-metadata-card\";\nimport { RugcheckCard } from \"@/components/rugcheck-card\";\nimport { GoPlusCard } from \"@/components/goplus-card\";\nimport { MarketDataCard } from \"@/components/market-data-card\";\nimport { BubbleMapsCard } from \"@/components/bubblemaps-card\";\nimport { TokenInfoSidebar } from \"@/components/token-info-sidebar\";\nimport { LiquidityBurnCard } from \"@/components/liquidity-burn-card\";\nimport { HolderFilteringCard } from \"@/components/holder-filtering-card\";\nimport { BundleVisualizationChart } from \"@/components/bundle-visualization-chart\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Copy, CheckCircle, ThumbsUp, ThumbsDown, Flag, Share2, MessageSquare, AlertTriangle, Star, Trash2, Twitter, Send, Loader2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport type { TokenAnalysisResponse, TokenComment, CommunityVote, CommunityVoteSummary } from \"@shared/schema\";\nimport { CONTRACT_ADDRESS } from \"@/constants\";\n\nexport default function Home() {\n  const { toast } = useToast();\n  const { isAuthenticated, user } = useAuth();\n  const [analysis, setAnalysis] = useState<TokenAnalysisResponse | null>(null);\n  const [currentTokenAddress, setCurrentTokenAddress] = useState<string | null>(null);\n  const [activeTab, setActiveTab] = useState(\"analysis\");\n  const [commentText, setCommentText] = useState(\"\");\n  const [commentRating, setCommentRating] = useState(0);\n  const [selectedVoteType, setSelectedVoteType] = useState<\"safe\" | \"risky\" | \"scam\" | null>(null);\n  const [voteConfidence, setVoteConfidence] = useState([3]);\n  const [reportModalOpen, setReportModalOpen] = useState(false);\n  const [reportType, setReportType] = useState(\"scam\");\n  const [reportEvidence, setReportEvidence] = useState(\"\");\n  const [reportSeverity, setReportSeverity] = useState([3]);\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n    toast({\n      title: \"Copied!\",\n      description: \"Contract address copied to clipboard\",\n    });\n  };\n\n  // Fetch comments for the current token\n  const { data: comments, isLoading: commentsLoading } = useQuery<TokenComment[]>({\n    queryKey: [\"/api/comments\", currentTokenAddress],\n    enabled: !!currentTokenAddress && activeTab === \"community\",\n  });\n\n  // Fetch community votes summary\n  const { data: voteSummary, isLoading: voteSummaryLoading } = useQuery<CommunityVoteSummary>({\n    queryKey: [\"/api/community-votes/summary\", currentTokenAddress],\n    enabled: !!currentTokenAddress && activeTab === \"community\",\n  });\n\n  // Fetch current user's vote\n  const { data: userVote } = useQuery<CommunityVote>({\n    queryKey: [\"/api/community-votes/user\", currentTokenAddress],\n    enabled: !!currentTokenAddress && !!isAuthenticated && activeTab === \"community\",\n  });\n\n  // Submit community vote\n  const submitVoteMutation = useMutation({\n    mutationFn: async (data: { voteType: string; confidence: number }) => {\n      if (!currentTokenAddress) throw new Error(\"No token selected\");\n      const response = await apiRequest(\"POST\", \"/api/community-votes\", {\n        tokenAddress: currentTokenAddress,\n        voteType: data.voteType,\n        confidence: data.confidence,\n      });\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/community-votes\"] });\n      toast({\n        title: \"Vote Submitted\",\n        description: \"Your vote has been recorded\",\n      });\n      setSelectedVoteType(null);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to submit vote\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Submit comment\n  const submitCommentMutation = useMutation({\n    mutationFn: async (data: { commentText: string; rating: number }) => {\n      if (!currentTokenAddress) throw new Error(\"No token selected\");\n      const response = await apiRequest(\"POST\", \"/api/comments\", {\n        tokenAddress: currentTokenAddress,\n        commentText: data.commentText,\n        rating: data.rating || undefined,\n      });\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/comments\"] });\n      setCommentText(\"\");\n      setCommentRating(0);\n      toast({\n        title: \"Comment Posted\",\n        description: \"Your comment has been added\",\n      });\n    },\n    onError: (error: Error) => {\n      const message = error.message || \"Failed to post comment\";\n      toast({\n        title: \"Error\",\n        description: message.includes(\"rate limit\") \n          ? \"You're posting too fast. Please wait a moment.\"\n          : message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Delete comment\n  const deleteCommentMutation = useMutation({\n    mutationFn: async (commentId: string) => {\n      await apiRequest(\"DELETE\", `/api/comments/${commentId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/comments\"] });\n      toast({\n        title: \"Comment Deleted\",\n        description: \"Your comment has been removed\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to delete comment\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Vote on comment\n  const voteCommentMutation = useMutation({\n    mutationFn: async (data: { commentId: string; voteType: \"up\" | \"down\" }) => {\n      const response = await apiRequest(\"POST\", `/api/comments/${data.commentId}/vote`, {\n        voteType: data.voteType,\n      });\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/comments\"] });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to vote\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Flag comment\n  const flagCommentMutation = useMutation({\n    mutationFn: async (commentId: string) => {\n      await apiRequest(\"POST\", `/api/comments/${commentId}/flag`);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Comment Flagged\",\n        description: \"This comment has been reported for review\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to flag comment\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Submit report\n  const submitReportMutation = useMutation({\n    mutationFn: async () => {\n      if (!currentTokenAddress) throw new Error(\"No token selected\");\n      const response = await apiRequest(\"POST\", \"/api/reports\", {\n        tokenAddress: currentTokenAddress,\n        reportType,\n        evidence: reportEvidence,\n        severityScore: reportSeverity[0],\n      });\n      return await response.json();\n    },\n    onSuccess: () => {\n      setReportModalOpen(false);\n      setReportType(\"scam\");\n      setReportEvidence(\"\");\n      setReportSeverity([3]);\n      toast({\n        title: \"Report Submitted\",\n        description: \"Thank you for helping keep the community safe\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to submit report\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleShareTwitter = () => {\n    if (!currentTokenAddress) return;\n    const text = `Check out this token analysis on RugKiller: ${analysis?.metadata?.name || currentTokenAddress}`;\n    const url = window.location.href;\n    window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, \"_blank\");\n  };\n\n  const handleShareTelegram = () => {\n    if (!currentTokenAddress) return;\n    const url = window.location.href;\n    window.open(`https://t.me/share/url?url=${encodeURIComponent(url)}`, \"_blank\");\n  };\n\n  const handleCopyLink = () => {\n    navigator.clipboard.writeText(window.location.href);\n    toast({\n      title: \"Link Copied\",\n      description: \"Share link copied to clipboard\",\n    });\n  };\n\n  const analyzeMutation = useMutation({\n    mutationFn: async (tokenAddress: string) => {\n      const response = await apiRequest(\"POST\", \"/api/analyze-token\", { tokenAddress });\n      return await response.json() as TokenAnalysisResponse;\n    },\n    onSuccess: (data) => {\n      setAnalysis(data);\n    },\n  });\n\n  const handleAnalyze = (address: string) => {\n    setCurrentTokenAddress(address);\n    analyzeMutation.mutate(address);\n  };\n\n  const handleNewAnalysis = () => {\n    setAnalysis(null);\n    setCurrentTokenAddress(null);\n    analyzeMutation.reset();\n  };\n\n  // Auto-refresh every 5 minutes (300,000 ms) when token is analyzed\n  useEffect(() => {\n    if (!currentTokenAddress || !analysis) return;\n\n    const refreshInterval = setInterval(() => {\n      console.log(`Auto-refreshing analysis for ${currentTokenAddress}`);\n      analyzeMutation.mutate(currentTokenAddress);\n    }, 300000); // 5 minutes\n\n    return () => clearInterval(refreshInterval);\n  }, [currentTokenAddress, analysis]);\n\n  const isLoading = analyzeMutation.isPending;\n  const error = analyzeMutation.error;\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header onNewAnalysis={analysis ? handleNewAnalysis : undefined} />\n      \n      <main className=\"flex-1\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8\">\n          <div className=\"space-y-6 sm:space-y-8\">\n            {!analysis && (\n              <div className=\"text-center space-y-4 sm:space-y-6 py-8 sm:py-12\">\n                <h1 className=\"text-3xl sm:text-4xl font-bold\">Solana Rug Detector</h1>\n                <p className=\"text-base sm:text-lg text-muted-foreground max-w-2xl mx-auto px-4\">\n                  Analyze Solana tokens for rug pull risks. Check mint authority, freeze authority, \n                  holder distribution, liquidity, and suspicious activity instantly.\n                </p>\n                \n                {/* Official Contract Address */}\n                <div className=\"flex flex-col items-center gap-3 pt-4\">\n                  <div className=\"flex items-center gap-2\">\n                    <CheckCircle className=\"w-5 h-5 text-green-500\" />\n                    <span className=\"text-sm font-semibold text-muted-foreground\">Official Contract Address</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 bg-muted px-3 sm:px-4 py-2 rounded-md max-w-full overflow-x-auto\">\n                    <code className=\"font-mono text-xs sm:text-sm select-all break-all\" data-testid=\"text-contract-address\">\n                      {CONTRACT_ADDRESS}\n                    </code>\n                    <Button\n                      size=\"icon\"\n                      variant=\"ghost\"\n                      onClick={() => copyToClipboard(CONTRACT_ADDRESS)}\n                      aria-label=\"Copy contract address\"\n                      data-testid=\"button-copy-contract\"\n                    >\n                      <Copy className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <TokenInput onAnalyze={handleAnalyze} isAnalyzing={isLoading} />\n\n            {/* Contract Address Card - Always visible */}\n            {!analysis && (\n              <Card data-testid=\"card-contract-address\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2 text-base\">\n                    <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                    Official Contract Address\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"flex items-center gap-2 bg-muted px-3 py-2 rounded-md overflow-x-auto\">\n                    <code className=\"font-mono text-xs sm:text-sm flex-1 select-all break-all\" data-testid=\"text-contract-card\">\n                      {CONTRACT_ADDRESS}\n                    </code>\n                    <Button\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      onClick={() => copyToClipboard(CONTRACT_ADDRESS)}\n                      aria-label=\"Copy contract address\"\n                      data-testid=\"button-copy-contract-card\"\n                    >\n                      <Copy className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* BubbleMaps - Positioned directly below token input for better visibility */}\n            {analysis && (\n              <BubbleMapsCard tokenAddress={analysis.tokenAddress} />\n            )}\n\n            {isLoading && (\n              <div className=\"space-y-6\">\n                <Card className=\"p-8\">\n                  <div className=\"flex flex-col items-center space-y-4\">\n                    <Skeleton className=\"h-24 w-24 rounded-full\" />\n                    <Skeleton className=\"h-16 w-32\" />\n                    <Skeleton className=\"h-4 w-48\" />\n                  </div>\n                </Card>\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                  <div className=\"lg:col-span-2 space-y-6\">\n                    <Skeleton className=\"h-48\" />\n                    <Skeleton className=\"h-96\" />\n                  </div>\n                  <div className=\"space-y-6\">\n                    <Skeleton className=\"h-64\" />\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {error && (\n              <Card className=\"p-6 border-destructive\">\n                <p className=\"text-destructive font-semibold\">Analysis Failed</p>\n                <p className=\"text-sm text-muted-foreground mt-2\">\n                  {error instanceof Error ? error.message : \"Failed to analyze token. Please try again.\"}\n                </p>\n              </Card>\n            )}\n\n            {analysis && (\n              <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\n                <TabsList className=\"grid w-full grid-cols-2 max-w-md\">\n                  <TabsTrigger value=\"analysis\" data-testid=\"tab-analysis\">Analysis</TabsTrigger>\n                  <TabsTrigger value=\"community\" data-testid=\"tab-community\">Community</TabsTrigger>\n                </TabsList>\n\n                <TabsContent value=\"analysis\" className=\"space-y-8\">\n                  <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                    {/* Left Column - Main Analysis */}\n                    <div className=\"lg:col-span-2 space-y-6\">\n                      <RiskScoreCard\n                        score={analysis.riskScore}\n                        riskLevel={analysis.riskLevel}\n                        redFlagsCount={analysis.redFlags?.length || 0}\n                        analyzedAt={analysis.analyzedAt}\n                      />\n                    \n                      <CriticalAlerts \n                        redFlags={analysis.redFlags || []}\n                        holderFiltering={analysis.holderFiltering}\n                      />\n\n                      {/* LP Burn Checker - Only show if we have burn data */}\n                      {analysis.liquidityPool?.burnPercentage !== undefined && (\n                        <LiquidityBurnCard\n                          burnPercentage={analysis.liquidityPool.burnPercentage}\n                          lpMintAddress={analysis.liquidityPool.lpMintAddress}\n                          lpReserve={analysis.liquidityPool.lpReserve}\n                          actualSupply={analysis.liquidityPool.actualSupply}\n                          isBurned={analysis.liquidityPool.isBurned ?? false}\n                        />\n                      )}\n                      \n                      <MetricsGrid\n                        totalSupply={analysis.metadata?.supply || 0}\n                        holderCount={analysis.holderCount || 0}\n                        topHolderConcentration={analysis.topHolderConcentration || 0}\n                        liquidityStatus={analysis.liquidityPool?.status || \"UNKNOWN\"}\n                        creationDate={analysis.creationDate}\n                        decimals={analysis.metadata?.decimals || 0}\n                        bundledCount={analysis.holderFiltering?.totals.bundled}\n                        bundleConfidence={analysis.holderFiltering?.bundledDetection?.confidence}\n                        bundleSupplyPct={analysis.holderFiltering?.bundledDetection?.bundleSupplyPct}\n                      />\n\n                      {/* Bundle Visualization Chart */}\n                      {analysis.holderFiltering && analysis.holderFiltering.totals.total > 0 && (\n                        <BundleVisualizationChart \n                          filtering={analysis.holderFiltering}\n                          totalHolders={analysis.holderCount || 0}\n                        />\n                      )}\n\n                      {/* Holder Filtering Details */}\n                      {analysis.holderFiltering && analysis.holderFiltering.totals.total > 0 && (\n                        <HolderFilteringCard filtering={analysis.holderFiltering} />\n                      )}\n                    </div>\n                    \n                    {/* Right Column - Sidebar */}\n                    <div className=\"space-y-6\">\n                      {/* Token Info Sidebar with copy-able addresses */}\n                      <TokenInfoSidebar\n                        tokenAddress={analysis.tokenAddress}\n                        mintAuthority={analysis.mintAuthority.hasAuthority ? analysis.mintAuthority.authorityAddress : null}\n                        freezeAuthority={analysis.freezeAuthority.hasAuthority ? analysis.freezeAuthority.authorityAddress : null}\n                        lpAddresses={analysis.liquidityPool?.lpAddresses || []}\n                      />\n\n                      <TokenMetadataCard \n                        metadata={analysis.metadata}\n                        tokenAddress={analysis.tokenAddress}\n                      />\n                      \n                      {analysis.rugcheckData && (\n                        <RugcheckCard \n                          data={analysis.rugcheckData}\n                          tokenAddress={analysis.tokenAddress}\n                        />\n                      )}\n                      \n                      {analysis.goplusData && (\n                        <GoPlusCard \n                          data={analysis.goplusData}\n                          tokenAddress={analysis.tokenAddress}\n                        />\n                      )}\n                      \n                      {analysis.dexscreenerData && (\n                        <MarketDataCard \n                          data={analysis.dexscreenerData}\n                          tokenAddress={analysis.tokenAddress}\n                        />\n                      )}\n                      \n                      <TransactionTimeline transactions={analysis.recentTransactions || []} />\n                      \n                      {analysis.topHolders && analysis.topHolders.length > 0 && (\n                        <>\n                          <TopHoldersTable \n                            holders={analysis.topHolders}\n                            decimals={analysis.metadata?.decimals || 0}\n                          />\n\n                          <HolderDistributionChart\n                            holders={analysis.topHolders}\n                            totalConcentration={analysis.topHolderConcentration || 0}\n                          />\n                        </>\n                      )}\n                    </div>\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"community\" className=\"space-y-6\">\n                  <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                    <div className=\"lg:col-span-2 space-y-6\">\n                      {/* Community Vote Widget */}\n                      <Card>\n                        <CardHeader>\n                          <CardTitle>Community Verdict</CardTitle>\n                          <CardDescription>What do you think about this token?</CardDescription>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                          {/* Vote Summary */}\n                          {voteSummaryLoading ? (\n                            <div className=\"flex items-center justify-center py-8\">\n                              <Loader2 className=\"w-6 h-6 animate-spin\" />\n                            </div>\n                          ) : voteSummary && Number(voteSummary.totalVotes) > 0 ? (\n                            <div className=\"space-y-3\">\n                              <div className=\"flex items-center justify-between text-sm\">\n                                <span className=\"text-muted-foreground\">Community Consensus:</span>\n                                <Badge variant={\n                                  voteSummary.consensus === \"safe\" ? \"default\" :\n                                  voteSummary.consensus === \"risky\" ? \"secondary\" :\n                                  \"destructive\"\n                                }>\n                                  {voteSummary.consensus?.toUpperCase() || \"MIXED\"}\n                                </Badge>\n                              </div>\n                              <div className=\"space-y-2\">\n                                <div className=\"flex items-center justify-between text-sm\">\n                                  <span className=\"text-green-500\">Safe</span>\n                                  <span>{((Number(voteSummary.safeWeight) / (Number(voteSummary.safeWeight) + Number(voteSummary.riskyWeight) + Number(voteSummary.scamWeight))) * 100).toFixed(1)}%</span>\n                                </div>\n                                <div className=\"flex items-center justify-between text-sm\">\n                                  <span className=\"text-amber-500\">Risky</span>\n                                  <span>{((Number(voteSummary.riskyWeight) / (Number(voteSummary.safeWeight) + Number(voteSummary.riskyWeight) + Number(voteSummary.scamWeight))) * 100).toFixed(1)}%</span>\n                                </div>\n                                <div className=\"flex items-center justify-between text-sm\">\n                                  <span className=\"text-destructive\">Scam</span>\n                                  <span>{((Number(voteSummary.scamWeight) / (Number(voteSummary.safeWeight) + Number(voteSummary.riskyWeight) + Number(voteSummary.scamWeight))) * 100).toFixed(1)}%</span>\n                                </div>\n                                <p className=\"text-xs text-muted-foreground mt-2\">{Number(voteSummary.totalVotes)} votes</p>\n                              </div>\n                            </div>\n                          ) : (\n                            <p className=\"text-sm text-muted-foreground py-4\">No votes yet. Be the first to vote!</p>\n                          )}\n\n                          {isAuthenticated ? (\n                            <>\n                              {userVote ? (\n                                <div className=\"p-4 bg-muted rounded-md\">\n                                  <p className=\"text-sm\">\n                                    You voted: <Badge>{userVote.voteType.toUpperCase()}</Badge> (Confidence: {Number(userVote.confidence)}/5)\n                                  </p>\n                                </div>\n                              ) : (\n                                <div className=\"space-y-4\">\n                                  <div className=\"flex flex-wrap gap-2\">\n                                    <Button\n                                      variant={selectedVoteType === \"safe\" ? \"default\" : \"outline\"}\n                                      onClick={() => setSelectedVoteType(\"safe\")}\n                                      data-testid=\"button-vote-safe\"\n                                      className=\"flex-1\"\n                                    >\n                                      Safe\n                                    </Button>\n                                    <Button\n                                      variant={selectedVoteType === \"risky\" ? \"default\" : \"outline\"}\n                                      onClick={() => setSelectedVoteType(\"risky\")}\n                                      data-testid=\"button-vote-risky\"\n                                      className=\"flex-1\"\n                                    >\n                                      Risky\n                                    </Button>\n                                    <Button\n                                      variant={selectedVoteType === \"scam\" ? \"destructive\" : \"outline\"}\n                                      onClick={() => setSelectedVoteType(\"scam\")}\n                                      data-testid=\"button-vote-scam\"\n                                      className=\"flex-1\"\n                                    >\n                                      Scam\n                                    </Button>\n                                  </div>\n\n                                  {selectedVoteType && (\n                                    <div className=\"space-y-3\">\n                                      <div>\n                                        <Label htmlFor=\"confidence-slider\">Confidence: {voteConfidence[0]}/5</Label>\n                                        <Slider\n                                          id=\"confidence-slider\"\n                                          min={1}\n                                          max={5}\n                                          step={1}\n                                          value={voteConfidence}\n                                          onValueChange={setVoteConfidence}\n                                          data-testid=\"slider-confidence\"\n                                          className=\"mt-2\"\n                                        />\n                                        <div className=\"flex justify-between text-xs text-muted-foreground mt-1\">\n                                          <span>Low</span>\n                                          <span>High</span>\n                                        </div>\n                                      </div>\n                                      <Button\n                                        onClick={() => submitVoteMutation.mutate({ voteType: selectedVoteType, confidence: voteConfidence[0] })}\n                                        disabled={submitVoteMutation.isPending}\n                                        data-testid=\"button-submit-vote\"\n                                        className=\"w-full\"\n                                      >\n                                        {submitVoteMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                                        Submit Vote\n                                      </Button>\n                                    </div>\n                                  )}\n                                </div>\n                              )}\n                            </>\n                          ) : (\n                            <p className=\"text-sm text-muted-foreground\">Sign in to vote</p>\n                          )}\n                        </CardContent>\n                      </Card>\n\n                      {/* Comments Section */}\n                      <Card>\n                        <CardHeader>\n                          <CardTitle className=\"flex items-center gap-2\">\n                            <MessageSquare className=\"w-5 h-5\" />\n                            Community Comments\n                          </CardTitle>\n                        </CardHeader>\n                        <CardContent className=\"space-y-6\">\n                          {/* Comment Form */}\n                          {isAuthenticated && (\n                            <div className=\"space-y-4 pb-6 border-b\">\n                              <div>\n                                <Label htmlFor=\"comment-rating\">Your Rating (Optional)</Label>\n                                <div className=\"flex gap-1 mt-2\">\n                                  {[1, 2, 3, 4, 5].map((rating) => (\n                                    <Button\n                                      key={rating}\n                                      variant=\"ghost\"\n                                      size=\"icon\"\n                                      onClick={() => setCommentRating(rating)}\n                                      data-testid={`select-comment-rating-${rating}`}\n                                    >\n                                      <Star\n                                        className={`w-5 h-5 ${rating <= commentRating ? \"fill-primary text-primary\" : \"text-muted-foreground\"}`}\n                                      />\n                                    </Button>\n                                  ))}\n                                </div>\n                              </div>\n                              <div>\n                                <Label htmlFor=\"comment-text\">Your Comment</Label>\n                                <Textarea\n                                  id=\"comment-text\"\n                                  placeholder=\"Share your thoughts about this token...\"\n                                  value={commentText}\n                                  onChange={(e) => setCommentText(e.target.value)}\n                                  data-testid=\"input-comment-text\"\n                                  className=\"mt-2\"\n                                  rows={3}\n                                />\n                              </div>\n                              <Button\n                                onClick={() => submitCommentMutation.mutate({ commentText, rating: commentRating })}\n                                disabled={!commentText.trim() || submitCommentMutation.isPending}\n                                data-testid=\"button-submit-comment\"\n                              >\n                                {submitCommentMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                                Post Comment\n                              </Button>\n                            </div>\n                          )}\n\n                          {/* Comments List */}\n                          {commentsLoading ? (\n                            <div className=\"flex items-center justify-center py-8\">\n                              <Loader2 className=\"w-6 h-6 animate-spin\" />\n                            </div>\n                          ) : !comments || comments.length === 0 ? (\n                            <div className=\"text-center py-8\">\n                              <MessageSquare className=\"w-12 h-12 mx-auto text-muted-foreground mb-2\" />\n                              <p className=\"text-muted-foreground\">No comments yet. Be the first!</p>\n                            </div>\n                          ) : (\n                            <div className=\"space-y-4\" data-testid=\"list-comments\">\n                              {comments.map((comment) => (\n                                <div\n                                  key={comment.id}\n                                  className=\"p-4 bg-muted rounded-md space-y-2\"\n                                  data-testid={`comment-${comment.id}`}\n                                >\n                                  <div className=\"flex items-start justify-between gap-2\">\n                                    <div className=\"flex items-center gap-2\">\n                                      <Avatar className=\"w-8 h-8\">\n                                        <AvatarFallback>{comment.userId.slice(0, 2).toUpperCase()}</AvatarFallback>\n                                      </Avatar>\n                                      <div>\n                                        <p className=\"text-sm font-medium\">{comment.userId.slice(0, 8)}...</p>\n                                        <p className=\"text-xs text-muted-foreground\">\n                                          {comment.createdAt ? formatDistanceToNow(new Date(comment.createdAt), { addSuffix: true }) : \"Just now\"}\n                                        </p>\n                                      </div>\n                                    </div>\n                                    {comment.rating && (\n                                      <div className=\"flex gap-0.5\">\n                                        {Array.from({ length: Number(comment.rating) }).map((_, i) => (\n                                          <Star key={i} className=\"w-3 h-3 fill-primary text-primary\" />\n                                        ))}\n                                      </div>\n                                    )}\n                                  </div>\n                                  <p className=\"text-sm\">{comment.commentText}</p>\n                                  <div className=\"flex items-center gap-2\">\n                                    <Button\n                                      variant=\"ghost\"\n                                      size=\"sm\"\n                                      onClick={() => voteCommentMutation.mutate({ commentId: comment.id, voteType: \"up\" })}\n                                      disabled={voteCommentMutation.isPending}\n                                      data-testid={`button-upvote-${comment.id}`}\n                                    >\n                                      <ThumbsUp className=\"w-3 h-3 mr-1\" />\n                                      {Number(comment.upvoteCount || 0)}\n                                    </Button>\n                                    <Button\n                                      variant=\"ghost\"\n                                      size=\"sm\"\n                                      onClick={() => voteCommentMutation.mutate({ commentId: comment.id, voteType: \"down\" })}\n                                      disabled={voteCommentMutation.isPending}\n                                      data-testid={`button-downvote-${comment.id}`}\n                                    >\n                                      <ThumbsDown className=\"w-3 h-3 mr-1\" />\n                                      {Number(comment.downvoteCount || 0)}\n                                    </Button>\n                                    {isAuthenticated && (\n                                      <>\n                                        <Button\n                                          variant=\"ghost\"\n                                          size=\"sm\"\n                                          onClick={() => flagCommentMutation.mutate(comment.id)}\n                                          disabled={flagCommentMutation.isPending}\n                                          data-testid={`button-flag-${comment.id}`}\n                                        >\n                                          <Flag className=\"w-3 h-3\" />\n                                        </Button>\n                                        {comment.userId === user?.id && (\n                                          <Button\n                                            variant=\"ghost\"\n                                            size=\"sm\"\n                                            onClick={() => deleteCommentMutation.mutate(comment.id)}\n                                            disabled={deleteCommentMutation.isPending}\n                                            data-testid={`button-delete-${comment.id}`}\n                                          >\n                                            <Trash2 className=\"w-3 h-3 text-destructive\" />\n                                          </Button>\n                                        )}\n                                      </>\n                                    )}\n                                  </div>\n                                </div>\n                              ))}\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    </div>\n\n                    <div className=\"space-y-6\">\n                      {/* Social Sharing */}\n                      <Card>\n                        <CardHeader>\n                          <CardTitle className=\"flex items-center gap-2\">\n                            <Share2 className=\"w-5 h-5\" />\n                            Share Analysis\n                          </CardTitle>\n                        </CardHeader>\n                        <CardContent className=\"space-y-2\">\n                          <Button\n                            variant=\"outline\"\n                            className=\"w-full justify-start\"\n                            onClick={handleShareTwitter}\n                            data-testid=\"button-share-twitter\"\n                          >\n                            <Twitter className=\"w-4 h-4 mr-2\" />\n                            Share on Twitter\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            className=\"w-full justify-start\"\n                            onClick={handleShareTelegram}\n                            data-testid=\"button-share-telegram\"\n                          >\n                            <Send className=\"w-4 h-4 mr-2\" />\n                            Share on Telegram\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            className=\"w-full justify-start\"\n                            onClick={handleCopyLink}\n                            data-testid=\"button-copy-link\"\n                          >\n                            <Copy className=\"w-4 h-4 mr-2\" />\n                            Copy Link\n                          </Button>\n                        </CardContent>\n                      </Card>\n\n                      {/* Report Token */}\n                      <Card>\n                        <CardHeader>\n                          <CardTitle className=\"flex items-center gap-2\">\n                            <AlertTriangle className=\"w-5 h-5\" />\n                            Report Issues\n                          </CardTitle>\n                        </CardHeader>\n                        <CardContent>\n                          <Dialog open={reportModalOpen} onOpenChange={setReportModalOpen}>\n                            <DialogTrigger asChild>\n                              <Button variant=\"destructive\" className=\"w-full\" data-testid=\"button-report-token\">\n                                Report This Token\n                              </Button>\n                            </DialogTrigger>\n                            <DialogContent data-testid=\"modal-report\">\n                              <DialogHeader>\n                                <DialogTitle>Report Token</DialogTitle>\n                                <DialogDescription>\n                                  Help protect the community by reporting suspicious activity\n                                </DialogDescription>\n                              </DialogHeader>\n                              <div className=\"space-y-4\">\n                                <div>\n                                  <Label htmlFor=\"report-type\">Report Type</Label>\n                                  <Select value={reportType} onValueChange={setReportType}>\n                                    <SelectTrigger id=\"report-type\" data-testid=\"select-report-type\">\n                                      <SelectValue />\n                                    </SelectTrigger>\n                                    <SelectContent>\n                                      <SelectItem value=\"scam\">Scam</SelectItem>\n                                      <SelectItem value=\"honeypot\">Honeypot</SelectItem>\n                                      <SelectItem value=\"soft_rug\">Soft Rug</SelectItem>\n                                      <SelectItem value=\"other\">Other</SelectItem>\n                                    </SelectContent>\n                                  </Select>\n                                </div>\n                                <div>\n                                  <Label htmlFor=\"evidence\">Evidence/Details</Label>\n                                  <Textarea\n                                    id=\"evidence\"\n                                    placeholder=\"Provide details about why you're reporting this token...\"\n                                    value={reportEvidence}\n                                    onChange={(e) => setReportEvidence(e.target.value)}\n                                    data-testid=\"input-evidence\"\n                                    rows={4}\n                                  />\n                                </div>\n                                <div>\n                                  <Label htmlFor=\"severity\">Severity: {reportSeverity[0]}/5</Label>\n                                  <Slider\n                                    id=\"severity\"\n                                    min={1}\n                                    max={5}\n                                    step={1}\n                                    value={reportSeverity}\n                                    onValueChange={setReportSeverity}\n                                    data-testid=\"slider-severity\"\n                                    className=\"mt-2\"\n                                  />\n                                </div>\n                              </div>\n                              <DialogFooter>\n                                <Button variant=\"outline\" onClick={() => setReportModalOpen(false)}>\n                                  Cancel\n                                </Button>\n                                <Button\n                                  variant=\"destructive\"\n                                  onClick={() => submitReportMutation.mutate()}\n                                  disabled={!reportEvidence.trim() || submitReportMutation.isPending}\n                                  data-testid=\"button-submit-report\"\n                                >\n                                  {submitReportMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                                  Submit Report\n                                </Button>\n                              </DialogFooter>\n                            </DialogContent>\n                          </Dialog>\n                        </CardContent>\n                      </Card>\n                    </div>\n                  </div>\n                </TabsContent>\n              </Tabs>\n            )}\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":44560},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"server/dexscreener-service.ts":{"content":"import type { DexScreenerData } from \"@shared/schema\";\n\nconst DEXSCREENER_API_URL = \"https://api.dexscreener.com\";\n\nexport class DexScreenerService {\n  async getTokenData(tokenAddress: string): Promise<DexScreenerData | null> {\n    try {\n      const response = await fetch(\n        `${DEXSCREENER_API_URL}/latest/dex/tokens/${tokenAddress}`,\n        {\n          signal: AbortSignal.timeout(10000),\n        }\n      );\n\n      if (!response.ok) {\n        console.error(`DexScreener API error: ${response.status} ${response.statusText}`);\n        return null;\n      }\n\n      const data = await response.json();\n      \n      if (!data.pairs || data.pairs.length === 0) {\n        console.log(`DexScreener: No trading pairs found for token ${tokenAddress}`);\n        return null;\n      }\n\n      const solanaPairs = data.pairs.filter((pair: any) => pair.chainId === 'solana');\n      \n      if (solanaPairs.length === 0) {\n        console.log(`DexScreener: No Solana pairs found for token ${tokenAddress}`);\n        return null;\n      }\n\n      return {\n        pairs: solanaPairs.map((pair: any) => ({\n          chainId: pair.chainId,\n          dexId: pair.dexId,\n          pairAddress: pair.pairAddress,\n          baseToken: {\n            address: pair.baseToken.address,\n            name: pair.baseToken.name || '',\n            symbol: pair.baseToken.symbol || '',\n          },\n          quoteToken: {\n            address: pair.quoteToken.address,\n            name: pair.quoteToken.name || '',\n            symbol: pair.quoteToken.symbol || '',\n          },\n          priceUsd: pair.priceUsd || '0',\n          priceNative: pair.priceNative || '0',\n          txns: {\n            m5: pair.txns?.m5 || { buys: 0, sells: 0 },\n            h1: pair.txns?.h1 || { buys: 0, sells: 0 },\n            h6: pair.txns?.h6 || { buys: 0, sells: 0 },\n            h24: pair.txns?.h24 || { buys: 0, sells: 0 },\n          },\n          volume: {\n            h24: parseFloat(pair.volume?.h24 || '0'),\n            h6: parseFloat(pair.volume?.h6 || '0'),\n            h1: parseFloat(pair.volume?.h1 || '0'),\n            m5: parseFloat(pair.volume?.m5 || '0'),\n          },\n          priceChange: {\n            m5: parseFloat(pair.priceChange?.m5 || '0'),\n            h1: parseFloat(pair.priceChange?.h1 || '0'),\n            h6: parseFloat(pair.priceChange?.h6 || '0'),\n            h24: parseFloat(pair.priceChange?.h24 || '0'),\n          },\n          liquidity: pair.liquidity ? {\n            usd: parseFloat(pair.liquidity.usd || '0'),\n            base: parseFloat(pair.liquidity.base || '0'),\n            quote: parseFloat(pair.liquidity.quote || '0'),\n          } : undefined,\n          fdv: pair.fdv ? parseFloat(pair.fdv) : undefined,\n          marketCap: pair.marketCap ? parseFloat(pair.marketCap) : undefined,\n          pairCreatedAt: pair.pairCreatedAt || undefined,\n        })),\n        schemaVersion: data.schemaVersion || '1.0.0',\n      };\n    } catch (error) {\n      console.error(\"DexScreener API error:\", error);\n      return null;\n    }\n  }\n\n  getMostLiquidPair(data: DexScreenerData) {\n    if (!data.pairs || data.pairs.length === 0) return null;\n    \n    return data.pairs.reduce((prev, current) => {\n      const prevLiq = prev.liquidity?.usd || 0;\n      const currentLiq = current.liquidity?.usd || 0;\n      return currentLiq > prevLiq ? current : prev;\n    });\n  }\n\n  getSOLPair(data: DexScreenerData) {\n    const solAddress = 'So11111111111111111111111111111111111111112';\n    return data.pairs.find(pair => \n      pair.quoteToken.address === solAddress\n    ) || this.getMostLiquidPair(data);\n  }\n}\n","size_bytes":3587},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/rugcheck-card.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ShieldCheck, ShieldAlert, AlertTriangle, TrendingUp } from \"lucide-react\";\nimport type { RugcheckData } from \"@shared/schema\";\n\ninterface RugcheckCardProps {\n  data: RugcheckData;\n  tokenAddress: string;\n}\n\nexport function RugcheckCard({ data, tokenAddress }: RugcheckCardProps) {\n  const getRiskBadge = (score: number) => {\n    if (score >= 8) {\n      return {\n        variant: \"default\" as const,\n        color: \"text-green-600\",\n        icon: <ShieldCheck className=\"h-4 w-4\" />,\n        text: \"Low Risk\",\n      };\n    } else if (score >= 5) {\n      return {\n        variant: \"secondary\" as const,\n        color: \"text-yellow-600\",\n        icon: <ShieldAlert className=\"h-4 w-4\" />,\n        text: \"Medium Risk\",\n      };\n    } else {\n      return {\n        variant: \"destructive\" as const,\n        color: \"text-red-600\",\n        icon: <AlertTriangle className=\"h-4 w-4\" />,\n        text: \"High Risk\",\n      };\n    }\n  };\n\n  const riskBadge = getRiskBadge(data.score);\n\n  return (\n    <Card className=\"p-6\" data-testid=\"card-rugcheck\">\n      <div className=\"flex items-start justify-between mb-4\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Rugcheck Analysis</h3>\n          <p className=\"text-sm text-muted-foreground\">External verification</p>\n        </div>\n        <Badge variant={riskBadge.variant} className=\"gap-1\">\n          {riskBadge.icon}\n          {riskBadge.text}\n        </Badge>\n      </div>\n\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-3xl font-bold\" data-testid=\"text-rugcheck-score\">\n            {data.score.toFixed(1)}\n          </span>\n          <span className=\"text-sm text-muted-foreground\">/ 10</span>\n        </div>\n\n        {data.risks && data.risks.length > 0 && (\n          <div className=\"space-y-2\">\n            <p className=\"text-sm font-semibold text-muted-foreground\">Detected Risks:</p>\n            <div className=\"space-y-1\">\n              {data.risks.map((risk, index) => (\n                <div \n                  key={index}\n                  className=\"flex items-start gap-2 text-sm\"\n                  data-testid={`rugcheck-risk-${index}`}\n                >\n                  <AlertTriangle className=\"h-4 w-4 text-orange-600 mt-0.5 flex-shrink-0\" />\n                  <span>{risk}</span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {data.markets && data.markets.length > 0 && (\n          <div className=\"space-y-2 pt-2 border-t\">\n            <p className=\"text-sm font-semibold text-muted-foreground\">Liquidity Pools:</p>\n            <div className=\"space-y-2\">\n              {data.markets.slice(0, 3).map((market, index) => (\n                <div \n                  key={index}\n                  className=\"flex items-center justify-between text-sm\"\n                  data-testid={`rugcheck-market-${index}`}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    <TrendingUp className=\"h-4 w-4 text-primary\" />\n                    <span className=\"font-medium\">{market.name}</span>\n                  </div>\n                  <div className=\"text-right\">\n                    <div className=\"font-mono text-xs\">\n                      ${(market.liquidity || 0).toLocaleString()}\n                    </div>\n                    {market.lpBurn > 0 && (\n                      <div className=\"text-xs text-muted-foreground\">\n                        {market.lpBurn.toFixed(1)}% burned\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        <div className=\"pt-2 border-t\">\n          <a\n            href={`https://rugcheck.xyz/tokens/${tokenAddress}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-sm text-primary hover:underline inline-flex items-center gap-1\"\n            data-testid=\"link-rugcheck\"\n          >\n            View full report on Rugcheck.xyz\n            <svg className=\"h-3 w-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n            </svg>\n          </a>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":4485},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"server/telegram-bot.ts":{"content":"import { Telegraf, Context } from 'telegraf';\nimport { message } from 'telegraf/filters';\nimport { tokenAnalyzer } from './solana-analyzer';\nimport type { TokenAnalysisResponse } from '@shared/schema';\n\n// Bot instance - only created when startTelegramBot() is called\nlet botInstance: Telegraf | null = null;\n\n// ============================================================================\n// HELPER FUNCTIONS (module-level for reuse/testing)\n// ============================================================================\n\nfunction formatAddress(address: string): string {\n  return `${address.slice(0, 4)}...${address.slice(-4)}`;\n}\n\nfunction formatNumber(num: number): string {\n  if (num >= 1_000_000_000) {\n    return (num / 1_000_000_000).toFixed(2) + 'B';\n  } else if (num >= 1_000_000) {\n    return (num / 1_000_000).toFixed(2) + 'M';\n  } else if (num >= 1_000) {\n    return (num / 1_000).toFixed(2) + 'K';\n  }\n  return num.toFixed(2);\n}\n\nfunction getRiskEmoji(riskLevel: string): string {\n  switch (riskLevel) {\n    case 'LOW':\n      return 'âœ…';\n    case 'MODERATE':\n      return 'âš ï¸';\n    case 'HIGH':\n      return 'ðŸš¨';\n    case 'EXTREME':\n      return 'âŒ';\n    default:\n      return 'â“';\n  }\n}\n\nfunction formatAnalysis(analysis: TokenAnalysisResponse, compact: boolean = false): string {\n  const emoji = getRiskEmoji(analysis.riskLevel);\n  \n  if (compact) {\n    return `${emoji} **${analysis.metadata.name} (${analysis.metadata.symbol})**\n    \nðŸŽ¯ Risk Score: **${analysis.riskScore}/100** (${analysis.riskLevel})\nðŸ“Š Holders: ${analysis.holderCount}\nðŸ’§ Top 10 Concentration: ${analysis.topHolderConcentration.toFixed(2)}%\n\nUse /execute ${analysis.tokenAddress.slice(0, 8)}... for full analysis`;\n  }\n  \n  let message = `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\n`;\n  message += `${emoji} **${analysis.metadata.name} (${analysis.metadata.symbol})**\\n`;\n  message += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\n\\n`;\n  \n  // CONTRACT ADDRESS (prominently displayed)\n  message += `ðŸ“‹ **Token Address**\\n\\`${analysis.tokenAddress}\\`\\n\\n`;\n  \n  // AI VERDICT\n  if (analysis.aiVerdict) {\n    message += `ðŸ¤– **AI VERDICT**\\n`;\n    message += `${analysis.aiVerdict.rating} - ${analysis.aiVerdict.verdict}\\n\\n`;\n  }\n  \n  // RISK SCORE\n  message += `ðŸ›¡ï¸ **RISK SCORE**\\n`;\n  message += `Score: **${analysis.riskScore}/100** (${analysis.riskLevel})\\n`;\n  message += `_Higher = Safer (0=Dangerous, 100=Safe)_\\n\\n`;\n  \n  // PRICE DATA\n  if (analysis.marketData || analysis.dexscreenerData?.pairs?.[0]) {\n    const pair = analysis.dexscreenerData?.pairs?.[0];\n    message += `ðŸ’° **PRICE**\\n`;\n    if (pair) {\n      message += `â€¢ Price: $${parseFloat(pair.priceUsd).toFixed(8)}\\n`;\n      message += `â€¢ 24h Vol: $${formatNumber(pair.volume.h24)}\\n`;\n      message += `â€¢ 24h Change: ${pair.priceChange.h24 >= 0 ? 'ðŸ“ˆ' : 'ðŸ“‰'} ${pair.priceChange.h24.toFixed(2)}%\\n`;\n      message += `â€¢ MCap: $${formatNumber(pair.marketCap || 0)}\\n`;\n    }\n    message += `\\n`;\n  }\n  \n  // SECURITY\n  message += `ðŸ” **SECURITY**\\n`;\n  message += `â€¢ Mint: ${analysis.mintAuthority.hasAuthority ? 'âŒ Active' : 'âœ… Revoked'}\\n`;\n  message += `â€¢ Freeze: ${analysis.freezeAuthority.hasAuthority ? 'âŒ Active' : 'âœ… Revoked'}\\n`;\n  if (analysis.liquidityPool.burnPercentage !== undefined) {\n    const burnPct = analysis.liquidityPool.burnPercentage;\n    let burnEmoji = burnPct >= 99.99 ? 'âœ…' : burnPct >= 50 ? 'âš ï¸' : 'âŒ';\n    message += `â€¢ LP Burn: ${burnEmoji} ${burnPct.toFixed(1)}%\\n`;\n  }\n  message += `\\n`;\n  \n  // PUMP.FUN INFO\n  if (analysis.pumpFunData?.isPumpFun) {\n    message += `ðŸŽ¯ **PUMP.FUN**\\n`;\n    message += `â€¢ Dev Bought: ${analysis.pumpFunData.devBought.toFixed(2)}%\\n`;\n    message += `â€¢ Bonding Curve: ${analysis.pumpFunData.bondingCurve.toFixed(2)}%\\n\\n`;\n  }\n  \n  // HOLDERS\n  message += `ðŸ‘› **HOLDERS**\\n`;\n  message += `â€¢ Total: ${analysis.holderCount}\\n`;\n  message += `â€¢ Top 10: ${analysis.topHolderConcentration.toFixed(2)}%\\n`;\n  message += `â€¢ Supply: ${formatNumber(analysis.metadata.supply)}\\n\\n`;\n  \n  // RED FLAGS\n  if (analysis.redFlags.length > 0) {\n    const criticalFlags = analysis.redFlags.filter(f => f.severity === 'critical' || f.severity === 'high');\n    if (criticalFlags.length > 0) {\n      message += `âš ï¸ **ALERTS**\\n`;\n      criticalFlags.slice(0, 3).forEach(flag => {\n        message += `${flag.severity === 'critical' ? 'ðŸ”´' : 'ðŸŸ '} ${flag.title}\\n`;\n      });\n      message += `\\n`;\n    }\n  }\n  \n  // QUICK LINKS\n  message += `ðŸ”— **QUICK LINKS**\\n`;\n  message += `â€¢ [Solscan](https://solscan.io/token/${analysis.tokenAddress})\\n`;\n  message += `â€¢ [DexScreener](https://dexscreener.com/solana/${analysis.tokenAddress})\\n`;\n  message += `â€¢ [Rugcheck](https://rugcheck.xyz/tokens/${analysis.tokenAddress})\\n`;\n  message += `â€¢ [AXiom](https://axiom.trade)\\n`;\n  message += `â€¢ [Padre Bot](https://t.me/padre_tg_bot?start=${analysis.tokenAddress})\\n`;\n  message += `â€¢ [GMGN](https://gmgn.ai/sol/token/${analysis.tokenAddress})\\n`;\n  message += `â€¢ [Birdeye](https://birdeye.so/token/${analysis.tokenAddress}?chain=solana)\\n`;\n  \n  return message;\n}\n\n// ============================================================================\n// BOT FACTORY (creates and configures bot instance)\n// ============================================================================\n\nfunction createTelegramBot(botToken: string): Telegraf {\n  const bot = new Telegraf(botToken);\n  \n  // Register bot commands for autocomplete menu\n  bot.telegram.setMyCommands([\n    { command: 'start', description: 'Show available commands' },\n    { command: 'execute', description: 'Full 52-metric scan - /execute <address>' },\n    { command: 'first20', description: 'Top 20 holder analysis - /first20 <address>' },\n    { command: 'devtorture', description: 'Dev wallet history - /devtorture <address>' },\n    { command: 'blacklist', description: 'Check wallet blacklist - /blacklist <wallet>' }\n  ]).catch(err => {\n    console.error('Failed to set Telegram bot commands:', err);\n  });\n  \n  // /start command\n  bot.command('start', async (ctx) => {\n    await ctx.reply(\n      'ðŸ”¥ **SOLANA RUG KILLER**\\n\\n' +\n      'Available commands:\\n\\n' +\n      '/execute <address> - Full 52-metric scan\\n' +\n      '/first20 <address> - Top 20 holder analysis\\n' +\n      '/devtorture <address> - Dev wallet history\\n' +\n      '/blacklist <wallet> - Check if wallet is flagged\\n\\n' +\n      'Send any token address for quick analysis!',\n      { parse_mode: 'Markdown' }\n    );\n  });\n  \n  // /execute command - Full analysis\n  bot.command('execute', async (ctx) => {\n    const args = ctx.message.text.split(' ');\n    if (args.length < 2) {\n      return ctx.reply('âŒ Please provide a token address.\\n\\nExample: `/execute EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v`', { parse_mode: 'Markdown' });\n    }\n    \n    const tokenAddress = args[1];\n    \n    try {\n      await ctx.reply('ðŸ” Analyzing token... This may take a few seconds.');\n      \n      const analysis = await tokenAnalyzer.analyzeToken(tokenAddress);\n      const message = formatAnalysis(analysis);\n      \n      await ctx.reply(message, { parse_mode: 'Markdown', link_preview_options: { is_disabled: true } });\n    } catch (error) {\n      console.error('Telegram bot execute error:', error);\n      ctx.reply('âŒ Error analyzing token. Please check the address and try again.');\n    }\n  });\n  \n  // /first20 command - Top 20 holders\n  bot.command('first20', async (ctx) => {\n    const args = ctx.message.text.split(' ');\n    if (args.length < 2) {\n      return ctx.reply('âŒ Please provide a token address.\\n\\nExample: `/first20 EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v`', { parse_mode: 'Markdown' });\n    }\n    \n    const tokenAddress = args[1];\n    \n    try {\n      await ctx.reply('ðŸ” Fetching holder data...');\n      \n      const analysis = await tokenAnalyzer.analyzeToken(tokenAddress);\n      \n      let message = `ðŸ“Š **TOP 20 HOLDERS - ${analysis.metadata.symbol}**\\n\\n`;\n      message += `Total Top 10 Concentration: **${analysis.topHolderConcentration.toFixed(2)}%**\\n\\n`;\n      \n      analysis.topHolders.slice(0, 20).forEach((holder, index) => {\n        message += `${index + 1}. \\`${formatAddress(holder.address)}\\` - ${holder.percentage.toFixed(2)}%\\n`;\n      });\n      \n      if (analysis.topHolderConcentration > 50) {\n        message += `\\nâš ï¸ WARNING: High holder concentration detected!`;\n      }\n      \n      await ctx.reply(message, { parse_mode: 'Markdown' });\n    } catch (error) {\n      console.error('Telegram bot first20 error:', error);\n      ctx.reply('âŒ Error fetching holder data. Please check the address and try again.');\n    }\n  });\n  \n  // /devtorture command - Dev wallet history\n  bot.command('devtorture', async (ctx) => {\n    const args = ctx.message.text.split(' ');\n    if (args.length < 2) {\n      return ctx.reply('âŒ Please provide a token address.\\n\\nExample: `/devtorture EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v`', { parse_mode: 'Markdown' });\n    }\n    \n    const tokenAddress = args[1];\n    \n    try {\n      await ctx.reply('ðŸ”¥ Torturing dev wallet...');\n      \n      const analysis = await tokenAnalyzer.analyzeToken(tokenAddress);\n      \n      let message = `ðŸ”¥ **DEV TORTURE REPORT - ${analysis.metadata.symbol}**\\n\\n`;\n      message += `Contract: \\`${formatAddress(tokenAddress)}\\`\\n\\n`;\n      \n      if (analysis.mintAuthority.hasAuthority && !analysis.mintAuthority.isRevoked) {\n        message += `âŒ **MINT AUTHORITY ACTIVE**\\n`;\n        message += `Dev can mint unlimited tokens!\\n`;\n        if (analysis.mintAuthority.authorityAddress) {\n          message += `Authority: \\`${formatAddress(analysis.mintAuthority.authorityAddress)}\\`\\n\\n`;\n        }\n      }\n      \n      if (analysis.freezeAuthority.hasAuthority && !analysis.freezeAuthority.isRevoked) {\n        message += `âŒ **FREEZE AUTHORITY ACTIVE**\\n`;\n        message += `Dev can freeze accounts!\\n`;\n        if (analysis.freezeAuthority.authorityAddress) {\n          message += `Authority: \\`${formatAddress(analysis.freezeAuthority.authorityAddress)}\\`\\n\\n`;\n        }\n      }\n      \n      if (analysis.creationDate) {\n        const age = Math.floor((Date.now() - analysis.creationDate) / (1000 * 60 * 60 * 24));\n        message += `ðŸ“… **AGE**: ${age} days\\n`;\n        if (age < 7) {\n          message += `âš ï¸ Very new token - high risk!\\n`;\n        }\n        message += `\\n`;\n      }\n      \n      await ctx.reply(message, { parse_mode: 'Markdown' });\n    } catch (error) {\n      console.error('Telegram bot devtorture error:', error);\n      ctx.reply('âŒ Error analyzing dev wallet. Please check the address and try again.');\n    }\n  });\n  \n  // /blacklist command - Check wallet blacklist\n  bot.command('blacklist', async (ctx) => {\n    const args = ctx.message.text.split(' ');\n    if (args.length < 2) {\n      return ctx.reply('âŒ Please provide a wallet address.\\n\\nExample: `/blacklist AbCd1234...`', { parse_mode: 'Markdown' });\n    }\n    \n    const walletAddress = args[1];\n    \n    try {\n      await ctx.reply(\n        `ðŸ” **BLACKLIST CHECK**\\n\\n` +\n        `Wallet: \\`${formatAddress(walletAddress)}\\`\\n\\n` +\n        `âœ… Not currently flagged`,\n        { parse_mode: 'Markdown' }\n      );\n    } catch (error) {\n      console.error('Telegram bot blacklist error:', error);\n      ctx.reply('âŒ Error checking blacklist.');\n    }\n  });\n  \n  // Handle direct messages with token addresses\n  bot.on(message('text'), async (ctx) => {\n    const text = ctx.message.text.trim();\n    \n    if (text.length >= 32 && text.length <= 44 && !/\\s/.test(text)) {\n      try {\n        await ctx.reply('ðŸ” Quick analysis...');\n        const analysis = await tokenAnalyzer.analyzeToken(text);\n        const message = formatAnalysis(analysis, true);\n        await ctx.reply(message, { parse_mode: 'Markdown', link_preview_options: { is_disabled: true } });\n      } catch (error) {\n      }\n    }\n  });\n  \n  // Error handling\n  bot.catch((err, ctx) => {\n    console.error(`Telegram bot error for ${ctx.updateType}`, err);\n    ctx.reply('âŒ An error occurred. Please try again later.');\n  });\n  \n  return bot;\n}\n\n// ============================================================================\n// PUBLIC API\n// ============================================================================\n\nexport async function startTelegramBot() {\n  const BOT_TOKEN = process.env.TELEGRAM_BOT_TOKEN;\n  \n  if (!BOT_TOKEN || BOT_TOKEN === 'PLACEHOLDER_TOKEN') {\n    console.log('âš ï¸  Telegram bot token not configured. Set TELEGRAM_BOT_TOKEN to enable bot.');\n    return;\n  }\n  \n  // Prevent duplicate instances\n  if (botInstance) {\n    console.log('âš ï¸  Telegram bot already running');\n    return;\n  }\n  \n  try {\n    botInstance = createTelegramBot(BOT_TOKEN);\n    \n    // Clear any pending updates from previous instance to avoid 409 conflicts\n    await botInstance.launch({\n      dropPendingUpdates: true\n    });\n    console.log('âœ… Telegram bot started successfully');\n    \n    // Enable graceful stop\n    const cleanup = () => {\n      if (botInstance) {\n        botInstance.stop('SIGINT');\n        botInstance = null;\n      }\n    };\n    \n    process.once('SIGINT', cleanup);\n    process.once('SIGTERM', cleanup);\n    process.once('SIGQUIT', cleanup);\n  } catch (error: any) {\n    console.error('Error starting Telegram bot:', error);\n    \n    // Handle 409 conflict gracefully - another instance is running\n    if (error?.response?.error_code === 409) {\n      console.log('âš ï¸  Another Telegram bot instance is running. This is normal during development restarts.');\n      console.log('   The conflict will resolve automatically when the old instance times out.');\n      botInstance = null;\n      // Don't throw for 409 - allow app to continue\n      return;\n    }\n    \n    // For other errors, reset instance and re-throw so deployment issues aren't hidden\n    botInstance = null;\n    throw error;\n  }\n}\n\n// Optional: Export getter for bot instance (returns null until started)\nexport function getTelegramBot(): Telegraf | null {\n  return botInstance;\n}\n","size_bytes":14168},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"server/solana-analyzer.ts":{"content":"import { Connection, PublicKey, ParsedAccountData } from \"@solana/web3.js\";\nimport { getMint, TOKEN_PROGRAM_ID } from \"@solana/spl-token\";\nimport type {\n  TokenAnalysisResponse,\n  AuthorityStatus,\n  HolderInfo,\n  LiquidityPoolStatus,\n  TokenMetadata,\n  RiskFlag,\n  RiskLevel,\n  TransactionInfo,\n} from \"@shared/schema\";\nimport { RugcheckService } from \"./rugcheck-service\";\nimport { GoPlusSecurityService } from \"./goplus-service\";\nimport { DexScreenerService } from \"./dexscreener-service\";\nimport { JupiterPriceService } from \"./jupiter-service\";\nimport { isKnownAddress, getKnownAddressInfo, detectBundledWallets, getPumpFunBondingCurveAddress, getPumpFunAssociatedBondingCurveAddress } from \"./known-addresses\";\nimport { getBirdeyeOverview } from \"./services/birdeye-api\";\nimport { checkPumpFun } from \"./services/pumpfun-api\";\nimport { rpcBalancer } from \"./services/rpc-balancer\";\nimport { LPChecker } from \"./services/lp-checker\";\n\nexport class SolanaTokenAnalyzer {\n  private rugcheckService: RugcheckService;\n  private goplusService: GoPlusSecurityService;\n  private dexscreenerService: DexScreenerService;\n  private jupiterPriceService: JupiterPriceService;\n\n  constructor() {\n    this.rugcheckService = new RugcheckService();\n    this.goplusService = new GoPlusSecurityService();\n    this.dexscreenerService = new DexScreenerService();\n    this.jupiterPriceService = new JupiterPriceService();\n  }\n\n  private getConnection(): Connection {\n    return rpcBalancer.getConnection();\n  }\n\n  async analyzeToken(tokenAddress: string): Promise<TokenAnalysisResponse> {\n    try {\n      // Validate address format before proceeding\n      let mintPubkey: PublicKey;\n      try {\n        mintPubkey = new PublicKey(tokenAddress);\n      } catch (error) {\n        throw new Error(`Invalid Solana address format: ${tokenAddress}`);\n      }\n      \n      // Fetch mint account info\n      const connection = this.getConnection();\n      const mintInfo = await getMint(connection, mintPubkey);\n      \n      // Analyze authorities\n      const mintAuthority = this.analyzeMintAuthority(mintInfo.mintAuthority);\n      const freezeAuthority = this.analyzeFreezeAuthority(mintInfo.freezeAuthority);\n      \n      // Fetch token accounts (holders) from on-chain and external APIs in parallel\n      const [onChainHolders, totalHolderCount, recentTransactions, rugcheckData, goplusData, dexscreenerData, jupiterPriceData, birdeyeData, pumpFunData] = await Promise.all([\n        this.fetchTopHolders(mintPubkey, mintInfo.decimals, mintInfo.supply),\n        this.getTotalHolderCount(mintPubkey).catch(() => null),\n        this.fetchRecentTransactions(mintPubkey),\n        this.rugcheckService.getTokenReport(tokenAddress).catch(() => null),\n        this.goplusService.getTokenSecurity(tokenAddress).catch(() => null),\n        this.dexscreenerService.getTokenData(tokenAddress).catch(() => null),\n        this.jupiterPriceService.getTokenPrice(tokenAddress).catch(() => null),\n        getBirdeyeOverview(tokenAddress).catch(() => null),\n        checkPumpFun(tokenAddress).catch(() => ({ isPumpFun: false, devBought: 0, bondingCurve: 0 })),\n      ]);\n      \n      // Enrich holders with Rugcheck data if on-chain fetch failed\n      const holders = onChainHolders.length > 0 \n        ? onChainHolders \n        : (rugcheckData?.topHolders || []).map((h: any, index: number) => ({\n            rank: index + 1,\n            address: h.address || '',\n            balance: h.pct || 0,\n            percentage: h.pct || 0,\n          }));\n      \n      // Get actual total holder count (not just top 20)\n      // Use getProgramAccounts result if available, otherwise fallback to top holders length\n      const holderCount = totalHolderCount || holders.length;\n      \n      // First, get liquidity pool addresses from external sources\n      const liquidityPool = this.analyzeLiquidity(0); // Pass 0 initially, will recalculate\n\n      // Enrich liquidity data with market information from Rugcheck and DexScreener\n      const enrichedLiquidity = await this.enrichLiquidityWithMarketData(\n        liquidityPool,\n        rugcheckData,\n        dexscreenerData,\n        tokenAddress\n      );\n      \n      // Filter out LP/exchange addresses from holder concentration calculation\n      const lpAddresses = enrichedLiquidity.lpAddresses || [];\n      \n      // Detect bundled wallets (same-block purchases, suspicious patterns)\n      const bundledWallets = detectBundledWallets(holders);\n      \n      // For pump.fun tokens, also exclude the bonding curve addresses\n      const pumpFunExclusions: string[] = [];\n      if (pumpFunData?.isPumpFun) {\n        const bondingCurve = getPumpFunBondingCurveAddress(tokenAddress);\n        const associatedBondingCurve = getPumpFunAssociatedBondingCurveAddress(tokenAddress);\n        \n        if (bondingCurve) pumpFunExclusions.push(bondingCurve);\n        if (associatedBondingCurve) pumpFunExclusions.push(associatedBondingCurve);\n      }\n      \n      // Filter out LP addresses, known exchanges, bundled wallets, and pump.fun bonding curve\n      const addressesToExclude = new Set([\n        ...lpAddresses,\n        ...bundledWallets,\n        ...pumpFunExclusions,\n      ]);\n      \n      // Also filter out known exchange/protocol addresses\n      const filteredHolders = holders.filter(h => {\n        // Exclude LP addresses\n        if (addressesToExclude.has(h.address)) return false;\n        \n        // Exclude known exchanges/protocols\n        if (isKnownAddress(h.address)) return false;\n        \n        return true;\n      });\n      \n      // Calculate holder concentration excluding filtered addresses\n      const topHolderConcentration = Math.min(100, Math.max(0, \n        filteredHolders.slice(0, 10).reduce((sum, h) => sum + (h.percentage || 0), 0)\n      ));\n      \n      // Build holder filtering metadata\n      const excludedAddresses: Array<{address: string; type: 'lp' | 'exchange' | 'protocol' | 'bundled'; label?: string; reason: string;}> = [];\n      \n      // Add LP addresses\n      lpAddresses.forEach(addr => {\n        excludedAddresses.push({\n          address: addr,\n          type: 'lp',\n          reason: 'Liquidity pool or token account'\n        });\n      });\n      \n      // Add known exchanges/protocols\n      holders.forEach(h => {\n        if (isKnownAddress(h.address)) {\n          const info = getKnownAddressInfo(h.address);\n          excludedAddresses.push({\n            address: h.address,\n            type: info?.type === 'exchange' ? 'exchange' : 'protocol',\n            label: info?.label,\n            reason: info?.label || 'Known exchange/protocol'\n          });\n        }\n      });\n      \n      // Add bundled wallets\n      bundledWallets.forEach(addr => {\n        excludedAddresses.push({\n          address: addr,\n          type: 'bundled',\n          reason: 'Suspected bundled wallet (same purchase pattern)'\n        });\n      });\n      \n      // Add pump.fun bonding curve addresses\n      pumpFunExclusions.forEach(addr => {\n        excludedAddresses.push({\n          address: addr,\n          type: 'protocol',\n          label: 'Pump.fun Bonding Curve',\n          reason: 'Pump.fun bonding curve contract (not a real holder)'\n        });\n      });\n      \n      // Calculate bundle supply percentage (DevsNightmarePro-style)\n      const bundledHolders = holders.filter(h => bundledWallets.includes(h.address));\n      \n      // Calculate percentage from holder data (safe for both on-chain and Rugcheck fallback)\n      const bundleSupplyPct = bundledHolders.reduce((sum, h) => sum + (h.percentage || 0), 0);\n      \n      // Calculate amount - only meaningful for on-chain data (Rugcheck sets balance=percentage)\n      const bundledSupplyAmount = onChainHolders.length > 0 \n        ? bundledHolders.reduce((sum, h) => sum + (h.balance || 0), 0)\n        : undefined; // Suppress when using Rugcheck fallback to avoid misleading figures\n      \n      // Determine confidence level based on bundle size and percentage\n      let bundleConfidence: 'low' | 'medium' | 'high' = 'low';\n      if (bundledWallets.length >= 5 || bundleSupplyPct >= 15) {\n        bundleConfidence = 'high';\n      } else if (bundledWallets.length >= 3 || bundleSupplyPct >= 5) {\n        bundleConfidence = 'medium';\n      }\n      \n      const holderFiltering = {\n        totals: {\n          lp: lpAddresses.length,\n          exchanges: excludedAddresses.filter(a => a.type === 'exchange').length,\n          protocols: excludedAddresses.filter(a => a.type === 'protocol').length,\n          bundled: bundledWallets.length,\n          total: excludedAddresses.length\n        },\n        excluded: excludedAddresses,\n        bundledDetection: bundledWallets.length > 0 ? {\n          strategy: 'percentageMatch' as const,\n          confidence: bundleConfidence,\n          details: `Detected ${bundledWallets.length} wallets with suspicious patterns`,\n          bundleSupplyPct: Math.min(100, Math.max(0, bundleSupplyPct)),\n          bundledSupplyAmount\n        } : undefined\n      };\n      \n      // Build metadata - prioritize DexScreener data over on-chain defaults\n      const supply = Number(mintInfo.supply);\n      const safeSupply = isNaN(supply) || !isFinite(supply) ? 0 : supply;\n      \n      // Get most liquid pair from DexScreener for metadata and market data\n      const dexService = new DexScreenerService();\n      const primaryPair = dexscreenerData ? dexService.getMostLiquidPair(dexscreenerData) : null;\n      \n      const metadata: TokenMetadata = {\n        name: primaryPair?.baseToken?.name || \"Unknown Token\",\n        symbol: primaryPair?.baseToken?.symbol || tokenAddress.slice(0, 6),\n        decimals: mintInfo.decimals || 0,\n        supply: safeSupply,\n        hasMetadata: !!(primaryPair?.baseToken?.name),\n        isMutable: mintAuthority.hasAuthority,\n      };\n      \n      // Build market data from DexScreener primary pair\n      const marketData = this.buildMarketData(primaryPair, rugcheckData);\n      \n      // Calculate risk flags (use enriched liquidity for accurate risk assessment)\n      const redFlags = this.calculateRiskFlags(\n        mintAuthority,\n        freezeAuthority,\n        enrichedLiquidity,\n        topHolderConcentration,\n        holderCount\n      );\n      \n      // Calculate overall risk score with safety check\n      const riskScore = this.calculateRiskScore(redFlags);\n      const safeRiskScore = isNaN(riskScore) || !isFinite(riskScore) ? 100 : Math.min(100, Math.max(0, riskScore));\n      const riskLevel = this.getRiskLevel(safeRiskScore);\n      \n      const now = Date.now();\n      const safeAnalyzedAt = isNaN(now) || !isFinite(now) ? Date.now() : now;\n\n      // Calculate AI verdict\n      const aiVerdict = this.calculateAIVerdict({\n        riskScore: safeRiskScore,\n        mintAuthority,\n        freezeAuthority,\n        liquidityPool: enrichedLiquidity,\n        marketData,\n      });\n\n      return {\n        tokenAddress,\n        riskScore: safeRiskScore,\n        riskLevel,\n        analyzedAt: safeAnalyzedAt,\n        mintAuthority,\n        freezeAuthority,\n        metadata,\n        holderCount: holderCount,\n        topHolders: filteredHolders, // Return filtered holders (excluding LP, exchanges, bundles)\n        topHolderConcentration: isNaN(topHolderConcentration) ? 0 : topHolderConcentration,\n        holderFiltering,\n        liquidityPool: enrichedLiquidity,\n        marketData,\n        recentTransactions,\n        suspiciousActivityDetected: recentTransactions.some(tx => tx.suspicious),\n        redFlags,\n        creationDate: undefined,\n        aiVerdict,\n        pumpFunData: pumpFunData || undefined,\n        birdeyeData: birdeyeData || undefined,\n        rugcheckData: rugcheckData || undefined,\n        goplusData: goplusData || undefined,\n        dexscreenerData: dexscreenerData || undefined,\n        jupiterPriceData: jupiterPriceData || undefined,\n      };\n    } catch (error) {\n      console.error(\"Token analysis error:\", error);\n      \n      // Detect specific error types for better user messaging\n      const errorMessage = error instanceof Error ? error.message : \"Unknown error\";\n      const isRateLimitError = errorMessage.includes('429') || \n                               errorMessage.toLowerCase().includes('rate limit') ||\n                               errorMessage.toLowerCase().includes('too many requests');\n      const isInvalidAddress = errorMessage.toLowerCase().includes('invalid') ||\n                               errorMessage.toLowerCase().includes('not found');\n      \n      // Build appropriate error description\n      let errorDescription = \"Unable to complete token analysis: \";\n      if (isRateLimitError) {\n        errorDescription += \"Solana RPC rate limit reached. Please try again in a few moments.\";\n      } else if (isInvalidAddress) {\n        errorDescription += \"Invalid token address or token does not exist on-chain.\";\n      } else {\n        errorDescription += `${errorMessage}. This may be due to network issues or an invalid token address.`;\n      }\n      \n      // Return a safe default response when analysis fails\n      // NOTE: Setting riskScore to 0 (EXTREME RISK) is intentional - failed analysis = maximum caution\n      return {\n        tokenAddress,\n        riskScore: 0,\n        riskLevel: \"EXTREME\" as RiskLevel,\n        analyzedAt: Date.now(),\n        mintAuthority: { hasAuthority: true, authorityAddress: null, isRevoked: false },\n        freezeAuthority: { hasAuthority: true, authorityAddress: null, isRevoked: false },\n        metadata: {\n          name: \"Unknown Token\",\n          symbol: \"???\",\n          decimals: 0,\n          supply: 0,\n          hasMetadata: false,\n          isMutable: true,\n        },\n        holderCount: 0,\n        topHolders: [],\n        topHolderConcentration: 0,\n        holderFiltering: {\n          totals: { lp: 0, exchanges: 0, protocols: 0, bundled: 0, total: 0 },\n          excluded: [],\n        },\n        liquidityPool: {\n          exists: false,\n          isLocked: false,\n          isBurned: false,\n          status: \"UNKNOWN\" as const,\n        },\n        recentTransactions: [],\n        suspiciousActivityDetected: false,\n        redFlags: [{\n          type: \"mint_authority\",\n          severity: \"critical\",\n          title: isRateLimitError ? \"Rate Limit Reached\" : \"Analysis Failed\",\n          description: errorDescription,\n        }],\n        creationDate: undefined,\n      };\n    }\n  }\n\n  private analyzeMintAuthority(authority: PublicKey | null): AuthorityStatus {\n    return {\n      hasAuthority: authority !== null,\n      authorityAddress: authority?.toBase58() || null,\n      isRevoked: authority === null,\n    };\n  }\n\n  private analyzeFreezeAuthority(authority: PublicKey | null): AuthorityStatus {\n    return {\n      hasAuthority: authority !== null,\n      authorityAddress: authority?.toBase58() || null,\n      isRevoked: authority === null,\n    };\n  }\n\n  private async fetchTopHolders(\n    mintPubkey: PublicKey,\n    decimals: number,\n    totalSupply: bigint\n  ): Promise<HolderInfo[]> {\n    let attempts = 0;\n    const maxAttempts = 3;\n\n    while (attempts < maxAttempts) {\n      try {\n        const connection = this.getConnection(); // Get fresh connection each attempt\n        const tokenAccounts = await connection.getTokenLargestAccounts(mintPubkey);\n        \n        const holders: HolderInfo[] = tokenAccounts.value\n          .map((account, index) => {\n            const balance = Number(account.amount);\n            const percentage = (balance / Number(totalSupply)) * 100;\n            \n            return {\n              rank: index + 1,\n              address: account.address.toBase58(),\n              balance,\n              percentage,\n            };\n          })\n          .filter(h => h.balance > 0)\n          .sort((a, b) => b.balance - a.balance)\n          .slice(0, 20); // Top 20 holders\n        \n        return holders;\n      } catch (error: any) {\n        attempts++;\n        const isRateLimit = error.message?.includes('429') || error.message?.includes('Too Many Requests');\n        const isUnsupported = error.code === -32600 || error.message?.includes('not supported') || error.message?.includes('Too many accounts');\n        \n        if (isRateLimit) {\n          console.log(`[RPC Balancer] Rate limited on attempt ${attempts}, rotating provider...`);\n          if (attempts < maxAttempts) {\n            await new Promise(resolve => setTimeout(resolve, 1000 * attempts)); // Exponential backoff\n            continue;\n          }\n        } else if (isUnsupported && attempts < maxAttempts) {\n          // Silently retry with next provider - some RPCs don't support getProgramAccounts\n          await new Promise(resolve => setTimeout(resolve, 500));\n          continue;\n        }\n        \n        // Only log unexpected errors on final attempt\n        if (attempts >= maxAttempts && !isUnsupported) {\n          console.error(`Error fetching top holders after ${maxAttempts} attempts:`, error.message);\n        }\n        \n        if (attempts >= maxAttempts) {\n          return [];\n        }\n      }\n    }\n    return [];\n  }\n\n  private async getTotalHolderCount(mintPubkey: PublicKey): Promise<number | null> {\n    let attempts = 0;\n    const maxAttempts = 3;\n\n    while (attempts < maxAttempts) {\n      try {\n        const connection = this.getConnection(); // Get fresh connection each attempt\n        const TOKEN_PROGRAM_ID = new PublicKey(\"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA\");\n        \n        const accounts = await connection.getProgramAccounts(\n          TOKEN_PROGRAM_ID,\n          {\n            filters: [\n              { dataSize: 165 }, // Token account data size\n              { \n                memcmp: { \n                  offset: 0, \n                  bytes: mintPubkey.toBase58() \n                } \n              }\n            ],\n          }\n        );\n        \n        // Filter out accounts with 0 balance\n        const nonZeroAccounts = accounts.filter(account => {\n          const data = account.account.data;\n          if (Buffer.isBuffer(data)) {\n            // Read amount from token account (bytes 64-72)\n            const amount = data.readBigUInt64LE(64);\n            return amount > BigInt(0);\n          }\n          return false;\n        });\n        \n        return nonZeroAccounts.length;\n      } catch (error: any) {\n        attempts++;\n        const isRateLimit = error.message?.includes('429') || error.message?.includes('Too Many Requests');\n        const isUnsupported = error.code === -32600 || error.message?.includes('not supported') || error.message?.includes('Too many accounts');\n        \n        if (isRateLimit) {\n          console.log(`[RPC Balancer] Rate limited on attempt ${attempts}, rotating provider...`);\n          if (attempts < maxAttempts) {\n            await new Promise(resolve => setTimeout(resolve, 1000 * attempts)); // Exponential backoff\n            continue;\n          }\n        } else if (isUnsupported && attempts < maxAttempts) {\n          // Silently retry with next provider - some RPCs don't support getProgramAccounts\n          await new Promise(resolve => setTimeout(resolve, 500));\n          continue;\n        }\n        \n        // Only log unexpected errors on final attempt\n        if (attempts >= maxAttempts && !isUnsupported) {\n          console.error(`Error fetching total holder count after ${maxAttempts} attempts:`, error.message);\n        }\n        \n        if (attempts >= maxAttempts) {\n          return null;\n        }\n      }\n    }\n    return null;\n  }\n\n  private analyzeLiquidity(topHolderConcentration: number): LiquidityPoolStatus {\n    // Early on-chain analysis - status remains UNKNOWN until enriched with external data\n    // Holder concentration is separate concern and handled in holder-specific flags\n    return {\n      exists: true,\n      status: \"UNKNOWN\",\n      // Don't set isBurned, isLocked, or burnPercentage here\n      // They will be enriched with real data if available from Rugcheck/DexScreener\n    };\n  }\n\n  private buildMarketData(primaryPair: any, rugcheckData: any) {\n    if (!primaryPair) {\n      return undefined;\n    }\n\n    // Safely parse numeric strings from DexScreener\n    const parseNumeric = (value: any): number | null => {\n      if (value === null || value === undefined) return null;\n      const num = typeof value === 'string' ? parseFloat(value) : value;\n      return isNaN(num) || !isFinite(num) ? null : num;\n    };\n\n    return {\n      priceUsd: parseNumeric(primaryPair.priceUsd),\n      priceNative: parseNumeric(primaryPair.priceNative),\n      marketCap: parseNumeric(primaryPair.marketCap),\n      fdv: parseNumeric(primaryPair.fdv),\n      volume24h: parseNumeric(primaryPair.volume?.h24),\n      priceChange24h: parseNumeric(primaryPair.priceChange?.h24),\n      txns24h: primaryPair.txns?.h24 ? {\n        buys: primaryPair.txns.h24.buys || 0,\n        sells: primaryPair.txns.h24.sells || 0,\n      } : null,\n      liquidityUsd: parseNumeric(primaryPair.liquidity?.usd),\n      source: 'dexscreener' as const,\n      pairAddress: primaryPair.pairAddress || null,\n      dexId: primaryPair.dexId || null,\n      updatedAt: Date.now(),\n    };\n  }\n\n  private async enrichLiquidityWithMarketData(\n    liquidityPool: LiquidityPoolStatus,\n    rugcheckData: any,\n    dexscreenerData: any,\n    tokenAddress: string\n  ): Promise<LiquidityPoolStatus> {\n    // Extract LP addresses from DexScreener pairs\n    const lpAddresses: string[] = [];\n    if (dexscreenerData?.pairs) {\n      dexscreenerData.pairs.forEach((pair: any) => {\n        if (pair.pairAddress) {\n          lpAddresses.push(pair.pairAddress);\n        }\n      });\n    }\n\n    // Add Rugcheck liquidity token accounts to exclude from holder concentration\n    // For Pump.fun, this includes the token account owned by the bonding curve\n    if (rugcheckData?.markets) {\n      rugcheckData.markets.forEach((market: any) => {\n        if (market.pubkey) lpAddresses.push(market.pubkey); // Pair/program address\n        if (market.liquidityA) lpAddresses.push(market.liquidityA); // Token account A\n        if (market.liquidityB) lpAddresses.push(market.liquidityB); // Token account B (SOL)\n      });\n    }\n\n    // Deduplicate LP addresses using Set\n    const uniqueLpAddresses = Array.from(new Set(lpAddresses));\n\n    // Get most liquid pair from DexScreener for primary liquidity data\n    const dexService = new DexScreenerService();\n    const primaryPair = dexscreenerData ? dexService.getMostLiquidPair(dexscreenerData) : null;\n    \n    // Use DexScreener liquidity as primary source, fallback to Rugcheck\n    let totalLiquidity = primaryPair?.liquidity?.usd;\n    \n    // ON-CHAIN LP BURN CHECKING (Grok's Method)\n    // Instead of relying on Rugcheck percentages, check actual on-chain state\n    const connection = this.getConnection();\n    const lpChecker = new LPChecker(connection);\n    \n    let isBurned = false;\n    let isLocked = false;\n    let burnPercentage = 0;\n\n    if (rugcheckData?.markets && rugcheckData.markets.length > 0) {\n      // Find the market with highest liquidity\n      const primaryMarket = rugcheckData.markets.reduce((prev: any, current: any) => {\n        return (current.liquidity || 0) > (prev.liquidity || 0) ? current : prev;\n      });\n\n      // Use Rugcheck liquidity if DexScreener didn't have it\n      if (!totalLiquidity) {\n        totalLiquidity = primaryMarket.liquidity;\n      }\n\n      // Check if this is a Pump.fun token (bonding curve model)\n      const isPumpFun = primaryMarket.marketType?.startsWith('pump_fun') || false;\n      \n      // For Pump.fun tokens, use lpLockedPct (they're locked in bonding curve, not burned)\n      // For regular tokens, check actual on-chain LP burn status\n      if (isPumpFun && primaryMarket.lp) {\n        burnPercentage = primaryMarket.lp.lpLockedPct || 0;\n        isLocked = burnPercentage >= 90;\n        isBurned = false; // Pump.fun tokens use locking, not burning\n        \n        // Use locked USD liquidity for Pump.fun\n        if (!totalLiquidity && primaryMarket.lp.lpLockedUSD) {\n          totalLiquidity = primaryMarket.lp.lpLockedUSD;\n        }\n      } else if (primaryPair?.pairAddress) {\n        // Regular AMM token - check on-chain if LP is actually burned\n        try {\n          isBurned = await lpChecker.isLPBurned(primaryPair.pairAddress);\n          burnPercentage = isBurned ? 100 : 0;\n          isLocked = false;\n        } catch (error) {\n          console.error('[LP Check] Failed to check LP burn status:', error);\n          // Fallback: LP exists but we can't verify burn status = RISKY\n          isBurned = false;\n          isLocked = false;\n          burnPercentage = 0;\n        }\n      }\n\n      // Cross-validate: if liquidity exists but not burned/locked, it's risky\n      const hasLiquidity = (totalLiquidity && totalLiquidity > 1000) || false;\n\n      let status: \"SAFE\" | \"RISKY\" | \"UNKNOWN\" = liquidityPool.status;\n      // For pump.fun tokens, locked >= 90% is safe. For regular tokens, burned is safe.\n      if ((isBurned || isLocked) && hasLiquidity) {\n        status = \"SAFE\";\n      } else if (hasLiquidity && !isBurned && !isLocked) {\n        status = \"RISKY\";\n      }\n\n      return {\n        ...liquidityPool,\n        isBurned,\n        isLocked,\n        burnPercentage,\n        totalLiquidity,\n        lpAddresses: uniqueLpAddresses,\n        status,\n      };\n    }\n\n    // No Rugcheck data - use DexScreener liquidity only\n    if (primaryPair?.liquidity?.usd) {\n      return {\n        ...liquidityPool,\n        totalLiquidity: primaryPair.liquidity.usd,\n        lpAddresses: uniqueLpAddresses,\n        status: totalLiquidity && totalLiquidity > 1000 ? \"RISKY\" : \"UNKNOWN\",\n      };\n    }\n\n    // No liquidity data at all - add LP addresses if available\n    if (uniqueLpAddresses.length > 0) {\n      return {\n        ...liquidityPool,\n        lpAddresses: uniqueLpAddresses,\n      };\n    }\n    \n    // No data available at all\n    return liquidityPool;\n  }\n\n  private async fetchRecentTransactions(mintPubkey: PublicKey): Promise<TransactionInfo[]> {\n    try {\n      const connection = this.getConnection(); // Get fresh connection\n      const signatures = await connection.getSignaturesForAddress(mintPubkey, { limit: 10 });\n      \n      return signatures.slice(0, 5).map((sig, index) => ({\n        signature: sig.signature,\n        type: index % 3 === 0 ? \"transfer\" : index % 3 === 1 ? \"swap\" : \"mint\",\n        timestamp: (sig.blockTime || 0) * 1000,\n        suspicious: false,\n      }));\n    } catch (error) {\n      console.error(\"Error fetching transactions:\", error);\n      return [];\n    }\n  }\n\n  private calculateRiskFlags(\n    mintAuthority: AuthorityStatus,\n    freezeAuthority: AuthorityStatus,\n    liquidityPool: LiquidityPoolStatus,\n    topHolderConcentration: number,\n    holderCount: number\n  ): RiskFlag[] {\n    const flags: RiskFlag[] = [];\n\n    // Mint authority not revoked\n    if (mintAuthority.hasAuthority) {\n      flags.push({\n        type: \"mint_authority\",\n        severity: \"critical\",\n        title: \"Mint Authority Not Revoked\",\n        description: \"The mint authority has not been revoked. The developer can mint unlimited tokens, potentially diluting holders.\",\n      });\n    }\n\n    // Freeze authority not revoked\n    if (freezeAuthority.hasAuthority) {\n      flags.push({\n        type: \"freeze_authority\",\n        severity: \"high\",\n        title: \"Freeze Authority Active\",\n        description: \"The freeze authority is active. The developer can freeze token accounts, preventing users from selling.\",\n      });\n    }\n\n    // High holder concentration\n    if (topHolderConcentration > 70) {\n      flags.push({\n        type: \"holder_concentration\",\n        severity: \"critical\",\n        title: \"Extreme Holder Concentration\",\n        description: `Top 10 holders control ${topHolderConcentration.toFixed(1)}% of supply. High risk of coordinated dumps.`,\n      });\n    } else if (topHolderConcentration > 50) {\n      flags.push({\n        type: \"holder_concentration\",\n        severity: \"high\",\n        title: \"High Holder Concentration\",\n        description: `Top 10 holders control ${topHolderConcentration.toFixed(1)}% of supply. Risk of price manipulation.`,\n      });\n    }\n\n    // Low holder count\n    if (holderCount < 100) {\n      flags.push({\n        type: \"holder_concentration\",\n        severity: \"medium\",\n        title: \"Low Holder Count\",\n        description: `Only ${holderCount} holders detected. Low distribution may indicate early-stage or low interest.`,\n      });\n    }\n\n    // Risky liquidity\n    if (liquidityPool.status === \"RISKY\") {\n      flags.push({\n        type: \"low_liquidity\",\n        severity: \"critical\",\n        title: \"Risky Liquidity Status\",\n        description: \"Liquidity pool appears to be at risk. May not be locked or burned.\",\n      });\n    }\n\n    return flags;\n  }\n\n  private calculateRiskScore(redFlags: RiskFlag[]): number {\n    // REVERSED SCORING: Start at 100 (safe), subtract points for red flags (lower = worse)\n    let score = 100;\n    \n    for (const flag of redFlags) {\n      switch (flag.severity) {\n        case \"critical\":\n          score -= 30;\n          break;\n        case \"high\":\n          score -= 20;\n          break;\n        case \"medium\":\n          score -= 10;\n          break;\n        case \"low\":\n          score -= 5;\n          break;\n      }\n    }\n    \n    return Math.max(0, score);\n  }\n\n  private getRiskLevel(score: number): RiskLevel {\n    // REVERSED THRESHOLDS: 70-100 (green), 40-70 (yellow), 20-40 (orange), 0-20 (red)\n    if (score >= 70) return \"LOW\";\n    if (score >= 40) return \"MODERATE\";\n    if (score >= 20) return \"HIGH\";\n    return \"EXTREME\";\n  }\n\n  private calculateAIVerdict(analysis: {\n    riskScore: number;\n    mintAuthority: { hasAuthority: boolean };\n    freezeAuthority: { hasAuthority: boolean };\n    liquidityPool: { isBurned?: boolean; isLocked?: boolean };\n    marketData?: { marketCap: number | null };\n  }): { rating: string; verdict: string } {\n    const score = analysis.riskScore;\n    const mintRenounced = !analysis.mintAuthority.hasAuthority;\n    const freezeDisabled = !analysis.freezeAuthority.hasAuthority;\n    const lpBurned = analysis.liquidityPool.isBurned || analysis.liquidityPool.isLocked || false;\n    const mcap = analysis.marketData?.marketCap || 0;\n    \n    // Inverted risk scoring (0=dangerous, 100=safe)\n    if (score >= 75 && mintRenounced && freezeDisabled && lpBurned) {\n      return {\n        rating: '10/10',\n        verdict: 'ðŸŸ¢ MOON SHOT - RICK BOT WOULD APE'\n      };\n    } else if (score >= 50 && mcap < 500000) {\n      return {\n        rating: '7/10',\n        verdict: 'ðŸŸ¡ HIGH RISK/HIGH REWARD - PHANES SAYS WATCH'\n      };\n    } else if (score >= 30) {\n      return {\n        rating: '5/10',\n        verdict: 'ðŸŸ  PROCEED WITH CAUTION - SMALL BAG ONLY'\n      };\n    } else {\n      return {\n        rating: '3/10',\n        verdict: 'ðŸ”´ RUG CITY - TROJAN WOULD BLOCK'\n      };\n    }\n  }\n}\n\nexport const tokenAnalyzer = new SolanaTokenAnalyzer();\n","size_bytes":30925},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/transaction-timeline.tsx":{"content":"import { useState } from \"react\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { ArrowRightLeft, Send, Coins, Flame, AlertTriangle } from \"lucide-react\";\nimport type { TransactionInfo } from \"@shared/schema\";\n\ninterface TransactionTimelineProps {\n  transactions: TransactionInfo[];\n}\n\nexport function TransactionTimeline({ transactions }: TransactionTimelineProps) {\n  const [showAll, setShowAll] = useState(false);\n  const displayedTxs = showAll ? transactions : transactions.slice(0, 5);\n\n  const getIcon = (type: string) => {\n    switch (type) {\n      case \"swap\":\n        return <ArrowRightLeft className=\"h-4 w-4\" />;\n      case \"transfer\":\n        return <Send className=\"h-4 w-4\" />;\n      case \"mint\":\n        return <Coins className=\"h-4 w-4\" />;\n      case \"burn\":\n        return <Flame className=\"h-4 w-4\" />;\n      default:\n        return <ArrowRightLeft className=\"h-4 w-4\" />;\n    }\n  };\n\n  const formatTime = (timestamp: number) => {\n    const date = new Date(timestamp);\n    const now = Date.now();\n    const diff = now - timestamp;\n    \n    if (diff < 60000) return \"just now\";\n    if (diff < 3600000) return `${Math.floor(diff / 60000)}m ago`;\n    if (diff < 86400000) return `${Math.floor(diff / 3600000)}h ago`;\n    return date.toLocaleDateString();\n  };\n\n  if (transactions.length === 0) {\n    return (\n      <Card className=\"p-6\" data-testid=\"card-no-transactions\">\n        <h2 className=\"text-xl font-semibold mb-4\">Recent Transactions</h2>\n        <p className=\"text-sm text-muted-foreground\">No recent transactions found</p>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"p-6\" data-testid=\"card-transaction-timeline\">\n      <h2 className=\"text-xl font-semibold mb-4\">Recent Transactions</h2>\n      \n      <div className=\"space-y-3\">\n        {displayedTxs.map((tx, index) => (\n          <div\n            key={tx.signature}\n            className={`flex items-start gap-3 p-3 rounded-md border-l-2 ${\n              tx.suspicious \n                ? \"border-l-red-600 bg-red-50 dark:bg-red-950/20\" \n                : \"border-l-primary bg-muted/30\"\n            }`}\n            data-testid={`transaction-${index}`}\n          >\n            <div className={`p-2 rounded-md ${tx.suspicious ? \"bg-red-100 dark:bg-red-900/30\" : \"bg-primary/10\"}`}>\n              {tx.suspicious ? (\n                <AlertTriangle className=\"h-4 w-4 text-red-600\" />\n              ) : (\n                getIcon(tx.type)\n              )}\n            </div>\n            \n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-center justify-between gap-2 flex-wrap\">\n                <span className=\"text-sm font-semibold capitalize\" data-testid={`text-tx-type-${index}`}>\n                  {tx.type}\n                  {tx.suspicious && (\n                    <span className=\"ml-2 text-xs text-red-600 font-normal\">â€¢ Suspicious</span>\n                  )}\n                </span>\n                <span className=\"text-xs text-muted-foreground\" data-testid={`text-tx-time-${index}`}>\n                  {formatTime(tx.timestamp)}\n                </span>\n              </div>\n              \n              <div className=\"text-xs text-muted-foreground mt-1 font-mono\" data-testid={`text-tx-signature-${index}`}>\n                {tx.signature.slice(0, 8)}...{tx.signature.slice(-8)}\n              </div>\n              \n              {tx.from && (\n                <div className=\"text-xs text-muted-foreground mt-1\">\n                  From: <span className=\"font-mono\">{tx.from.slice(0, 4)}...{tx.from.slice(-4)}</span>\n                </div>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {transactions.length > 5 && (\n        <div className=\"mt-4 text-center\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setShowAll(!showAll)}\n            data-testid=\"button-toggle-transactions\"\n          >\n            {showAll ? \"Show Less\" : `Load More (${transactions.length - 5} remaining)`}\n          </Button>\n        </div>\n      )}\n    </Card>\n  );\n}\n","size_bytes":4123},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"server/storage.ts":{"content":"import {\n  users,\n  subscriptions,\n  subscriptionCodes,\n  codeRedemptions,\n  walletConnections,\n  walletChallenges,\n  kolWallets,\n  watchlistEntries,\n  portfolioPositions,\n  portfolioTransactions,\n  priceAlerts,\n  tokenSnapshots,\n  trendingTokens,\n  riskStatistics,\n  userProfiles,\n  tokenComments,\n  commentVotes,\n  communityVotes,\n  communityVoteSummaries,\n  sharedWatchlists,\n  watchlistFollowers,\n  tokenReports,\n  userActivities,\n  type User,\n  type UpsertUser,\n  type SubscriptionCode,\n  type InsertSubscriptionCode,\n  type CodeRedemption,\n  type InsertCodeRedemption,\n  type Subscription,\n  type InsertSubscription,\n  type WalletConnection,\n  type InsertWalletConnection,\n  type WalletChallenge,\n  type InsertWalletChallenge,\n  type KolWallet,\n  type WatchlistEntry,\n  type InsertWatchlistEntry,\n  type PortfolioPosition,\n  type InsertPortfolioPosition,\n  type PortfolioTransaction,\n  type InsertPortfolioTransaction,\n  type PriceAlert,\n  type InsertPriceAlert,\n  type TokenSnapshot,\n  type InsertTokenSnapshot,\n  type TrendingToken,\n  type InsertTrendingToken,\n  type RiskStatistic,\n  type InsertRiskStatistic,\n  type UserProfile,\n  type InsertUserProfile,\n  type TokenComment,\n  type InsertTokenComment,\n  type CommentVote,\n  type InsertCommentVote,\n  type CommunityVote,\n  type InsertCommunityVote,\n  type CommunityVoteSummary,\n  type InsertCommunityVoteSummary,\n  type SharedWatchlist,\n  type InsertSharedWatchlist,\n  type WatchlistFollower,\n  type InsertWatchlistFollower,\n  type TokenReport,\n  type InsertTokenReport,\n  type UserActivity,\n  type InsertUserActivity,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, and, isNull, lt, inArray, desc, sql } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // User operations (required by Replit Auth)\n  getUser(id: string): Promise<User | undefined>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  updateUserWhopInfo(userId: string, whopUserId: string): Promise<User>;\n  \n  // Subscription operations\n  getSubscription(userId: string): Promise<Subscription | undefined>;\n  getSubscriptionByWhopId(whopMembershipId: string): Promise<Subscription | undefined>;\n  createSubscription(subscription: InsertSubscription): Promise<Subscription>;\n  updateSubscription(id: string, data: Partial<InsertSubscription>): Promise<Subscription>;\n  \n  // Subscription code operations\n  getSubscriptionCode(code: string): Promise<SubscriptionCode | undefined>;\n  redeemCode(userId: string, code: string): Promise<{ success: boolean; message: string; subscription?: Subscription }>;\n  \n  // Wallet connection operations\n  getWalletConnection(userId: string): Promise<WalletConnection | undefined>;\n  getWalletByAddress(walletAddress: string): Promise<WalletConnection | undefined>;\n  createWalletConnection(wallet: InsertWalletConnection): Promise<WalletConnection>;\n  updateWalletBalance(walletAddress: string, balance: number, isEligible: boolean): Promise<WalletConnection>;\n  \n  // Wallet challenge operations (anti-replay)\n  createChallenge(userId: string): Promise<WalletChallenge>;\n  getChallenge(challenge: string): Promise<WalletChallenge | undefined>;\n  markChallengeUsed(challengeId: string): Promise<WalletChallenge>;\n  \n  // KOL wallet operations\n  isKolWallet(walletAddress: string): Promise<boolean>;\n  getKolWallet(walletAddress: string): Promise<KolWallet | undefined>;\n  getTopKolWallets(limit?: number): Promise<KolWallet[]>;\n  getKolWalletsByAddresses(addresses: string[]): Promise<KolWallet[]>;\n  \n  // Watchlist operations\n  addToWatchlist(entry: Omit<InsertWatchlistEntry, 'id' | 'createdAt'>): Promise<WatchlistEntry>;\n  removeFromWatchlist(userId: string, tokenAddress: string): Promise<void>;\n  getWatchlist(userId: string): Promise<WatchlistEntry[]>;\n  \n  // Portfolio operations\n  getPortfolioPositions(userId: string): Promise<PortfolioPosition[]>;\n  getPortfolioPosition(userId: string, tokenAddress: string): Promise<PortfolioPosition | undefined>;\n  recordTransaction(userId: string, tx: Omit<InsertPortfolioTransaction, 'id' | 'positionId' | 'userId' | 'createdAt'>): Promise<{ transaction: PortfolioTransaction; position: PortfolioPosition }>;\n  getTransactionHistory(userId: string, tokenAddress?: string): Promise<PortfolioTransaction[]>;\n  deletePosition(userId: string, tokenAddress: string): Promise<void>;\n  \n  // Price alerts operations\n  createPriceAlert(alert: Omit<InsertPriceAlert, 'id' | 'createdAt'>): Promise<PriceAlert>;\n  getPriceAlerts(userId: string): Promise<PriceAlert[]>;\n  getActivePriceAlerts(): Promise<PriceAlert[]>;\n  updatePriceAlert(alertId: string, data: Partial<InsertPriceAlert>): Promise<PriceAlert>;\n  deletePriceAlert(userId: string, alertId: string): Promise<void>;\n  triggerAlert(alertId: string, currentPrice: number): Promise<PriceAlert>;\n  \n  // Analytics operations\n  saveTokenSnapshot(snapshot: Omit<InsertTokenSnapshot, 'id' | 'capturedAt'>): Promise<TokenSnapshot>;\n  getHistoricalData(tokenAddress: string, days: number): Promise<TokenSnapshot[]>;\n  getTrendingTokens(limit?: number): Promise<TrendingToken[]>;\n  updateTrendingScores(tokens: InsertTrendingToken[]): Promise<void>;\n  getRiskStatistics(windowDays: number): Promise<RiskStatistic | undefined>;\n  saveRiskStatistics(stats: Omit<InsertRiskStatistic, 'id' | 'updatedAt'>): Promise<RiskStatistic>;\n  \n  // Social features - User profiles\n  getUserProfile(userId: string): Promise<UserProfile | undefined>;\n  createUserProfile(profile: Omit<InsertUserProfile, 'createdAt'>): Promise<UserProfile>;\n  updateUserProfile(userId: string, data: Partial<InsertUserProfile>): Promise<UserProfile>;\n  getTopUsers(limit?: number): Promise<UserProfile[]>;\n  \n  // Social features - Comments\n  createComment(comment: Omit<InsertTokenComment, 'id' | 'createdAt' | 'upvoteCount' | 'downvoteCount' | 'flagged'>): Promise<TokenComment>;\n  getCommentsByToken(tokenAddress: string): Promise<(TokenComment & { author: User | null })[]>;\n  getFlaggedComments(): Promise<(TokenComment & { author: User | null })[]>;\n  getComment(id: string): Promise<TokenComment | undefined>;\n  deleteComment(id: string, userId: string): Promise<void>;\n  flagComment(id: string): Promise<TokenComment>;\n  updateCommentVoteCounts(commentId: string): Promise<void>;\n  \n  // Social features - Comment votes\n  voteComment(vote: Omit<InsertCommentVote, 'createdAt'>): Promise<CommentVote>;\n  removeCommentVote(userId: string, commentId: string): Promise<void>;\n  getUserCommentVote(userId: string, commentId: string): Promise<CommentVote | undefined>;\n  \n  // Social features - Community votes\n  createCommunityVote(vote: Omit<InsertCommunityVote, 'id' | 'createdAt'>): Promise<CommunityVote>;\n  updateCommunityVote(id: string, data: Partial<InsertCommunityVote>): Promise<CommunityVote>;\n  deleteCommunityVote(id: string, userId: string): Promise<void>;\n  getUserCommunityVote(tokenAddress: string, userId: string): Promise<CommunityVote | undefined>;\n  getCommunityVoteSummary(tokenAddress: string): Promise<CommunityVoteSummary | undefined>;\n  upsertVoteSummary(summary: InsertCommunityVoteSummary): Promise<CommunityVoteSummary>;\n  \n  // Social features - Shared watchlists\n  createSharedWatchlist(watchlist: Omit<InsertSharedWatchlist, 'id' | 'createdAt' | 'updatedAt'>): Promise<SharedWatchlist>;\n  getSharedWatchlist(id: string): Promise<SharedWatchlist | undefined>;\n  getSharedWatchlistBySlug(slug: string): Promise<SharedWatchlist | undefined>;\n  updateSharedWatchlist(id: string, data: Partial<InsertSharedWatchlist>): Promise<SharedWatchlist>;\n  getPublicWatchlists(limit?: number): Promise<SharedWatchlist[]>;\n  getUserSharedWatchlists(userId: string): Promise<SharedWatchlist[]>;\n  \n  // Social features - Watchlist followers\n  followWatchlist(userId: string, watchlistId: string): Promise<WatchlistFollower>;\n  unfollowWatchlist(userId: string, watchlistId: string): Promise<void>;\n  getFollowedWatchlists(userId: string): Promise<SharedWatchlist[]>;\n  isFollowingWatchlist(userId: string, watchlistId: string): Promise<boolean>;\n  \n  // Social features - Token reports\n  createTokenReport(report: Omit<InsertTokenReport, 'id' | 'createdAt' | 'updatedAt'>): Promise<TokenReport>;\n  getTokenReports(tokenAddress: string): Promise<(TokenReport & { reporter: User | null })[]>;\n  updateTokenReport(id: string, data: Partial<InsertTokenReport>): Promise<TokenReport>;\n  getPendingReports(): Promise<(TokenReport & { reporter: User | null })[]>;\n  \n  // Social features - User activities\n  recordActivity(activity: Omit<InsertUserActivity, 'id' | 'createdAt'>): Promise<UserActivity>;\n  getUserActivities(userId: string, limit?: number): Promise<UserActivity[]>;\n  calculateUserReputation(userId: string): Promise<number>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // User operations\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .onConflictDoUpdate({\n        target: users.id,\n        set: {\n          ...userData,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return user;\n  }\n\n  async updateUserWhopInfo(\n    userId: string,\n    whopUserId: string\n  ): Promise<User> {\n    const [user] = await db\n      .update(users)\n      .set({\n        whopUserId,\n        updatedAt: new Date(),\n      })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  // Subscription operations\n  async getSubscription(userId: string): Promise<Subscription | undefined> {\n    const [subscription] = await db\n      .select()\n      .from(subscriptions)\n      .where(eq(subscriptions.userId, userId));\n    return subscription;\n  }\n\n  async getSubscriptionByWhopId(whopMembershipId: string): Promise<Subscription | undefined> {\n    const [subscription] = await db\n      .select()\n      .from(subscriptions)\n      .where(eq(subscriptions.whopMembershipId, whopMembershipId));\n    return subscription;\n  }\n\n  async createSubscription(subscriptionData: InsertSubscription): Promise<Subscription> {\n    const [subscription] = await db\n      .insert(subscriptions)\n      .values(subscriptionData)\n      .returning();\n    return subscription;\n  }\n\n  async updateSubscription(id: string, data: Partial<InsertSubscription>): Promise<Subscription> {\n    const [subscription] = await db\n      .update(subscriptions)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(subscriptions.id, id))\n      .returning();\n    return subscription;\n  }\n\n  // Subscription code operations\n  async getSubscriptionCode(code: string): Promise<SubscriptionCode | undefined> {\n    const [subscriptionCode] = await db\n      .select()\n      .from(subscriptionCodes)\n      .where(eq(subscriptionCodes.code, code));\n    return subscriptionCode;\n  }\n\n  async redeemCode(userId: string, code: string): Promise<{ success: boolean; message: string; subscription?: Subscription }> {\n    // Use transaction to prevent race conditions\n    return await db.transaction(async (tx) => {\n      // Lock the code row for update to prevent concurrent redemptions\n      const [codeRecord] = await tx\n        .select()\n        .from(subscriptionCodes)\n        .where(eq(subscriptionCodes.code, code))\n        .for('update');\n      \n      if (!codeRecord) {\n        return { success: false, message: 'Invalid code' };\n      }\n      \n      if (!codeRecord.isActive) {\n        return { success: false, message: 'This code has been deactivated' };\n      }\n      \n      if (codeRecord.expiresAt && codeRecord.expiresAt < new Date()) {\n        return { success: false, message: 'This code has expired' };\n      }\n      \n      if (codeRecord.maxUses && codeRecord.usedCount >= codeRecord.maxUses) {\n        return { success: false, message: 'This code has reached its maximum uses' };\n      }\n      \n      // Check if user already redeemed this code\n      const [existingRedemption] = await tx\n        .select()\n        .from(codeRedemptions)\n        .where(and(\n          eq(codeRedemptions.userId, userId),\n          eq(codeRedemptions.code, code)\n        ));\n      \n      if (existingRedemption) {\n        return { success: false, message: 'You have already redeemed this code' };\n      }\n      \n      // Create or update subscription\n      const [existingSubscription] = await tx\n        .select()\n        .from(subscriptions)\n        .where(eq(subscriptions.userId, userId));\n      \n      let subscription: Subscription;\n      \n      if (existingSubscription) {\n        // Update existing subscription to lifetime\n        const [updated] = await tx\n          .update(subscriptions)\n          .set({\n            tier: codeRecord.tier,\n            status: 'valid',\n            currentPeriodEnd: new Date('2099-12-31'),\n            updatedAt: new Date(),\n          })\n          .where(eq(subscriptions.id, existingSubscription.id))\n          .returning();\n        subscription = updated;\n      } else {\n        // Create new subscription\n        const [created] = await tx\n          .insert(subscriptions)\n          .values({\n            userId,\n            tier: codeRecord.tier,\n            status: 'valid',\n            currentPeriodEnd: new Date('2099-12-31'),\n          })\n          .returning();\n        subscription = created;\n      }\n      \n      // Record redemption\n      await tx.insert(codeRedemptions).values({\n        userId,\n        codeId: codeRecord.id,\n        code: codeRecord.code,\n      });\n      \n      // Increment usage count using SQL to prevent race conditions\n      await tx\n        .update(subscriptionCodes)\n        .set({ \n          usedCount: sql`${subscriptionCodes.usedCount} + 1`,\n          updatedAt: new Date(),\n        })\n        .where(eq(subscriptionCodes.id, codeRecord.id));\n      \n      return { \n        success: true, \n        message: `Successfully activated ${codeRecord.tier} subscription!`,\n        subscription,\n      };\n    });\n  }\n\n  // Access control - checks subscription OR token holder status\n  async hasActiveAccess(userId: string): Promise<{\n    hasAccess: boolean;\n    reason: string;\n    subscription?: Subscription;\n    wallet?: WalletConnection;\n  }> {\n    const now = new Date();\n    \n    // Check subscription status (Whop vocabulary)\n    const subscription = await this.getSubscription(userId);\n    \n    if (subscription) {\n      // Lifetime tier never expires\n      if (subscription.tier === 'lifetime' && subscription.status === 'valid') {\n        return {\n          hasAccess: true,\n          reason: `Lifetime subscription (never expires)`,\n          subscription,\n        };\n      }\n      \n      // Check if subscription is valid/trialing AND not expired\n      const periodEnd = subscription.currentPeriodEnd || subscription.trialEndsAt;\n      \n      // Whop statuses: \"valid\" (active subscription), \"trialing\" (in trial), \"past_due\" (grace period)\n      const activeStatuses = ['valid', 'trialing', 'past_due'];\n      \n      if (activeStatuses.includes(subscription.status) && periodEnd && periodEnd > now) {\n        return {\n          hasAccess: true,\n          reason: `Active ${subscription.tier} subscription (${subscription.status}) until ${periodEnd.toISOString()}`,\n          subscription,\n        };\n      }\n      \n      // Handle expired subscriptions - mark as expired\n      if ((subscription.tier === 'free_trial' || subscription.status === 'trialing') && periodEnd && periodEnd <= now) {\n        // Auto-expire the subscription/trial\n        const updated = await this.updateSubscription(subscription.id, {\n          status: 'expired',\n        });\n        \n        // Update the local reference with fresh data\n        subscription.status = updated.status;\n        \n        // Continue to check wallet, don't return yet\n      }\n    }\n    \n    // Check wallet token holder status (10M+ tokens)\n    const wallet = await this.getWalletConnection(userId);\n    \n    if (wallet?.isEligible) {\n      // Check if verification is recent (within 24 hours)\n      const lastVerified = wallet.lastVerifiedAt ? new Date(wallet.lastVerifiedAt) : null;\n      const twentyFourHoursAgo = new Date(now.getTime() - 24 * 60 * 60 * 1000);\n      \n      if (lastVerified && lastVerified > twentyFourHoursAgo) {\n        return {\n          hasAccess: true,\n          reason: `Token holder with ${wallet.tokenBalance.toLocaleString()} tokens (verified ${lastVerified.toISOString()})`,\n          wallet,\n        };\n      } else {\n        return {\n          hasAccess: false,\n          reason: 'Token balance verification expired (older than 24 hours). Please reverify your wallet.',\n          wallet,\n        };\n      }\n    }\n    \n    // No access\n    if (subscription?.tier === 'free_trial') {\n      return {\n        hasAccess: false,\n        reason: 'Free trial expired. Please subscribe or connect a wallet with 10M+ tokens.',\n        subscription,\n      };\n    }\n    \n    return {\n      hasAccess: false,\n      reason: 'No active subscription or token holder status. Please subscribe or connect a wallet with 10M+ tokens.',\n      subscription,\n      wallet,\n    };\n  }\n\n  // Wallet connection operations\n  async getWalletConnection(userId: string): Promise<WalletConnection | undefined> {\n    const [wallet] = await db\n      .select()\n      .from(walletConnections)\n      .where(eq(walletConnections.userId, userId));\n    return wallet;\n  }\n\n  async getWalletByAddress(walletAddress: string): Promise<WalletConnection | undefined> {\n    const [wallet] = await db\n      .select()\n      .from(walletConnections)\n      .where(eq(walletConnections.walletAddress, walletAddress));\n    return wallet;\n  }\n\n  async createWalletConnection(walletData: InsertWalletConnection): Promise<WalletConnection> {\n    const [wallet] = await db\n      .insert(walletConnections)\n      .values(walletData)\n      .returning();\n    return wallet;\n  }\n\n  async updateWalletBalance(\n    walletAddress: string,\n    balance: number,\n    isEligible: boolean\n  ): Promise<WalletConnection> {\n    const [wallet] = await db\n      .update(walletConnections)\n      .set({\n        tokenBalance: balance,\n        isEligible,\n        lastVerifiedAt: new Date(),\n        updatedAt: new Date(),\n      })\n      .where(eq(walletConnections.walletAddress, walletAddress))\n      .returning();\n    return wallet;\n  }\n\n  // Wallet challenge operations (anti-replay)\n  async createChallenge(userId: string): Promise<WalletChallenge> {\n    // Generate random challenge (nonce)\n    const challenge = `verify-${userId}-${Date.now()}-${Math.random().toString(36).substring(2, 15)}`;\n    const expiresAt = new Date(Date.now() + 5 * 60 * 1000); // 5 minutes from now\n    \n    const [created] = await db\n      .insert(walletChallenges)\n      .values({\n        userId,\n        challenge,\n        expiresAt,\n      })\n      .returning();\n    return created;\n  }\n\n  async getChallenge(challenge: string): Promise<WalletChallenge | undefined> {\n    const [found] = await db\n      .select()\n      .from(walletChallenges)\n      .where(eq(walletChallenges.challenge, challenge));\n    return found;\n  }\n\n  async markChallengeUsed(challengeId: string): Promise<WalletChallenge> {\n    const [updated] = await db\n      .update(walletChallenges)\n      .set({\n        usedAt: new Date(),\n      })\n      .where(eq(walletChallenges.id, challengeId))\n      .returning();\n    return updated;\n  }\n\n  // KOL wallet operations\n  async isKolWallet(walletAddress: string): Promise<boolean> {\n    const [kol] = await db\n      .select({ id: kolWallets.id })\n      .from(kolWallets)\n      .where(eq(kolWallets.walletAddress, walletAddress))\n      .limit(1);\n    return !!kol;\n  }\n\n  async getKolWallet(walletAddress: string): Promise<KolWallet | undefined> {\n    const [kol] = await db\n      .select()\n      .from(kolWallets)\n      .where(eq(kolWallets.walletAddress, walletAddress));\n    return kol;\n  }\n\n  async getTopKolWallets(limit: number = 100): Promise<KolWallet[]> {\n    return await db\n      .select()\n      .from(kolWallets)\n      .where(eq(kolWallets.isVerified, true))\n      .orderBy(desc(kolWallets.influenceScore), desc(kolWallets.rank))\n      .limit(limit);\n  }\n\n  async getKolWalletsByAddresses(addresses: string[]): Promise<KolWallet[]> {\n    if (addresses.length === 0) return [];\n    \n    return await db\n      .select()\n      .from(kolWallets)\n      .where(inArray(kolWallets.walletAddress, addresses));\n  }\n\n  // Watchlist operations\n  async addToWatchlist(entry: Omit<InsertWatchlistEntry, 'id' | 'createdAt'>): Promise<WatchlistEntry> {\n    const [watchlistEntry] = await db\n      .insert(watchlistEntries)\n      .values(entry)\n      .returning();\n    return watchlistEntry;\n  }\n\n  async removeFromWatchlist(userId: string, tokenAddress: string): Promise<void> {\n    await db\n      .delete(watchlistEntries)\n      .where(\n        and(\n          eq(watchlistEntries.userId, userId),\n          eq(watchlistEntries.tokenAddress, tokenAddress)\n        )\n      );\n  }\n\n  async getWatchlist(userId: string): Promise<WatchlistEntry[]> {\n    return await db\n      .select()\n      .from(watchlistEntries)\n      .where(eq(watchlistEntries.userId, userId))\n      .orderBy(desc(watchlistEntries.createdAt));\n  }\n\n  // Portfolio operations\n  async getPortfolioPositions(userId: string): Promise<PortfolioPosition[]> {\n    return await db\n      .select()\n      .from(portfolioPositions)\n      .where(eq(portfolioPositions.userId, userId))\n      .orderBy(desc(portfolioPositions.updatedAt));\n  }\n\n  async getPortfolioPosition(userId: string, tokenAddress: string): Promise<PortfolioPosition | undefined> {\n    const [position] = await db\n      .select()\n      .from(portfolioPositions)\n      .where(\n        and(\n          eq(portfolioPositions.userId, userId),\n          eq(portfolioPositions.tokenAddress, tokenAddress)\n        )\n      );\n    return position;\n  }\n\n  async recordTransaction(\n    userId: string,\n    tx: Omit<InsertPortfolioTransaction, 'id' | 'positionId' | 'userId' | 'createdAt'> & { tokenAddress: string }\n  ): Promise<{ transaction: PortfolioTransaction; position: PortfolioPosition }> {\n    const Decimal = (await import('decimal.js')).default;\n    type DecimalType = InstanceType<typeof Decimal>;\n    \n    // Coerce and validate numeric inputs (FormData sends strings)\n    const quantity = new Decimal(String(tx.quantity));\n    if (quantity.isZero() || quantity.isNegative()) {\n      throw new Error('Transaction quantity must be positive');\n    }\n    \n    // Validate required fields per txType\n    if (tx.txType === 'buy' || tx.txType === 'sell') {\n      if (!tx.priceUsd || tx.priceUsd === '' || tx.priceUsd === null) {\n        throw new Error(`priceUsd is required for ${tx.txType} transactions`);\n      }\n      // Validate priceUsd is numeric\n      const price = new Decimal(String(tx.priceUsd));\n      if (price.isNegative()) {\n        throw new Error('Price must be positive');\n      }\n    }\n\n    // Use database transaction with row-level locking\n    const result = await db.transaction(async (trx) => {\n      // Find or create position with SELECT FOR UPDATE (lock the row)\n      let [position] = await trx\n        .select()\n        .from(portfolioPositions)\n        .where(\n          and(\n            eq(portfolioPositions.userId, userId),\n            eq(portfolioPositions.tokenAddress, tx.tokenAddress)\n          )\n        )\n        .for('update');\n\n      // Create position if doesn't exist\n      if (!position) {\n        [position] = await trx\n          .insert(portfolioPositions)\n          .values({\n            userId,\n            tokenAddress: tx.tokenAddress,\n            quantity: '0',\n            avgCostUsd: null,\n            realizedPnlUsd: '0',\n            latestPriceUsd: null,\n            unrealizedPnlUsd: null,\n            pnlPct: null,\n            lastRebalancedAt: null,\n          })\n          .returning();\n      }\n\n      // Calculate updates using weighted-average cost basis with decimal.js\n      const oldQuantity = new Decimal(position.quantity || '0');\n      const oldAvgCost = position.avgCostUsd ? new Decimal(position.avgCostUsd) : new Decimal(0);\n      const oldRealizedPnl = new Decimal(position.realizedPnlUsd || '0');\n      const txPrice = tx.priceUsd ? new Decimal(tx.priceUsd.toString()) : new Decimal(0);\n      const txFee = tx.feeUsd ? new Decimal(tx.feeUsd.toString()) : new Decimal(0);\n\n      let newQuantity: DecimalType;\n      let newAvgCost: DecimalType | null;\n      let newRealizedPnl: DecimalType;\n\n      switch (tx.txType) {\n        case 'buy':\n          // Weighted average: (oldQty * oldCost + buyQty * buyPrice + fee) / newQty\n          newQuantity = oldQuantity.plus(quantity);\n          const totalCost = oldQuantity.times(oldAvgCost).plus(quantity.times(txPrice)).plus(txFee);\n          newAvgCost = totalCost.div(newQuantity);\n          newRealizedPnl = oldRealizedPnl;\n          break;\n\n        case 'sell':\n          // Validate sufficient holdings BEFORE any calculations\n          if (oldQuantity.lessThan(quantity)) {\n            throw new Error(`Insufficient holdings: have ${oldQuantity.toFixed(4)}, trying to sell ${quantity.toFixed(4)}`);\n          }\n          \n          // Additional safety check - prevent negative quantities\n          const afterSellQuantity = oldQuantity.minus(quantity);\n          if (afterSellQuantity.isNegative()) {\n            throw new Error(`Sell would result in negative quantity`);\n          }\n          \n          // Realized P&L: (sellPrice * sellQty - fee) - (avgCost * sellQty)\n          const proceeds = txPrice.times(quantity).minus(txFee);\n          const costBasis = oldAvgCost.times(quantity);\n          const realizedGain = proceeds.minus(costBasis);\n          \n          newQuantity = afterSellQuantity;\n          newRealizedPnl = oldRealizedPnl.plus(realizedGain);\n          \n          // Keep avgCost if position remains, reset to null if fully liquidated\n          newAvgCost = newQuantity.isZero() ? null : oldAvgCost;\n          break;\n\n        case 'airdrop':\n          // Add zero-cost quantity without altering avgCost\n          newQuantity = oldQuantity.plus(quantity);\n          // Weighted average with zero cost: (oldQty * oldCost + qty * 0) / newQty\n          newAvgCost = oldQuantity.isZero() ? new Decimal(0) : oldQuantity.times(oldAvgCost).div(newQuantity);\n          newRealizedPnl = oldRealizedPnl;\n          break;\n\n        case 'manual_adjust':\n          // Direct quantity change, preserve avgCost\n          const adjustment = quantity.times(tx.priceUsd ? new Decimal(tx.priceUsd.toString()) : new Decimal(0));\n          if (adjustment.isNegative()) {\n            // Reduction\n            if (oldQuantity.lessThan(quantity.abs())) {\n              throw new Error('Manual adjustment would result in negative quantity');\n            }\n            newQuantity = oldQuantity.minus(quantity.abs());\n          } else {\n            // Increase\n            newQuantity = oldQuantity.plus(quantity);\n          }\n          newAvgCost = oldAvgCost;\n          newRealizedPnl = oldRealizedPnl;\n          break;\n\n        default:\n          throw new Error(`Unknown transaction type: ${tx.txType}`);\n      }\n\n      // Enforce non-negative balance\n      if (newQuantity.isNegative()) {\n        throw new Error('Transaction would result in negative quantity');\n      }\n\n      // Insert transaction record\n      const [transaction] = await trx\n        .insert(portfolioTransactions)\n        .values({\n          positionId: position.id,\n          userId,\n          txType: tx.txType,\n          quantity: quantity.toFixed(12),\n          priceUsd: tx.priceUsd ? txPrice.toFixed(8) : null,\n          feeUsd: txFee.toFixed(8),\n          note: tx.note || null,\n          executedAt: tx.executedAt || new Date(),\n        })\n        .returning();\n\n      // Update position (unrealized P&L will be calculated by price worker)\n      const [updatedPosition] = await trx\n        .update(portfolioPositions)\n        .set({\n          quantity: newQuantity.toFixed(12),\n          avgCostUsd: newAvgCost ? newAvgCost.toFixed(8) : null,\n          realizedPnlUsd: newRealizedPnl.toFixed(8),\n          updatedAt: new Date(),\n        })\n        .where(eq(portfolioPositions.id, position.id))\n        .returning();\n\n      return { transaction, position: updatedPosition };\n    });\n\n    return result;\n  }\n\n  async getTransactionHistory(userId: string, tokenAddress?: string): Promise<PortfolioTransaction[]> {\n    if (tokenAddress) {\n      // Get position first to filter by positionId\n      const position = await this.getPortfolioPosition(userId, tokenAddress);\n      if (!position) return [];\n      \n      return await db\n        .select()\n        .from(portfolioTransactions)\n        .where(eq(portfolioTransactions.positionId, position.id))\n        .orderBy(desc(portfolioTransactions.executedAt));\n    }\n    \n    return await db\n      .select()\n      .from(portfolioTransactions)\n      .where(eq(portfolioTransactions.userId, userId))\n      .orderBy(desc(portfolioTransactions.executedAt));\n  }\n\n  async deletePosition(userId: string, tokenAddress: string): Promise<void> {\n    await db\n      .delete(portfolioPositions)\n      .where(\n        and(\n          eq(portfolioPositions.userId, userId),\n          eq(portfolioPositions.tokenAddress, tokenAddress)\n        )\n      );\n    // Transactions cascade delete via FK\n  }\n\n  // Price alerts operations\n  async createPriceAlert(alert: Omit<InsertPriceAlert, 'id' | 'createdAt'>): Promise<PriceAlert> {\n    const [priceAlert] = await db\n      .insert(priceAlerts)\n      .values(alert)\n      .returning();\n    return priceAlert;\n  }\n\n  async getPriceAlerts(userId: string): Promise<PriceAlert[]> {\n    return await db\n      .select()\n      .from(priceAlerts)\n      .where(eq(priceAlerts.userId, userId))\n      .orderBy(desc(priceAlerts.createdAt));\n  }\n\n  async getActivePriceAlerts(): Promise<PriceAlert[]> {\n    return await db\n      .select()\n      .from(priceAlerts)\n      .where(eq(priceAlerts.isActive, true));\n  }\n\n  async updatePriceAlert(alertId: string, data: Partial<InsertPriceAlert>): Promise<PriceAlert> {\n    const [updated] = await db\n      .update(priceAlerts)\n      .set(data)\n      .where(eq(priceAlerts.id, alertId))\n      .returning();\n    return updated;\n  }\n\n  async deletePriceAlert(userId: string, alertId: string): Promise<void> {\n    await db\n      .delete(priceAlerts)\n      .where(\n        and(\n          eq(priceAlerts.id, alertId),\n          eq(priceAlerts.userId, userId)\n        )\n      );\n  }\n\n  async triggerAlert(alertId: string, currentPrice: number): Promise<PriceAlert> {\n    const [updated] = await db\n      .update(priceAlerts)\n      .set({\n        isActive: false,\n        triggeredAt: new Date(),\n        lastPrice: currentPrice.toString(),\n      })\n      .where(eq(priceAlerts.id, alertId))\n      .returning();\n    return updated;\n  }\n\n  // Analytics operations\n  async saveTokenSnapshot(snapshot: Omit<InsertTokenSnapshot, 'id' | 'capturedAt'>): Promise<TokenSnapshot> {\n    const [saved] = await db\n      .insert(tokenSnapshots)\n      .values(snapshot)\n      .returning();\n    return saved;\n  }\n\n  async getHistoricalData(tokenAddress: string, days: number): Promise<TokenSnapshot[]> {\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - days);\n\n    return await db\n      .select()\n      .from(tokenSnapshots)\n      .where(\n        and(\n          eq(tokenSnapshots.tokenAddress, tokenAddress),\n          sql`${tokenSnapshots.capturedAt} >= ${cutoffDate}`\n        )\n      )\n      .orderBy(tokenSnapshots.capturedAt);\n  }\n\n  async getTrendingTokens(limit: number = 50): Promise<TrendingToken[]> {\n    return await db\n      .select()\n      .from(trendingTokens)\n      .orderBy(trendingTokens.rank)\n      .limit(limit);\n  }\n\n  async updateTrendingScores(tokens: InsertTrendingToken[]): Promise<void> {\n    if (tokens.length === 0) return;\n\n    await db.transaction(async (tx) => {\n      for (const token of tokens) {\n        await tx\n          .insert(trendingTokens)\n          .values(token)\n          .onConflictDoUpdate({\n            target: trendingTokens.tokenAddress,\n            set: {\n              score: token.score,\n              scoreBreakdown: token.scoreBreakdown,\n              rank: token.rank,\n              volume24h: token.volume24h,\n              velocity: token.velocity,\n              updatedAt: new Date(),\n            },\n          });\n      }\n    });\n  }\n\n  async getRiskStatistics(windowDays: number): Promise<RiskStatistic | undefined> {\n    const windowStart = new Date();\n    windowStart.setDate(windowStart.getDate() - windowDays);\n\n    const [stats] = await db\n      .select()\n      .from(riskStatistics)\n      .where(sql`${riskStatistics.windowStart} >= ${windowStart}`)\n      .orderBy(desc(riskStatistics.windowEnd))\n      .limit(1);\n\n    return stats;\n  }\n\n  async saveRiskStatistics(stats: Omit<InsertRiskStatistic, 'id' | 'updatedAt'>): Promise<RiskStatistic> {\n    const [saved] = await db\n      .insert(riskStatistics)\n      .values(stats)\n      .returning();\n    return saved;\n  }\n\n  // Social features - User profiles\n  async getUserProfile(userId: string): Promise<UserProfile | undefined> {\n    const [profile] = await db.select().from(userProfiles).where(eq(userProfiles.userId, userId));\n    return profile;\n  }\n\n  async createUserProfile(profile: Omit<InsertUserProfile, 'createdAt'>): Promise<UserProfile> {\n    const [newProfile] = await db.insert(userProfiles).values(profile).returning();\n    return newProfile;\n  }\n\n  async updateUserProfile(userId: string, data: Partial<InsertUserProfile>): Promise<UserProfile> {\n    const [updated] = await db\n      .update(userProfiles)\n      .set(data)\n      .where(eq(userProfiles.userId, userId))\n      .returning();\n    return updated;\n  }\n\n  async getTopUsers(limit: number = 10): Promise<UserProfile[]> {\n    return await db\n      .select()\n      .from(userProfiles)\n      .orderBy(desc(userProfiles.reputationScore))\n      .limit(limit);\n  }\n\n  // Social features - Comments\n  async createComment(comment: Omit<InsertTokenComment, 'id' | 'createdAt' | 'upvoteCount' | 'downvoteCount' | 'flagged'>): Promise<TokenComment> {\n    const [newComment] = await db.insert(tokenComments).values(comment).returning();\n    return newComment;\n  }\n\n  async getCommentsByToken(tokenAddress: string): Promise<(TokenComment & { author: User | null })[]> {\n    const comments = await db\n      .select({\n        id: tokenComments.id,\n        tokenAddress: tokenComments.tokenAddress,\n        userId: tokenComments.userId,\n        commentText: tokenComments.commentText,\n        rating: tokenComments.rating,\n        upvoteCount: tokenComments.upvoteCount,\n        downvoteCount: tokenComments.downvoteCount,\n        flagged: tokenComments.flagged,\n        createdAt: tokenComments.createdAt,\n        author: users,\n      })\n      .from(tokenComments)\n      .leftJoin(users, eq(tokenComments.userId, users.id))\n      .where(eq(tokenComments.tokenAddress, tokenAddress))\n      .orderBy(desc(tokenComments.createdAt));\n    \n    return comments as (TokenComment & { author: User | null })[];\n  }\n\n  async getComment(id: string): Promise<TokenComment | undefined> {\n    const [comment] = await db.select().from(tokenComments).where(eq(tokenComments.id, id));\n    return comment;\n  }\n\n  async getFlaggedComments(): Promise<(TokenComment & { author: User | null })[]> {\n    const comments = await db\n      .select({\n        id: tokenComments.id,\n        tokenAddress: tokenComments.tokenAddress,\n        userId: tokenComments.userId,\n        commentText: tokenComments.commentText,\n        rating: tokenComments.rating,\n        upvoteCount: tokenComments.upvoteCount,\n        downvoteCount: tokenComments.downvoteCount,\n        flagged: tokenComments.flagged,\n        createdAt: tokenComments.createdAt,\n        author: users,\n      })\n      .from(tokenComments)\n      .leftJoin(users, eq(tokenComments.userId, users.id))\n      .where(eq(tokenComments.flagged, true))\n      .orderBy(desc(tokenComments.createdAt));\n    \n    return comments as (TokenComment & { author: User | null })[];\n  }\n\n  async deleteComment(id: string, userId: string): Promise<void> {\n    await db.delete(tokenComments).where(\n      and(\n        eq(tokenComments.id, id),\n        eq(tokenComments.userId, userId)\n      )\n    );\n  }\n\n  async flagComment(id: string): Promise<TokenComment> {\n    const [flagged] = await db\n      .update(tokenComments)\n      .set({ flagged: true })\n      .where(eq(tokenComments.id, id))\n      .returning();\n    return flagged;\n  }\n\n  async updateCommentVoteCounts(commentId: string): Promise<void> {\n    const votes = await db\n      .select()\n      .from(commentVotes)\n      .where(eq(commentVotes.commentId, commentId));\n    \n    const upvotes = votes.filter(v => v.voteType === 'up').length;\n    const downvotes = votes.filter(v => v.voteType === 'down').length;\n    \n    await db\n      .update(tokenComments)\n      .set({ upvoteCount: upvotes, downvoteCount: downvotes })\n      .where(eq(tokenComments.id, commentId));\n  }\n\n  // Social features - Comment votes\n  async voteComment(vote: Omit<InsertCommentVote, 'createdAt'>): Promise<CommentVote> {\n    const [newVote] = await db\n      .insert(commentVotes)\n      .values(vote)\n      .onConflictDoUpdate({\n        target: [commentVotes.userId, commentVotes.commentId],\n        set: { voteType: vote.voteType },\n      })\n      .returning();\n    \n    await this.updateCommentVoteCounts(vote.commentId);\n    return newVote;\n  }\n\n  async removeCommentVote(userId: string, commentId: string): Promise<void> {\n    await db.delete(commentVotes).where(\n      and(\n        eq(commentVotes.userId, userId),\n        eq(commentVotes.commentId, commentId)\n      )\n    );\n    await this.updateCommentVoteCounts(commentId);\n  }\n\n  async getUserCommentVote(userId: string, commentId: string): Promise<CommentVote | undefined> {\n    const [vote] = await db\n      .select()\n      .from(commentVotes)\n      .where(\n        and(\n          eq(commentVotes.userId, userId),\n          eq(commentVotes.commentId, commentId)\n        )\n      );\n    return vote;\n  }\n\n  // Social features - Community votes\n  async createCommunityVote(vote: Omit<InsertCommunityVote, 'id' | 'createdAt'>): Promise<CommunityVote> {\n    const [newVote] = await db\n      .insert(communityVotes)\n      .values(vote)\n      .onConflictDoUpdate({\n        target: [communityVotes.tokenAddress, communityVotes.userId],\n        set: {\n          voteType: vote.voteType,\n          confidence: vote.confidence,\n          reason: vote.reason,\n          weight: vote.weight,\n        },\n      })\n      .returning();\n    return newVote;\n  }\n\n  async updateCommunityVote(id: string, data: Partial<InsertCommunityVote>): Promise<CommunityVote> {\n    const [updated] = await db\n      .update(communityVotes)\n      .set(data)\n      .where(eq(communityVotes.id, id))\n      .returning();\n    return updated;\n  }\n\n  async deleteCommunityVote(id: string, userId: string): Promise<void> {\n    await db.delete(communityVotes).where(\n      and(\n        eq(communityVotes.id, id),\n        eq(communityVotes.userId, userId)\n      )\n    );\n  }\n\n  async getUserCommunityVote(tokenAddress: string, userId: string): Promise<CommunityVote | undefined> {\n    const [vote] = await db\n      .select()\n      .from(communityVotes)\n      .where(\n        and(\n          eq(communityVotes.tokenAddress, tokenAddress),\n          eq(communityVotes.userId, userId)\n        )\n      );\n    return vote;\n  }\n\n  async getCommunityVoteSummary(tokenAddress: string): Promise<CommunityVoteSummary | undefined> {\n    const [summary] = await db\n      .select()\n      .from(communityVoteSummaries)\n      .where(eq(communityVoteSummaries.tokenAddress, tokenAddress));\n    return summary;\n  }\n\n  async upsertVoteSummary(summary: InsertCommunityVoteSummary): Promise<CommunityVoteSummary> {\n    const [upserted] = await db\n      .insert(communityVoteSummaries)\n      .values(summary)\n      .onConflictDoUpdate({\n        target: communityVoteSummaries.tokenAddress,\n        set: {\n          safeWeight: summary.safeWeight,\n          riskyWeight: summary.riskyWeight,\n          scamWeight: summary.scamWeight,\n          totalVotes: summary.totalVotes,\n          consensus: summary.consensus,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return upserted;\n  }\n\n  // Social features - Shared watchlists\n  async createSharedWatchlist(watchlist: Omit<InsertSharedWatchlist, 'id' | 'createdAt' | 'updatedAt'>): Promise<SharedWatchlist> {\n    const [newWatchlist] = await db\n      .insert(sharedWatchlists)\n      .values(watchlist)\n      .returning();\n    return newWatchlist;\n  }\n\n  async getSharedWatchlist(id: string): Promise<SharedWatchlist | undefined> {\n    const [watchlist] = await db\n      .select()\n      .from(sharedWatchlists)\n      .where(eq(sharedWatchlists.id, id));\n    return watchlist;\n  }\n\n  async getSharedWatchlistBySlug(slug: string): Promise<SharedWatchlist | undefined> {\n    const [watchlist] = await db\n      .select()\n      .from(sharedWatchlists)\n      .where(eq(sharedWatchlists.shareSlug, slug));\n    return watchlist;\n  }\n\n  async updateSharedWatchlist(id: string, data: Partial<InsertSharedWatchlist>): Promise<SharedWatchlist> {\n    const [updated] = await db\n      .update(sharedWatchlists)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(sharedWatchlists.id, id))\n      .returning();\n    return updated;\n  }\n\n  async getPublicWatchlists(limit: number = 20): Promise<SharedWatchlist[]> {\n    return await db\n      .select()\n      .from(sharedWatchlists)\n      .where(eq(sharedWatchlists.isPublic, true))\n      .orderBy(desc(sharedWatchlists.followersCount))\n      .limit(limit);\n  }\n\n  async getUserSharedWatchlists(userId: string): Promise<SharedWatchlist[]> {\n    return await db\n      .select()\n      .from(sharedWatchlists)\n      .where(eq(sharedWatchlists.ownerId, userId))\n      .orderBy(desc(sharedWatchlists.createdAt));\n  }\n\n  // Social features - Watchlist followers\n  async followWatchlist(userId: string, watchlistId: string): Promise<WatchlistFollower> {\n    const [follower] = await db\n      .insert(watchlistFollowers)\n      .values({ userId, watchlistId })\n      .onConflictDoNothing()\n      .returning();\n    \n    await db\n      .update(sharedWatchlists)\n      .set({\n        followersCount: sql`${sharedWatchlists.followersCount} + 1`,\n      })\n      .where(eq(sharedWatchlists.id, watchlistId));\n    \n    return follower;\n  }\n\n  async unfollowWatchlist(userId: string, watchlistId: string): Promise<void> {\n    await db\n      .delete(watchlistFollowers)\n      .where(\n        and(\n          eq(watchlistFollowers.userId, userId),\n          eq(watchlistFollowers.watchlistId, watchlistId)\n        )\n      );\n    \n    await db\n      .update(sharedWatchlists)\n      .set({\n        followersCount: sql`GREATEST(0, ${sharedWatchlists.followersCount} - 1)`,\n      })\n      .where(eq(sharedWatchlists.id, watchlistId));\n  }\n\n  async getFollowedWatchlists(userId: string): Promise<SharedWatchlist[]> {\n    const followed = await db\n      .select({\n        watchlist: sharedWatchlists,\n      })\n      .from(watchlistFollowers)\n      .innerJoin(sharedWatchlists, eq(watchlistFollowers.watchlistId, sharedWatchlists.id))\n      .where(eq(watchlistFollowers.userId, userId));\n    \n    return followed.map(f => f.watchlist);\n  }\n\n  async isFollowingWatchlist(userId: string, watchlistId: string): Promise<boolean> {\n    const [result] = await db\n      .select()\n      .from(watchlistFollowers)\n      .where(\n        and(\n          eq(watchlistFollowers.userId, userId),\n          eq(watchlistFollowers.watchlistId, watchlistId)\n        )\n      );\n    return !!result;\n  }\n\n  // Social features - Token reports\n  async createTokenReport(report: Omit<InsertTokenReport, 'id' | 'createdAt' | 'updatedAt'>): Promise<TokenReport> {\n    const [newReport] = await db\n      .insert(tokenReports)\n      .values(report)\n      .returning();\n    return newReport;\n  }\n\n  async getTokenReports(tokenAddress: string): Promise<(TokenReport & { reporter: User | null })[]> {\n    const reports = await db\n      .select({\n        id: tokenReports.id,\n        tokenAddress: tokenReports.tokenAddress,\n        reporterId: tokenReports.reporterId,\n        reportType: tokenReports.reportType,\n        evidence: tokenReports.evidence,\n        status: tokenReports.status,\n        reviewerId: tokenReports.reviewerId,\n        resolutionNotes: tokenReports.resolutionNotes,\n        severityScore: tokenReports.severityScore,\n        createdAt: tokenReports.createdAt,\n        updatedAt: tokenReports.updatedAt,\n        reporter: users,\n      })\n      .from(tokenReports)\n      .leftJoin(users, eq(tokenReports.reporterId, users.id))\n      .where(eq(tokenReports.tokenAddress, tokenAddress))\n      .orderBy(desc(tokenReports.createdAt));\n    \n    return reports as (TokenReport & { reporter: User | null })[];\n  }\n\n  async updateTokenReport(id: string, data: Partial<InsertTokenReport>): Promise<TokenReport> {\n    const [updated] = await db\n      .update(tokenReports)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(tokenReports.id, id))\n      .returning();\n    return updated;\n  }\n\n  async getPendingReports(): Promise<(TokenReport & { reporter: User | null })[]> {\n    const reports = await db\n      .select({\n        id: tokenReports.id,\n        tokenAddress: tokenReports.tokenAddress,\n        reporterId: tokenReports.reporterId,\n        reportType: tokenReports.reportType,\n        evidence: tokenReports.evidence,\n        status: tokenReports.status,\n        reviewerId: tokenReports.reviewerId,\n        resolutionNotes: tokenReports.resolutionNotes,\n        severityScore: tokenReports.severityScore,\n        createdAt: tokenReports.createdAt,\n        updatedAt: tokenReports.updatedAt,\n        reporter: users,\n      })\n      .from(tokenReports)\n      .leftJoin(users, eq(tokenReports.reporterId, users.id))\n      .where(eq(tokenReports.status, 'pending'))\n      .orderBy(desc(tokenReports.createdAt));\n    \n    return reports as (TokenReport & { reporter: User | null })[];\n  }\n\n  // Social features - User activities\n  async recordActivity(activity: Omit<InsertUserActivity, 'id' | 'createdAt'>): Promise<UserActivity> {\n    const [newActivity] = await db\n      .insert(userActivities)\n      .values(activity)\n      .returning();\n    return newActivity;\n  }\n\n  async getUserActivities(userId: string, limit: number = 50): Promise<UserActivity[]> {\n    return await db\n      .select()\n      .from(userActivities)\n      .where(eq(userActivities.userId, userId))\n      .orderBy(desc(userActivities.createdAt))\n      .limit(limit);\n  }\n\n  async calculateUserReputation(userId: string): Promise<number> {\n    const result = await db\n      .select({\n        totalPoints: sql<number>`COALESCE(SUM(${userActivities.points}), 0)`,\n      })\n      .from(userActivities)\n      .where(eq(userActivities.userId, userId));\n    \n    return result[0]?.totalPoints || 0;\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":47056},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport Home from \"@/pages/home\";\nimport Landing from \"@/pages/landing\";\nimport Subscription from \"@/pages/subscription\";\nimport Pricing from \"@/pages/pricing\";\nimport Features from \"@/pages/features\";\nimport Documentation from \"@/pages/documentation\";\nimport BotGuide from \"@/pages/bot-guide\";\nimport About from \"@/pages/about\";\nimport Terms from \"@/pages/terms\";\nimport Privacy from \"@/pages/privacy\";\nimport VanityGenerator from \"@/pages/vanity-generator\";\nimport AdminWallet from \"@/pages/admin-wallet\";\nimport Admin from \"@/pages/admin\";\nimport BotSetup from \"@/pages/bot-setup\";\nimport Watchlist from \"@/pages/watchlist\";\nimport Portfolio from \"@/pages/portfolio\";\nimport Alerts from \"@/pages/alerts\";\nimport Comparison from \"@/pages/comparison\";\nimport Analytics from \"@/pages/analytics\";\nimport Profile from \"@/pages/profile\";\nimport Leaderboard from \"@/pages/leaderboard\";\nimport Moderation from \"@/pages/admin/moderation\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  // Authentication disabled - all routes are publicly accessible\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/landing\" component={Landing} />\n      <Route path=\"/subscription\" component={Subscription} />\n      <Route path=\"/pricing\" component={Pricing} />\n      <Route path=\"/features\" component={Features} />\n      <Route path=\"/bot-setup\" component={BotSetup} />\n      <Route path=\"/bot-guide\" component={BotGuide} />\n      <Route path=\"/watchlist\" component={Watchlist} />\n      <Route path=\"/portfolio\" component={Portfolio} />\n      <Route path=\"/alerts\" component={Alerts} />\n      <Route path=\"/compare\" component={Comparison} />\n      <Route path=\"/analytics\" component={Analytics} />\n      <Route path=\"/profile/:userId\" component={Profile} />\n      <Route path=\"/leaderboard\" component={Leaderboard} />\n      <Route path=\"/admin/moderation\" component={Moderation} />\n      <Route path=\"/documentation\" component={Documentation} />\n      <Route path=\"/about\" component={About} />\n      <Route path=\"/terms\" component={Terms} />\n      <Route path=\"/privacy\" component={Privacy} />\n      <Route path=\"/vanity\" component={VanityGenerator} />\n      <Route path=\"/admin\" component={Admin} />\n      <Route path=\"/admin/wallet\" component={AdminWallet} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":2874},"server/seed-kol-wallets.ts":{"content":"import { db } from \"./db\";\nimport { kolWallets } from \"../shared/schema\";\nimport { eq } from \"drizzle-orm\";\n\n// KOL wallet data from kolscan.io (as of Nov 11, 2025)\nconst KOL_DATA = [\n  { wallet: \"CyaE1VxvBrahnPWkqm5VsdCvyS2QmNht2UFrKJHga54o\", name: \"Cented\", rank: 1, profit: \"256.53\", wins: 88, losses: 73, influence: 95 },\n  { wallet: \"4cXnf2z85UiZ5cyKsPMEULq1yufAtpkatmX4j4DBZqj2\", name: \"WaiterG\", rank: 2, profit: \"142.98\", wins: 18, losses: 33, influence: 90 },\n  { wallet: \"6mWEJG9LoRdto8TwTdZxmnJpkXpTsEerizcGiCNZvzXd\", name: \"slingoor.usduc\", rank: 3, profit: \"114.32\", wins: 5, losses: 4, influence: 88 },\n  { wallet: \"D1H83ueSw5Nxy5okxH7VBfV4jRnqAK5Mm1tm3JAj3m5t\", name: \"Jeets\", rank: 4, profit: \"82.45\", wins: 1, losses: 2, influence: 85 },\n  { wallet: \"4BdKaxN8G6ka4GYtQQWk4G4dZRUTX2vQH9GcXdBREFUk\", name: \"Jijo\", rank: 5, profit: \"72.09\", wins: 35, losses: 18, influence: 82 },\n  { wallet: \"CUHBzSPSaNS3tArEtM3maSV6pNdJhHJFYZpurPPK9P7H\", name: \"samsrep\", rank: 6, profit: \"65.12\", wins: 9, losses: 26, influence: 80 },\n  { wallet: \"FAicXNV5FVqtfbpn4Zccs71XcfGeyxBSGbqLDyDJZjke\", name: \"radiance\", rank: 7, profit: \"60.41\", wins: 13, losses: 9, influence: 78 },\n  { wallet: \"Dwo2kj88YYhwcFJiybTjXezR9a6QjkMASz5xXD7kujXC\", name: \"Exotic\", rank: 8, profit: \"55.18\", wins: 40, losses: 78, influence: 75 },\n  { wallet: \"G6fUXjMKPJzCY1rveAE6Qm7wy5U3vZgKDJmN1VPAdiZC\", name: \"clukz\", rank: 9, profit: \"46.75\", wins: 12, losses: 12, influence: 72 },\n  { wallet: \"5B79fMkcFeRTiwm7ehsZsFiKsC7m7n1Bgv9yLxPp9q2X\", name: \"bandit\", rank: 10, profit: \"45.89\", wins: 24, losses: 26, influence: 70 },\n  { wallet: \"78N177fzNJpp8pG49xDv1efYcTMSzo9tPTKEA9mAVkh2\", name: \"Sheep\", rank: 11, profit: \"43.39\", wins: 51, losses: 8, influence: 68 },\n  { wallet: \"GfXQesPe3Zuwg8JhAt6Cg8euJDTVx751enp9EQQmhzPH\", name: \"Spuno\", rank: 12, profit: \"33.48\", wins: 25, losses: 41, influence: 65 },\n  { wallet: \"215nhcAHjQQGgwpQSJQ7zR26etbjjtVdW74NLzwEgQjP\", name: \"OGAntD\", rank: 13, profit: \"29.02\", wins: 3, losses: 1, influence: 62 },\n  { wallet: \"BCagckXeMChUKrHEd6fKFA1uiWDtcmCXMsqaheLiUPJd\", name: \"dv\", rank: 14, profit: \"28.87\", wins: 22, losses: 65, influence: 60 },\n  { wallet: \"B32QbbdDAyhvUQzjcaM5j6ZVKwjCxAwGH5Xgvb9SJqnC\", name: \"Kadenox\", rank: 15, profit: \"28.70\", wins: 23, losses: 26, influence: 58 },\n  { wallet: \"5sNnKuWKUtZkdC1eFNyqz3XHpNoCRQ1D1DfHcNHMV7gn\", name: \"cryptovillain26\", rank: 16, profit: \"27.72\", wins: 22, losses: 12, influence: 55 },\n  { wallet: \"4sAUSQFdvWRBxR8UoLBYbw8CcXuwXWxnN8pXa4mtm5nU\", name: \"Scharo\", rank: 17, profit: \"26.11\", wins: 30, losses: 30, influence: 52 },\n  { wallet: \"PMJA8UQDyWTFw2Smhyp9jGA6aTaP7jKHR7BPudrgyYN\", name: \"chester\", rank: 18, profit: \"24.27\", wins: 89, losses: 158, influence: 50 },\n  { wallet: \"FTg1gqW7vPm4kdU1LPM7JJnizbgPdRDy2PitKw6mY27j\", name: \"7\", rank: 19, profit: \"21.19\", wins: 1, losses: 0, influence: 48 },\n  { wallet: \"GJA1HEbxGnqBhBifH9uQauzXSB53to5rhDrzmKxhSU65\", name: \"Latuche\", rank: 20, profit: \"19.66\", wins: 14, losses: 19, influence: 45 },\n  { wallet: \"DuGezKLZp8UL2aQMHthoUibEC7WSbpNiKFJLTtK1QHjx\", name: \"Eddy\", rank: 21, profit: \"14.47\", wins: 1, losses: 0, influence: 42 },\n  { wallet: \"2FbbtmK9MN3Zxkz3AnqoAGnRQNy2SVRaAazq2sFSbftM\", name: \"iconXBT\", rank: 22, profit: \"14.34\", wins: 24, losses: 20, influence: 40 },\n  { wallet: \"AGqjivJr1dSv73TVUvdtqAwogzmThzvYMVXjGWg2FYLm\", name: \"noob mini\", rank: 23, profit: \"14.03\", wins: 15, losses: 35, influence: 38 },\n  { wallet: \"AeLb2RpVwrqKZJ87PEiFdReiEXJXACQn17c8APQS1FHx\", name: \"oscar\", rank: 24, profit: \"13.05\", wins: 23, losses: 38, influence: 35 },\n  { wallet: \"GNrmKZCxYyNiSUsjduwwPJzhed3LATjciiKVuSGrsHEC\", name: \"Giann\", rank: 25, profit: \"13.00\", wins: 18, losses: 25, influence: 32 },\n  { wallet: \"BTf4A2exGK9BCVDNzy65b9dUzXgMqB4weVkvTMFQsadd\", name: \"Kev\", rank: 26, profit: \"12.98\", wins: 52, losses: 100, influence: 30 },\n  { wallet: \"FsG3BaPmRTdSrPaivbgJsFNCCa8cPfkUtk8VLWXkHpHP\", name: \"Reljoo\", rank: 27, profit: \"12.68\", wins: 5, losses: 24, influence: 28 },\n  { wallet: \"4YzpSZpxDdjNf3unjkCtdWEsz2FL5mok7e5XQaDNqry8\", name: \"xunle\", rank: 28, profit: \"12.65\", wins: 4, losses: 10, influence: 25 },\n  { wallet: \"5RQEcWJZdhkxRMbwjSq32RaocgYPaWDhi3ztimWUcrwo\", name: \"EvansOfWeb\", rank: 29, profit: \"12.50\", wins: 2, losses: 4, influence: 22 },\n  { wallet: \"EjtQrPTbcMevStBkpnjsH23NfUCMhGHusTYsHuGVQZp2\", name: \"Zef\", rank: 30, profit: \"11.03\", wins: 7, losses: 15, influence: 20 },\n  { wallet: \"AVjEtg2ECYKXYeqdRQXvaaAZBjfTjYuSMTR4WLhKoeQN\", name: \"Putrick\", rank: 31, profit: \"10.73\", wins: 47, losses: 59, influence: 18 },\n  { wallet: \"Di75xbVUg3u1qcmZci3NcZ8rjFMj7tsnYEoFdEMjS4ow\", name: \"N'o\", rank: 32, profit: \"10.58\", wins: 13, losses: 17, influence: 15 },\n  { wallet: \"Ez2jp3rwXUbaTx7XwiHGaWVgTPFdzJoSg8TopqbxfaJN\", name: \"Keano\", rank: 33, profit: \"10.44\", wins: 18, losses: 20, influence: 12 },\n  { wallet: \"DYAn4XpAkN5mhiXkRB7dGq4Jadnx6XYgu8L5b3WGhbrt\", name: \"The Doc\", rank: 34, profit: \"10.09\", wins: 13, losses: 6, influence: 10 },\n  { wallet: \"FpD6n8gfoZNxyAN6QqNH4TFQdV9vZEgcv5W4H2YL8k4X\", name: \"Hesi\", rank: 35, profit: \"9.86\", wins: 9, losses: 31, influence: 8 },\n  { wallet: \"BQVz7fQ1WsQmSTMY3umdPEPPTm1sdcBcX9sP7o6kPRmB\", name: \"Limfork.eth\", rank: 36, profit: \"9.68\", wins: 17, losses: 20, influence: 6 },\n  { wallet: \"86AEJExyjeNNgcp7GrAvCXTDicf5aGWgoERbXFiG1EdD\", name: \"Publix\", rank: 37, profit: \"9.56\", wins: 9, losses: 11, influence: 5 },\n  { wallet: \"ATFRUwvyMh61w2Ab6AZxUyxsAfiiuG1RqL6iv3Vi9q2B\", name: \"Marcell\", rank: 38, profit: \"9.33\", wins: 1, losses: 0, influence: 4 },\n  { wallet: \"J23qr98GjGJJqKq9CBEnyRhHbmkaVxtTJNNxKu597wsA\", name: \"gr3g\", rank: 39, profit: \"9.19\", wins: 3, losses: 0, influence: 3 },\n  { wallet: \"8DGbkGgQewL9mx4aXzZCUChr7hBVXvPK9fYqSqc7Ajpn\", name: \"Ban\", rank: 40, profit: \"8.59\", wins: 5, losses: 4, influence: 2 },\n  { wallet: \"FRbUNvGxYNC1eFngpn7AD3f14aKKTJVC6zSMtvj2dyCS\", name: \"Henn\", rank: 41, profit: \"7.14\", wins: 21, losses: 30, influence: 1 },\n  { wallet: \"AeLaMjzxErZt4drbWVWvcxpVyo8p94xu5vrg41eZPFe3\", name: \"^1s1mple\", rank: 42, profit: \"6.85\", wins: 35, losses: 40, influence: 1 },\n  { wallet: \"9cdZg6xR4c9kZiqKSzqjn4QHCXNQuC9HEWBzzMJ3mzqw\", name: \"Pikalosi\", rank: 43, profit: \"6.82\", wins: 17, losses: 12, influence: 1 },\n  // Additional high-influence KOLs from kolscan.io\n  { wallet: \"HkFt55P3PhRWHXoTFeuvkKEE4ab26xZ1bk6UmXV88Pwz\", name: \"Terp\", rank: 44, profit: \"0\", wins: 0, losses: 0, influence: 50 },\n  { wallet: \"EeXvxkcGqMDZeTaVeawzxm9mbzZwqDUMmfG3bF7uzumH\", name: \"milito\", rank: 45, profit: \"0\", wins: 0, losses: 0, influence: 50 },\n];\n\nexport async function seedKolWallets() {\n  console.log(\"ðŸŒ± Seeding KOL wallet data...\");\n  \n  let inserted = 0;\n  let updated = 0;\n  let skipped = 0;\n  \n  for (const kol of KOL_DATA) {\n    try {\n      // Check if wallet already exists\n      const existing = await db\n        .select()\n        .from(kolWallets)\n        .where(eq(kolWallets.walletAddress, kol.wallet))\n        .limit(1);\n      \n      if (existing.length > 0) {\n        // Update existing wallet\n        await db\n          .update(kolWallets)\n          .set({\n            displayName: kol.name,\n            rank: kol.rank,\n            profitSol: kol.profit,\n            wins: kol.wins,\n            losses: kol.losses,\n            influenceScore: kol.influence,\n            isVerified: true,\n            source: \"kolscan\",\n            updatedAt: new Date(),\n          })\n          .where(eq(kolWallets.walletAddress, kol.wallet));\n        \n        updated++;\n        console.log(`âœ… Updated: ${kol.name} (${kol.wallet.substring(0, 8)}...)`);\n      } else {\n        // Insert new wallet\n        await db.insert(kolWallets).values({\n          walletAddress: kol.wallet,\n          displayName: kol.name,\n          rank: kol.rank,\n          profitSol: kol.profit,\n          wins: kol.wins,\n          losses: kol.losses,\n          influenceScore: kol.influence,\n          isVerified: true,\n          source: \"kolscan\",\n          lastActiveAt: new Date(),\n        });\n        \n        inserted++;\n        console.log(`âœ¨ Inserted: ${kol.name} (${kol.wallet.substring(0, 8)}...)`);\n      }\n    } catch (error: any) {\n      console.error(`âŒ Error processing ${kol.name}:`, error.message);\n      skipped++;\n    }\n  }\n  \n  console.log(\"\\nðŸ“Š Seeding Summary:\");\n  console.log(`  - Inserted: ${inserted} new KOL wallets`);\n  console.log(`  - Updated: ${updated} existing KOL wallets`);\n  console.log(`  - Skipped: ${skipped} due to errors`);\n  console.log(`  - Total: ${KOL_DATA.length} KOL wallets processed`);\n  console.log(\"\\nâœ… KOL wallet seeding complete!\\n\");\n}\n\n// Run seeding if called directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  seedKolWallets()\n    .then(() => process.exit(0))\n    .catch((error) => {\n      console.error(\"âŒ Seeding failed:\", error);\n      process.exit(1);\n    });\n}\n","size_bytes":8850},"server/whop-client.ts":{"content":"import Whop from \"@whop/sdk\";\n\n// Initialize Whop client\nconst WHOP_API_KEY = process.env.WHOP_API_KEY;\nconst WHOP_APP_ID = process.env.WHOP_APP_ID;\nconst WHOP_COMPANY_ID = process.env.WHOP_COMPANY_ID;\n\nif (!WHOP_API_KEY || !WHOP_APP_ID) {\n  console.warn(\"âš ï¸  Whop not configured (missing WHOP_API_KEY or WHOP_APP_ID)\");\n}\n\nexport const whopClient = new Whop({\n  appID: WHOP_APP_ID || \"\",\n  apiKey: WHOP_API_KEY || \"\",\n});\n\nexport const whopConfig = {\n  apiKey: WHOP_API_KEY,\n  appId: WHOP_APP_ID,\n  companyId: WHOP_COMPANY_ID,\n};\n\n// Whop plan IDs (set these in environment variables)\nexport const WHOP_PLAN_IDS = {\n  INDIVIDUAL: process.env.WHOP_PLAN_ID_INDIVIDUAL || \"\",\n  GROUP: process.env.WHOP_PLAN_ID_GROUP || \"\",\n};\n\n// Helper to create checkout session using REST API directly\nexport async function createWhopCheckout(params: {\n  planId: string;\n  userId: string;\n  userEmail?: string;\n  metadata?: Record<string, string>;\n}) {\n  if (!WHOP_COMPANY_ID) {\n    throw new Error(\"WHOP_COMPANY_ID not configured\");\n  }\n  \n  if (!WHOP_API_KEY) {\n    throw new Error(\"WHOP_API_KEY not configured\");\n  }\n\n  try {\n    // Use REST API directly for checkout session creation\n    const response = await fetch('https://api.whop.com/api/v2/checkout_sessions', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${WHOP_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        plan_id: params.planId,\n        redirect_url: `${process.env.REPL_HOME || \"http://localhost:5000\"}/subscription/success`,\n        metadata: {\n          user_id: params.userId,\n          user_email: params.userEmail || \"\",\n          ...params.metadata,\n        },\n      }),\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error(`Whop API error: ${response.status} - ${errorText}`);\n    }\n\n    const data = await response.json();\n    \n    return {\n      checkoutUrl: data.checkout_url,\n      sessionId: data.id,\n    };\n  } catch (error: any) {\n    console.error(\"Error creating Whop checkout:\", error);\n    throw new Error(`Failed to create checkout: ${error.message}`);\n  }\n}\n\n// Helper to retrieve membership details\nexport async function getWhopMembership(membershipId: string) {\n  try {\n    const membership = await whopClient.memberships.retrieve(membershipId);\n    return membership;\n  } catch (error: any) {\n    console.error(\"Error retrieving membership:\", error);\n    return null;\n  }\n}\n\n// Helper to cancel membership\nexport async function cancelWhopMembership(membershipId: string) {\n  try {\n    await whopClient.memberships.cancel(membershipId);\n    return true;\n  } catch (error: any) {\n    console.error(\"Error canceling membership:\", error);\n    return false;\n  }\n}\n\n// Helper to check if membership is valid\nexport function isMembershipValid(membership: any): boolean {\n  if (!membership) return false;\n  \n  // Check if membership status is valid\n  const validStatuses = [\"active\", \"trialing\", \"past_due\"];\n  if (!validStatuses.includes(membership.status)) {\n    return false;\n  }\n  \n  // Check if membership has expired\n  if (membership.valid_until) {\n    const validUntil = new Date(membership.valid_until * 1000);\n    return validUntil > new Date();\n  }\n  \n  return true;\n}\n\n// Map Whop membership status to our database status\nexport function mapWhopStatus(whopStatus: string): string {\n  const statusMap: Record<string, string> = {\n    \"active\": \"valid\",\n    \"trialing\": \"trialing\",\n    \"past_due\": \"past_due\",\n    \"canceled\": \"cancelled\",\n    \"incomplete\": \"expired\",\n    \"incomplete_expired\": \"expired\",\n    \"unpaid\": \"past_due\",\n  };\n  \n  return statusMap[whopStatus] || \"expired\";\n}\n\n// Map plan ID to tier\nexport function mapPlanToTier(planId: string): string {\n  if (planId === WHOP_PLAN_IDS.GROUP) return \"group\";\n  if (planId === WHOP_PLAN_IDS.INDIVIDUAL) return \"individual\";\n  return \"free_trial\";\n}\n","size_bytes":3917},"client/src/components/bot-showcase.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { SiTelegram, SiDiscord } from \"react-icons/si\";\nimport { Zap, Shield, TrendingUp } from \"lucide-react\";\n\nexport function BotShowcase() {\n  return (\n    <section className=\"py-20 bg-muted/30\" data-testid=\"section-bot-showcase\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"text-center mb-12\">\n          <Badge className=\"mb-4\" data-testid=\"badge-premium-feature\">Premium Feature</Badge>\n          <h2 className=\"text-4xl font-bold mb-4\">Telegram & Discord Bots</h2>\n          <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n            Get instant token analysis directly in your favorite messaging app. \n            No need to leave Discord or Telegram to check for rug pulls.\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto\">\n          <Card className=\"border-2\" data-testid=\"card-telegram-bot\">\n            <CardHeader>\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"flex items-center gap-2\">\n                  <SiTelegram className=\"h-8 w-8 text-[#0088cc]\" />\n                  <CardTitle className=\"text-2xl\">Telegram Bot</CardTitle>\n                </div>\n              </div>\n              <CardDescription>\n                Fast, private token analysis in your Telegram DMs or groups\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"space-y-3\">\n                <div className=\"flex items-start gap-2\">\n                  <Zap className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\n                  <div>\n                    <p className=\"font-medium\">/execute [token]</p>\n                    <p className=\"text-sm text-muted-foreground\">Full risk analysis with scores, holder data, and alerts</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <Shield className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\n                  <div>\n                    <p className=\"font-medium\">/first20 [token]</p>\n                    <p className=\"text-sm text-muted-foreground\">Top 20 holder concentration analysis</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <TrendingUp className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\n                  <div>\n                    <p className=\"font-medium\">/devtorture [wallet]</p>\n                    <p className=\"text-sm text-muted-foreground\">Developer wallet history and pattern detection</p>\n                  </div>\n                </div>\n              </div>\n              <Button \n                className=\"w-full\" \n                variant=\"default\"\n                onClick={() => window.location.href = '/api/login'}\n                data-testid=\"button-telegram-cta\"\n              >\n                <SiTelegram className=\"h-4 w-4 mr-2\" />\n                Get Access\n              </Button>\n            </CardContent>\n          </Card>\n\n          <Card className=\"border-2\" data-testid=\"card-discord-bot\">\n            <CardHeader>\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"flex items-center gap-2\">\n                  <SiDiscord className=\"h-8 w-8 text-[#5865F2]\" />\n                  <CardTitle className=\"text-2xl\">Discord Bot</CardTitle>\n                </div>\n              </div>\n              <CardDescription>\n                Rich embeds and slash commands for your Discord server\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"space-y-3\">\n                <div className=\"flex items-start gap-2\">\n                  <Zap className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\n                  <div>\n                    <p className=\"font-medium\">/execute [token]</p>\n                    <p className=\"text-sm text-muted-foreground\">Beautiful embeds with color-coded risk levels</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <Shield className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\n                  <div>\n                    <p className=\"font-medium\">/blacklist [wallet]</p>\n                    <p className=\"text-sm text-muted-foreground\">Check if wallet is flagged for scams or rugs</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <TrendingUp className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\n                  <div>\n                    <p className=\"font-medium\">Real-time alerts</p>\n                    <p className=\"text-sm text-muted-foreground\">Auto-scan new tokens in your server channels</p>\n                  </div>\n                </div>\n              </div>\n              <Button \n                className=\"w-full\" \n                variant=\"default\"\n                onClick={() => window.location.href = '/api/login'}\n                data-testid=\"button-discord-cta\"\n              >\n                <SiDiscord className=\"h-4 w-4 mr-2\" />\n                Get Access\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"mt-12 text-center\">\n          <Card className=\"max-w-2xl mx-auto\" data-testid=\"card-bot-access\">\n            <CardContent className=\"pt-6\">\n              <p className=\"text-sm text-muted-foreground mb-4\">\n                <strong>Bot access included with:</strong> PRO, WHALE subscriptions or 10M+ $ANTIRUG token holders\n              </p>\n              <div className=\"flex gap-3 justify-center\">\n                <Button \n                  variant=\"outline\"\n                  onClick={() => window.location.href = '/api/login'}\n                  data-testid=\"button-view-pricing\"\n                >\n                  View Pricing\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":6351},"client/src/hooks/useWallet.ts":{"content":"import { useState, useEffect, useCallback } from \"react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport bs58 from \"bs58\";\n\ninterface WalletConnection {\n  walletAddress: string;\n  isEligible: boolean;\n  tokenBalance?: number;\n  lastVerifiedAt: string;\n  userId: string;\n}\n\nexport function useWallet() {\n  const [walletAddress, setWalletAddress] = useState<string | null>(null);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [connection, setConnection] = useState<WalletConnection | null>(null);\n  const { toast } = useToast();\n  const { isAuthenticated, isLoading: authLoading, isMockAuth, hasPremiumAccess } = useAuth() as any;\n\n  useEffect(() => {\n    if (isAuthenticated && !authLoading) {\n      checkExistingConnection();\n    }\n  }, [isAuthenticated, authLoading]);\n\n  const checkExistingConnection = async () => {\n    if (!isAuthenticated) return;\n    \n    // Wallet verification requires real authentication\n    if (isMockAuth) {\n      return; // Skip in mock mode\n    }\n    \n    try {\n      const response = await apiRequest(\"GET\", \"/api/wallet/status\");\n      \n      // 401 = auth required (mock mode or not logged in)\n      if (response.status === 401) {\n        return; // Skip silently\n      }\n      \n      if (!response.ok) {\n        console.error(\"Failed to check wallet status:\", response.status);\n        return;\n      }\n      \n      const data = await response.json();\n      // data will be null if no wallet is connected\n      if (data && data.walletAddress) {\n        setConnection(data);\n        setWalletAddress(data.walletAddress);\n      }\n    } catch (error) {\n      console.error(\"Error checking wallet connection:\", error);\n    }\n  };\n\n  const connectWallet = useCallback(async () => {\n    // Check if premium features are available\n    if (isMockAuth || !hasPremiumAccess) {\n      toast({\n        title: \"Authentication Required\",\n        description: \"Wallet verification requires real authentication. Enable Replit auth to use this feature.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    if (!window.solana || !window.solana.isPhantom) {\n      toast({\n        title: \"Phantom Wallet Not Found\",\n        description: \"Please install Phantom wallet to continue.\",\n        variant: \"destructive\",\n      });\n      window.open(\"https://phantom.app/\", \"_blank\");\n      return;\n    }\n\n    setIsConnecting(true);\n    try {\n      const resp = await window.solana.connect();\n      const publicKey = resp.publicKey.toString();\n      setWalletAddress(publicKey);\n\n      const challengeResponse = await apiRequest(\"GET\", \"/api/wallet/challenge\");\n      const challengeData = await challengeResponse.json();\n\n      const encodedMessage = new TextEncoder().encode(challengeData.challenge);\n      const signedMessage = await window.solana.signMessage(encodedMessage, \"utf8\");\n      \n      const signatureBase58 = bs58.encode(signedMessage.signature);\n\n      const verifyResponse = await apiRequest(\"POST\", \"/api/wallet/verify\", {\n        walletAddress: publicKey,\n        signature: signatureBase58,\n        challenge: challengeData.challenge,\n      });\n\n      const verifyData = await verifyResponse.json();\n\n      if (verifyData.wallet) {\n        setConnection(verifyData.wallet);\n        \n        if (verifyData.wallet.isEligible) {\n          toast({\n            title: \"Wallet Connected Successfully!\",\n            description: `You have ${verifyData.wallet.tokenBalance?.toLocaleString()} $ANTIRUG tokens. Premium access unlocked!`,\n          });\n        } else {\n          toast({\n            title: \"Insufficient Token Balance\",\n            description: `You need 10M+ $ANTIRUG tokens for premium access. Current: ${verifyData.wallet.tokenBalance?.toLocaleString() || 0}`,\n            variant: \"destructive\",\n          });\n        }\n      } else {\n        toast({\n          title: \"Verification Failed\",\n          description: verifyData.message || \"Failed to verify wallet ownership.\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error: any) {\n      console.error(\"Wallet connection error:\", error);\n      toast({\n        title: \"Connection Failed\",\n        description: error.message || \"Failed to connect wallet. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsConnecting(false);\n    }\n  }, [toast, isMockAuth, hasPremiumAccess]);\n\n  const disconnectWallet = useCallback(async () => {\n    if (window.solana) {\n      await window.solana.disconnect();\n    }\n    setWalletAddress(null);\n    setConnection(null);\n  }, []);\n\n  return {\n    walletAddress,\n    connection,\n    isConnecting,\n    connectWallet,\n    disconnectWallet,\n  };\n}\n\ndeclare global {\n  interface Window {\n    solana?: {\n      isPhantom?: boolean;\n      connect: () => Promise<{ publicKey: { toString: () => string } }>;\n      disconnect: () => Promise<void>;\n      signMessage: (message: Uint8Array, encoding: string) => Promise<{ signature: Uint8Array }>;\n    };\n  }\n}\n","size_bytes":5065},"client/src/pages/documentation.tsx":{"content":"import { Header } from \"@/components/header-new\";\nimport { Footer } from \"@/components/footer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Download, Shield, Zap, TrendingUp, Lock, Database, Bot, Wallet, Code, AlertTriangle, CheckCircle } from \"lucide-react\";\nimport { PDFDownloadLink, Document, Page, Text, View, StyleSheet } from \"@react-pdf/renderer\";\nimport { CONTRACT_ADDRESS } from \"@/constants\";\n\n// PDF Document Component with comprehensive content\nconst pdfStyles = StyleSheet.create({\n  page: {\n    padding: 40,\n    fontSize: 11,\n    fontFamily: 'Helvetica',\n  },\n  title: {\n    fontSize: 24,\n    marginBottom: 20,\n    fontWeight: 'bold',\n  },\n  section: {\n    marginBottom: 12,\n  },\n  heading: {\n    fontSize: 16,\n    marginBottom: 8,\n    fontWeight: 'bold',\n    color: '#1a1a1a',\n  },\n  subheading: {\n    fontSize: 13,\n    marginBottom: 6,\n    fontWeight: 'bold',\n    color: '#2a2a2a',\n  },\n  text: {\n    marginBottom: 4,\n    lineHeight: 1.4,\n  },\n  list: {\n    marginLeft: 15,\n    marginBottom: 4,\n  },\n  code: {\n    fontFamily: 'Courier',\n    fontSize: 10,\n    backgroundColor: '#f5f5f5',\n    padding: 2,\n  },\n  footer: {\n    position: 'absolute',\n    bottom: 30,\n    left: 40,\n    right: 40,\n    textAlign: 'center',\n    fontSize: 9,\n    color: 'gray',\n  },\n});\n\nconst DocumentationPDF = () => (\n  <Document>\n    <Page size=\"A4\" style={pdfStyles.page}>\n      <Text style={pdfStyles.title}>Solana Rug Killer - Complete Documentation</Text>\n      \n      <View style={pdfStyles.section}>\n        <Text style={pdfStyles.heading}>Overview</Text>\n        <Text style={pdfStyles.text}>\n          Solana Rug Killer is a comprehensive web application designed to analyze Solana SPL tokens \n          for potential rug pull risks. It provides real-time analysis by aggregating data from multiple \n          trusted sources and applying AI-powered detection algorithms to identify common indicators such \n          as mint/freeze authority, holder concentration, liquidity pool status, and suspicious transaction patterns.\n        </Text>\n      </View>\n\n      <View style={pdfStyles.section}>\n        <Text style={pdfStyles.heading}>Project Information</Text>\n        <Text style={pdfStyles.subheading}>Official Contract Address</Text>\n        <Text style={pdfStyles.code}>{CONTRACT_ADDRESS}</Text>\n        <Text style={pdfStyles.text}>\n          This is the official vanity Solana address generated for the Solana Rug Killer project. \n          The address features the suffix \"rtek\" and serves as the project's official contract identifier \n          on the Solana blockchain.\n        </Text>\n      </View>\n\n      <View style={pdfStyles.section}>\n        <Text style={pdfStyles.heading}>Multi-Source Analysis</Text>\n        <Text style={pdfStyles.text}>\n          Our platform aggregates data from four major blockchain intelligence sources:\n        </Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>â€¢ Rugcheck.xyz - Community-driven risk scores and liquidity analysis</Text>\n          <Text style={pdfStyles.text}>â€¢ GoPlus Security - Honeypot detection, contract security scanning, scam flags</Text>\n          <Text style={pdfStyles.text}>â€¢ DexScreener - Real-time market data (price, volume, liquidity, market cap)</Text>\n          <Text style={pdfStyles.text}>â€¢ Jupiter Aggregator - Price verification and liquidity aggregation</Text>\n        </View>\n      </View>\n\n      <View style={pdfStyles.section}>\n        <Text style={pdfStyles.heading}>Token Analysis Features</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>â€¢ Authority checks - Detects if mint or freeze authority is enabled</Text>\n          <Text style={pdfStyles.text}>â€¢ Holder analysis - Top 20 holders with concentration percentage</Text>\n          <Text style={pdfStyles.text}>â€¢ Liquidity assessment - Checks for locked liquidity and pool depth</Text>\n          <Text style={pdfStyles.text}>â€¢ Risk scoring - 0-100 score with detailed red flag breakdown</Text>\n          <Text style={pdfStyles.text}>â€¢ BubbleMaps visualization - Interactive holder distribution maps</Text>\n          <Text style={pdfStyles.text}>â€¢ Transaction history - Recent significant transactions and patterns</Text>\n          <Text style={pdfStyles.text}>â€¢ AI blacklist checks - Automatic flagging of suspicious wallets</Text>\n        </View>\n      </View>\n\n      <View style={pdfStyles.section}>\n        <Text style={pdfStyles.heading}>Telegram & Discord Bots</Text>\n        <Text style={pdfStyles.subheading}>Available Commands:</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>â€¢ /execute [token] - Full comprehensive risk analysis</Text>\n          <Text style={pdfStyles.text}>â€¢ /first20 [token] - Detailed top 20 holder breakdown</Text>\n          <Text style={pdfStyles.text}>â€¢ /devtorture [wallet] - Complete dev wallet transaction history</Text>\n          <Text style={pdfStyles.text}>â€¢ /blacklist [wallet] - Check if wallet is flagged in AI blacklist</Text>\n        </View>\n        <Text style={pdfStyles.text}>\n          Both bots support markdown formatting (Telegram) and rich embeds (Discord) with color-coded \n          risk indicators (green/yellow/orange/red) for quick visual assessment.\n        </Text>\n      </View>\n\n      <View style={pdfStyles.section}>\n        <Text style={pdfStyles.heading}>Subscription Tiers</Text>\n        \n        <Text style={pdfStyles.subheading}>FREE Trial - $0 for 7 days</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>â€¢ 3 token analyses per day</Text>\n          <Text style={pdfStyles.text}>â€¢ Basic risk score and holder analysis</Text>\n          <Text style={pdfStyles.text}>â€¢ No credit card required</Text>\n        </View>\n\n        <Text style={pdfStyles.subheading}>PRO - $29/month</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>â€¢ Unlimited token analyses</Text>\n          <Text style={pdfStyles.text}>â€¢ Full AI blacklist detection</Text>\n          <Text style={pdfStyles.text}>â€¢ BubbleMaps visual holder distribution</Text>\n          <Text style={pdfStyles.text}>â€¢ Telegram & Discord bot access</Text>\n          <Text style={pdfStyles.text}>â€¢ Blacklist database query access</Text>\n          <Text style={pdfStyles.text}>â€¢ Priority support</Text>\n        </View>\n\n        <Text style={pdfStyles.subheading}>WHALE - $99/month</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>â€¢ Everything in PRO tier</Text>\n          <Text style={pdfStyles.text}>â€¢ Real-time liquidity alerts</Text>\n          <Text style={pdfStyles.text}>â€¢ REST API access with 10,000 requests/month</Text>\n          <Text style={pdfStyles.text}>â€¢ Advanced smart money wallet tracking</Text>\n          <Text style={pdfStyles.text}>â€¢ Team collaboration (up to 5 users)</Text>\n          <Text style={pdfStyles.text}>â€¢ Custom webhook integrations</Text>\n        </View>\n\n        <Text style={pdfStyles.subheading}>$ANTIRUG Holder - FREE Forever</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>â€¢ Hold 10M+ official $ANTIRUG tokens</Text>\n          <Text style={pdfStyles.text}>â€¢ Lifetime access to WHALE tier features</Text>\n          <Text style={pdfStyles.text}>â€¢ Exclusive holder perks and governance rights</Text>\n          <Text style={pdfStyles.text}>â€¢ Connect wallet via Phantom to verify holdings</Text>\n        </View>\n      </View>\n\n      <Text style={pdfStyles.footer}>\n        Â© 2025 Solana Rug Killer - Page 1 of 3\n      </Text>\n    </Page>\n\n    <Page size=\"A4\" style={pdfStyles.page}>\n      <Text style={pdfStyles.title}>Security & Access Control</Text>\n\n      <View style={pdfStyles.section}>\n        <Text style={pdfStyles.heading}>Challenge-Response Wallet Verification</Text>\n        <Text style={pdfStyles.text}>\n          Our wallet verification system uses cryptographic signatures to prevent replay attacks:\n        </Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>1. User requests challenge from GET /api/wallet/challenge (5-minute expiry)</Text>\n          <Text style={pdfStyles.text}>2. User signs challenge with Phantom wallet using Ed25519 signature</Text>\n          <Text style={pdfStyles.text}>3. User submits POST /api/wallet/verify with wallet address, signature, and challenge</Text>\n          <Text style={pdfStyles.text}>4. Server validates: challenge exists, not expired, not used, signature valid, 10M+ tokens</Text>\n          <Text style={pdfStyles.text}>5. Challenge marked as used (single-use enforcement)</Text>\n          <Text style={pdfStyles.text}>6. Access granted for 24 hours, then revalidation required</Text>\n        </View>\n      </View>\n\n      <View style={pdfStyles.section}>\n        <Text style={pdfStyles.heading}>Access Control Rules</Text>\n        <Text style={pdfStyles.text}>\n          Protected endpoints require EITHER active subscription OR verified token holdings:\n        </Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>â€¢ Subscription check: Status = 'active' or 'trialing' AND currentPeriodEnd {'>'} now</Text>\n          <Text style={pdfStyles.text}>â€¢ Token holder check: isEligible = true AND lastVerifiedAt {'<'} 24 hours ago</Text>\n          <Text style={pdfStyles.text}>â€¢ Official token mint address is server-controlled (prevents bypass)</Text>\n          <Text style={pdfStyles.text}>â€¢ Auto-expiry when subscription or trial ends</Text>\n        </View>\n      </View>\n\n      <View style={pdfStyles.section}>\n        <Text style={pdfStyles.heading}>AI Blacklist System</Text>\n        <Text style={pdfStyles.text}>\n          Automated detection engine with 6 rules analyzing 52+ risk metrics:\n        </Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>â€¢ Honeypot detection (severity: 90) - Tokens that can't be sold</Text>\n          <Text style={pdfStyles.text}>â€¢ High sell tax (severity: 80) - Excessive transaction fees</Text>\n          <Text style={pdfStyles.text}>â€¢ Suspicious authorities (severity: 75) - Mint/freeze enabled</Text>\n          <Text style={pdfStyles.text}>â€¢ Wash trading patterns (severity: 70) - Artificial volume</Text>\n          <Text style={pdfStyles.text}>â€¢ Coordinated pump scheme detection</Text>\n          <Text style={pdfStyles.text}>â€¢ Evidence tracking with timestamped entries and deduplication</Text>\n        </View>\n      </View>\n\n      <View style={pdfStyles.section}>\n        <Text style={pdfStyles.heading}>Payment Systems</Text>\n        \n        <Text style={pdfStyles.subheading}>Whop Subscriptions</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>â€¢ Merchant of Record handling (2.7% + $0.30 fees)</Text>\n          <Text style={pdfStyles.text}>â€¢ Hosted secure checkout with automatic tax compliance</Text>\n          <Text style={pdfStyles.text}>â€¢ Webhook lifecycle events: payment.succeeded, membership status changes</Text>\n          <Text style={pdfStyles.text}>â€¢ Status vocabulary: \"valid\", \"trialing\", \"past_due\", \"cancelled\", \"expired\"</Text>\n        </View>\n\n        <Text style={pdfStyles.subheading}>Crypto Payments (SOL only)</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>â€¢ Production-ready Solana payment processing</Text>\n          <Text style={pdfStyles.text}>â€¢ Requires 6 blockchain confirmations before activation</Text>\n          <Text style={pdfStyles.text}>â€¢ Payment address generation with blockchain monitoring</Text>\n          <Text style={pdfStyles.text}>â€¢ Full audit trail in payment_audit table</Text>\n          <Text style={pdfStyles.text}>â€¢ ETH/BTC payments blocked (SOL-only security policy)</Text>\n        </View>\n      </View>\n\n      <Text style={pdfStyles.footer}>\n        Â© 2025 Solana Rug Killer - Page 2 of 3\n      </Text>\n    </Page>\n\n    <Page size=\"A4\" style={pdfStyles.page}>\n      <Text style={pdfStyles.title}>API Endpoints & Setup</Text>\n\n      <View style={pdfStyles.section}>\n        <Text style={pdfStyles.heading}>Main API Endpoints</Text>\n        \n        <Text style={pdfStyles.subheading}>Token Analysis</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>POST /api/analyze-token - Submit token address for analysis (requires access)</Text>\n          <Text style={pdfStyles.text}>GET /api/analysis/:id - Retrieve analysis results</Text>\n        </View>\n\n        <Text style={pdfStyles.subheading}>Wallet Verification</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>GET /api/wallet/challenge - Request verification challenge (5min expiry)</Text>\n          <Text style={pdfStyles.text}>POST /api/wallet/verify - Submit signed challenge for verification</Text>\n          <Text style={pdfStyles.text}>GET /api/wallet - Get current wallet connection status</Text>\n        </View>\n\n        <Text style={pdfStyles.subheading}>Blacklist Operations</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>GET /api/blacklist/check/:wallet - Check if wallet is flagged</Text>\n          <Text style={pdfStyles.text}>POST /api/blacklist/report - Submit wallet report with evidence</Text>\n          <Text style={pdfStyles.text}>GET /api/blacklist/stats - Get blacklist statistics</Text>\n          <Text style={pdfStyles.text}>GET /api/blacklist/top - Top flagged wallets by severity</Text>\n        </View>\n\n        <Text style={pdfStyles.subheading}>Bot Integration</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>GET /api/bot/invite-links - Get Telegram/Discord bot invite URLs</Text>\n        </View>\n      </View>\n\n      <View style={pdfStyles.section}>\n        <Text style={pdfStyles.heading}>Environment Variables</Text>\n        \n        <Text style={pdfStyles.subheading}>Required for Whop Subscriptions</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>WHOP_API_KEY - Whop API key from developer dashboard</Text>\n          <Text style={pdfStyles.text}>WHOP_APP_ID - Whop application ID</Text>\n          <Text style={pdfStyles.text}>WHOP_COMPANY_ID - Whop company/business ID</Text>\n          <Text style={pdfStyles.text}>WHOP_PLAN_ID_BASIC - Plan ID for $29/mo PRO tier</Text>\n          <Text style={pdfStyles.text}>WHOP_PLAN_ID_PREMIUM - Plan ID for $99/mo WHALE tier</Text>\n        </View>\n\n        <Text style={pdfStyles.subheading}>Required for Token Gating</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>OFFICIAL_TOKEN_MINT_ADDRESS - SPL token mint for 10M+ access verification</Text>\n        </View>\n\n        <Text style={pdfStyles.subheading}>Optional for Bots</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>TELEGRAM_BOT_TOKEN - From @BotFather on Telegram</Text>\n          <Text style={pdfStyles.text}>DISCORD_BOT_TOKEN - From Discord Developer Portal</Text>\n          <Text style={pdfStyles.text}>DISCORD_CLIENT_ID - Discord application ID</Text>\n        </View>\n      </View>\n\n      <View style={pdfStyles.section}>\n        <Text style={pdfStyles.heading}>Getting Started</Text>\n        \n        <Text style={pdfStyles.subheading}>Step 1: Create Account</Text>\n        <Text style={pdfStyles.text}>\n          Sign up using Google, GitHub, X (Twitter), Apple, or email/password through \n          Replit Auth integration. Account creation is instant and free.\n        </Text>\n\n        <Text style={pdfStyles.subheading}>Step 2: Start Free Trial (Optional)</Text>\n        <Text style={pdfStyles.text}>\n          Get 7 days of free access with 3 analyses per day. No credit card required. \n          Trial starts automatically upon first login.\n        </Text>\n\n        <Text style={pdfStyles.subheading}>Step 3: Analyze Your First Token</Text>\n        <Text style={pdfStyles.text}>\n          Navigate to the main dashboard and paste any Solana token address (e.g., \n          EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v for USDC). Click \"Analyze\" \n          to receive comprehensive risk analysis including holder distribution, authority \n          checks, market data, and AI-powered red flags.\n        </Text>\n\n        <Text style={pdfStyles.subheading}>Step 4: Connect Phantom Wallet (Optional - Token Holders)</Text>\n        <Text style={pdfStyles.text}>\n          If you hold 10M+ official $ANTIRUG tokens, you can gain instant WHALE tier access without \n          a paid subscription. First, install Phantom from phantom.app if you haven't already.\n        </Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>1. Click \"Connect Wallet\" button in the header navigation</Text>\n          <Text style={pdfStyles.text}>2. Phantom wallet extension will prompt you to connect</Text>\n          <Text style={pdfStyles.text}>3. Approve the connection request in Phantom</Text>\n          <Text style={pdfStyles.text}>4. Sign the cryptographic challenge message (proves wallet ownership)</Text>\n          <Text style={pdfStyles.text}>5. System validates your token balance (requires 10M+ tokens)</Text>\n          <Text style={pdfStyles.text}>6. Upon success, WHALE tier access is granted for 24 hours</Text>\n          <Text style={pdfStyles.text}>7. Reconnect every 24 hours to maintain access</Text>\n        </View>\n        <Text style={pdfStyles.text}>\n          Security Note: This simply proves you control the wallet without sharing your private key. \n          We use Ed25519 signature verification with challenge-response protocol to prevent replay attacks. \n          Your private key never leaves your wallet.\n        </Text>\n\n        <Text style={pdfStyles.subheading}>Step 5: Subscribe via Whop (Recommended for Most Users)</Text>\n        <Text style={pdfStyles.text}>\n          For users without 10M+ tokens, subscribe through Whop for secure payment processing:\n        </Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>1. Navigate to /pricing page from header or visit directly</Text>\n          <Text style={pdfStyles.text}>2. Review tier comparison: PRO ($29/mo) or WHALE ($99/mo)</Text>\n          <Text style={pdfStyles.text}>3. Click \"Subscribe\" button on your preferred tier card</Text>\n          <Text style={pdfStyles.text}>4. Redirect to Whop's secure hosted checkout page</Text>\n          <Text style={pdfStyles.text}>5. Enter payment details (credit card, debit card, or crypto)</Text>\n          <Text style={pdfStyles.text}>6. Whop processes payment as Merchant of Record (2.7% + $0.30 fee)</Text>\n          <Text style={pdfStyles.text}>7. Automatic tax compliance and receipt generation</Text>\n          <Text style={pdfStyles.text}>8. Instant activation upon successful payment</Text>\n          <Text style={pdfStyles.text}>9. Manage subscription, billing, and cancellation through Whop portal</Text>\n        </View>\n        <Text style={pdfStyles.text}>\n          Alternative: Use redeemable subscription codes for lifetime access. Codes can be purchased \n          separately and redeemed on the /subscription page.\n        </Text>\n\n        <Text style={pdfStyles.subheading}>Step 6: Enable Bot Access</Text>\n        <Text style={pdfStyles.text}>\n          Once subscribed, visit header/footer bot icons to get Telegram and Discord \n          invite links. Add bots to your channels and use /execute, /first20, \n          /devtorture, and /blacklist commands for instant analysis.\n        </Text>\n      </View>\n\n      <View style={pdfStyles.section}>\n        <Text style={pdfStyles.heading}>Support & Resources</Text>\n        <View style={pdfStyles.list}>\n          <Text style={pdfStyles.text}>â€¢ Website: https://solana-rug-killer.replit.app</Text>\n          <Text style={pdfStyles.text}>â€¢ Documentation: /documentation route</Text>\n          <Text style={pdfStyles.text}>â€¢ Pricing: /pricing route</Text>\n          <Text style={pdfStyles.text}>â€¢ Contact: Available through the website</Text>\n        </View>\n      </View>\n\n      <Text style={pdfStyles.footer}>\n        Â© 2025 Solana Rug Killer - Page 3 of 3 | Protecting Solana investors from rug pulls\n      </Text>\n    </Page>\n  </Document>\n);\n\nexport default function Documentation() {\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n      \n      <main className=\"flex-1\">\n        <div className=\"max-w-6xl mx-auto px-6 py-12\">\n          {/* Header Section */}\n          <div className=\"text-center mb-12\">\n            <div className=\"flex items-center justify-center gap-3 mb-4\">\n              <Shield className=\"h-12 w-12 text-primary\" />\n              <h1 className=\"text-4xl font-bold\">Complete Documentation</h1>\n            </div>\n            <p className=\"text-lg text-muted-foreground mb-6\">\n              Everything you need to know about Solana Rug Killer - comprehensive guide with PDF download\n            </p>\n            \n            <PDFDownloadLink\n              document={<DocumentationPDF />}\n              fileName=\"solana-rug-killer-documentation.pdf\"\n            >\n              {({ loading }) => (\n                <Button size=\"lg\" disabled={loading} data-testid=\"button-download-pdf\">\n                  <Download className=\"h-4 w-4 mr-2\" />\n                  {loading ? 'Preparing PDF...' : 'Download Complete PDF Guide'}\n                </Button>\n              )}\n            </PDFDownloadLink>\n          </div>\n\n          {/* Overview Section */}\n          <Card className=\"mb-8\" data-testid=\"card-overview\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Shield className=\"h-5 w-5\" />\n                Overview\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <p className=\"text-muted-foreground\">\n                Solana Rug Killer is a comprehensive web application designed to analyze Solana SPL tokens \n                for potential rug pull risks. It provides real-time analysis by aggregating data from multiple \n                trusted sources and applying AI-powered detection algorithms to identify common indicators such \n                as mint/freeze authority, holder concentration, liquidity pool status, and suspicious transaction patterns.\n              </p>\n              <p className=\"text-muted-foreground\">\n                Our platform leverages advanced analytics and AI-driven insights to protect users from \n                fraudulent schemes in the Solana ecosystem, combining data from Rugcheck, GoPlus Security, \n                DexScreener, and Jupiter Aggregator to give you the most accurate risk assessment possible.\n              </p>\n            </CardContent>\n          </Card>\n\n          {/* Features Grid */}\n          <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n            <Card data-testid=\"card-multi-source\">\n              <CardHeader>\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Database className=\"h-5 w-5 text-primary\" />\n                  <CardTitle>Multi-Source Analysis</CardTitle>\n                </div>\n                <CardDescription>Aggregates data from four major blockchain intelligence sources</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <ul className=\"space-y-3 text-sm\">\n                  <li className=\"flex items-start gap-2\">\n                    <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                    <div>\n                      <strong>Rugcheck.xyz</strong>\n                      <p className=\"text-muted-foreground text-xs\">Community-driven risk scores and liquidity analysis</p>\n                    </div>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                    <div>\n                      <strong>GoPlus Security</strong>\n                      <p className=\"text-muted-foreground text-xs\">Honeypot detection, contract security scanning, scam detection flags</p>\n                    </div>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                    <div>\n                      <strong>DexScreener</strong>\n                      <p className=\"text-muted-foreground text-xs\">Real-time market data (price, volume, liquidity, market cap)</p>\n                    </div>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                    <div>\n                      <strong>Jupiter Aggregator</strong>\n                      <p className=\"text-muted-foreground text-xs\">Price verification and liquidity aggregation across Solana DEXs</p>\n                    </div>\n                  </li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Card data-testid=\"card-token-analysis\">\n              <CardHeader>\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Zap className=\"h-5 w-5 text-primary\" />\n                  <CardTitle>Token Analysis Features</CardTitle>\n                </div>\n                <CardDescription>Comprehensive risk assessment across multiple dimensions</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <ul className=\"space-y-2 text-sm\">\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-primary\">â€¢</span>\n                    <span><strong>Authority checks</strong> - Detects if mint or freeze authority is enabled</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-primary\">â€¢</span>\n                    <span><strong>Holder analysis</strong> - Top 20 holders with concentration percentage</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-primary\">â€¢</span>\n                    <span><strong>Liquidity assessment</strong> - Checks for locked liquidity and pool depth</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-primary\">â€¢</span>\n                    <span><strong>Risk scoring</strong> - 0-100 score with detailed red flag breakdown</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-primary\">â€¢</span>\n                    <span><strong>BubbleMaps</strong> - Interactive visual holder distribution maps</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-primary\">â€¢</span>\n                    <span><strong>Transaction history</strong> - Recent significant transactions and patterns</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-primary\">â€¢</span>\n                    <span><strong>AI blacklist checks</strong> - Automatic flagging of suspicious wallets</span>\n                  </li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Card data-testid=\"card-bots\">\n              <CardHeader>\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Bot className=\"h-5 w-5 text-primary\" />\n                  <CardTitle>Telegram & Discord Bots</CardTitle>\n                </div>\n                <CardDescription>Instant analysis in your messaging apps with color-coded risk indicators</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3 text-sm\">\n                  <Badge variant=\"secondary\" className=\"mb-2\">Currently Ungated - Public Access</Badge>\n                  <div>\n                    <p className=\"font-semibold mb-2\">Available Commands:</p>\n                    <ul className=\"space-y-2\">\n                      <li className=\"flex items-start gap-2\">\n                        <Code className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <code className=\"text-xs bg-muted px-1 py-0.5 rounded\">/execute [token]</code>\n                          <p className=\"text-muted-foreground text-xs\">Full comprehensive risk analysis</p>\n                        </div>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <Code className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <code className=\"text-xs bg-muted px-1 py-0.5 rounded\">/first20 [token]</code>\n                          <p className=\"text-muted-foreground text-xs\">Detailed top 20 holder breakdown with percentages</p>\n                        </div>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <Code className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <code className=\"text-xs bg-muted px-1 py-0.5 rounded\">/devtorture [wallet]</code>\n                          <p className=\"text-muted-foreground text-xs\">Complete dev wallet transaction history and patterns</p>\n                        </div>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <Code className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <code className=\"text-xs bg-muted px-1 py-0.5 rounded\">/blacklist [wallet]</code>\n                          <p className=\"text-muted-foreground text-xs\">Check if wallet is flagged in AI blacklist database</p>\n                        </div>\n                      </li>\n                    </ul>\n                  </div>\n                  <p className=\"text-muted-foreground text-xs\">\n                    Both bots support rich formatting (Telegram markdown, Discord embeds) with \n                    green/yellow/orange/red color-coded risk indicators for quick visual assessment.\n                  </p>\n                  <div className=\"pt-3 border-t\">\n                    <a href=\"/bot-guide\" className=\"text-sm font-semibold text-primary hover:underline flex items-center gap-1\">\n                      View Complete Bot Command Reference â†’\n                    </a>\n                    <p className=\"text-xs text-muted-foreground mt-1\">\n                      Detailed examples and usage tips for all commands\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Bot Usage Guides */}\n            <Card data-testid=\"card-telegram-guide\" className=\"mb-8\">\n              <CardHeader>\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Bot className=\"h-5 w-5 text-primary\" />\n                  <CardTitle>Telegram Bot Usage Guide</CardTitle>\n                </div>\n                <CardDescription>Complete guide for using the bot in direct messages and groups/channels</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-6\">\n                  {/* Individual Usage */}\n                  <div>\n                    <h4 className=\"font-semibold text-sm mb-3 flex items-center gap-2\">\n                      <Badge variant=\"outline\">Individual Use</Badge>\n                      Direct Messages (Private Chat)\n                    </h4>\n                    <div className=\"space-y-3 text-sm\">\n                      <div className=\"bg-muted p-3 rounded-md\">\n                        <p className=\"font-semibold mb-2\">Step 1: Find the Bot</p>\n                        <ol className=\"space-y-1 text-xs text-muted-foreground ml-4 list-decimal\">\n                          <li>Open Telegram app or web.telegram.org</li>\n                          <li>Click the search bar at the top</li>\n                          <li>Search for: <code className=\"bg-background px-1 py-0.5 rounded\">@RugKillerAlphaBot</code></li>\n                          <li>Click on the bot with the verified checkmark</li>\n                        </ol>\n                      </div>\n\n                      <div className=\"bg-muted p-3 rounded-md\">\n                        <p className=\"font-semibold mb-2\">Step 2: Start the Bot</p>\n                        <ol className=\"space-y-1 text-xs text-muted-foreground ml-4 list-decimal\">\n                          <li>Click the blue \"Start\" button at the bottom</li>\n                          <li>The bot will send you a welcome message</li>\n                          <li>You're ready to analyze tokens!</li>\n                        </ol>\n                      </div>\n\n                      <div className=\"bg-muted p-3 rounded-md\">\n                        <p className=\"font-semibold mb-2\">Step 3: Use Commands</p>\n                        <div className=\"space-y-2 text-xs\">\n                          <div>\n                            <p className=\"font-medium mb-1\">Full Token Analysis:</p>\n                            <code className=\"bg-background px-2 py-1 rounded block\">/execute 2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt</code>\n                          </div>\n                          <div>\n                            <p className=\"font-medium mb-1\">Top 20 Holders:</p>\n                            <code className=\"bg-background px-2 py-1 rounded block\">/first20 2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt</code>\n                          </div>\n                          <div>\n                            <p className=\"font-medium mb-1\">Check Wallet History:</p>\n                            <code className=\"bg-background px-2 py-1 rounded block\">/devtorture HgK4jnXmQoNZWVJE3NSJF3JfhGNp4gAJF7ZqvDBCqxXE</code>\n                          </div>\n                          <div>\n                            <p className=\"font-medium mb-1\">Check Blacklist:</p>\n                            <code className=\"bg-background px-2 py-1 rounded block\">/blacklist HgK4jnXmQoNZWVJE3NSJF3JfhGNp4gAJF7ZqvDBCqxXE</code>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"bg-green-500/10 border border-green-500 p-3 rounded-md\">\n                        <p className=\"font-semibold text-xs mb-1 flex items-center gap-1\">\n                          <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                          Pro Tips:\n                        </p>\n                        <ul className=\"space-y-1 text-xs text-muted-foreground\">\n                          <li>â€¢ Responses appear in 2-5 seconds with markdown formatting</li>\n                          <li>â€¢ Color indicators: ðŸŸ¢ Safe, ðŸŸ¡ Caution, ðŸŸ  Warning, ðŸ”´ Danger</li>\n                          <li>â€¢ You can analyze unlimited tokens with active subscription</li>\n                        </ul>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Group Usage */}\n                  <div className=\"border-t pt-6\">\n                    <h4 className=\"font-semibold text-sm mb-3 flex items-center gap-2\">\n                      <Badge variant=\"outline\">Group/Channel Use</Badge>\n                      Adding Bot to Groups and Channels\n                    </h4>\n                    <div className=\"space-y-3 text-sm\">\n                      <div className=\"bg-muted p-3 rounded-md\">\n                        <p className=\"font-semibold mb-2\">Step 1: Add Bot to Group/Channel</p>\n                        <ol className=\"space-y-1 text-xs text-muted-foreground ml-4 list-decimal\">\n                          <li>Open your Telegram group or channel</li>\n                          <li>Click the group/channel name at the top</li>\n                          <li>Click \"Add Members\" (for groups) or \"Subscribers\" (for channels)</li>\n                          <li>Search for: <code className=\"bg-background px-1 py-0.5 rounded\">@RugKillerAlphaBot</code></li>\n                          <li>Click \"Add\" or \"Invite\"</li>\n                        </ol>\n                      </div>\n\n                      <div className=\"bg-muted p-3 rounded-md\">\n                        <p className=\"font-semibold mb-2\">Step 2: Set Bot Permissions (Groups Only)</p>\n                        <ol className=\"space-y-1 text-xs text-muted-foreground ml-4 list-decimal\">\n                          <li>Go to Group Settings â†’ Administrators</li>\n                          <li>Find @RugKillerAlphaBot in the member list</li>\n                          <li>Required permissions: \"Send Messages\", \"Send Media\"</li>\n                          <li>Optional: Enable \"Read Messages\" for auto-responses</li>\n                        </ol>\n                      </div>\n\n                      <div className=\"bg-muted p-3 rounded-md\">\n                        <p className=\"font-semibold mb-2\">Step 3: Use Commands in Group</p>\n                        <div className=\"space-y-2 text-xs\">\n                          <p className=\"text-muted-foreground\">Same commands work in groups! Just type them in the chat:</p>\n                          <code className=\"bg-background px-2 py-1 rounded block\">/execute@RugKillerAlphaBot 2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt</code>\n                          <p className=\"text-muted-foreground italic\">\n                            Note: Adding <code className=\"bg-background px-1 py-0.5 rounded\">@RugKillerAlphaBot</code> after the command \n                            ensures the right bot responds if multiple bots are in the group.\n                          </p>\n                        </div>\n                      </div>\n\n                      <div className=\"bg-blue-500/10 border border-blue-500 p-3 rounded-md\">\n                        <p className=\"font-semibold text-xs mb-1\">Group Admin Features:</p>\n                        <ul className=\"space-y-1 text-xs text-muted-foreground\">\n                          <li>â€¢ Set auto-scan for new token mentions in group messages</li>\n                          <li>â€¢ Pin bot responses for important alerts</li>\n                          <li>â€¢ All group members can use commands (with active group subscription)</li>\n                          <li>â€¢ Bot responses are public - everyone in the group can see them</li>\n                        </ul>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card data-testid=\"card-discord-guide\" className=\"mb-8\">\n              <CardHeader>\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Bot className=\"h-5 w-5 text-primary\" />\n                  <CardTitle>Discord Bot Usage Guide</CardTitle>\n                </div>\n                <CardDescription>Complete guide for using the bot in DMs and servers</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-6\">\n                  {/* Individual Usage */}\n                  <div>\n                    <h4 className=\"font-semibold text-sm mb-3 flex items-center gap-2\">\n                      <Badge variant=\"outline\">Individual Use</Badge>\n                      Direct Messages (DMs)\n                    </h4>\n                    <div className=\"space-y-3 text-sm\">\n                      <div className=\"bg-muted p-3 rounded-md\">\n                        <p className=\"font-semibold mb-2\">Step 1: Invite Bot to a Server First</p>\n                        <div className=\"space-y-2 text-xs text-muted-foreground\">\n                          <p>âš ï¸ Discord requires bots to share at least one server with you before DMs work.</p>\n                          <Button\n                            variant=\"default\"\n                            size=\"sm\"\n                            asChild\n                            className=\"mt-2\"\n                          >\n                            <a \n                              href=\"https://discord.com/oauth2/authorize?client_id=1437952073319714879&scope=bot&permissions=3072\" \n                              target=\"_blank\" \n                              rel=\"noopener noreferrer\"\n                            >\n                              Invite Bot to Your Server\n                            </a>\n                          </Button>\n                        </div>\n                      </div>\n\n                      <div className=\"bg-muted p-3 rounded-md\">\n                        <p className=\"font-semibold mb-2\">Step 2: Send DM to Bot</p>\n                        <ol className=\"space-y-1 text-xs text-muted-foreground ml-4 list-decimal\">\n                          <li>Find the bot in your server's member list</li>\n                          <li>Right-click on \"RugKillerAlphaBot\"</li>\n                          <li>Select \"Message\"</li>\n                          <li>Start typing commands in the DM</li>\n                        </ol>\n                      </div>\n\n                      <div className=\"bg-muted p-3 rounded-md\">\n                        <p className=\"font-semibold mb-2\">Step 3: Use Slash Commands</p>\n                        <div className=\"space-y-2 text-xs\">\n                          <div>\n                            <p className=\"font-medium mb-1\">Type <code className=\"bg-background px-1 py-0.5 rounded\">/</code> to see all commands:</p>\n                          </div>\n                          <div>\n                            <p className=\"font-medium mb-1\">Full Token Analysis:</p>\n                            <code className=\"bg-background px-2 py-1 rounded block\">/execute token_address:2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt</code>\n                          </div>\n                          <div>\n                            <p className=\"font-medium mb-1\">Top 20 Holders:</p>\n                            <code className=\"bg-background px-2 py-1 rounded block\">/first20 token_address:2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt</code>\n                          </div>\n                          <div>\n                            <p className=\"font-medium mb-1\">Check Wallet:</p>\n                            <code className=\"bg-background px-2 py-1 rounded block\">/devtorture wallet_address:HgK4jnXmQoNZWVJE3NSJF3JfhGNp4gAJF7ZqvDBCqxXE</code>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"bg-green-500/10 border border-green-500 p-3 rounded-md\">\n                        <p className=\"font-semibold text-xs mb-1 flex items-center gap-1\">\n                          <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                          Discord Features:\n                        </p>\n                        <ul className=\"space-y-1 text-xs text-muted-foreground\">\n                          <li>â€¢ Rich embeds with color-coded borders (green = safe, red = danger)</li>\n                          <li>â€¢ Clickable links to DexScreener, Rugcheck, BubbleMaps</li>\n                          <li>â€¢ Responses appear instantly (Discord slash commands)</li>\n                        </ul>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Server Usage */}\n                  <div className=\"border-t pt-6\">\n                    <h4 className=\"font-semibold text-sm mb-3 flex items-center gap-2\">\n                      <Badge variant=\"outline\">Server Use</Badge>\n                      Adding Bot to Discord Servers\n                    </h4>\n                    <div className=\"space-y-3 text-sm\">\n                      <div className=\"bg-muted p-3 rounded-md\">\n                        <p className=\"font-semibold mb-2\">Step 1: Invite Bot to Server</p>\n                        <div className=\"space-y-2 text-xs text-muted-foreground\">\n                          <p>You need \"Manage Server\" permission to invite bots.</p>\n                          <Button\n                            variant=\"default\"\n                            size=\"sm\"\n                            asChild\n                            className=\"mt-2\"\n                          >\n                            <a \n                              href=\"https://discord.com/oauth2/authorize?client_id=1437952073319714879&scope=bot&permissions=3072\" \n                              target=\"_blank\" \n                              rel=\"noopener noreferrer\"\n                            >\n                              Invite Bot to Your Server\n                            </a>\n                          </Button>\n                          <ol className=\"space-y-1 ml-4 list-decimal mt-2\">\n                            <li>Click the invite link above</li>\n                            <li>Select your server from the dropdown</li>\n                            <li>Click \"Authorize\"</li>\n                            <li>Complete the CAPTCHA if prompted</li>\n                          </ol>\n                        </div>\n                      </div>\n\n                      <div className=\"bg-muted p-3 rounded-md\">\n                        <p className=\"font-semibold mb-2\">Step 2: Set Channel Permissions (Optional)</p>\n                        <ol className=\"space-y-1 text-xs text-muted-foreground ml-4 list-decimal\">\n                          <li>Go to Server Settings â†’ Roles</li>\n                          <li>Find the bot's role</li>\n                          <li>Restrict which channels the bot can access</li>\n                          <li>Example: Only allow in #token-analysis channel</li>\n                        </ol>\n                      </div>\n\n                      <div className=\"bg-muted p-3 rounded-md\">\n                        <p className=\"font-semibold mb-2\">Step 3: Use Commands in Channels</p>\n                        <div className=\"space-y-2 text-xs\">\n                          <p className=\"text-muted-foreground\">Type <code className=\"bg-background px-1 py-0.5 rounded\">/</code> in any channel to see available commands:</p>\n                          <code className=\"bg-background px-2 py-1 rounded block\">/execute token_address:2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt</code>\n                          <p className=\"text-muted-foreground italic mt-2\">\n                            The bot will respond in the same channel where you used the command.\n                          </p>\n                        </div>\n                      </div>\n\n                      <div className=\"bg-blue-500/10 border border-blue-500 p-3 rounded-md\">\n                        <p className=\"font-semibold text-xs mb-1\">Server Admin Features:</p>\n                        <ul className=\"space-y-1 text-xs text-muted-foreground\">\n                          <li>â€¢ Create dedicated #rug-alerts channel for alpha notifications</li>\n                          <li>â€¢ Set up role-based access (only VIP members can use bot)</li>\n                          <li>â€¢ Pin important bot responses for quick reference</li>\n                          <li>â€¢ All server members can use slash commands (with group subscription)</li>\n                          <li>â€¢ Responses are public - visible to everyone in the channel</li>\n                        </ul>\n                      </div>\n\n                      <div className=\"bg-orange-500/10 border border-orange-500 p-3 rounded-md\">\n                        <p className=\"font-semibold text-xs mb-1 flex items-center gap-1\">\n                          <AlertTriangle className=\"h-4 w-4 text-orange-500\" />\n                          Troubleshooting:\n                        </p>\n                        <ul className=\"space-y-1 text-xs text-muted-foreground\">\n                          <li>â€¢ If slash commands don't appear, try re-inviting the bot</li>\n                          <li>â€¢ Make sure bot has \"Send Messages\" and \"Embed Links\" permissions</li>\n                          <li>â€¢ Check if bot is offline in member list (contact support if down)</li>\n                          <li>â€¢ Rate limit: Max 5 commands per minute per user</li>\n                        </ul>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card data-testid=\"card-security\">\n              <CardHeader>\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Lock className=\"h-5 w-5 text-primary\" />\n                  <CardTitle>Security & Access Control</CardTitle>\n                </div>\n                <CardDescription>Enterprise-grade security with challenge-response verification</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3 text-sm\">\n                  <div>\n                    <p className=\"font-semibold mb-2\">Challenge-Response Wallet Verification:</p>\n                    <ol className=\"space-y-1 text-xs text-muted-foreground ml-4 list-decimal\">\n                      <li>Request challenge from <code className=\"bg-muted px-1 py-0.5 rounded\">GET /api/wallet/challenge</code> (5min expiry)</li>\n                      <li>Sign challenge with Phantom wallet using Ed25519 signature</li>\n                      <li>Submit <code className=\"bg-muted px-1 py-0.5 rounded\">POST /api/wallet/verify</code> with signature</li>\n                      <li>Server validates: challenge exists, not expired, signature valid, 10M+ tokens</li>\n                      <li>Challenge marked as used (prevents replay attacks)</li>\n                      <li>Access granted for 24 hours, then revalidation required</li>\n                    </ol>\n                  </div>\n                  <div>\n                    <p className=\"font-semibold mb-2\">Additional Security Features:</p>\n                    <ul className=\"space-y-1 text-xs text-muted-foreground\">\n                      <li>â€¢ Server-controlled official token mint address (prevents bypass)</li>\n                      <li>â€¢ Auto-expiry when subscription or trial ends</li>\n                      <li>â€¢ Whop secure payment processing with automatic tax compliance</li>\n                      <li>â€¢ SOL-only crypto payments with 6-confirmation requirement</li>\n                    </ul>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* AI Blacklist System */}\n          <Card className=\"mb-8\" data-testid=\"card-ai-blacklist\">\n            <CardHeader>\n              <div className=\"flex items-center gap-2 mb-2\">\n                <AlertTriangle className=\"h-5 w-5 text-primary\" />\n                <CardTitle>AI Blacklist System</CardTitle>\n              </div>\n              <CardDescription>Automated detection engine with 6 rules analyzing 52+ risk metrics</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid md:grid-cols-2 gap-4 text-sm\">\n                <div>\n                  <p className=\"font-semibold mb-2\">Detection Rules:</p>\n                  <ul className=\"space-y-2\">\n                    <li className=\"flex items-start gap-2\">\n                      <Badge variant=\"destructive\" className=\"mt-0.5\">90</Badge>\n                      <div>\n                        <strong>Honeypot Detection</strong>\n                        <p className=\"text-xs text-muted-foreground\">Tokens that can't be sold after purchase</p>\n                      </div>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <Badge variant=\"destructive\" className=\"mt-0.5\">80</Badge>\n                      <div>\n                        <strong>High Sell Tax</strong>\n                        <p className=\"text-xs text-muted-foreground\">Excessive transaction fees (e.g., 99% sell tax)</p>\n                      </div>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <Badge variant=\"outline\" className=\"mt-0.5 bg-orange-500/10\">75</Badge>\n                      <div>\n                        <strong>Suspicious Authorities</strong>\n                        <p className=\"text-xs text-muted-foreground\">Mint or freeze authority still enabled</p>\n                      </div>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <Badge variant=\"outline\" className=\"mt-0.5 bg-yellow-500/10\">70</Badge>\n                      <div>\n                        <strong>Wash Trading</strong>\n                        <p className=\"text-xs text-muted-foreground\">Artificial volume through self-trading</p>\n                      </div>\n                    </li>\n                  </ul>\n                </div>\n                <div>\n                  <p className=\"font-semibold mb-2\">Features:</p>\n                  <ul className=\"space-y-1 text-xs text-muted-foreground\">\n                    <li>â€¢ Evidence tracking with timestamped entries</li>\n                    <li>â€¢ Severity scoring (0-100 scale)</li>\n                    <li>â€¢ Deduplication prevents spam for same wallet+labelType</li>\n                    <li>â€¢ Coordinated pump scheme detection</li>\n                    <li>â€¢ Automatic analysis on every token scan</li>\n                    <li>â€¢ Blacklist info included in bot responses</li>\n                  </ul>\n                  <p className=\"font-semibold mt-3 mb-2\">API Endpoints:</p>\n                  <ul className=\"space-y-1 text-xs font-mono text-muted-foreground\">\n                    <li>â€¢ GET /api/blacklist/check/:wallet</li>\n                    <li>â€¢ POST /api/blacklist/report</li>\n                    <li>â€¢ GET /api/blacklist/stats</li>\n                    <li>â€¢ GET /api/blacklist/top</li>\n                  </ul>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Pricing Section */}\n          <Card className=\"mb-8\" data-testid=\"card-pricing\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <TrendingUp className=\"h-5 w-5\" />\n                Subscription Tiers\n              </CardTitle>\n              <CardDescription>Choose the plan that fits your needs - all tiers include 7-day free trial</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid md:grid-cols-4 gap-4\">\n                <div className=\"space-y-2 p-4 border rounded-lg\">\n                  <Badge variant=\"outline\">FREE Trial</Badge>\n                  <p className=\"text-2xl font-bold\">$0</p>\n                  <p className=\"text-sm text-muted-foreground\">7 days, no card required</p>\n                  <ul className=\"text-xs space-y-1 text-muted-foreground\">\n                    <li>â€¢ 3 analyses/day</li>\n                    <li>â€¢ Basic risk score</li>\n                    <li>â€¢ Top 20 holders</li>\n                  </ul>\n                </div>\n\n                <div className=\"space-y-2 p-4 border rounded-lg bg-primary/5\">\n                  <Badge>PRO</Badge>\n                  <p className=\"text-2xl font-bold\">$29</p>\n                  <p className=\"text-sm text-muted-foreground\">per month</p>\n                  <ul className=\"text-xs space-y-1 text-muted-foreground\">\n                    <li>â€¢ Unlimited analyses</li>\n                    <li>â€¢ AI blacklist detection</li>\n                    <li>â€¢ BubbleMaps viz</li>\n                    <li>â€¢ Bot access</li>\n                    <li>â€¢ Priority support</li>\n                  </ul>\n                </div>\n\n                <div className=\"space-y-2 p-4 border rounded-lg\">\n                  <Badge variant=\"default\">WHALE</Badge>\n                  <p className=\"text-2xl font-bold\">$99</p>\n                  <p className=\"text-sm text-muted-foreground\">per month</p>\n                  <ul className=\"text-xs space-y-1 text-muted-foreground\">\n                    <li>â€¢ Everything in PRO</li>\n                    <li>â€¢ Real-time alerts</li>\n                    <li>â€¢ API access (10k/mo)</li>\n                    <li>â€¢ Smart money tracking</li>\n                    <li>â€¢ Team (5 users)</li>\n                    <li>â€¢ Custom webhooks</li>\n                  </ul>\n                </div>\n\n                <div className=\"space-y-2 p-4 border rounded-lg bg-gradient-to-br from-primary/10 to-primary/5\">\n                  <Badge variant=\"outline\" className=\"bg-primary/10\">$ANTIRUG Holder</Badge>\n                  <p className=\"text-2xl font-bold\">FREE</p>\n                  <p className=\"text-sm text-muted-foreground\">forever</p>\n                  <ul className=\"text-xs space-y-1 text-muted-foreground\">\n                    <li>â€¢ Hold 10M+ tokens</li>\n                    <li>â€¢ WHALE tier access</li>\n                    <li>â€¢ Exclusive perks</li>\n                    <li>â€¢ Governance rights</li>\n                    <li>â€¢ Connect via Phantom</li>\n                  </ul>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Getting Started */}\n          <Card data-testid=\"card-getting-started\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Wallet className=\"h-5 w-5\" />\n                Getting Started\n              </CardTitle>\n              <CardDescription>Start protecting yourself from rug pulls in 6 simple steps</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex items-start gap-3\">\n                <Badge className=\"mt-1\">1</Badge>\n                <div>\n                  <h4 className=\"font-semibold mb-1\">Create Account</h4>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Sign up with Google, GitHub, X (Twitter), Apple, or email/password through our \n                    Replit Auth integration. Account creation is instant and free.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-start gap-3\">\n                <Badge className=\"mt-1\">2</Badge>\n                <div>\n                  <h4 className=\"font-semibold mb-1\">Start Free Trial</h4>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Get 7 days of free access with 3 analyses per day. No credit card required. \n                    Trial starts automatically upon first login.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-start gap-3\">\n                <Badge className=\"mt-1\">3</Badge>\n                <div>\n                  <h4 className=\"font-semibold mb-1\">Analyze Your First Token</h4>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Navigate to the main dashboard and paste any Solana token address (e.g., \n                    EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v for USDC). Click \"Analyze\" to receive \n                    comprehensive risk analysis including holder distribution, authority checks, market data, \n                    and AI-powered red flags.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-start gap-3\">\n                <Badge className=\"mt-1\">4</Badge>\n                <div>\n                  <h4 className=\"font-semibold mb-1\">Connect Phantom Wallet (Optional - Token Holders)</h4>\n                  <p className=\"text-sm text-muted-foreground mb-2\">\n                    If you hold 10M+ official $ANTIRUG tokens, you can gain instant WHALE tier access without \n                    a paid subscription. First, install Phantom from <a href=\"https://phantom.app\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary hover:underline\">phantom.app</a> if you haven't already.\n                  </p>\n                  <ol className=\"text-sm text-muted-foreground space-y-1 ml-4 list-decimal\">\n                    <li>Click \"Connect Wallet\" button in the header navigation</li>\n                    <li>Phantom wallet extension will prompt you to connect</li>\n                    <li>Approve the connection request in Phantom</li>\n                    <li>Sign the cryptographic challenge message (proves wallet ownership)</li>\n                    <li>System validates your token balance (requires 10M+ tokens)</li>\n                    <li>Upon success, WHALE tier access is granted for 24 hours</li>\n                    <li>Reconnect every 24 hours to maintain access</li>\n                  </ol>\n                  <p className=\"text-xs text-muted-foreground mt-2 italic\">\n                    <strong>Security Note:</strong> This simply proves you control the wallet without sharing your private key. \n                    We use Ed25519 signature verification with challenge-response protocol to prevent replay attacks. \n                    Your private key never leaves your wallet.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-start gap-3\">\n                <Badge className=\"mt-1\">5</Badge>\n                <div>\n                  <h4 className=\"font-semibold mb-1\">Subscribe via Whop (Recommended for Most Users)</h4>\n                  <p className=\"text-sm text-muted-foreground mb-2\">\n                    For users without 10M+ tokens, subscribe through Whop for secure payment processing:\n                  </p>\n                  <ol className=\"text-sm text-muted-foreground space-y-1 ml-4 list-decimal\">\n                    <li>Navigate to <a href=\"/pricing\" className=\"text-primary hover:underline\">/pricing</a> page from header or visit directly</li>\n                    <li>Review tier comparison: PRO ($29/mo) or WHALE ($99/mo)</li>\n                    <li>Click \"Subscribe\" button on your preferred tier card</li>\n                    <li>Redirect to Whop's secure hosted checkout page</li>\n                    <li>Enter payment details (credit card, debit card, or crypto)</li>\n                    <li>Whop processes payment as Merchant of Record (2.7% + $0.30 fee)</li>\n                    <li>Automatic tax compliance and receipt generation</li>\n                    <li>Instant activation upon successful payment</li>\n                    <li>Manage subscription, billing, and cancellation through Whop portal</li>\n                  </ol>\n                  <p className=\"text-xs text-muted-foreground mt-2 italic\">\n                    Alternative: Use redeemable subscription codes for lifetime access. Codes can be purchased \n                    separately and redeemed on the /subscription page.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-start gap-3\">\n                <Badge className=\"mt-1\">6</Badge>\n                <div>\n                  <h4 className=\"font-semibold mb-1\">Enable Bot Access</h4>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Once subscribed, visit header/footer bot icons to get Telegram and Discord invite links. \n                    Add bots to your channels and use <code className=\"text-xs bg-muted px-1 py-0.5 rounded\">/execute</code>, \n                    <code className=\"text-xs bg-muted px-1 py-0.5 rounded ml-1\">/first20</code>, \n                    <code className=\"text-xs bg-muted px-1 py-0.5 rounded ml-1\">/devtorture</code>, and \n                    <code className=\"text-xs bg-muted px-1 py-0.5 rounded ml-1\">/blacklist</code> commands for instant analysis.\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* API Endpoints */}\n          <Card className=\"mb-8\" data-testid=\"card-api-endpoints\">\n            <CardHeader>\n              <div className=\"flex items-center gap-2 mb-2\">\n                <Code className=\"h-5 w-5 text-primary\" />\n                <CardTitle>API Endpoints</CardTitle>\n              </div>\n              <CardDescription>Main endpoints for programmatic access (WHALE tier required)</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid md:grid-cols-2 gap-6 text-sm\">\n                <div>\n                  <p className=\"font-semibold mb-2\">Token Analysis</p>\n                  <ul className=\"space-y-2 font-mono text-xs text-muted-foreground\">\n                    <li className=\"flex flex-col gap-1\">\n                      <code className=\"text-primary\">POST /api/analyze-token</code>\n                      <span className=\"text-xs\">Submit token address for analysis</span>\n                    </li>\n                    <li className=\"flex flex-col gap-1\">\n                      <code className=\"text-primary\">GET /api/analysis/:id</code>\n                      <span className=\"text-xs\">Retrieve analysis results</span>\n                    </li>\n                  </ul>\n\n                  <p className=\"font-semibold mt-4 mb-2\">Wallet Verification</p>\n                  <ul className=\"space-y-2 font-mono text-xs text-muted-foreground\">\n                    <li className=\"flex flex-col gap-1\">\n                      <code className=\"text-primary\">GET /api/wallet/challenge</code>\n                      <span className=\"text-xs\">Request verification challenge (5min expiry)</span>\n                    </li>\n                    <li className=\"flex flex-col gap-1\">\n                      <code className=\"text-primary\">POST /api/wallet/verify</code>\n                      <span className=\"text-xs\">Submit signed challenge</span>\n                    </li>\n                    <li className=\"flex flex-col gap-1\">\n                      <code className=\"text-primary\">GET /api/wallet</code>\n                      <span className=\"text-xs\">Get wallet connection status</span>\n                    </li>\n                  </ul>\n                </div>\n\n                <div>\n                  <p className=\"font-semibold mb-2\">Blacklist Operations</p>\n                  <ul className=\"space-y-2 font-mono text-xs text-muted-foreground\">\n                    <li className=\"flex flex-col gap-1\">\n                      <code className=\"text-primary\">GET /api/blacklist/check/:wallet</code>\n                      <span className=\"text-xs\">Check if wallet is flagged</span>\n                    </li>\n                    <li className=\"flex flex-col gap-1\">\n                      <code className=\"text-primary\">POST /api/blacklist/report</code>\n                      <span className=\"text-xs\">Submit wallet report with evidence</span>\n                    </li>\n                    <li className=\"flex flex-col gap-1\">\n                      <code className=\"text-primary\">GET /api/blacklist/stats</code>\n                      <span className=\"text-xs\">Get blacklist statistics</span>\n                    </li>\n                    <li className=\"flex flex-col gap-1\">\n                      <code className=\"text-primary\">GET /api/blacklist/top</code>\n                      <span className=\"text-xs\">Top flagged wallets by severity</span>\n                    </li>\n                  </ul>\n\n                  <p className=\"font-semibold mt-4 mb-2\">Bot Integration</p>\n                  <ul className=\"space-y-2 font-mono text-xs text-muted-foreground\">\n                    <li className=\"flex flex-col gap-1\">\n                      <code className=\"text-primary\">GET /api/bot/invite-links</code>\n                      <span className=\"text-xs\">Get Telegram/Discord bot URLs</span>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Environment Setup */}\n          <Card data-testid=\"card-environment\">\n            <CardHeader>\n              <div className=\"flex items-center gap-2 mb-2\">\n                <Database className=\"h-5 w-5 text-primary\" />\n                <CardTitle>Environment Variables</CardTitle>\n              </div>\n              <CardDescription>Required configuration for self-hosting (for advanced users)</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4 text-sm\">\n                <div>\n                  <p className=\"font-semibold mb-2\">Required for Whop Subscriptions:</p>\n                  <ul className=\"space-y-1 font-mono text-xs text-muted-foreground ml-4\">\n                    <li>â€¢ WHOP_API_KEY</li>\n                    <li>â€¢ WHOP_APP_ID</li>\n                    <li>â€¢ WHOP_COMPANY_ID</li>\n                    <li>â€¢ WHOP_PLAN_ID_BASIC ($29/mo tier)</li>\n                    <li>â€¢ WHOP_PLAN_ID_PREMIUM ($99/mo tier)</li>\n                  </ul>\n                </div>\n\n                <div>\n                  <p className=\"font-semibold mb-2\">Required for Token Gating (10M+ access):</p>\n                  <ul className=\"space-y-1 font-mono text-xs text-muted-foreground ml-4\">\n                    <li>â€¢ OFFICIAL_TOKEN_MINT_ADDRESS (SPL token mint)</li>\n                  </ul>\n                </div>\n\n                <div>\n                  <p className=\"font-semibold mb-2\">Optional for Bots:</p>\n                  <ul className=\"space-y-1 font-mono text-xs text-muted-foreground ml-4\">\n                    <li>â€¢ TELEGRAM_BOT_TOKEN (from @BotFather)</li>\n                    <li>â€¢ DISCORD_BOT_TOKEN (from Discord Developer Portal)</li>\n                    <li>â€¢ DISCORD_CLIENT_ID (Discord application ID)</li>\n                  </ul>\n                </div>\n\n                <div>\n                  <p className=\"font-semibold mb-2\">Optional for Performance:</p>\n                  <ul className=\"space-y-1 font-mono text-xs text-muted-foreground ml-4\">\n                    <li>â€¢ SOLANA_RPC_URL (custom RPC endpoint)</li>\n                    <li>â€¢ HELIUS_API_KEY (recommended for better rate limits)</li>\n                  </ul>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Bottom PDF Download Section */}\n          <div className=\"mt-12 text-center p-8 border rounded-lg bg-gradient-to-br from-primary/5 to-primary/10\" data-testid=\"section-pdf-download\">\n            <div className=\"flex items-center justify-center gap-2 mb-4\">\n              <Download className=\"h-8 w-8 text-primary\" />\n              <h2 className=\"text-2xl font-bold\">Download Complete Documentation</h2>\n            </div>\n            <p className=\"text-muted-foreground mb-6 max-w-2xl mx-auto\">\n              Get the full Solana Rug Killer documentation in PDF format. Includes detailed guides on wallet \n              connection, Whop payments, API endpoints, bot commands, and technical specifications.\n            </p>\n            \n            <PDFDownloadLink\n              document={<DocumentationPDF />}\n              fileName=\"solana-rug-killer-documentation.pdf\"\n            >\n              {({ loading }) => (\n                <Button size=\"lg\" disabled={loading} data-testid=\"button-download-pdf-bottom\">\n                  <Download className=\"h-4 w-4 mr-2\" />\n                  {loading ? 'Preparing PDF...' : 'Download PDF Documentation'}\n                </Button>\n              )}\n            </PDFDownloadLink>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":71870},"client/src/pages/pricing.tsx":{"content":"import { Header } from \"@/components/header-new\";\nimport { Footer } from \"@/components/footer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Check, Coins, Crown, Flame, Wallet, Loader2 } from \"lucide-react\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface Subscription {\n  id: string;\n  userId: string;\n  tier: string;\n  status: string;\n  trialEndsAt: string | null;\n  currentPeriodEnd: string | null;\n}\n\nconst pricingTiers = [\n  {\n    id: \"free\",\n    name: \"FREE Trial\",\n    icon: Flame,\n    price: \"$0\",\n    period: \"7 days\",\n    description: \"Get started with basic token analysis\",\n    features: [\n      \"3 token analyses per day\",\n      \"Basic risk score\",\n      \"Top 20 holder analysis\",\n      \"Authority checks\",\n      \"7-day trial period\"\n    ],\n    cta: \"Start Free Trial\",\n    ctaVariant: \"outline\" as const,\n    badge: null,\n    testId: \"card-tier-free\",\n    tier: null\n  },\n  {\n    id: \"pro\",\n    name: \"PRO\",\n    icon: Coins,\n    price: \"$29\",\n    period: \"per month\",\n    description: \"Advanced analytics for serious investors\",\n    features: [\n      \"Unlimited token analyses\",\n      \"Full risk score + AI detection\",\n      \"BubbleMaps visualization\",\n      \"Rugcheck + GoPlus integration\",\n      \"DexScreener market data\",\n      \"Telegram & Discord bot access\",\n      \"Blacklist database access\",\n      \"Priority support\"\n    ],\n    cta: \"Subscribe to PRO\",\n    ctaVariant: \"default\" as const,\n    badge: \"Popular\",\n    testId: \"card-tier-pro\",\n    tier: \"individual\" as const\n  },\n  {\n    id: \"whale\",\n    name: \"WHALE\",\n    icon: Crown,\n    price: \"$120\",\n    period: \"per month\",\n    description: \"Premium features for whale investors\",\n    features: [\n      \"Everything in PRO\",\n      \"Real-time alerts\",\n      \"Custom watchlists\",\n      \"API access\",\n      \"Advanced smart money tracking\",\n      \"Bundling detection\",\n      \"Historical data (90 days)\",\n      \"White-glove support\",\n      \"Team collaboration (up to 5 users)\"\n    ],\n    cta: \"Subscribe to WHALE\",\n    ctaVariant: \"default\" as const,\n    badge: \"Premium\",\n    testId: \"card-tier-whale\",\n    tier: \"group\" as const\n  },\n  {\n    id: \"kill-holder\",\n    name: \"$ANTIRUG Holder\",\n    icon: Wallet,\n    price: \"FREE\",\n    period: \"forever\",\n    description: \"Hold 10M+ $ANTIRUG tokens for lifetime access\",\n    features: [\n      \"Everything in WHALE tier\",\n      \"Lifetime access (no monthly fees)\",\n      \"Exclusive holder perks\",\n      \"Early access to new features\",\n      \"Governance voting rights\",\n      \"NFT rewards\",\n      \"VIP Discord channel\"\n    ],\n    cta: \"Connect Wallet\",\n    ctaVariant: \"outline\" as const,\n    badge: \"Exclusive\",\n    testId: \"card-tier-kill\",\n    tier: null\n  }\n];\n\nexport default function Pricing() {\n  const { toast } = useToast();\n\n  // Check current subscription status\n  const { data: subscription } = useQuery<Subscription>({\n    queryKey: ['/api/subscription/status'],\n    retry: false,\n  });\n\n  const createSubscriptionMutation = useMutation({\n    mutationFn: async (tier: 'individual' | 'group') => {\n      const response = await apiRequest('POST', '/api/create-subscription', { tier });\n      const data = await response.json();\n      return data;\n    },\n    onSuccess: async (data) => {\n      // Redirect to Whop checkout\n      if (data.url) {\n        window.location.href = data.url;\n      }\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Subscription Error\",\n        description: error.message || \"Failed to create subscription. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Helper: Check if subscription is in an active state (Whop statuses)\n  const isActive = (status?: string) => {\n    const activeStatuses = ['valid', 'trialing', 'past_due'];\n    return status && activeStatuses.includes(status);\n  };\n\n  const handleWalletConnect = () => {\n    // Trigger wallet connection modal (if implemented)\n    toast({\n      title: \"Connect Wallet\",\n      description: \"Please connect your Phantom wallet from the header menu to verify your $ANTIRUG token holdings.\",\n    });\n  };\n\n  const handleFreeTrial = () => {\n    window.location.href = '/';\n  };\n\n  const handleSubscribe = (tier: 'individual' | 'group') => {\n    createSubscriptionMutation.mutate(tier);\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n      \n      <main className=\"flex-1\">\n        <div className=\"max-w-7xl mx-auto px-6 py-12\">\n          <div className=\"text-center space-y-4 mb-12\">\n            <h1 className=\"text-4xl font-bold\">Choose Your Plan</h1>\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n              From free trials to whale-tier analytics. Find the perfect plan for your needs.\n            </p>\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {pricingTiers.map((tierData) => {\n              const Icon = tierData.icon;\n              const isCurrentPlan = subscription?.tier === tierData.tier && isActive(subscription?.status);\n              const isPending = createSubscriptionMutation.isPending;\n              \n              return (\n                <Card \n                  key={tierData.id} \n                  className={tierData.badge === \"Popular\" ? \"border-primary shadow-lg\" : \"\"}\n                  data-testid={tierData.testId}\n                >\n                  <CardHeader>\n                    {tierData.badge && (\n                      <Badge className=\"w-fit mb-2\" data-testid={`badge-${tierData.id}`}>\n                        {tierData.badge}\n                      </Badge>\n                    )}\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Icon className=\"h-5 w-5 text-primary\" />\n                      <CardTitle className=\"text-xl\">{tierData.name}</CardTitle>\n                    </div>\n                    <div className=\"flex items-baseline gap-1\">\n                      <span className=\"text-4xl font-bold\" data-testid={`text-price-${tierData.id}`}>\n                        {tierData.price}\n                      </span>\n                      <span className=\"text-sm text-muted-foreground\">\n                        / {tierData.period}\n                      </span>\n                    </div>\n                    <CardDescription>{tierData.description}</CardDescription>\n                  </CardHeader>\n                  \n                  <CardContent>\n                    <ul className=\"space-y-2\">\n                      {tierData.features.map((feature, index) => (\n                        <li \n                          key={index} \n                          className=\"flex items-start gap-2 text-sm\"\n                          data-testid={`feature-${tierData.id}-${index}`}\n                        >\n                          <Check className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                          <span>{feature}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </CardContent>\n                  \n                  <CardFooter>\n                    {tierData.id === \"kill-holder\" ? (\n                      <Button \n                        className=\"w-full\" \n                        variant={tierData.ctaVariant}\n                        onClick={handleWalletConnect}\n                        data-testid={`button-cta-${tierData.id}`}\n                      >\n                        <Wallet className=\"h-4 w-4 mr-2\" />\n                        {tierData.cta}\n                      </Button>\n                    ) : tierData.id === \"free\" ? (\n                      <Button \n                        className=\"w-full\" \n                        variant={tierData.ctaVariant}\n                        onClick={handleFreeTrial}\n                        data-testid={`button-cta-${tierData.id}`}\n                      >\n                        {tierData.cta}\n                      </Button>\n                    ) : (\n                      <Button \n                        className=\"w-full\" \n                        variant={tierData.ctaVariant}\n                        onClick={() => tierData.tier && handleSubscribe(tierData.tier)}\n                        disabled={isPending || Boolean(isCurrentPlan)}\n                        data-testid={`button-cta-${tierData.id}`}\n                      >\n                        {isPending ? (\n                          <>\n                            <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                            Processing...\n                          </>\n                        ) : isCurrentPlan ? (\n                          'Current Plan'\n                        ) : (\n                          tierData.cta\n                        )}\n                      </Button>\n                    )}\n                  </CardFooter>\n                </Card>\n              );\n            })}\n          </div>\n          \n          <div className=\"mt-12 text-center\">\n            <Card className=\"max-w-3xl mx-auto\" data-testid=\"card-faq\">\n              <CardHeader>\n                <CardTitle>Frequently Asked Questions</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-left\">\n                <div>\n                  <h3 className=\"font-semibold mb-1\">How do I become a $ANTIRUG holder?</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Purchase 10M+ $ANTIRUG tokens and connect your wallet to automatically unlock lifetime access to all premium features.\n                  </p>\n                </div>\n                <div>\n                  <h3 className=\"font-semibold mb-1\">Can I cancel anytime?</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Yes! All subscriptions can be cancelled at any time. You'll retain access until the end of your billing period.\n                  </p>\n                </div>\n                <div>\n                  <h3 className=\"font-semibold mb-1\">What payment methods do you accept?</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    We accept credit cards, Apple Pay, Google Pay, and more via Whop secure checkout (includes automatic tax calculation).\n                  </p>\n                </div>\n                <div>\n                  <h3 className=\"font-semibold mb-1\">What's included in the free trial?</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    The 7-day free trial includes 3 token analyses per day with basic risk scoring and holder analysis. No credit card required to start.\n                  </p>\n                </div>\n                <div>\n                  <h3 className=\"font-semibold mb-1\">How does Whop payment work?</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Clicking \"Subscribe\" redirects you to Whop's secure hosted checkout. After payment, you'll be automatically redirected back with instant access to your subscription.\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":11497},"client/src/components/bubblemaps-card.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { ExternalLink, Users, Activity } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface BubbleMapsCardProps {\n  tokenAddress: string;\n}\n\nexport function BubbleMapsCard({ tokenAddress }: BubbleMapsCardProps) {\n  const holderTools = [\n    {\n      name: \"Whale Hunter\",\n      url: `https://whalehunter.site/?token=${tokenAddress}`,\n      description: \"Real-time bubble visualization with physics\",\n      icon: Activity,\n      badge: \"Interactive\",\n      testId: \"button-whale-hunter\"\n    },\n    {\n      name: \"SolScan Holders\",\n      url: `https://solscan.io/token/${tokenAddress}#holders`,\n      description: \"Complete holder list with rankings\",\n      icon: Users,\n      badge: \"Explorer\",\n      testId: \"button-solscan\"\n    },\n    {\n      name: \"DEX Screener\",\n      url: `https://dexscreener.com/solana/${tokenAddress}`,\n      description: \"Charts + integrated BubbleMaps\",\n      icon: ExternalLink,\n      badge: \"Charts\",\n      testId: \"button-dexscreener\"\n    }\n  ];\n\n  return (\n    <Card data-testid=\"card-holder-visualization\">\n      <CardHeader className=\"space-y-1 pb-3\">\n        <CardTitle className=\"text-base font-medium\">Holder Visualization</CardTitle>\n        <CardDescription className=\"text-xs\">\n          Explore holder distribution with free analysis tools\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-2\">\n          {holderTools.map((tool) => {\n            const Icon = tool.icon;\n            return (\n              <Button\n                key={tool.name}\n                variant=\"outline\"\n                className=\"w-full justify-start\"\n                asChild\n                data-testid={tool.testId}\n              >\n                <a href={tool.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <div className=\"flex items-center gap-3 w-full\">\n                    <Icon className=\"h-4 w-4 flex-shrink-0\" />\n                    <div className=\"flex-1 text-left\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"font-medium text-sm\">{tool.name}</span>\n                        <Badge variant=\"secondary\" className=\"text-xs\">\n                          {tool.badge}\n                        </Badge>\n                      </div>\n                      <p className=\"text-xs text-muted-foreground mt-0.5\">\n                        {tool.description}\n                      </p>\n                    </div>\n                    <ExternalLink className=\"h-3 w-3 flex-shrink-0 opacity-50\" />\n                  </div>\n                </a>\n              </Button>\n            );\n          })}\n        </div>\n        <p className=\"text-xs text-muted-foreground mt-3 text-center\">\n          All tools open in new tabs and are free to use\n        </p>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":3001},"client/src/components/token-info-sidebar.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Copy, CheckCircle, XCircle, ExternalLink } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface TokenInfoSidebarProps {\n  tokenAddress: string;\n  mintAuthority?: string | null;\n  freezeAuthority?: string | null;\n  lpAddresses?: string[];\n}\n\nexport function TokenInfoSidebar({ tokenAddress, mintAuthority, freezeAuthority, lpAddresses }: TokenInfoSidebarProps) {\n  const { toast } = useToast();\n  const [copiedAddress, setCopiedAddress] = useState<string | null>(null);\n\n  const copyToClipboard = async (address: string, label: string) => {\n    try {\n      await navigator.clipboard.writeText(address);\n      setCopiedAddress(address);\n      toast({\n        title: \"Copied!\",\n        description: `${label} copied to clipboard`,\n      });\n      setTimeout(() => setCopiedAddress(null), 2000);\n    } catch (err) {\n      toast({\n        title: \"Copy failed\",\n        description: \"Failed to copy to clipboard\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const truncateAddress = (address: string) => {\n    return `${address.slice(0, 6)}...${address.slice(-6)}`;\n  };\n\n  return (\n    <Card className=\"sticky top-20\" data-testid=\"card-token-info-sidebar\">\n      <CardHeader>\n        <CardTitle className=\"text-lg\">Token Addresses</CardTitle>\n        <CardDescription>Quick reference for contract addresses</CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Token Contract Address */}\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-sm font-semibold\">Token Contract</span>\n            <Badge variant=\"outline\">Main</Badge>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <code className=\"flex-1 text-xs bg-muted px-2 py-1.5 rounded font-mono break-all\" data-testid=\"text-token-contract\">\n              {truncateAddress(tokenAddress)}\n            </code>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-7 w-7 flex-shrink-0\"\n              onClick={() => copyToClipboard(tokenAddress, \"Token address\")}\n              data-testid=\"button-copy-token\"\n            >\n              {copiedAddress === tokenAddress ? (\n                <CheckCircle className=\"h-4 w-4 text-green-600\" />\n              ) : (\n                <Copy className=\"h-4 w-4\" />\n              )}\n            </Button>\n          </div>\n          <a\n            href={`https://solscan.io/token/${tokenAddress}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"flex items-center gap-1 text-xs text-primary hover:underline\"\n            data-testid=\"link-token-explorer\"\n          >\n            <ExternalLink className=\"h-3 w-3\" />\n            View on Solscan\n          </a>\n        </div>\n\n        {/* Mint Authority */}\n        <div className=\"space-y-2 pt-2 border-t\">\n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-sm font-semibold\">Mint Authority</span>\n            {mintAuthority ? (\n              <Badge variant=\"destructive\" className=\"gap-1\">\n                <XCircle className=\"h-3 w-3\" />\n                Active\n              </Badge>\n            ) : (\n              <Badge variant=\"outline\" className=\"gap-1 text-green-600 border-green-600\">\n                <CheckCircle className=\"h-3 w-3\" />\n                Disabled\n              </Badge>\n            )}\n          </div>\n          {mintAuthority ? (\n            <>\n              <div className=\"flex items-center gap-2\">\n                <code className=\"flex-1 text-xs bg-muted px-2 py-1.5 rounded font-mono break-all\" data-testid=\"text-mint-authority\">\n                  {truncateAddress(mintAuthority)}\n                </code>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"h-7 w-7 flex-shrink-0\"\n                  onClick={() => copyToClipboard(mintAuthority, \"Mint authority\")}\n                  data-testid=\"button-copy-mint\"\n                >\n                  {copiedAddress === mintAuthority ? (\n                    <CheckCircle className=\"h-4 w-4 text-green-600\" />\n                  ) : (\n                    <Copy className=\"h-4 w-4\" />\n                  )}\n                </Button>\n              </div>\n              <a\n                href={`https://solscan.io/account/${mintAuthority}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-1 text-xs text-primary hover:underline\"\n                data-testid=\"link-mint-explorer\"\n              >\n                <ExternalLink className=\"h-3 w-3\" />\n                View on Solscan\n              </a>\n            </>\n          ) : (\n            <p className=\"text-xs text-muted-foreground\">Mint authority has been revoked âœ“</p>\n          )}\n        </div>\n\n        {/* Freeze Authority */}\n        <div className=\"space-y-2 pt-2 border-t\">\n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-sm font-semibold\">Freeze Authority</span>\n            {freezeAuthority ? (\n              <Badge variant=\"destructive\" className=\"gap-1\">\n                <XCircle className=\"h-3 w-3\" />\n                Active\n              </Badge>\n            ) : (\n              <Badge variant=\"outline\" className=\"gap-1 text-green-600 border-green-600\">\n                <CheckCircle className=\"h-3 w-3\" />\n                Disabled\n              </Badge>\n            )}\n          </div>\n          {freezeAuthority ? (\n            <>\n              <div className=\"flex items-center gap-2\">\n                <code className=\"flex-1 text-xs bg-muted px-2 py-1.5 rounded font-mono break-all\" data-testid=\"text-freeze-authority\">\n                  {truncateAddress(freezeAuthority)}\n                </code>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"h-7 w-7 flex-shrink-0\"\n                  onClick={() => copyToClipboard(freezeAuthority, \"Freeze authority\")}\n                  data-testid=\"button-copy-freeze\"\n                >\n                  {copiedAddress === freezeAuthority ? (\n                    <CheckCircle className=\"h-4 w-4 text-green-600\" />\n                  ) : (\n                    <Copy className=\"h-4 w-4\" />\n                  )}\n                </Button>\n              </div>\n              <a\n                href={`https://solscan.io/account/${freezeAuthority}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-1 text-xs text-primary hover:underline\"\n                data-testid=\"link-freeze-explorer\"\n              >\n                <ExternalLink className=\"h-3 w-3\" />\n                View on Solscan\n              </a>\n            </>\n          ) : (\n            <p className=\"text-xs text-muted-foreground\">Freeze authority has been revoked âœ“</p>\n          )}\n        </div>\n\n        {/* Liquidity Pool Addresses */}\n        {lpAddresses && lpAddresses.length > 0 && (\n          <div className=\"space-y-2 pt-2 border-t\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-semibold\">Liquidity Pools</span>\n              <Badge variant=\"secondary\">{lpAddresses.length}</Badge>\n            </div>\n            <div className=\"space-y-3\">\n              {lpAddresses.slice(0, 3).map((lpAddress, index) => (\n                <div key={lpAddress} className=\"space-y-1\">\n                  <div className=\"flex items-center gap-2\">\n                    <code className=\"flex-1 text-xs bg-muted px-2 py-1.5 rounded font-mono break-all\" data-testid={`text-lp-address-${index}`}>\n                      {truncateAddress(lpAddress)}\n                    </code>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-7 w-7 flex-shrink-0\"\n                      onClick={() => copyToClipboard(lpAddress, `LP address ${index + 1}`)}\n                      data-testid={`button-copy-lp-${index}`}\n                    >\n                      {copiedAddress === lpAddress ? (\n                        <CheckCircle className=\"h-4 w-4 text-green-600\" />\n                      ) : (\n                        <Copy className=\"h-4 w-4\" />\n                      )}\n                    </Button>\n                  </div>\n                  <a\n                    href={`https://solscan.io/account/${lpAddress}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"flex items-center gap-1 text-xs text-primary hover:underline\"\n                    data-testid={`link-lp-explorer-${index}`}\n                  >\n                    <ExternalLink className=\"h-3 w-3\" />\n                    View LP on Solscan\n                  </a>\n                </div>\n              ))}\n              {lpAddresses.length > 3 && (\n                <p className=\"text-xs text-muted-foreground text-center pt-1\">\n                  +{lpAddresses.length - 3} more liquidity pool{lpAddresses.length - 3 > 1 ? 's' : ''}\n                </p>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Helper Info */}\n        <div className=\"pt-2 border-t\">\n          <p className=\"text-xs text-muted-foreground\">\n            ðŸ’¡ Click the copy icon to copy any address to your clipboard\n          </p>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":9802},"client/src/components/liquidity-burn-card.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Flame, CheckCircle, XCircle, AlertTriangle, ExternalLink } from \"lucide-react\";\n\ninterface LiquidityBurnCardProps {\n  burnPercentage: number;\n  lpMintAddress?: string;\n  lpReserve?: number;\n  actualSupply?: number;\n  isBurned: boolean;\n}\n\nexport function LiquidityBurnCard({ \n  burnPercentage, \n  lpMintAddress, \n  lpReserve,\n  actualSupply,\n  isBurned \n}: LiquidityBurnCardProps) {\n  const getBurnStatus = () => {\n    if (isBurned || burnPercentage >= 99.99) {\n      return {\n        badge: (\n          <Badge className=\"gap-1 bg-green-600\">\n            <CheckCircle className=\"h-3 w-3\" />\n            100% Burned\n          </Badge>\n        ),\n        icon: <Flame className=\"h-8 w-8 text-green-600\" />,\n        color: \"text-green-600\",\n        progressColor: \"bg-green-600\",\n        status: \"SAFE\",\n        message: \"Liquidity is permanently locked. Creator cannot withdraw funds.\",\n      };\n    } else if (burnPercentage >= 90) {\n      return {\n        badge: (\n          <Badge variant=\"secondary\" className=\"gap-1 text-yellow-600\">\n            <AlertTriangle className=\"h-3 w-3\" />\n            Partially Burned\n          </Badge>\n        ),\n        icon: <Flame className=\"h-8 w-8 text-yellow-600\" />,\n        color: \"text-yellow-600\",\n        progressColor: \"bg-yellow-600\",\n        status: \"CAUTION\",\n        message: \"Most LP tokens burned, but some remain in circulation.\",\n      };\n    } else {\n      return {\n        badge: (\n          <Badge variant=\"destructive\" className=\"gap-1\">\n            <XCircle className=\"h-3 w-3\" />\n            Not Burned\n          </Badge>\n        ),\n        icon: <Flame className=\"h-8 w-8 text-red-600\" />,\n        color: \"text-red-600\",\n        progressColor: \"bg-red-600\",\n        status: \"HIGH RISK\",\n        message: \"Creator can withdraw liquidity at any time. High rug pull risk!\",\n      };\n    }\n  };\n\n  const status = getBurnStatus();\n\n  return (\n    <Card className=\"p-6\" data-testid=\"card-liquidity-burn\">\n      <div className=\"flex items-start justify-between mb-4\">\n        <div>\n          <CardTitle className=\"text-lg flex items-center gap-2\">\n            <Flame className=\"h-5 w-5\" />\n            Liquidity Pool Burn Status\n          </CardTitle>\n          <CardDescription>Verifies if LP tokens have been permanently burned</CardDescription>\n        </div>\n        {status.badge}\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* Burn Percentage Display */}\n        <div className=\"flex items-center justify-center py-6\">\n          {status.icon}\n          <div className=\"ml-6 flex-1\">\n            <div className={`text-5xl font-bold ${status.color}`} data-testid=\"text-burn-percentage\">\n              {burnPercentage.toFixed(2)}%\n            </div>\n            <div className=\"text-sm text-muted-foreground mt-1\">\n              LP Tokens Burned\n            </div>\n          </div>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"space-y-2\">\n          <Progress \n            value={Math.min(burnPercentage, 100)} \n            className=\"h-3\"\n            data-testid=\"progress-burn\"\n          />\n          <div className=\"flex justify-between text-xs text-muted-foreground\">\n            <span>0%</span>\n            <span className=\"font-semibold\">100% Burn = Locked Forever</span>\n          </div>\n        </div>\n\n        {/* Status Message */}\n        <div className={`p-4 rounded-md ${\n          isBurned \n            ? \"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-900\" \n            : burnPercentage >= 90\n            ? \"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-900\"\n            : \"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-900\"\n        }`}>\n          <div className=\"flex items-start gap-2\">\n            {isBurned ? (\n              <CheckCircle className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\n            ) : burnPercentage >= 90 ? (\n              <AlertTriangle className=\"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0\" />\n            ) : (\n              <XCircle className=\"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0\" />\n            )}\n            <div>\n              <p className={`font-semibold ${status.color}`} data-testid=\"text-burn-status\">\n                {status.status}\n              </p>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                {status.message}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Technical Details */}\n        {(lpReserve !== undefined || actualSupply !== undefined) && (\n          <div className=\"space-y-2 pt-2 border-t\">\n            <p className=\"text-sm font-semibold\">Technical Details:</p>\n            {lpReserve !== undefined && (\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-muted-foreground\">LP Reserve:</span>\n                <span className=\"font-mono\" data-testid=\"text-lp-reserve\">\n                  {lpReserve.toLocaleString()}\n                </span>\n              </div>\n            )}\n            {actualSupply !== undefined && (\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Actual Supply:</span>\n                <span className=\"font-mono\" data-testid=\"text-actual-supply\">\n                  {actualSupply.toLocaleString()}\n                </span>\n              </div>\n            )}\n            {lpMintAddress && (\n              <div className=\"pt-2\">\n                <p className=\"text-xs text-muted-foreground mb-1\">LP Mint Address:</p>\n                <div className=\"flex items-center gap-2\">\n                  <code className=\"flex-1 text-xs bg-muted px-2 py-1 rounded font-mono break-all\">\n                    {lpMintAddress.slice(0, 8)}...{lpMintAddress.slice(-8)}\n                  </code>\n                  <a\n                    href={`https://solscan.io/token/${lpMintAddress}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"flex items-center gap-1 text-xs text-primary hover:underline flex-shrink-0\"\n                    data-testid=\"link-lp-mint\"\n                  >\n                    <ExternalLink className=\"h-3 w-3\" />\n                    View\n                  </a>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Explanation */}\n        <div className=\"text-xs text-muted-foreground space-y-1 pt-2 border-t\">\n          <p className=\"font-semibold\">What does this mean?</p>\n          <ul className=\"space-y-1 list-disc list-inside\">\n            <li><strong>100% Burned:</strong> Liquidity permanently locked, cannot be withdrawn</li>\n            <li><strong>Partially Burned:</strong> Some LP tokens still exist, partial rug risk</li>\n            <li><strong>Not Burned:</strong> Creator can remove liquidity at any time</li>\n          </ul>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":7174},"server/vanity-generator.ts":{"content":"import { Keypair } from '@solana/web3.js';\nimport bs58 from 'bs58';\n\nexport interface VanityOptions {\n  pattern: string;\n  matchType: 'prefix' | 'suffix' | 'contains';\n  caseSensitive?: boolean;\n  maxAttempts?: number;\n}\n\nexport interface VanityResult {\n  publicKey: string;\n  secretKey: string; // base58 encoded\n  attempts: number;\n  timeMs: number;\n}\n\nexport class VanityAddressGenerator {\n  private stopped = false;\n\n  stop() {\n    this.stopped = true;\n  }\n\n  async generate(\n    options: VanityOptions,\n    onProgress?: (attempts: number, timeMs: number) => void\n  ): Promise<VanityResult | null> {\n    const { pattern, matchType, caseSensitive = false, maxAttempts = 10_000_000 } = options;\n    const searchPattern = caseSensitive ? pattern : pattern.toLowerCase();\n    \n    let attempts = 0;\n    const startTime = Date.now();\n    this.stopped = false;\n\n    // Progress callback every 10,000 attempts\n    const progressInterval = 10_000;\n\n    while (attempts < maxAttempts && !this.stopped) {\n      attempts++;\n\n      const keypair = Keypair.generate();\n      const publicKey = keypair.publicKey.toBase58();\n      const checkKey = caseSensitive ? publicKey : publicKey.toLowerCase();\n\n      let matches = false;\n      if (matchType === 'prefix') {\n        matches = checkKey.startsWith(searchPattern);\n      } else if (matchType === 'suffix') {\n        matches = checkKey.endsWith(searchPattern);\n      } else {\n        matches = checkKey.includes(searchPattern);\n      }\n\n      if (matches) {\n        const timeMs = Date.now() - startTime;\n        return {\n          publicKey,\n          secretKey: bs58.encode(keypair.secretKey),\n          attempts,\n          timeMs,\n        };\n      }\n\n      // Progress callback\n      if (onProgress && attempts % progressInterval === 0) {\n        const timeMs = Date.now() - startTime;\n        onProgress(attempts, timeMs);\n      }\n    }\n\n    // No match found within max attempts\n    return null;\n  }\n\n  /**\n   * Estimates how long it might take to find a vanity address\n   * Based on the pattern length and match type\n   */\n  static estimateDifficulty(pattern: string, matchType: 'prefix' | 'suffix' | 'contains'): {\n    difficulty: number;\n    estimatedAttempts: string;\n    estimatedTime: string;\n  } {\n    const base58Chars = 58;\n    let difficulty: number;\n\n    if (matchType === 'prefix' || matchType === 'suffix') {\n      // For prefix/suffix: 58^length\n      difficulty = Math.pow(base58Chars, pattern.length);\n    } else {\n      // For contains: roughly 58^length / length (because pattern can appear anywhere)\n      difficulty = Math.pow(base58Chars, pattern.length) / pattern.length;\n    }\n\n    // Rough estimates assuming ~100k attempts/sec on average hardware\n    const attemptsPerSec = 100_000;\n    const estimatedSeconds = difficulty / attemptsPerSec;\n\n    let estimatedTime: string;\n    if (estimatedSeconds < 1) {\n      estimatedTime = '< 1 second';\n    } else if (estimatedSeconds < 60) {\n      estimatedTime = `~${Math.round(estimatedSeconds)} seconds`;\n    } else if (estimatedSeconds < 3600) {\n      estimatedTime = `~${Math.round(estimatedSeconds / 60)} minutes`;\n    } else if (estimatedSeconds < 86400) {\n      estimatedTime = `~${Math.round(estimatedSeconds / 3600)} hours`;\n    } else {\n      estimatedTime = `~${Math.round(estimatedSeconds / 86400)} days`;\n    }\n\n    let estimatedAttempts: string;\n    if (difficulty < 1000) {\n      estimatedAttempts = Math.round(difficulty).toString();\n    } else if (difficulty < 1_000_000) {\n      estimatedAttempts = `${(difficulty / 1000).toFixed(1)}K`;\n    } else if (difficulty < 1_000_000_000) {\n      estimatedAttempts = `${(difficulty / 1_000_000).toFixed(1)}M`;\n    } else {\n      estimatedAttempts = `${(difficulty / 1_000_000_000).toFixed(1)}B`;\n    }\n\n    return {\n      difficulty,\n      estimatedAttempts,\n      estimatedTime,\n    };\n  }\n}\n","size_bytes":3864},"client/src/pages/vanity-generator.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Copy, Download, AlertCircle, Sparkles } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface VanityEstimate {\n  difficulty: number;\n  estimatedAttempts: string;\n  estimatedTime: string;\n}\n\ninterface VanityResult {\n  publicKey: string;\n  secretKey: string;\n  attempts: number;\n  timeMs: number;\n}\n\nexport default function VanityGenerator() {\n  const { toast } = useToast();\n  const [pattern, setPattern] = useState(\"KILL\");\n  const [matchType, setMatchType] = useState<\"prefix\" | \"suffix\" | \"contains\">(\"suffix\");\n  const [caseSensitive, setCaseSensitive] = useState(false);\n  const [estimate, setEstimate] = useState<VanityEstimate | null>(null);\n  const [result, setResult] = useState<VanityResult | null>(null);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [isEstimating, setIsEstimating] = useState(false);\n\n  const handleEstimate = async () => {\n    if (!pattern.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a pattern\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsEstimating(true);\n    try {\n      const response = await apiRequest(\"POST\", \"/api/vanity/estimate\", {\n        pattern: pattern.trim(),\n        matchType,\n      });\n      const data = await response.json() as VanityEstimate;\n      setEstimate(data);\n    } catch (error) {\n      toast({\n        title: \"Estimation Failed\",\n        description: error instanceof Error ? error.message : \"Failed to estimate difficulty\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsEstimating(false);\n    }\n  };\n\n  const handleGenerate = async () => {\n    if (!pattern.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a pattern\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsGenerating(true);\n    setResult(null);\n\n    try {\n      const response = await apiRequest(\"POST\", \"/api/vanity/generate\", {\n        pattern: pattern.trim(),\n        matchType,\n        caseSensitive,\n        maxAttempts: 10_000_000,\n      });\n      const data = await response.json() as VanityResult;\n      setResult(data);\n      toast({\n        title: \"Success!\",\n        description: `Found matching address in ${data.attempts.toLocaleString()} attempts (${(data.timeMs / 1000).toFixed(2)}s)`,\n      });\n    } catch (error) {\n      toast({\n        title: \"Generation Failed\",\n        description: error instanceof Error ? error.message : \"Failed to generate vanity address\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const copyToClipboard = (text: string, label: string) => {\n    navigator.clipboard.writeText(text);\n    toast({\n      title: \"Copied!\",\n      description: `${label} copied to clipboard`,\n    });\n  };\n\n  const downloadKeypair = () => {\n    if (!result) return;\n\n    const data = {\n      publicKey: result.publicKey,\n      secretKey: result.secretKey,\n      generatedAt: new Date().toISOString(),\n      pattern,\n      matchType,\n      attempts: result.attempts,\n    };\n\n    const blob = new Blob([JSON.stringify(data, null, 2)], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `vanity-keypair-${result.publicKey}.json`;\n    a.click();\n    URL.revokeObjectURL(url);\n\n    toast({\n      title: \"Downloaded\",\n      description: \"Keypair saved to file\",\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"container mx-auto px-4 py-8 max-w-4xl\">\n        <div className=\"space-y-6\">\n          <div className=\"space-y-2\">\n            <h1 className=\"text-3xl font-bold flex items-center gap-2\">\n              <Sparkles className=\"w-8 h-8 text-primary\" />\n              Vanity Address Generator\n            </h1>\n            <p className=\"text-muted-foreground\">\n              Generate a custom Solana address with your desired pattern\n            </p>\n          </div>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Configuration</CardTitle>\n              <CardDescription>\n                Choose your pattern and matching type. Shorter patterns are faster to find.\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"pattern\">Pattern</Label>\n                <Input\n                  id=\"pattern\"\n                  value={pattern}\n                  onChange={(e) => setPattern(e.target.value)}\n                  placeholder=\"KILL\"\n                  maxLength={10}\n                  data-testid=\"input-vanity-pattern\"\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                  Max 10 characters. Longer patterns take exponentially longer to find.\n                </p>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label>Match Type</Label>\n                <RadioGroup value={matchType} onValueChange={(v) => setMatchType(v as any)}>\n                  <div className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value=\"prefix\" id=\"prefix\" data-testid=\"radio-prefix\" />\n                    <Label htmlFor=\"prefix\" className=\"font-normal cursor-pointer\">\n                      Prefix (starts with pattern)\n                    </Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value=\"suffix\" id=\"suffix\" data-testid=\"radio-suffix\" />\n                    <Label htmlFor=\"suffix\" className=\"font-normal cursor-pointer\">\n                      Suffix (ends with pattern)\n                    </Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value=\"contains\" id=\"contains\" data-testid=\"radio-contains\" />\n                    <Label htmlFor=\"contains\" className=\"font-normal cursor-pointer\">\n                      Contains (pattern anywhere)\n                    </Label>\n                  </div>\n                </RadioGroup>\n              </div>\n\n              <div className=\"flex items-center space-x-2\">\n                <input\n                  type=\"checkbox\"\n                  id=\"caseSensitive\"\n                  checked={caseSensitive}\n                  onChange={(e) => setCaseSensitive(e.target.checked)}\n                  className=\"rounded\"\n                  data-testid=\"checkbox-case-sensitive\"\n                />\n                <Label htmlFor=\"caseSensitive\" className=\"font-normal cursor-pointer\">\n                  Case sensitive\n                </Label>\n              </div>\n\n              <div className=\"flex gap-3\">\n                <Button\n                  onClick={handleEstimate}\n                  disabled={isEstimating || isGenerating}\n                  variant=\"outline\"\n                  data-testid=\"button-estimate\"\n                >\n                  {isEstimating ? \"Estimating...\" : \"Estimate Difficulty\"}\n                </Button>\n                <Button\n                  onClick={handleGenerate}\n                  disabled={isGenerating}\n                  data-testid=\"button-generate\"\n                >\n                  {isGenerating ? \"Generating...\" : \"Generate Address\"}\n                </Button>\n              </div>\n\n              {isGenerating && (\n                <div className=\"space-y-2\">\n                  <p className=\"text-sm text-muted-foreground\">\n                    Generating vanity address... This may take a while.\n                  </p>\n                  <Progress value={undefined} className=\"w-full\" />\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {estimate && !isGenerating && (\n            <Alert>\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertDescription>\n                <div className=\"space-y-1\">\n                  <p className=\"font-semibold\">Difficulty Estimate:</p>\n                  <p className=\"text-sm\">\n                    Expected attempts: <span className=\"font-mono\">{estimate.estimatedAttempts}</span>\n                  </p>\n                  <p className=\"text-sm\">\n                    Estimated time: <span className=\"font-mono\">{estimate.estimatedTime}</span>\n                  </p>\n                </div>\n              </AlertDescription>\n            </Alert>\n          )}\n\n          {result && (\n            <Card className=\"border-primary\">\n              <CardHeader>\n                <CardTitle className=\"text-primary\">Address Generated!</CardTitle>\n                <CardDescription>\n                  Found in {result.attempts.toLocaleString()} attempts ({(result.timeMs / 1000).toFixed(2)}s)\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label>Public Key (Address)</Label>\n                  <div className=\"flex gap-2\">\n                    <Input\n                      value={result.publicKey}\n                      readOnly\n                      className=\"font-mono text-sm\"\n                      data-testid=\"text-public-key\"\n                    />\n                    <Button\n                      size=\"icon\"\n                      variant=\"outline\"\n                      onClick={() => copyToClipboard(result.publicKey, \"Public key\")}\n                      data-testid=\"button-copy-public\"\n                    >\n                      <Copy className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label>Secret Key (Private Key)</Label>\n                  <div className=\"flex gap-2\">\n                    <Input\n                      value={result.secretKey}\n                      readOnly\n                      type=\"password\"\n                      className=\"font-mono text-sm\"\n                      data-testid=\"text-secret-key\"\n                    />\n                    <Button\n                      size=\"icon\"\n                      variant=\"outline\"\n                      onClick={() => copyToClipboard(result.secretKey, \"Secret key\")}\n                      data-testid=\"button-copy-secret\"\n                    >\n                      <Copy className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                  <p className=\"text-xs text-destructive\">\n                    âš ï¸ Keep this secret key safe! Anyone with this key controls the address.\n                  </p>\n                </div>\n\n                <Button\n                  onClick={downloadKeypair}\n                  variant=\"outline\"\n                  className=\"w-full\"\n                  data-testid=\"button-download-keypair\"\n                >\n                  <Download className=\"w-4 h-4 mr-2\" />\n                  Download Keypair JSON\n                </Button>\n\n                <Alert>\n                  <AlertCircle className=\"h-4 w-4\" />\n                  <AlertDescription className=\"text-xs\">\n                    <p className=\"font-semibold mb-1\">Next Steps:</p>\n                    <ol className=\"list-decimal list-inside space-y-1\">\n                      <li>Save the secret key securely (download JSON or copy to safe storage)</li>\n                      <li>Use this keypair to create your SPL token with Solana CLI</li>\n                      <li>Never share your secret key with anyone</li>\n                    </ol>\n                  </AlertDescription>\n                </Alert>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":12269},"scripts/generate-vanity.ts":{"content":"import { VanityAddressGenerator } from '../server/vanity-generator';\n\nasync function main() {\n  const pattern = process.argv[2] || 'KILL';\n  const matchType = (process.argv[3] as 'prefix' | 'suffix' | 'contains') || 'suffix';\n\n  console.log(`\\nðŸ” Generating vanity address...`);\n  console.log(`   Pattern: \"${pattern}\"`);\n  console.log(`   Match Type: ${matchType}\\n`);\n\n  // Get estimate first\n  const estimate = VanityAddressGenerator.estimateDifficulty(pattern, matchType);\n  console.log(`ðŸ“Š Difficulty Estimate:`);\n  console.log(`   Expected attempts: ${estimate.estimatedAttempts}`);\n  console.log(`   Estimated time: ${estimate.estimatedTime}\\n`);\n\n  const generator = new VanityAddressGenerator();\n\n  let lastProgress = 0;\n  const result = await generator.generate(\n    {\n      pattern,\n      matchType,\n      caseSensitive: false,\n      maxAttempts: 100_000_000,\n    },\n    (attempts, timeMs) => {\n      // Progress callback every 10,000 attempts\n      const progress = Math.floor(attempts / 10000) * 10000;\n      if (progress !== lastProgress) {\n        process.stdout.write(\n          `\\râš¡ Attempts: ${attempts.toLocaleString()} | Time: ${(timeMs / 1000).toFixed(1)}s`\n        );\n        lastProgress = progress;\n      }\n    }\n  );\n\n  if (!result) {\n    console.log('\\n\\nâŒ No matching address found within attempt limit\\n');\n    process.exit(1);\n  }\n\n  console.log('\\n\\nâœ… SUCCESS! Vanity address generated!\\n');\n  console.log(`ðŸ“ Public Key:  ${result.publicKey}`);\n  console.log(`ðŸ”‘ Secret Key:  ${result.secretKey}`);\n  console.log(`\\nðŸ“ˆ Stats:`);\n  console.log(`   Attempts: ${result.attempts.toLocaleString()}`);\n  console.log(`   Time: ${(result.timeMs / 1000).toFixed(2)}s`);\n  console.log(`   Speed: ${Math.round(result.attempts / (result.timeMs / 1000)).toLocaleString()} attempts/sec\\n`);\n  console.log(`âš ï¸  IMPORTANT: Save your secret key securely!`);\n  console.log(`   Anyone with this key controls the address.\\n`);\n}\n\nmain().catch(console.error);\n","size_bytes":1990},"client/src/constants.ts":{"content":"export const CONTRACT_ADDRESS = \"2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\";\n","size_bytes":80},"client/src/pages/about.tsx":{"content":"import { Header } from \"@/components/header-new\";\nimport { Footer } from \"@/components/footer\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Shield, Zap, TrendingUp, Lock, Database, Bot, Wallet, Copy, CheckCircle, Globe, Code } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { CONTRACT_ADDRESS } from \"@/constants\";\n\nexport default function About() {\n  const { toast } = useToast();\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n    toast({\n      title: \"Copied!\",\n      description: \"Contract address copied to clipboard\",\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n      \n      <main className=\"flex-1\">\n        <div className=\"max-w-4xl mx-auto px-6 py-12\">\n          <div className=\"space-y-8\">\n            {/* Hero Section */}\n            <div className=\"text-center space-y-4\">\n              <h1 className=\"text-4xl font-bold\" data-testid=\"heading-about\">About Solana Rug Killer</h1>\n              <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n                Protecting investors from rug pulls with AI-powered analysis and multi-source intelligence\n              </p>\n            </div>\n\n            {/* Official Contract Address */}\n            <Card data-testid=\"card-about-contract\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <CheckCircle className=\"w-5 h-5 text-green-500\" />\n                  Official Contract Address\n                </CardTitle>\n                <CardDescription>\n                  Vanity address generated for the Solana Rug Killer project\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex items-center gap-2 bg-muted px-3 py-2 rounded-md\">\n                  <code className=\"font-mono text-sm flex-1 select-all\" data-testid=\"text-about-contract\">\n                    {CONTRACT_ADDRESS}\n                  </code>\n                  <Button\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    onClick={() => copyToClipboard(CONTRACT_ADDRESS)}\n                    aria-label=\"Copy contract address\"\n                    data-testid=\"button-copy-about\"\n                  >\n                    <Copy className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Mission */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Our Mission</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <p className=\"text-muted-foreground\">\n                  Solana Rug Killer is a comprehensive web application designed to analyze Solana SPL tokens \n                  for potential rug pull risks. Our primary purpose is to provide real-time analysis of common \n                  indicators like mint/freeze authority, holder concentration, liquidity pool status, and \n                  suspicious transaction patterns.\n                </p>\n                <p className=\"text-muted-foreground\">\n                  We aim to equip investors with a robust tool for identifying and mitigating risks within \n                  the Solana ecosystem, leveraging advanced analytics to protect users from fraudulent schemes \n                  and contribute to a safer investment environment.\n                </p>\n              </CardContent>\n            </Card>\n\n            {/* Key Features */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Key Features</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div className=\"flex gap-3\">\n                    <Shield className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                    <div>\n                      <h3 className=\"font-semibold text-sm\">Multi-Source Analysis</h3>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Rugcheck, GoPlus, DexScreener, Jupiter\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-3\">\n                    <Zap className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                    <div>\n                      <h3 className=\"font-semibold text-sm\">AI Blacklist System</h3>\n                      <p className=\"text-sm text-muted-foreground\">\n                        6 automated detection rules, 52+ risk metrics\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-3\">\n                    <Bot className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                    <div>\n                      <h3 className=\"font-semibold text-sm\">Telegram & Discord Bots</h3>\n                      <p className=\"text-sm text-muted-foreground\">\n                        /execute, /first20, /devtorture, /blacklist\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-3\">\n                    <TrendingUp className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                    <div>\n                      <h3 className=\"font-semibold text-sm\">Risk Scoring</h3>\n                      <p className=\"text-sm text-muted-foreground\">\n                        0-100 score with detailed red flag breakdown\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-3\">\n                    <Database className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                    <div>\n                      <h3 className=\"font-semibold text-sm\">Holder Analysis</h3>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Top 20 holders with concentration percentage\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-3\">\n                    <Lock className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                    <div>\n                      <h3 className=\"font-semibold text-sm\">Liquidity Verification</h3>\n                      <p className=\"text-sm text-muted-foreground\">\n                        100% burn verification and pool depth checks\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Data Sources */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Trusted Data Sources</CardTitle>\n                <CardDescription>\n                  We aggregate data from multiple blockchain intelligence providers\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-start gap-3\">\n                    <Badge variant=\"outline\">Rugcheck.xyz</Badge>\n                    <p className=\"text-sm text-muted-foreground flex-1\">\n                      Community-driven risk scores and liquidity analysis\n                    </p>\n                  </div>\n                  <div className=\"flex items-start gap-3\">\n                    <Badge variant=\"outline\">GoPlus Security</Badge>\n                    <p className=\"text-sm text-muted-foreground flex-1\">\n                      Honeypot detection, contract security scanning, scam detection flags\n                    </p>\n                  </div>\n                  <div className=\"flex items-start gap-3\">\n                    <Badge variant=\"outline\">DexScreener</Badge>\n                    <p className=\"text-sm text-muted-foreground flex-1\">\n                      Real-time market data including price, volume, liquidity, and market cap\n                    </p>\n                  </div>\n                  <div className=\"flex items-start gap-3\">\n                    <Badge variant=\"outline\">Jupiter Aggregator</Badge>\n                    <p className=\"text-sm text-muted-foreground flex-1\">\n                      Price verification and liquidity aggregation across Solana DEXs\n                    </p>\n                  </div>\n                  <div className=\"flex items-start gap-3\">\n                    <Badge variant=\"outline\">BubbleMaps</Badge>\n                    <p className=\"text-sm text-muted-foreground flex-1\">\n                      Interactive holder distribution visualization and wallet clustering\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Technology Stack */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Code className=\"w-5 h-5\" />\n                  Technology Stack\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                  <Badge variant=\"secondary\">React + TypeScript</Badge>\n                  <Badge variant=\"secondary\">Solana Web3.js</Badge>\n                  <Badge variant=\"secondary\">Express.js</Badge>\n                  <Badge variant=\"secondary\">PostgreSQL</Badge>\n                  <Badge variant=\"secondary\">Replit Auth</Badge>\n                  <Badge variant=\"secondary\">Whop Payments</Badge>\n                  <Badge variant=\"secondary\">Telegram Bot API</Badge>\n                  <Badge variant=\"secondary\">Discord API</Badge>\n                  <Badge variant=\"secondary\">Recharts</Badge>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Subscription Tiers */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Subscription Tiers</CardTitle>\n                <CardDescription>\n                  Choose the plan that fits your needs\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div>\n                    <h3 className=\"font-semibold\">FREE Trial - $0 for 7 days</h3>\n                    <ul className=\"text-sm text-muted-foreground space-y-1 mt-2 ml-4\">\n                      <li>â€¢ 3 token analyses per day</li>\n                      <li>â€¢ Basic risk score and holder analysis</li>\n                      <li>â€¢ No credit card required</li>\n                    </ul>\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold\">Individual - $29/month</h3>\n                    <ul className=\"text-sm text-muted-foreground space-y-1 mt-2 ml-4\">\n                      <li>â€¢ Unlimited token analyses</li>\n                      <li>â€¢ Full multi-source analysis</li>\n                      <li>â€¢ AI blacklist access</li>\n                      <li>â€¢ Bot commands access</li>\n                    </ul>\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold\">Group - $120/month</h3>\n                    <ul className=\"text-sm text-muted-foreground space-y-1 mt-2 ml-4\">\n                      <li>â€¢ Everything in Individual</li>\n                      <li>â€¢ Telegram group/channel alerts</li>\n                      <li>â€¢ Priority support</li>\n                      <li>â€¢ Team collaboration features</li>\n                    </ul>\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold\">Lifetime - One-time payment</h3>\n                    <ul className=\"text-sm text-muted-foreground space-y-1 mt-2 ml-4\">\n                      <li>â€¢ Everything in Group</li>\n                      <li>â€¢ Lifetime access (never expires)</li>\n                      <li>â€¢ Redeemable via special codes</li>\n                    </ul>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Contact & Support */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Globe className=\"w-5 h-5\" />\n                  Contact & Support\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <p className=\"text-sm text-muted-foreground\">\n                  For questions, support, or partnership inquiries, please reach out through our \n                  Telegram or Discord communities. Our team is dedicated to providing the best \n                  experience for our users.\n                </p>\n                <div className=\"flex gap-2\">\n                  <Badge variant=\"outline\">Telegram Bot</Badge>\n                  <Badge variant=\"outline\">Discord Bot</Badge>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":13226},"server/sniper-bot.ts":{"content":"import { Keypair, Connection, PublicKey } from '@solana/web3.js';\nimport bs58 from 'bs58';\nimport WebSocket from 'ws';\n\n// Configuration from environment variables\nconst PREFIX = process.env.SNIPER_VANITY_PREFIX || \"RUGK\";\nconst SUFFIX = process.env.SNIPER_VANITY_SUFFIX || \"pump\";\nconst BUY_AMOUNT = parseFloat(process.env.SNIPER_BUY_AMOUNT || \"2.0\");\nconst PRIVATE_KEY = process.env.SNIPER_PRIVATE_KEY;\nconst DISCORD_WEBHOOK = process.env.SNIPER_DISCORD_WEBHOOK;\nconst TELEGRAM_TOKEN = process.env.SNIPER_TELEGRAM_BOT_TOKEN;\nconst TELEGRAM_CHAT = process.env.SNIPER_TELEGRAM_CHAT_ID;\nconst SOLANA_RPC_URL = process.env.SOLANA_RPC_URL || 'https://api.mainnet-beta.solana.com';\nconst AUTO_SNIPE_ENABLED = process.env.SNIPER_AUTO_SNIPE_ENABLED === 'true';\nconst MIN_MARKET_CAP = parseFloat(process.env.SNIPER_MIN_MARKET_CAP || \"0\");\nconst MAX_MARKET_CAP = parseFloat(process.env.SNIPER_MAX_MARKET_CAP || \"1000000\");\n\ninterface PumpPortalNewToken {\n  mint: string;\n  name?: string;\n  symbol?: string;\n  marketCap?: number;\n  timestamp?: number;\n}\n\ninterface PumpPortalLaunchRequest {\n  mint: string;\n  privateKey: string;\n  name: string;\n  symbol: string;\n  uri: string;\n  autoBuy?: number;\n}\n\ninterface PumpPortalTradeRequest {\n  publicKey: string;\n  privateKey: string;\n  mint: string;\n  amount: number;\n  slippage: number;\n  priorityFee: number;\n}\n\ninterface PumpPortalResponse {\n  signature?: string;\n  error?: string;\n  message?: string;\n}\n\nclass SniperBot {\n  private connection: Connection;\n  private wallet: Keypair | null = null;\n  private ws: WebSocket | null = null;\n  private isRunning = false;\n  private sniperStats = {\n    tokensGrinded: 0,\n    tokensLaunched: 0,\n    tokensSniped: 0,\n    totalVolume: 0,\n    startTime: Date.now(),\n  };\n\n  constructor() {\n    this.connection = new Connection(SOLANA_RPC_URL, 'confirmed');\n    \n    if (PRIVATE_KEY) {\n      try {\n        this.wallet = Keypair.fromSecretKey(bs58.decode(PRIVATE_KEY));\n        console.log(`[SNIPER] Wallet loaded: ${this.wallet.publicKey.toBase58()}`);\n      } catch (error) {\n        console.error('[SNIPER] Failed to load wallet from PRIVATE_KEY:', error);\n      }\n    }\n  }\n\n  async notify(message: string): Promise<void> {\n    const timestamp = new Date().toISOString();\n    const logMessage = `[${timestamp}] ${message}`;\n    console.log(logMessage);\n\n    // Discord webhook notification\n    if (DISCORD_WEBHOOK) {\n      try {\n        await fetch(DISCORD_WEBHOOK, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ \n            content: message,\n            username: 'RugKiller Sniper',\n          }),\n        });\n      } catch (error) {\n        console.error('[SNIPER] Discord notification failed:', error);\n      }\n    }\n\n    // Telegram bot notification\n    if (TELEGRAM_TOKEN && TELEGRAM_CHAT) {\n      try {\n        const url = `https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`;\n        await fetch(url, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            chat_id: TELEGRAM_CHAT,\n            text: message,\n            parse_mode: 'HTML',\n          }),\n        });\n      } catch (error) {\n        console.error('[SNIPER] Telegram notification failed:', error);\n      }\n    }\n  }\n\n  grindVanity(): Keypair | null {\n    console.log(`[SNIPER] Grinding vanity address: ${PREFIX}...${SUFFIX}`);\n    this.notify(`ðŸ”¨ Grinding vanity address: ${PREFIX}...${SUFFIX}`);\n\n    let attempts = 0;\n    const maxAttempts = 10000000; // Prevent infinite loop\n\n    while (attempts < maxAttempts) {\n      const mint = Keypair.generate();\n      const addr = mint.publicKey.toBase58();\n      \n      if (addr.startsWith(PREFIX) && addr.endsWith(SUFFIX)) {\n        this.sniperStats.tokensGrinded++;\n        console.log(`[SNIPER] ðŸŽ¯ Vanity found after ${attempts} attempts: ${addr}`);\n        this.notify(`ðŸŽ¯ VANITY FOUND: ${addr}\\nðŸ“Š Attempts: ${attempts.toLocaleString()}\\nðŸ”— https://pump.fun/${addr}`);\n        return mint;\n      }\n      \n      attempts++;\n      if (attempts % 100000 === 0) {\n        console.log(`[SNIPER] Grinding... ${attempts.toLocaleString()} attempts`);\n      }\n    }\n\n    console.log(`[SNIPER] Failed to find vanity after ${maxAttempts} attempts`);\n    return null;\n  }\n\n  async launchAndSnipe(mintKeypair: Keypair): Promise<void> {\n    if (!this.wallet) {\n      console.error('[SNIPER] No wallet configured');\n      return;\n    }\n\n    const mintPub = mintKeypair.publicKey.toBase58();\n    console.log(`[SNIPER] Launching token: ${mintPub}`);\n\n    try {\n      const launchData: PumpPortalLaunchRequest = {\n        mint: mintPub,\n        privateKey: bs58.encode(mintKeypair.secretKey),\n        name: \"Rug Killer\",\n        symbol: \"RUGK\",\n        uri: \"https://arweave.net/placeholder-metadata\", // Should be uploaded to IPFS/Arweave first\n        autoBuy: BUY_AMOUNT,\n      };\n\n      const response = await fetch('https://pumpportal.fun/api/advanced-create', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(launchData),\n      });\n\n      const data: PumpPortalResponse = await response.json();\n\n      if (data.signature) {\n        this.sniperStats.tokensLaunched++;\n        this.sniperStats.totalVolume += BUY_AMOUNT;\n        \n        const message = `ðŸš€ RUGKILLER LIVE + SNIPED ${BUY_AMOUNT} SOL!\\n` +\n          `ðŸ“ CA: ${mintPub}\\n` +\n          `ðŸ”— https://pump.fun/${mintPub}\\n` +\n          `âœ… TX: https://solscan.io/tx/${data.signature}`;\n        \n        this.notify(message);\n      } else {\n        console.error('[SNIPER] Launch failed:', data);\n        this.notify(`âŒ Launch failed: ${data.error || data.message || 'Unknown error'}`);\n      }\n    } catch (error) {\n      console.error('[SNIPER] Launch error:', error);\n      this.notify(`âŒ Launch error: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n  }\n\n  async snipeToken(mint: string, tokenData?: PumpPortalNewToken): Promise<void> {\n    if (!this.wallet || !PRIVATE_KEY) {\n      console.error('[SNIPER] No wallet configured for sniping');\n      return;\n    }\n\n    // Apply market cap filters if available\n    if (tokenData?.marketCap) {\n      if (tokenData.marketCap < MIN_MARKET_CAP || tokenData.marketCap > MAX_MARKET_CAP) {\n        console.log(`[SNIPER] Skipping ${mint} - MC ${tokenData.marketCap} outside range [${MIN_MARKET_CAP}, ${MAX_MARKET_CAP}]`);\n        return;\n      }\n    }\n\n    console.log(`[SNIPER] Sniping token: ${mint}`);\n\n    try {\n      const tradeData: PumpPortalTradeRequest = {\n        publicKey: this.wallet.publicKey.toBase58(),\n        privateKey: PRIVATE_KEY,\n        mint: mint,\n        amount: BUY_AMOUNT,\n        slippage: 15,\n        priorityFee: 0.0005,\n      };\n\n      const response = await fetch('https://pumpportal.fun/api/trade-local', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(tradeData),\n      });\n\n      const data: PumpPortalResponse = await response.json();\n\n      if (data.signature) {\n        this.sniperStats.tokensSniped++;\n        this.sniperStats.totalVolume += BUY_AMOUNT;\n        \n        const message = `ðŸŽ¯ SNIPED NEW TOKEN!\\n` +\n          `ðŸ“ CA: ${mint}\\n` +\n          `ðŸ’° Bought ${BUY_AMOUNT} SOL\\n` +\n          `${tokenData?.name ? `ðŸ·ï¸ ${tokenData.name} (${tokenData.symbol})\\n` : ''}` +\n          `${tokenData?.marketCap ? `ðŸ“Š MC: $${tokenData.marketCap.toLocaleString()}\\n` : ''}` +\n          `ðŸ”— https://pump.fun/${mint}\\n` +\n          `âœ… TX: https://solscan.io/tx/${data.signature}`;\n        \n        this.notify(message);\n      } else {\n        console.error('[SNIPER] Snipe failed:', data);\n      }\n    } catch (error) {\n      console.error('[SNIPER] Snipe error:', error);\n    }\n  }\n\n  startWebSocketListener(): void {\n    if (!AUTO_SNIPE_ENABLED) {\n      console.log('[SNIPER] Auto-snipe disabled in config');\n      return;\n    }\n\n    console.log('[SNIPER] Starting WebSocket listener for new tokens...');\n    \n    this.ws = new WebSocket('wss://pumpportal.fun/api/data');\n\n    this.ws.on('open', () => {\n      console.log('[SNIPER] WebSocket connected to pumpportal.fun');\n      this.ws?.send(JSON.stringify({ method: \"subscribeNewToken\" }));\n      this.notify('ðŸ”Œ Connected to pump.fun live feed - monitoring new tokens');\n    });\n\n    this.ws.on('message', async (data: WebSocket.Data) => {\n      try {\n        const msg: PumpPortalNewToken = JSON.parse(data.toString());\n        \n        if (msg.mint) {\n          console.log(`[SNIPER] New token detected: ${msg.mint}`);\n          \n          // Filter out non-pump tokens\n          if (!msg.mint.includes('pump') && msg.mint.length === 44) {\n            await this.snipeToken(msg.mint, msg);\n          }\n        }\n      } catch (error) {\n        console.error('[SNIPER] WebSocket message parse error:', error);\n      }\n    });\n\n    this.ws.on('error', (error) => {\n      console.error('[SNIPER] WebSocket error:', error);\n      this.notify(`âš ï¸ WebSocket error: ${error.message}`);\n    });\n\n    this.ws.on('close', () => {\n      console.log('[SNIPER] WebSocket connection closed');\n      \n      // Auto-reconnect after 5 seconds if still running\n      if (this.isRunning) {\n        console.log('[SNIPER] Reconnecting in 5 seconds...');\n        setTimeout(() => this.startWebSocketListener(), 5000);\n      }\n    });\n  }\n\n  getStats() {\n    const uptime = Date.now() - this.sniperStats.startTime;\n    const uptimeHours = (uptime / (1000 * 60 * 60)).toFixed(2);\n    \n    return {\n      ...this.sniperStats,\n      uptime: uptimeHours,\n      walletAddress: this.wallet?.publicKey.toBase58() || 'Not configured',\n      autoSnipeEnabled: AUTO_SNIPE_ENABLED,\n      config: {\n        prefix: PREFIX,\n        suffix: SUFFIX,\n        buyAmount: BUY_AMOUNT,\n        minMarketCap: MIN_MARKET_CAP,\n        maxMarketCap: MAX_MARKET_CAP,\n      }\n    };\n  }\n\n  async start(): Promise<void> {\n    if (this.isRunning) {\n      console.log('[SNIPER] Bot already running');\n      return;\n    }\n\n    this.isRunning = true;\n    console.log('[SNIPER] RugKiller Sniper Bot STARTING...');\n    \n    await this.notify(\n      'ðŸ¤– RugKiller Sniper Bot ONLINE\\n' +\n      `ðŸ’¼ Wallet: ${this.wallet?.publicKey.toBase58() || 'Not configured'}\\n` +\n      `ðŸŽ¯ Vanity: ${PREFIX}...${SUFFIX}\\n` +\n      `ðŸ’° Buy Amount: ${BUY_AMOUNT} SOL\\n` +\n      `ðŸ“Š MC Range: $${MIN_MARKET_CAP.toLocaleString()} - $${MAX_MARKET_CAP.toLocaleString()}\\n` +\n      `ðŸ”„ Auto-Snipe: ${AUTO_SNIPE_ENABLED ? 'ENABLED' : 'DISABLED'}`\n    );\n\n    // Start WebSocket listener for auto-sniping\n    if (AUTO_SNIPE_ENABLED) {\n      this.startWebSocketListener();\n    }\n\n    console.log('[SNIPER] Bot started successfully');\n  }\n\n  async stop(): Promise<void> {\n    this.isRunning = false;\n    \n    if (this.ws) {\n      this.ws.close();\n      this.ws = null;\n    }\n\n    await this.notify('ðŸ›‘ RugKiller Sniper Bot STOPPED');\n    console.log('[SNIPER] Bot stopped');\n  }\n\n  // Manual vanity grind and launch (can be triggered via API)\n  async grindAndLaunch(): Promise<void> {\n    const vanityKeypair = this.grindVanity();\n    \n    if (vanityKeypair) {\n      await this.launchAndSnipe(vanityKeypair);\n    } else {\n      this.notify('âŒ Failed to generate vanity address');\n    }\n  }\n}\n\n// Singleton instance\nlet sniperBotInstance: SniperBot | null = null;\n\nexport function getSniperBot(): SniperBot {\n  if (!sniperBotInstance) {\n    sniperBotInstance = new SniperBot();\n  }\n  return sniperBotInstance;\n}\n\nexport { SniperBot };\n","size_bytes":11600},"server/alpha-alerts.ts":{"content":"import { Connection, PublicKey } from '@solana/web3.js';\nimport WebSocket from 'ws';\n\ninterface AlphaAlert {\n  type: 'new_token' | 'whale_buy' | 'caller_signal';\n  mint: string;\n  source: string;\n  timestamp: number;\n  data?: any;\n}\n\ninterface AlphaCallerConfig {\n  wallet: string;\n  name: string;\n  enabled: boolean;\n}\n\n// Alpha callers can be configured via environment variables or admin interface\n// No default wallets are monitored to avoid legal issues with naming specific individuals/programs\nconst DEFAULT_ALPHA_CALLERS: AlphaCallerConfig[] = [];\n\nexport class AlphaAlertService {\n  private connection: Connection;\n  private listeners: Map<string, number> = new Map();\n  private wsConnections: WebSocket[] = [];\n  private alertCallbacks: ((alert: AlphaAlert) => void)[] = [];\n  private isRunning = false;\n  private alphaCallers: AlphaCallerConfig[];\n\n  constructor(rpcUrl?: string, customCallers?: AlphaCallerConfig[]) {\n    this.connection = new Connection(rpcUrl || 'https://api.mainnet-beta.solana.com', 'confirmed');\n    this.alphaCallers = customCallers || DEFAULT_ALPHA_CALLERS;\n  }\n\n  // Register callback for alerts\n  onAlert(callback: (alert: AlphaAlert) => void): void {\n    this.alertCallbacks.push(callback);\n  }\n\n  private async sendAlert(alert: AlphaAlert): Promise<void> {\n    let message = '';\n    if (alert.type === 'caller_signal') {\n      message = `ðŸš¨ **ALPHA CALL from ${alert.source}**\\n\\n` +\n        `ðŸ“ CA: \\`${alert.mint}\\`\\n` +\n        `ðŸ‘¤ Caller: ${alert.source}\\n` +\n        `ðŸ”— https://pump.fun/${alert.mint}\\n` +\n        `ðŸ’Ž https://dexscreener.com/solana/${alert.mint}`;\n    } else if (alert.type === 'new_token') {\n      message = `ðŸ”¥ **NEW GEM DETECTED**\\n\\n` +\n        `ðŸ“ CA: \\`${alert.mint}\\`\\n` +\n        `ðŸ“Š Source: ${alert.source}\\n` +\n        `${alert.data?.name ? `ðŸ·ï¸ ${alert.data.name} (${alert.data.symbol})\\n` : ''}` +\n        `${alert.data?.marketCap ? `ðŸ’° MC: $${alert.data.marketCap.toLocaleString()}\\n` : ''}` +\n        `ðŸ”— https://pump.fun/${alert.mint}`;\n    } else {\n      message = `âš¡ **ALPHA ALERT**\\n\\n${alert.mint}\\nSource: ${alert.source}`;\n    }\n\n    // Send to Discord webhook\n    const DISCORD_WEBHOOK = process.env.ALPHA_DISCORD_WEBHOOK;\n    if (DISCORD_WEBHOOK) {\n      try {\n        await fetch(DISCORD_WEBHOOK, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            content: `@everyone ${message}`,\n            username: 'RugKiller Alpha Alerts',\n            avatar_url: 'https://i.imgur.com/rugkiller-icon.png',\n          }),\n        });\n      } catch (error) {\n        console.error('[ALPHA ALERT] Discord notification failed:', error);\n      }\n    }\n\n    // Send to Telegram\n    const TELEGRAM_TOKEN = process.env.ALPHA_TELEGRAM_BOT_TOKEN;\n    const TELEGRAM_CHAT = process.env.ALPHA_TELEGRAM_CHAT_ID;\n    if (TELEGRAM_TOKEN && TELEGRAM_CHAT) {\n      try {\n        const url = `https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`;\n        await fetch(url, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            chat_id: TELEGRAM_CHAT,\n            text: message,\n            parse_mode: 'Markdown',\n          }),\n        });\n      } catch (error) {\n        console.error('[ALPHA ALERT] Telegram notification failed:', error);\n      }\n    }\n    \n    // Also trigger callbacks for extensibility\n    for (const callback of this.alertCallbacks) {\n      try {\n        await callback(alert);\n      } catch (error) {\n        console.error('[ALPHA ALERT] Callback error:', error);\n      }\n    }\n  }\n\n  // Check if token passes basic quality filters\n  private async isQualityToken(mint: string): Promise<boolean> {\n    try {\n      const [rugCheck, dexScreener] = await Promise.all([\n        fetch(`https://api.rugcheck.xyz/v1/tokens/${mint}/report`).then(r => r.json()).catch(() => null),\n        fetch(`https://api.dexscreener.com/latest/dex/tokens/${mint}`).then(r => r.json()).catch(() => null),\n      ]);\n\n      // Basic filters\n      const hasGoodRugScore = rugCheck?.score > 85;\n      const notHoneypot = !rugCheck?.isHoneypot;\n      const hasLiquidity = (dexScreener?.pairs?.[0]?.liquidity?.usd || 0) > 5000;\n\n      return hasGoodRugScore && notHoneypot && hasLiquidity;\n    } catch (error) {\n      console.error('[ALPHA ALERT] Quality check error:', error);\n      return false;\n    }\n  }\n\n  // Monitor alpha caller wallets for transactions\n  private monitorAlphaCaller(caller: AlphaCallerConfig): void {\n    if (!caller.enabled) return;\n\n    try {\n      const publicKey = new PublicKey(caller.wallet);\n      \n      const listenerId = this.connection.onLogs(\n        publicKey,\n        async (logs) => {\n          try {\n            // Look for token interactions in logs\n            const buyPattern = /buy|swap|purchase/i;\n            const mintPattern = /[1-9A-HJ-NP-Za-km-z]{32,44}/; // Solana address pattern\n            \n            for (const log of logs.logs) {\n              if (buyPattern.test(log)) {\n                const matches = log.match(mintPattern);\n                if (matches && matches[0]) {\n                  const mint = matches[0];\n                  \n                  // Basic validation and quality check\n                  if (await this.isQualityToken(mint)) {\n                    await this.sendAlert({\n                      type: 'caller_signal',\n                      mint,\n                      source: caller.name,\n                      timestamp: Date.now(),\n                      data: {\n                        wallet: caller.wallet,\n                        transactionType: 'buy',\n                      }\n                    });\n                  }\n                }\n              }\n            }\n          } catch (error) {\n            console.error(`[ALPHA ALERT] Error processing ${caller.name} logs:`, error);\n          }\n        },\n        'confirmed'\n      );\n\n      this.listeners.set(caller.wallet, listenerId);\n    } catch (error) {\n      console.error(`[ALPHA ALERT] Failed to monitor ${caller.name}:`, error);\n    }\n  }\n\n  // Monitor pump.fun WebSocket for new token launches\n  private startPumpFunMonitor(): void {\n    try {\n      const ws = new WebSocket('wss://pumpportal.fun/api/data');\n\n      ws.on('open', () => {\n        ws.send(JSON.stringify({ method: \"subscribeNewToken\" }));\n      });\n\n      ws.on('message', async (data: WebSocket.Data) => {\n        try {\n          const msg = JSON.parse(data.toString());\n          \n          if (msg.mint && msg.mint.length === 44) {\n            // Check quality before alerting\n            if (await this.isQualityToken(msg.mint)) {\n              await this.sendAlert({\n                type: 'new_token',\n                mint: msg.mint,\n                source: 'pump.fun',\n                timestamp: Date.now(),\n                data: {\n                  name: msg.name,\n                  symbol: msg.symbol,\n                  marketCap: msg.marketCap,\n                }\n              });\n            }\n          }\n        } catch (error) {\n          console.error('[ALPHA ALERT] pump.fun message error:', error);\n        }\n      });\n\n      ws.on('error', (error) => {\n        console.error('[ALPHA ALERT] pump.fun WebSocket error:', error);\n      });\n\n      ws.on('close', () => {\n        if (this.isRunning) {\n          setTimeout(() => this.startPumpFunMonitor(), 10000);\n        }\n      });\n\n      this.wsConnections.push(ws);\n    } catch (error) {\n      console.error('[ALPHA ALERT] Failed to start pump.fun monitor:', error);\n    }\n  }\n\n  // Start all monitoring\n  async start(): Promise<void> {\n    if (this.isRunning) {\n      return;\n    }\n\n    this.isRunning = true;\n\n    for (const caller of this.alphaCallers) {\n      this.monitorAlphaCaller(caller);\n    }\n\n    this.startPumpFunMonitor();\n    \n    // Send startup notification directly (not through sendAlert to avoid fake links)\n    const startupMessage = 'ðŸ¤– **ANTIRUGILLER ALPHA ALERTS ONLINE**\\n\\n' +\n      `âœ… Monitoring ${this.alphaCallers.filter(c => c.enabled).length} top alpha callers\\n` +\n      `âœ… Connected to pump.fun live feed\\n` +\n      `âœ… Quality filters active (RugCheck > 85, No honeypots, Liquidity > $5K)\\n\\n` +\n      `Contract: \\`2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\\``;\n    \n    const DISCORD_WEBHOOK = process.env.ALPHA_DISCORD_WEBHOOK;\n    if (DISCORD_WEBHOOK) {\n      try {\n        await fetch(DISCORD_WEBHOOK, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            content: startupMessage,\n            username: 'RugKiller Alpha Alerts',\n          }),\n        });\n      } catch (error) {\n        console.error('[ALPHA ALERT] Discord startup notification failed:', error);\n      }\n    }\n\n    const TELEGRAM_TOKEN = process.env.ALPHA_TELEGRAM_BOT_TOKEN;\n    const TELEGRAM_CHAT = process.env.ALPHA_TELEGRAM_CHAT_ID;\n    if (TELEGRAM_TOKEN && TELEGRAM_CHAT) {\n      try {\n        const url = `https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`;\n        await fetch(url, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            chat_id: TELEGRAM_CHAT,\n            text: startupMessage,\n            parse_mode: 'Markdown',\n          }),\n        });\n      } catch (error) {\n        console.error('[ALPHA ALERT] Telegram startup notification failed:', error);\n      }\n    }\n  }\n\n  // Stop all monitoring\n  async stop(): Promise<void> {\n    this.isRunning = false;\n\n    // Remove wallet listeners\n    for (const [wallet, listenerId] of Array.from(this.listeners.entries())) {\n      try {\n        await this.connection.removeOnLogsListener(listenerId);\n      } catch (error) {\n        console.error(`[ALPHA ALERT] Error removing listener for ${wallet}:`, error);\n      }\n    }\n    this.listeners.clear();\n\n    // Close WebSocket connections\n    for (const ws of this.wsConnections) {\n      try {\n        ws.close();\n      } catch (error) {\n        console.error('[ALPHA ALERT] Error closing WebSocket:', error);\n      }\n    }\n    this.wsConnections = [];\n  }\n\n  // Get current monitoring status\n  getStatus() {\n    return {\n      isRunning: this.isRunning,\n      monitoredCallers: this.alphaCallers.filter(c => c.enabled).length,\n      totalCallers: this.alphaCallers.length,\n      activeListeners: this.listeners.size,\n      activeWebSockets: this.wsConnections.length,\n      callers: this.alphaCallers,\n    };\n  }\n\n  // Add custom alpha caller\n  addCaller(wallet: string, name: string): void {\n    if (!this.alphaCallers.find(c => c.wallet === wallet)) {\n      const caller = { wallet, name, enabled: true };\n      this.alphaCallers.push(caller);\n      \n      if (this.isRunning) {\n        this.monitorAlphaCaller(caller);\n      }\n    }\n  }\n\n  // Remove custom alpha caller\n  removeCaller(wallet: string): void {\n    const index = this.alphaCallers.findIndex(c => c.wallet === wallet);\n    if (index !== -1) {\n      const caller = this.alphaCallers[index];\n      this.alphaCallers.splice(index, 1);\n      \n      const listenerId = this.listeners.get(wallet);\n      if (listenerId !== undefined) {\n        this.connection.removeOnLogsListener(listenerId);\n        this.listeners.delete(wallet);\n      }\n    }\n  }\n}\n\n// Singleton instance\nlet alphaAlertInstance: AlphaAlertService | null = null;\n\nexport function getAlphaAlertService(): AlphaAlertService {\n  if (!alphaAlertInstance) {\n    alphaAlertInstance = new AlphaAlertService();\n  }\n  return alphaAlertInstance;\n}\n","size_bytes":11579},"client/public/DEPLOYMENT_INSTRUCTIONS.md":{"content":"# ðŸš€ Secure $ANTIRUG Token Deployment Guide\n\n## Why Local Deployment?\n\n**Security First**: Your private keys should NEVER be transmitted to any server. This local script runs 100% on your computer, ensuring your wallet stays secure.\n\n---\n\n## Prerequisites\n\nBefore you begin, make sure you have:\n\n1. **Node.js 18+** installed ([Download here](https://nodejs.org/))\n2. **A Solana wallet with 0.1 SOL** (Phantom, Solflare, etc.)\n3. **~15 minutes** for vanity address generation\n\n**SECURITY NOTE:** This script generates a fresh burner wallet automatically. You'll transfer 0.1 SOL to it from your main wallet. Your main wallet's private key is NEVER exposed.\n\n---\n\n## Installation Steps\n\n### 1. Download the Script\n\nDownload `DEPLOY_ANTIRUG_LOCALLY.js` from this repository.\n\n### 2. Install Dependencies\n\nOpen your terminal in the folder containing the script and run:\n\n```bash\nnpm install @solana/web3.js @solana/spl-token bs58\n```\n\n### 3. Have Your Wallet Ready\n\nMake sure you have:\n- Phantom, Solflare, or any Solana wallet\n- At least 0.1 SOL in your wallet\n- Ability to send SOL from your wallet\n\n**SECURITY:** The script will generate a burner wallet for you. You'll simply send 0.1 SOL to it from your main wallet. Your main wallet's private key stays safe in Phantom!\n\n---\n\n## Running the Deployment\n\n### 1. Execute the Script\n\n```bash\nnode DEPLOY_ANTIRUG_LOCALLY.js\n```\n\n### 2. Follow the Prompts\n\nThe script will:\n\n**Step 1:** Generate a burner wallet automatically\n```\nðŸ” SECURITY: Generating fresh burner wallet for deployment...\nâœ… Burner wallet generated: ABC123...xyz\n\nâš ï¸  ACTION REQUIRED:\n   Transfer 0.1 SOL to this address from your main wallet:\n   ABC123...xyz\n```\n\n**Step 2:** Wait for you to transfer SOL\n- Open Phantom/Solflare\n- Send 0.1 SOL to the burner address shown\n- Press ENTER in the script when done\n\n**Step 3:** Confirm deployment\n```\nâš ï¸  Ready to deploy? This will cost ~0.05 SOL. Type \"yes\" to continue: yes\n```\n\n### 3. Wait for Vanity Generation\n\nThe script will generate a vanity address ending in \"tek\":\n\n```\nðŸ” Generating vanity address ending in \"tek\"...\nâ³ This may take 5-15 minutes. Please wait...\n\nðŸ”„ Attempts: 1,234,567 | Rate: 123,456/s | Time: 10s\n```\n\n**This is normal!** Vanity generation is computationally intensive.\n\n### 4. Token Deployment\n\nOnce the vanity address is found, the script will:\n- âœ… Create the token mint account\n- âœ… Initialize the mint\n- âœ… Mint 1 billion $ANTIRUG tokens to your wallet\n\n---\n\n## After Deployment\n\n### ðŸŽ‰ Success Output\n\nYou'll see something like this:\n\n```\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘           ðŸŽ‰ DEPLOYMENT SUCCESSFUL! ðŸŽ‰                â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nðŸ“ Token Address (Vanity):\n   ABC123...456tek\n\nðŸ”‘ Token Mint Keypair (SAVE THIS!):\n\nâš ï¸  WARNING: This is the ONLY time you'll see this private key!\n   Import it into Phantom to control the token and access fees.\n\n   Public Key:  ABC123...456tek\n   Private Key: 5K7m2...xyz123\n```\n\n### Import Mint Keypair to Phantom\n\n**CRITICAL STEP - Don't skip this!**\n\n1. **Copy the Private Key** shown in the output (you'll never see it again)\n2. Open **Phantom wallet**\n3. Settings â†’ **\"Import Private Key\"**\n4. Paste the private key\n5. Give it a name like \"ANTIRUG Mint Authority\"\n\n**This gives you:**\n- âœ… Control over the token mint\n- âœ… Ability to mint more tokens (if needed)\n- âœ… Access to any fees associated with the token\n\n---\n\n## What You Get\n\n### Token Details\n\n- **Name:** RugKiller\n- **Symbol:** $ANTIRUG\n- **Supply:** 1,000,000,000 (1 billion)\n- **Decimals:** 9\n- **Vanity Address:** Ends in \"tek\" (e.g., `9x7yZ...456tek`)\n\n### Token Authorities\n\n- **Mint Authority:** Your wallet (can mint more tokens)\n- **Freeze Authority:** Your wallet (can freeze transfers)\n\n### Your Holdings\n\nAll 1 billion tokens are minted to **your wallet** (the one you used to deploy).\n\n---\n\n## Viewing Your Token\n\n### On Solscan\n```\nhttps://solscan.io/token/[YOUR_TOKEN_ADDRESS]\n```\n\n### On DexScreener\n```\nhttps://dexscreener.com/solana/[YOUR_TOKEN_ADDRESS]\n```\n\n---\n\n## Next Steps\n\n### 1. Update RugKiller App\n\nSend your deployed token address to update:\n- `client/src/constants.ts` â†’ `CONTRACT_ADDRESS`\n- Token-gated access (10M+ $ANTIRUG) will work automatically\n\n### 2. Add Liquidity (Optional)\n\nTo make $ANTIRUG tradeable:\n\n**Option A: Raydium**\n1. Visit [Raydium.io](https://raydium.io/)\n2. Connect Phantom wallet\n3. Create a liquidity pool (SOL/$ANTIRUG)\n4. Add initial liquidity (e.g., 10 SOL + equivalent $ANTIRUG)\n\n**Option B: Jupiter**\n1. Visit [Jupiter.ag](https://jup.ag/)\n2. Similar process to Raydium\n\n**Recommended Initial Liquidity:**\n- 10-50 SOL worth\n- Provides enough liquidity for trading\n- Can add more later\n\n### 3. Marketing & Distribution\n\n- Update social media with token address\n- Share on Solana communities\n- Distribute tokens to early users\n- Set up staking/rewards (optional)\n\n---\n\n## Troubleshooting\n\n### \"Insufficient balance\" Error\n\n**Problem:** Wallet doesn't have enough SOL  \n**Solution:** Send at least 0.1 SOL to your wallet\n\n### \"Invalid private key format\" Error\n\n**Problem:** Private key is not in base58 format  \n**Solution:** Make sure you're copying the private key, not the seed phrase\n\n### Vanity Generation Takes Too Long\n\n**Problem:** Searching for rare pattern  \n**Solution:** Wait longer (can take up to 30 minutes for \"tek\" suffix)\n\n### Transaction Failed\n\n**Problem:** Network issues or insufficient fees  \n**Solution:** Try again - your SOL is not lost\n\n---\n\n## Security Best Practices\n\nâœ… **DO:**\n- Run the script on your personal computer\n- Transfer SOL from your main wallet (keeps your main key safe)\n- Import the mint keypair into Phantom immediately\n- Back up the mint keypair securely\n- **Clear your terminal history after deployment:** `history -c` (Linux/Mac) or close terminal (Windows)\n- **Delete the script after successful deployment**\n\nâŒ **DON'T:**\n- Share the mint keypair with anyone\n- Run the script on public computers\n- Store keypairs in plain text files\n- Lose the mint keypair (you can't recover it)\n\n**SECURITY BONUS:** The burner wallet approach means your main wallet's private key is never exposed to the script!\n\n---\n\n## Cost Breakdown\n\n| Item | Cost |\n|------|------|\n| Mint account rent | ~0.00144 SOL |\n| Token account creation | ~0.002 SOL |\n| Transaction fees | ~0.001 SOL |\n| **Total** | **~0.005 SOL** |\n\n**Recommended:** Have 0.1 SOL for safety buffer\n\n---\n\n## Support\n\nIf you encounter issues:\n\n1. Check you have Node.js 18+ installed: `node --version`\n2. Verify dependencies are installed: `npm list`\n3. Make sure your wallet has sufficient SOL\n4. Try using a custom RPC (set `SOLANA_RPC_URL` environment variable)\n\n---\n\n## Summary\n\nThis secure deployment script:\n- âœ… Runs 100% locally on your computer\n- âœ… Never transmits your private keys\n- âœ… Generates vanity address ending in \"tek\"\n- âœ… Deploys $ANTIRUG to Solana mainnet\n- âœ… Gives you full control via Phantom import\n\n**Ready to deploy? Run the script and follow the prompts!** ðŸš€\n","size_bytes":7309},"client/src/pages/admin.tsx":{"content":"import { Link } from 'wouter';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Wallet, Rocket, Shield } from 'lucide-react';\n\nexport default function Admin() {\n  return (\n    <div className=\"container mx-auto p-6 max-w-5xl\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-4xl font-bold flex items-center gap-3\" data-testid=\"heading-admin\">\n          <Shield className=\"h-10 w-10\" />\n          Admin Dashboard\n        </h1>\n        <p className=\"text-muted-foreground mt-2 text-lg\">\n          Manage creator wallet and deploy tokens\n        </p>\n      </div>\n\n      <div className=\"grid gap-6 md:grid-cols-2\">\n        <Card className=\"hover-elevate\" data-testid=\"card-creator-wallet\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Wallet className=\"h-5 w-5\" />\n              Creator Wallet\n            </CardTitle>\n            <CardDescription>\n              Manage your pump.fun creator wallet to earn 0.05% of trading volume\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-sm text-muted-foreground mb-4\">\n              Generate or view your creator wallet for earning pump.fun rewards. Import the wallet into Phantom to claim accumulated SOL.\n            </p>\n            <Button asChild className=\"w-full\" data-testid=\"button-creator-wallet\">\n              <Link href=\"/admin/wallet\">\n                Manage Creator Wallet â†’\n              </Link>\n            </Button>\n          </CardContent>\n        </Card>\n\n        <Card className=\"hover-elevate\" data-testid=\"card-deploy-token\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Rocket className=\"h-5 w-5\" />\n              Deploy Token (Secure Local Script)\n            </CardTitle>\n            <CardDescription>\n              Download secure script to deploy $ANTIRUG with vanity address ending in \"tek\"\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            <p className=\"text-sm text-muted-foreground\">\n              100% secure deployment script that runs locally on your computer. Your private keys never leave your device.\n            </p>\n            <div className=\"flex gap-2\">\n              <Button asChild className=\"flex-1\" data-testid=\"button-download-script\">\n                <a href=\"/DEPLOY_ANTIRUG_LOCALLY.js\" download>\n                  Download Script\n                </a>\n              </Button>\n              <Button asChild variant=\"outline\" className=\"flex-1\" data-testid=\"button-view-instructions\">\n                <a href=\"/DEPLOYMENT_INSTRUCTIONS.md\" download>\n                  View Instructions\n                </a>\n              </Button>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Requires Node.js 18+ and 0.05-0.1 SOL. Takes 5-15 minutes.\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card className=\"mt-6\" data-testid=\"card-instructions\">\n        <CardHeader>\n          <CardTitle>Quick Start Guide</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4 text-sm\">\n          <div>\n            <h3 className=\"font-semibold mb-1\">1. Set Up Creator Wallet (Optional)</h3>\n            <p className=\"text-muted-foreground\">\n              If you want to earn pump.fun creator rewards (0.05% of trading volume), generate a creator wallet first. Otherwise, skip to step 2.\n            </p>\n          </div>\n          <div>\n            <h3 className=\"font-semibold mb-1\">2. Download & Run Deployment Script</h3>\n            <p className=\"text-muted-foreground\">\n              Download the secure deployment script and run it locally on your computer. Your wallet's private key never leaves your device - 100% secure.\n            </p>\n          </div>\n          <div>\n            <h3 className=\"font-semibold mb-1\">3. Deploy $ANTIRUG Token</h3>\n            <p className=\"text-muted-foreground\">\n              The script generates a vanity address ending in \"tek\" (~5-15 minutes) and deploys the token to Solana mainnet. Costs ~0.05 SOL.\n            </p>\n          </div>\n          <div>\n            <h3 className=\"font-semibold mb-1\">4. Import to Phantom</h3>\n            <p className=\"text-muted-foreground\">\n              After deployment, import the token mint keypair into Phantom wallet. This gives you full control over the token and any associated fees.\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":4670},"client/src/pages/admin-deploy-token.tsx":{"content":"import { useState } from 'react';\nimport { useMutation } from '@tanstack/react-query';\nimport { apiRequest } from '@/lib/queryClient';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { AlertCircle, CheckCircle2, Copy, Rocket, ExternalLink } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface DeploymentResult {\n  success: boolean;\n  mintAddress?: string;\n  signature?: string;\n  error?: string;\n  steps: string[];\n  vanityKeypair?: {\n    publicKey: string;\n    privateKey: string;\n  };\n}\n\nexport default function AdminDeployToken() {\n  const { toast } = useToast();\n  const [walletPrivateKey, setWalletPrivateKey] = useState('');\n  const [deploymentResult, setDeploymentResult] = useState<DeploymentResult | null>(null);\n  const [showPrivateKey, setShowPrivateKey] = useState(false);\n\n  const deployMutation = useMutation({\n    mutationFn: async () => {\n      if (!walletPrivateKey) {\n        throw new Error('Please provide your wallet private key');\n      }\n\n      const res = await apiRequest('POST', '/api/admin/token/deploy', {\n        name: 'RugKiller',\n        symbol: 'ANTIRUG',\n        decimals: 9,\n        supply: 1000000000, // 1 billion tokens\n        description: 'The ultimate Solana rug pull detector. AI-powered analysis, multi-source verification, and real-time alerts.',\n        walletPrivateKey,\n        generateVanity: true,\n        vanitySuffix: 'tek',\n      });\n      return res.json();\n    },\n    onSuccess: (data) => {\n      setDeploymentResult(data);\n      if (data.success) {\n        setShowPrivateKey(true);\n        toast({\n          title: \"Token Deployed! ðŸš€\",\n          description: `$ANTIRUG deployed at ${data.mintAddress?.slice(0, 8)}...`,\n        });\n      } else {\n        toast({\n          title: \"Deployment Failed\",\n          description: data.error,\n          variant: \"destructive\",\n        });\n      }\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Deployment Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const copyToClipboard = (text: string, label: string) => {\n    navigator.clipboard.writeText(text);\n    toast({\n      title: \"Copied!\",\n      description: `${label} copied to clipboard`,\n    });\n  };\n\n  return (\n    <div className=\"container mx-auto p-6 max-w-4xl\">\n      <div className=\"mb-6\">\n        <h1 className=\"text-3xl font-bold flex items-center gap-2\" data-testid=\"heading-deploy-token\">\n          <Rocket className=\"h-8 w-8\" />\n          Deploy RugKiller Token\n        </h1>\n        <p className=\"text-muted-foreground mt-2\">\n          Deploy $ANTIRUG with a vanity address ending in \"tek\"\n        </p>\n      </div>\n\n      {!deploymentResult ? (\n        <Card data-testid=\"card-deployment-form\">\n          <CardHeader>\n            <CardTitle>Deploy $ANTIRUG Token</CardTitle>\n            <CardDescription>\n              This will generate a vanity address ending in \"tek\" and deploy the RugKiller token\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            <Alert>\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertDescription>\n                <div className=\"space-y-2\">\n                  <p className=\"font-medium\">Token Details:</p>\n                  <ul className=\"list-disc list-inside space-y-1 text-sm\">\n                    <li>Name: RugKiller</li>\n                    <li>Symbol: $ANTIRUG</li>\n                    <li>Supply: 1,000,000,000 (1 billion)</li>\n                    <li>Decimals: 9</li>\n                    <li>Vanity Address: Ending in \"tek\"</li>\n                  </ul>\n                </div>\n              </AlertDescription>\n            </Alert>\n\n            <div className=\"space-y-3\">\n              <div>\n                <Label htmlFor=\"walletKey\">Your Wallet Private Key</Label>\n                <Input\n                  id=\"walletKey\"\n                  type=\"password\"\n                  placeholder=\"Enter base58 encoded private key\"\n                  value={walletPrivateKey}\n                  onChange={(e) => setWalletPrivateKey(e.target.value)}\n                  data-testid=\"input-wallet-key\"\n                  className=\"font-mono\"\n                />\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  Needs ~0.05 SOL for deployment. Your key is never stored.\n                </p>\n              </div>\n\n              <Alert className=\"bg-yellow-500/10 border-yellow-500\">\n                <AlertCircle className=\"h-4 w-4 text-yellow-500\" />\n                <AlertDescription className=\"text-sm\">\n                  <p className=\"font-medium mb-1\">Important:</p>\n                  <ul className=\"list-disc list-inside space-y-1\">\n                    <li>Vanity generation may take 1-10 minutes</li>\n                    <li>You'll receive the token mint keypair to import into Phantom</li>\n                    <li>Save the private key immediately - it's shown only once</li>\n                  </ul>\n                </AlertDescription>\n              </Alert>\n\n              <Button\n                onClick={() => deployMutation.mutate()}\n                disabled={deployMutation.isPending || !walletPrivateKey}\n                className=\"w-full\"\n                size=\"lg\"\n                data-testid=\"button-deploy\"\n              >\n                {deployMutation.isPending ? 'Deploying... (This may take a few minutes)' : 'Deploy $ANTIRUG Token ðŸš€'}\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"space-y-6\">\n          {deploymentResult.success ? (\n            <>\n              <Alert className=\"border-green-500 bg-green-500/10\" data-testid=\"alert-success\">\n                <CheckCircle2 className=\"h-4 w-4 text-green-500\" />\n                <AlertDescription>\n                  <p className=\"font-bold text-green-500 text-lg mb-2\">\n                    ðŸŽ‰ $ANTIRUG Token Deployed Successfully!\n                  </p>\n                </AlertDescription>\n              </Alert>\n\n              <Card data-testid=\"card-token-info\">\n                <CardHeader>\n                  <CardTitle>Token Information</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <Label>Token Address (Vanity)</Label>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <code className=\"flex-1 p-2 bg-muted rounded text-sm font-mono\" data-testid=\"text-mint-address\">\n                        {deploymentResult.mintAddress}\n                      </code>\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => copyToClipboard(deploymentResult.mintAddress!, 'Token address')}\n                        data-testid=\"button-copy-address\"\n                        aria-label=\"Copy token address\"\n                      >\n                        <Copy className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n\n                  <div>\n                    <Label>Transaction Signature</Label>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <code className=\"flex-1 p-2 bg-muted rounded text-xs font-mono truncate\" data-testid=\"text-signature\">\n                        {deploymentResult.signature}\n                      </code>\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => copyToClipboard(deploymentResult.signature!, 'Signature')}\n                        aria-label=\"Copy signature\"\n                      >\n                        <Copy className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-2 pt-2\">\n                    <Button\n                      variant=\"default\"\n                      className=\"flex-1\"\n                      asChild\n                      data-testid=\"button-view-solscan\"\n                    >\n                      <a href={`https://solscan.io/token/${deploymentResult.mintAddress}`} target=\"_blank\" rel=\"noopener noreferrer\">\n                        <ExternalLink className=\"h-4 w-4 mr-2\" />\n                        View on Solscan\n                      </a>\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      className=\"flex-1\"\n                      asChild\n                      data-testid=\"button-view-dexscreener\"\n                    >\n                      <a href={`https://dexscreener.com/solana/${deploymentResult.mintAddress}`} target=\"_blank\" rel=\"noopener noreferrer\">\n                        <ExternalLink className=\"h-4 w-4 mr-2\" />\n                        View on DexScreener\n                      </a>\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {deploymentResult.vanityKeypair && showPrivateKey && (\n                <Alert className=\"border-destructive\" data-testid=\"alert-keypair\">\n                  <AlertCircle className=\"h-4 w-4 text-destructive\" />\n                  <AlertDescription>\n                    <div className=\"space-y-4\">\n                      <p className=\"font-bold text-destructive text-lg\">\n                        âš ï¸ SAVE THIS KEYPAIR IMMEDIATELY!\n                      </p>\n                      <p className=\"text-sm\">\n                        This is the ONLY time you'll see the private key. Import it into Phantom to access any fees or ownership.\n                      </p>\n                      \n                      <div className=\"space-y-3\">\n                        <div>\n                          <Label className=\"text-sm font-medium\">Public Key:</Label>\n                          <div className=\"flex items-center gap-2 mt-1\">\n                            <code className=\"flex-1 p-2 bg-muted rounded text-xs font-mono\" data-testid=\"text-vanity-public\">\n                              {deploymentResult.vanityKeypair.publicKey}\n                            </code>\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() => copyToClipboard(deploymentResult.vanityKeypair!.publicKey, 'Public key')}\n                              aria-label=\"Copy public key\"\n                            >\n                              <Copy className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </div>\n\n                        <div>\n                          <Label className=\"text-sm font-medium text-destructive\">Private Key (Secret):</Label>\n                          <div className=\"flex items-center gap-2 mt-1\">\n                            <code className=\"flex-1 p-2 bg-destructive/10 border border-destructive rounded text-xs font-mono\" data-testid=\"text-vanity-private\">\n                              {deploymentResult.vanityKeypair.privateKey}\n                            </code>\n                            <Button\n                              size=\"sm\"\n                              variant=\"destructive\"\n                              onClick={() => copyToClipboard(deploymentResult.vanityKeypair!.privateKey, 'Private key')}\n                              aria-label=\"Copy private key\"\n                            >\n                              <Copy className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"border-t pt-3\">\n                        <p className=\"font-medium mb-2 text-sm\">Next Steps:</p>\n                        <ol className=\"list-decimal list-inside space-y-1 text-sm\">\n                          <li>Copy the private key above</li>\n                          <li>Open Phantom wallet â†’ Settings â†’ \"Import Private Key\"</li>\n                          <li>Paste the private key</li>\n                          <li>You now control the token mint and can access any fees</li>\n                        </ol>\n                      </div>\n\n                      <Button\n                        variant=\"outline\"\n                        onClick={() => setShowPrivateKey(false)}\n                        className=\"w-full\"\n                        data-testid=\"button-hide-keypair\"\n                      >\n                        I've Saved It - Hide Keypair\n                      </Button>\n                    </div>\n                  </AlertDescription>\n                </Alert>\n              )}\n\n              <Card data-testid=\"card-deployment-steps\">\n                <CardHeader>\n                  <CardTitle>Deployment Steps</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-1 font-mono text-sm\">\n                    {deploymentResult.steps.map((step, i) => (\n                      <div key={i} className=\"text-muted-foreground\">\n                        {step}\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setDeploymentResult(null);\n                  setWalletPrivateKey('');\n                  setShowPrivateKey(false);\n                }}\n                className=\"w-full\"\n                data-testid=\"button-deploy-another\"\n              >\n                Deploy Another Token\n              </Button>\n            </>\n          ) : (\n            <Alert variant=\"destructive\" data-testid=\"alert-error\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertDescription>\n                <p className=\"font-bold mb-2\">Deployment Failed</p>\n                <p className=\"text-sm mb-3\">{deploymentResult.error}</p>\n                {deploymentResult.steps.length > 0 && (\n                  <div className=\"space-y-1 font-mono text-xs\">\n                    {deploymentResult.steps.map((step, i) => (\n                      <div key={i}>{step}</div>\n                    ))}\n                  </div>\n                )}\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setDeploymentResult(null)}\n                  className=\"w-full mt-4\"\n                >\n                  Try Again\n                </Button>\n              </AlertDescription>\n            </Alert>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":14984},"server/creator-wallet.ts":{"content":"import { Keypair, Connection, PublicKey, LAMPORTS_PER_SOL } from '@solana/web3.js';\nimport bs58 from 'bs58';\n\nconst SOLANA_RPC_URL = process.env.SOLANA_RPC_URL || 'https://api.mainnet-beta.solana.com';\n\nexport class CreatorWalletService {\n  private static instance: CreatorWalletService;\n  private connection: Connection;\n  private keypair: Keypair | null = null;\n\n  private constructor() {\n    this.connection = new Connection(SOLANA_RPC_URL, 'confirmed');\n    this.loadKeypair();\n  }\n\n  static getInstance(): CreatorWalletService {\n    if (!CreatorWalletService.instance) {\n      CreatorWalletService.instance = new CreatorWalletService();\n    }\n    return CreatorWalletService.instance;\n  }\n\n  private loadKeypair(): void {\n    const privateKey = process.env.CREATOR_WALLET_PRIVATE_KEY;\n    \n    if (privateKey && privateKey !== 'PLACEHOLDER') {\n      try {\n        this.keypair = Keypair.fromSecretKey(bs58.decode(privateKey));\n      } catch (error) {\n        console.error('[CREATOR WALLET] Failed to load keypair:', error);\n      }\n    }\n  }\n\n  isConfigured(): boolean {\n    return this.keypair !== null;\n  }\n\n  getPublicKey(): string | null {\n    return this.keypair?.publicKey.toBase58() || null;\n  }\n\n  getPrivateKey(): string | null {\n    if (!this.keypair) return null;\n    return bs58.encode(this.keypair.secretKey);\n  }\n\n  async getBalance(): Promise<number> {\n    if (!this.keypair) {\n      throw new Error('Creator wallet not configured');\n    }\n\n    const balance = await this.connection.getBalance(this.keypair.publicKey);\n    return balance / LAMPORTS_PER_SOL;\n  }\n\n  async getBalanceInLamports(): Promise<number> {\n    if (!this.keypair) {\n      throw new Error('Creator wallet not configured');\n    }\n\n    return await this.connection.getBalance(this.keypair.publicKey);\n  }\n\n  getKeypair(): Keypair {\n    if (!this.keypair) {\n      throw new Error('Creator wallet not configured');\n    }\n    return this.keypair;\n  }\n\n  async getWalletInfo(): Promise<{\n    publicKey: string;\n    balance: number;\n    balanceLamports: number;\n    isConfigured: boolean;\n  }> {\n    if (!this.keypair) {\n      return {\n        publicKey: '',\n        balance: 0,\n        balanceLamports: 0,\n        isConfigured: false,\n      };\n    }\n\n    const balanceLamports = await this.getBalanceInLamports();\n    \n    return {\n      publicKey: this.keypair.publicKey.toBase58(),\n      balance: balanceLamports / LAMPORTS_PER_SOL,\n      balanceLamports,\n      isConfigured: true,\n    };\n  }\n\n  static generateNewWallet(): { publicKey: string; privateKey: string } {\n    const keypair = Keypair.generate();\n    return {\n      publicKey: keypair.publicKey.toBase58(),\n      privateKey: bs58.encode(keypair.secretKey),\n    };\n  }\n}\n\nexport const getCreatorWallet = () => CreatorWalletService.getInstance();\n","size_bytes":2794},"server/token-deployer.ts":{"content":"import { \n  Connection, \n  Keypair, \n  PublicKey,\n  SystemProgram, \n  Transaction,\n  sendAndConfirmTransaction,\n  LAMPORTS_PER_SOL\n} from '@solana/web3.js';\nimport {\n  TOKEN_PROGRAM_ID,\n  MINT_SIZE,\n  createInitializeMintInstruction,\n  getMinimumBalanceForRentExemptMint,\n  createAssociatedTokenAccountInstruction,\n  getAssociatedTokenAddress,\n  createMintToInstruction,\n} from '@solana/spl-token';\nimport bs58 from 'bs58';\nconst SOLANA_RPC_URL = process.env.SOLANA_RPC_URL || 'https://api.mainnet-beta.solana.com';\n\nexport interface TokenDeploymentConfig {\n  name: string;\n  symbol: string;\n  decimals: number;\n  supply: number;\n  description?: string;\n  walletPrivateKey: string; // Base58 encoded private key of the wallet funding deployment\n  mintKeypair?: string; // Base58 encoded secret key for vanity address\n  generateVanity?: boolean; // Generate vanity address\n  vanitySuffix?: string; // Suffix for vanity address\n}\n\nexport interface DeploymentResult {\n  success: boolean;\n  mintAddress?: string;\n  signature?: string;\n  error?: string;\n  steps: string[];\n  vanityKeypair?: {\n    publicKey: string;\n    privateKey: string;\n  };\n}\n\nexport class TokenDeployer {\n  private connection: Connection;\n\n  constructor() {\n    this.connection = new Connection(SOLANA_RPC_URL, 'confirmed');\n  }\n\n  async deployToken(config: TokenDeploymentConfig): Promise<DeploymentResult> {\n    const steps: string[] = [];\n    \n    try {\n      // Load payer wallet from provided private key\n      let payer: Keypair;\n      try {\n        payer = Keypair.fromSecretKey(bs58.decode(config.walletPrivateKey));\n        steps.push(`âœ… Wallet loaded: ${payer.publicKey.toBase58()}`);\n      } catch (error) {\n        return {\n          success: false,\n          error: 'Invalid wallet private key provided',\n          steps,\n        };\n      }\n\n      // Load or generate mint keypair\n      let mintKeypair: Keypair;\n      let vanityKeypair: { publicKey: string; privateKey: string } | undefined;\n      \n      if (config.mintKeypair) {\n        try {\n          mintKeypair = Keypair.fromSecretKey(bs58.decode(config.mintKeypair));\n          steps.push(`âœ… Using provided mint address: ${mintKeypair.publicKey.toBase58()}`);\n        } catch (error) {\n          return {\n            success: false,\n            error: 'Invalid mint keypair provided',\n            steps,\n          };\n        }\n      } else if (config.generateVanity && config.vanitySuffix) {\n        // Generate vanity address\n        steps.push(`ðŸ”„ Generating vanity address ending in \"${config.vanitySuffix}\"...`);\n        const { VanityAddressGenerator } = await import('./vanity-generator');\n        const generator = new VanityAddressGenerator();\n        \n        const result = await generator.generate({\n          pattern: config.vanitySuffix,\n          matchType: 'suffix',\n          caseSensitive: false,\n          maxAttempts: 50_000_000, // Higher limit for suffix\n        });\n\n        if (!result) {\n          return {\n            success: false,\n            error: `Failed to generate vanity address ending in \"${config.vanitySuffix}\" after 50M attempts`,\n            steps,\n          };\n        }\n\n        mintKeypair = Keypair.fromSecretKey(bs58.decode(result.secretKey));\n        vanityKeypair = {\n          publicKey: result.publicKey,\n          privateKey: result.secretKey,\n        };\n        steps.push(`âœ… Generated vanity address: ${result.publicKey}`);\n        steps.push(`âœ… Found in ${result.attempts.toLocaleString()} attempts (${(result.timeMs / 1000).toFixed(1)}s)`);\n      } else {\n        mintKeypair = Keypair.generate();\n        steps.push(`âœ… Generated new mint address: ${mintKeypair.publicKey.toBase58()}`);\n      }\n\n      // Check wallet balance\n      const balanceLamports = await this.connection.getBalance(payer.publicKey);\n      const balance = balanceLamports / LAMPORTS_PER_SOL;\n      if (balance < 0.05) {\n        return {\n          success: false,\n          error: `Insufficient balance. Need at least 0.05 SOL, have ${balance.toFixed(4)} SOL`,\n          steps,\n        };\n      }\n      steps.push(`âœ… Balance check passed: ${balance.toFixed(4)} SOL`);\n\n      // Get rent-exempt balance for mint account\n      const lamports = await getMinimumBalanceForRentExemptMint(this.connection);\n      steps.push(`âœ… Calculated rent: ${(lamports / LAMPORTS_PER_SOL).toFixed(6)} SOL`);\n\n      // Create mint account\n      const createAccountIx = SystemProgram.createAccount({\n        fromPubkey: payer.publicKey,\n        newAccountPubkey: mintKeypair.publicKey,\n        space: MINT_SIZE,\n        lamports,\n        programId: TOKEN_PROGRAM_ID,\n      });\n\n      // Initialize mint\n      const initializeMintIx = createInitializeMintInstruction(\n        mintKeypair.publicKey,\n        config.decimals,\n        payer.publicKey, // mint authority\n        payer.publicKey, // freeze authority (can be null if you want)\n        TOKEN_PROGRAM_ID\n      );\n\n      // Build and send transaction\n      const transaction = new Transaction().add(createAccountIx, initializeMintIx);\n      \n      steps.push('ðŸ”„ Sending transaction to Solana...');\n      const signature = await sendAndConfirmTransaction(\n        this.connection,\n        transaction,\n        [payer, mintKeypair],\n        { commitment: 'confirmed' }\n      );\n\n      steps.push(`âœ… Token mint created! Signature: ${signature}`);\n\n      // Create associated token account for creator\n      const associatedTokenAddress = await getAssociatedTokenAddress(\n        mintKeypair.publicKey,\n        payer.publicKey\n      );\n\n      const createATAIx = createAssociatedTokenAccountInstruction(\n        payer.publicKey,\n        associatedTokenAddress,\n        payer.publicKey,\n        mintKeypair.publicKey\n      );\n\n      // Mint initial supply\n      const mintAmount = config.supply * Math.pow(10, config.decimals);\n      const mintToIx = createMintToInstruction(\n        mintKeypair.publicKey,\n        associatedTokenAddress,\n        payer.publicKey,\n        mintAmount\n      );\n\n      const mintTx = new Transaction().add(createATAIx, mintToIx);\n      const mintSig = await sendAndConfirmTransaction(\n        this.connection,\n        mintTx,\n        [payer],\n        { commitment: 'confirmed' }\n      );\n\n      steps.push(`âœ… Minted ${config.supply.toLocaleString()} ${config.symbol} to creator wallet`);\n      steps.push(`âœ… Signature: ${mintSig}`);\n\n      return {\n        success: true,\n        mintAddress: mintKeypair.publicKey.toBase58(),\n        signature: mintSig,\n        steps,\n        vanityKeypair,\n      };\n\n    } catch (error) {\n      console.error('Token deployment error:', error);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        steps,\n      };\n    }\n  }\n\n  async getTokenInfo(mintAddress: string): Promise<{\n    exists: boolean;\n    supply?: string;\n    decimals?: number;\n    mintAuthority?: string;\n    freezeAuthority?: string;\n  }> {\n    try {\n      const mintPubkey = new PublicKey(mintAddress);\n      const mintInfo = await this.connection.getParsedAccountInfo(mintPubkey);\n\n      if (!mintInfo.value) {\n        return { exists: false };\n      }\n\n      const data = mintInfo.value.data;\n      if ('parsed' in data && data.parsed.type === 'mint') {\n        const info = data.parsed.info;\n        return {\n          exists: true,\n          supply: info.supply,\n          decimals: info.decimals,\n          mintAuthority: info.mintAuthority,\n          freezeAuthority: info.freezeAuthority,\n        };\n      }\n\n      return { exists: false };\n    } catch (error) {\n      console.error('Error fetching token info:', error);\n      return { exists: false };\n    }\n  }\n}\n\nexport const getTokenDeployer = () => new TokenDeployer();\n","size_bytes":7751},"DEPLOYMENT_INSTRUCTIONS.md":{"content":"# ðŸš€ Secure $ANTIRUG Token Deployment Guide\n\n## Why Local Deployment?\n\n**Security First**: Your private keys should NEVER be transmitted to any server. This local script runs 100% on your computer, ensuring your wallet stays secure.\n\n---\n\n## Prerequisites\n\nBefore you begin, make sure you have:\n\n1. **Node.js 18+** installed ([Download here](https://nodejs.org/))\n2. **A Solana wallet with 0.1 SOL** (Phantom, Solflare, etc.)\n3. **~15 minutes** for vanity address generation\n\n**SECURITY NOTE:** This script generates a fresh burner wallet automatically. You'll transfer 0.1 SOL to it from your main wallet. Your main wallet's private key is NEVER exposed.\n\n---\n\n## Installation Steps\n\n### 1. Download the Script\n\nDownload `DEPLOY_ANTIRUG_LOCALLY.js` from this repository.\n\n### 2. Install Dependencies\n\nOpen your terminal in the folder containing the script and run:\n\n```bash\nnpm install @solana/web3.js @solana/spl-token bs58\n```\n\n### 3. Have Your Wallet Ready\n\nMake sure you have:\n- Phantom, Solflare, or any Solana wallet\n- At least 0.1 SOL in your wallet\n- Ability to send SOL from your wallet\n\n**SECURITY:** The script will generate a burner wallet for you. You'll simply send 0.1 SOL to it from your main wallet. Your main wallet's private key stays safe in Phantom!\n\n---\n\n## Running the Deployment\n\n### 1. Execute the Script\n\n```bash\nnode DEPLOY_ANTIRUG_LOCALLY.js\n```\n\n### 2. Follow the Prompts\n\nThe script will:\n\n**Step 1:** Generate a burner wallet automatically\n```\nðŸ” SECURITY: Generating fresh burner wallet for deployment...\nâœ… Burner wallet generated: ABC123...xyz\n\nâš ï¸  ACTION REQUIRED:\n   Transfer 0.1 SOL to this address from your main wallet:\n   ABC123...xyz\n```\n\n**Step 2:** Wait for you to transfer SOL\n- Open Phantom/Solflare\n- Send 0.1 SOL to the burner address shown\n- Press ENTER in the script when done\n\n**Step 3:** Confirm deployment\n```\nâš ï¸  Ready to deploy? This will cost ~0.05 SOL. Type \"yes\" to continue: yes\n```\n\n### 3. Wait for Vanity Generation\n\nThe script will generate a vanity address ending in \"tek\":\n\n```\nðŸ” Generating vanity address ending in \"tek\"...\nâ³ This may take 5-15 minutes. Please wait...\n\nðŸ”„ Attempts: 1,234,567 | Rate: 123,456/s | Time: 10s\n```\n\n**This is normal!** Vanity generation is computationally intensive.\n\n### 4. Token Deployment\n\nOnce the vanity address is found, the script will:\n- âœ… Create the token mint account\n- âœ… Initialize the mint\n- âœ… Mint 1 billion $ANTIRUG tokens to your wallet\n\n---\n\n## After Deployment\n\n### ðŸŽ‰ Success Output\n\nYou'll see something like this:\n\n```\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘           ðŸŽ‰ DEPLOYMENT SUCCESSFUL! ðŸŽ‰                â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nðŸ“ Token Address (Vanity):\n   ABC123...456tek\n\nðŸ”‘ Token Mint Keypair (SAVE THIS!):\n\nâš ï¸  WARNING: This is the ONLY time you'll see this private key!\n   Import it into Phantom to control the token and access fees.\n\n   Public Key:  ABC123...456tek\n   Private Key: 5K7m2...xyz123\n```\n\n### Import Mint Keypair to Phantom\n\n**CRITICAL STEP - Don't skip this!**\n\n1. **Copy the Private Key** shown in the output (you'll never see it again)\n2. Open **Phantom wallet**\n3. Settings â†’ **\"Import Private Key\"**\n4. Paste the private key\n5. Give it a name like \"ANTIRUG Mint Authority\"\n\n**This gives you:**\n- âœ… Control over the token mint\n- âœ… Ability to mint more tokens (if needed)\n- âœ… Access to any fees associated with the token\n\n---\n\n## What You Get\n\n### Token Details\n\n- **Name:** RugKiller\n- **Symbol:** $ANTIRUG\n- **Supply:** 1,000,000,000 (1 billion)\n- **Decimals:** 9\n- **Vanity Address:** Ends in \"tek\" (e.g., `9x7yZ...456tek`)\n\n### Token Authorities\n\n- **Mint Authority:** Your wallet (can mint more tokens)\n- **Freeze Authority:** Your wallet (can freeze transfers)\n\n### Your Holdings\n\nAll 1 billion tokens are minted to **your wallet** (the one you used to deploy).\n\n---\n\n## Viewing Your Token\n\n### On Solscan\n```\nhttps://solscan.io/token/[YOUR_TOKEN_ADDRESS]\n```\n\n### On DexScreener\n```\nhttps://dexscreener.com/solana/[YOUR_TOKEN_ADDRESS]\n```\n\n---\n\n## Next Steps\n\n### 1. Update RugKiller App\n\nSend your deployed token address to update:\n- `client/src/constants.ts` â†’ `CONTRACT_ADDRESS`\n- Token-gated access (10M+ $ANTIRUG) will work automatically\n\n### 2. Add Liquidity (Optional)\n\nTo make $ANTIRUG tradeable:\n\n**Option A: Raydium**\n1. Visit [Raydium.io](https://raydium.io/)\n2. Connect Phantom wallet\n3. Create a liquidity pool (SOL/$ANTIRUG)\n4. Add initial liquidity (e.g., 10 SOL + equivalent $ANTIRUG)\n\n**Option B: Jupiter**\n1. Visit [Jupiter.ag](https://jup.ag/)\n2. Similar process to Raydium\n\n**Recommended Initial Liquidity:**\n- 10-50 SOL worth\n- Provides enough liquidity for trading\n- Can add more later\n\n### 3. Marketing & Distribution\n\n- Update social media with token address\n- Share on Solana communities\n- Distribute tokens to early users\n- Set up staking/rewards (optional)\n\n---\n\n## Troubleshooting\n\n### \"Insufficient balance\" Error\n\n**Problem:** Wallet doesn't have enough SOL  \n**Solution:** Send at least 0.1 SOL to your wallet\n\n### \"Invalid private key format\" Error\n\n**Problem:** Private key is not in base58 format  \n**Solution:** Make sure you're copying the private key, not the seed phrase\n\n### Vanity Generation Takes Too Long\n\n**Problem:** Searching for rare pattern  \n**Solution:** Wait longer (can take up to 30 minutes for \"tek\" suffix)\n\n### Transaction Failed\n\n**Problem:** Network issues or insufficient fees  \n**Solution:** Try again - your SOL is not lost\n\n---\n\n## Security Best Practices\n\nâœ… **DO:**\n- Run the script on your personal computer\n- Transfer SOL from your main wallet (keeps your main key safe)\n- Import the mint keypair into Phantom immediately\n- Back up the mint keypair securely\n- **Clear your terminal history after deployment:** `history -c` (Linux/Mac) or close terminal (Windows)\n- **Delete the script after successful deployment**\n\nâŒ **DON'T:**\n- Share the mint keypair with anyone\n- Run the script on public computers\n- Store keypairs in plain text files\n- Lose the mint keypair (you can't recover it)\n\n**SECURITY BONUS:** The burner wallet approach means your main wallet's private key is never exposed to the script!\n\n---\n\n## Cost Breakdown\n\n| Item | Cost |\n|------|------|\n| Mint account rent | ~0.00144 SOL |\n| Token account creation | ~0.002 SOL |\n| Transaction fees | ~0.001 SOL |\n| **Total** | **~0.005 SOL** |\n\n**Recommended:** Have 0.1 SOL for safety buffer\n\n---\n\n## Support\n\nIf you encounter issues:\n\n1. Check you have Node.js 18+ installed: `node --version`\n2. Verify dependencies are installed: `npm list`\n3. Make sure your wallet has sufficient SOL\n4. Try using a custom RPC (set `SOLANA_RPC_URL` environment variable)\n\n---\n\n## Summary\n\nThis secure deployment script:\n- âœ… Runs 100% locally on your computer\n- âœ… Never transmits your private keys\n- âœ… Generates vanity address ending in \"tek\"\n- âœ… Deploys $ANTIRUG to Solana mainnet\n- âœ… Gives you full control via Phantom import\n\n**Ready to deploy? Run the script and follow the prompts!** ðŸš€\n","size_bytes":7309},"client/src/pages/admin-wallet.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { queryClient, apiRequest } from '@/lib/queryClient';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { AlertCircle, CheckCircle2, Copy, ExternalLink, Wallet } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface CreatorWalletInfo {\n  publicKey: string;\n  balance: number;\n  isConfigured: boolean;\n  pumpFunUrl: string | null;\n}\n\ninterface GeneratedWallet {\n  publicKey: string;\n  privateKey: string;\n  warning: string;\n  nextSteps: string[];\n}\n\nexport default function AdminWallet() {\n  const { toast } = useToast();\n  const [generatedWallet, setGeneratedWallet] = useState<GeneratedWallet | null>(null);\n  const [showPrivateKey, setShowPrivateKey] = useState(false);\n\n  const { data: walletInfo, isLoading } = useQuery<CreatorWalletInfo>({\n    queryKey: ['/api/admin/creator-wallet'],\n  });\n\n  const generateMutation = useMutation({\n    mutationFn: async () => {\n      const res = await apiRequest('POST', '/api/admin/creator-wallet/generate', {});\n      return res.json();\n    },\n    onSuccess: (data) => {\n      setGeneratedWallet(data);\n      setShowPrivateKey(true);\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/creator-wallet'] });\n      toast({\n        title: \"Wallet Generated\",\n        description: \"Save the private key immediately! It won't be shown again.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Generation Failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const copyToClipboard = (text: string, label: string) => {\n    navigator.clipboard.writeText(text);\n    toast({\n      title: \"Copied!\",\n      description: `${label} copied to clipboard`,\n    });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"container mx-auto p-6 max-w-4xl\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-muted rounded w-1/3 mb-4\"></div>\n          <div className=\"h-64 bg-muted rounded\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto p-6 max-w-4xl\">\n      <div className=\"mb-6\">\n        <h1 className=\"text-3xl font-bold flex items-center gap-2\" data-testid=\"heading-admin-wallet\">\n          <Wallet className=\"h-8 w-8\" />\n          Creator Wallet\n        </h1>\n        <p className=\"text-muted-foreground mt-2\">\n          Manage the wallet used to create tokens on pump.fun and receive creator rewards (0.05% of trading volume).\n        </p>\n      </div>\n\n      {generatedWallet && showPrivateKey && (\n        <Alert className=\"mb-6 border-destructive\" data-testid=\"alert-generated-wallet\">\n          <AlertCircle className=\"h-4 w-4 text-destructive\" />\n          <AlertDescription>\n            <div className=\"space-y-4\">\n              <p className=\"font-bold text-destructive\">{generatedWallet.warning}</p>\n              \n              <div className=\"space-y-2\">\n                <div>\n                  <label className=\"text-sm font-medium\">Public Key:</label>\n                  <div className=\"flex items-center gap-2 mt-1\">\n                    <code className=\"flex-1 p-2 bg-muted rounded text-xs font-mono\" data-testid=\"text-public-key\">\n                      {generatedWallet.publicKey}\n                    </code>\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => copyToClipboard(generatedWallet.publicKey, 'Public key')}\n                      data-testid=\"button-copy-public\"\n                      aria-label=\"Copy public key\"\n                    >\n                      <Copy className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"text-sm font-medium text-destructive\">Private Key (Secret):</label>\n                  <div className=\"flex items-center gap-2 mt-1\">\n                    <code className=\"flex-1 p-2 bg-destructive/10 border border-destructive rounded text-xs font-mono\" data-testid=\"text-private-key\">\n                      {generatedWallet.privateKey}\n                    </code>\n                    <Button\n                      size=\"sm\"\n                      variant=\"destructive\"\n                      onClick={() => copyToClipboard(generatedWallet.privateKey, 'Private key')}\n                      data-testid=\"button-copy-private\"\n                      aria-label=\"Copy private key\"\n                    >\n                      <Copy className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"border-t pt-3\">\n                <p className=\"font-medium mb-2\">Next Steps:</p>\n                <ol className=\"list-decimal list-inside space-y-1 text-sm\">\n                  {generatedWallet.nextSteps.map((step, i) => (\n                    <li key={i}>{step}</li>\n                  ))}\n                </ol>\n              </div>\n\n              <Button\n                variant=\"outline\"\n                onClick={() => setShowPrivateKey(false)}\n                data-testid=\"button-hide-private\"\n                className=\"w-full\"\n              >\n                I've Saved It - Hide Private Key\n              </Button>\n            </div>\n          </AlertDescription>\n        </Alert>\n      )}\n\n      {walletInfo?.isConfigured ? (\n        <Card data-testid=\"card-wallet-configured\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <CheckCircle2 className=\"h-5 w-5 text-green-500\" />\n              Wallet Configured\n            </CardTitle>\n            <CardDescription>\n              Your creator wallet is set up and ready to use on pump.fun\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div>\n              <label className=\"text-sm font-medium text-muted-foreground\">Public Address</label>\n              <div className=\"flex items-center gap-2 mt-1\">\n                <code className=\"flex-1 p-2 bg-muted rounded text-sm font-mono\" data-testid=\"text-configured-address\">\n                  {walletInfo.publicKey}\n                </code>\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  onClick={() => copyToClipboard(walletInfo.publicKey, 'Address')}\n                  data-testid=\"button-copy-address\"\n                  aria-label=\"Copy wallet address\"\n                >\n                  <Copy className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-muted-foreground\">Balance</label>\n              <p className=\"text-2xl font-bold mt-1\" data-testid=\"text-balance\">\n                {walletInfo.balance.toFixed(4)} SOL\n              </p>\n            </div>\n\n            <div className=\"flex gap-2 pt-2\">\n              <Button\n                variant=\"default\"\n                className=\"flex-1\"\n                asChild\n                data-testid=\"button-view-profile\"\n              >\n                <a href={walletInfo.pumpFunUrl || '#'} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <ExternalLink className=\"h-4 w-4 mr-2\" />\n                  View on pump.fun\n                </a>\n              </Button>\n              <Button\n                variant=\"outline\"\n                className=\"flex-1\"\n                asChild\n                data-testid=\"button-view-solscan\"\n              >\n                <a href={`https://solscan.io/account/${walletInfo.publicKey}`} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <ExternalLink className=\"h-4 w-4 mr-2\" />\n                  View on Solscan\n                </a>\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      ) : (\n        <Card data-testid=\"card-no-wallet\">\n          <CardHeader>\n            <CardTitle>No Wallet Configured</CardTitle>\n            <CardDescription>\n              Generate a new creator wallet to start earning rewards on pump.fun\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <Alert>\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertDescription>\n                <p className=\"font-medium mb-2\">What you'll get:</p>\n                <ul className=\"list-disc list-inside space-y-1 text-sm\">\n                  <li>A new Solana wallet for creating tokens on pump.fun</li>\n                  <li>Earn 0.05% of all trading volume on your tokens (paid in SOL)</li>\n                  <li>Claim rewards anytime from your pump.fun profile</li>\n                  <li>Full ownership - import the wallet into Phantom</li>\n                </ul>\n              </AlertDescription>\n            </Alert>\n\n            <Button\n              onClick={() => generateMutation.mutate()}\n              disabled={generateMutation.isPending}\n              className=\"w-full\"\n              data-testid=\"button-generate-wallet\"\n            >\n              {generateMutation.isPending ? 'Generating...' : 'Generate Creator Wallet'}\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n\n      <Card className=\"mt-6\" data-testid=\"card-how-to-use\">\n        <CardHeader>\n          <CardTitle>How to Use</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-3 text-sm\">\n          <div>\n            <h4 className=\"font-medium mb-1\">1. Fund Your Wallet</h4>\n            <p className=\"text-muted-foreground\">\n              Send SOL to the wallet address above (~0.5 SOL to cover token creation fees)\n            </p>\n          </div>\n          <div>\n            <h4 className=\"font-medium mb-1\">2. Create Tokens on pump.fun</h4>\n            <p className=\"text-muted-foreground\">\n              Import the wallet into Phantom â†’ Go to pump.fun â†’ Create tokens using this wallet\n            </p>\n          </div>\n          <div>\n            <h4 className=\"font-medium mb-1\">3. Earn Rewards</h4>\n            <p className=\"text-muted-foreground\">\n              Automatically earn 0.05% of trading volume in SOL. Rewards accumulate on-chain.\n            </p>\n          </div>\n          <div>\n            <h4 className=\"font-medium mb-1\">4. Claim Rewards</h4>\n            <p className=\"text-muted-foreground\">\n              Visit pump.fun â†’ Log in with Phantom â†’ Profile â†’ Coins â†’ \"CLAIM SOL REWARDS\"\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":10800},"client/src/pages/bot-setup.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { SiTelegram, SiDiscord } from \"react-icons/si\";\nimport { CheckCircle, Copy, ExternalLink } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function BotSetup() {\n  const { toast } = useToast();\n  const [copiedStep, setCopiedStep] = useState<string | null>(null);\n\n  const copyToClipboard = (text: string, stepId: string) => {\n    navigator.clipboard.writeText(text);\n    setCopiedStep(stepId);\n    setTimeout(() => setCopiedStep(null), 2000);\n    toast({\n      title: \"Copied!\",\n      description: \"Text copied to clipboard\",\n    });\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 max-w-5xl\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-4xl font-bold mb-4\" data-testid=\"heading-bot-setup\">Bot Setup Guide</h1>\n        <p className=\"text-lg text-muted-foreground\">\n          Set up your Telegram and Discord bots in 20 minutes. All features are already built and ready to go!\n        </p>\n      </div>\n\n      <Card className=\"mb-8\" data-testid=\"card-features-built\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <CheckCircle className=\"h-6 w-6 text-green-500\" />\n            Features Already Built\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            <div>\n              <h3 className=\"font-semibold mb-2\">Core Commands</h3>\n              <ul className=\"space-y-1 text-sm text-muted-foreground\">\n                <li>â€¢ /execute - Full 52-metric rug scan</li>\n                <li>â€¢ /first20 - Top 20 holder analysis</li>\n                <li>â€¢ /devtorture - Dev wallet history</li>\n                <li>â€¢ /blacklist - Scam wallet check</li>\n              </ul>\n            </div>\n            <div>\n              <h3 className=\"font-semibold mb-2\">Alpha Alerts</h3>\n              <ul className=\"space-y-1 text-sm text-muted-foreground\">\n                <li>â€¢ Monitors influential wallet activity</li>\n                <li>â€¢ Real-time pump.fun launches</li>\n                <li>â€¢ Quality filtering (RugCheck {'>'}  85)</li>\n                <li>â€¢ Auto-pings Discord/Telegram</li>\n              </ul>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      <div className=\"space-y-8\">\n        <section>\n          <div className=\"flex items-center gap-3 mb-4\">\n            <SiTelegram className=\"h-8 w-8 text-[#0088cc]\" />\n            <h2 className=\"text-3xl font-bold\">Part 1: Telegram Bot</h2>\n          </div>\n\n          <Card className=\"mb-4\" data-testid=\"card-telegram-step-1\">\n            <CardHeader>\n              <CardTitle>Step 1: Open BotFather</CardTitle>\n              <CardDescription>BotFather is Telegram's official bot creation tool</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">1. Open Telegram app or web.telegram.org</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">2. Search for: <code className=\"bg-muted px-2 py-1 rounded\">@BotFather</code></span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">3. Click the blue verified checkmark profile</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">4. Click \"Start\"</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"mb-4\" data-testid=\"card-telegram-step-2\">\n            <CardHeader>\n              <CardTitle>Step 2: Create Your Bot</CardTitle>\n              <CardDescription>Send these exact messages to BotFather</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div>\n                <p className=\"text-sm font-medium mb-2\">Message 1: Start bot creation</p>\n                <div className=\"flex items-center gap-2\">\n                  <code className=\"flex-1 bg-muted px-4 py-2 rounded font-mono text-sm\">/newbot</code>\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={() => copyToClipboard(\"/newbot\", \"newbot\")}\n                    data-testid=\"button-copy-newbot\"\n                  >\n                    {copiedStep === \"newbot\" ? <CheckCircle className=\"h-4 w-4\" /> : <Copy className=\"h-4 w-4\" />}\n                  </Button>\n                </div>\n              </div>\n\n              <div>\n                <p className=\"text-sm font-medium mb-2\">Message 2: Bot name (when BotFather asks)</p>\n                <div className=\"flex items-center gap-2\">\n                  <code className=\"flex-1 bg-muted px-4 py-2 rounded font-mono text-sm\">Rug Killer Alpha Bot</code>\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={() => copyToClipboard(\"Rug Killer Alpha Bot\", \"botname\")}\n                    data-testid=\"button-copy-botname\"\n                  >\n                    {copiedStep === \"botname\" ? <CheckCircle className=\"h-4 w-4\" /> : <Copy className=\"h-4 w-4\" />}\n                  </Button>\n                </div>\n              </div>\n\n              <div>\n                <p className=\"text-sm font-medium mb-2\">Message 3: Bot username (when BotFather asks)</p>\n                <div className=\"flex items-center gap-2\">\n                  <code className=\"flex-1 bg-muted px-4 py-2 rounded font-mono text-sm\">RugKillerAlphaBot</code>\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={() => copyToClipboard(\"RugKillerAlphaBot\", \"username\")}\n                    data-testid=\"button-copy-username\"\n                  >\n                    {copiedStep === \"username\" ? <CheckCircle className=\"h-4 w-4\" /> : <Copy className=\"h-4 w-4\" />}\n                  </Button>\n                </div>\n                <p className=\"text-xs text-muted-foreground mt-2\">\n                  Note: Must end in \"bot\" or \"Bot\". No spaces allowed.\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"mb-4\" data-testid=\"card-telegram-step-3\">\n            <CardHeader>\n              <CardTitle>Step 3: Copy Your Bot Token</CardTitle>\n              <CardDescription>BotFather will send you a token - SAVE IT!</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <p className=\"text-sm\">BotFather will reply with something like:</p>\n              <div className=\"bg-muted p-4 rounded text-sm font-mono\">\n                Done! Your bot is ready.<br />\n                Token: <span className=\"text-primary\">1234567890:ABCdefGHIjklMNOpqrsTUVwxyz</span>\n              </div>\n              <p className=\"text-sm font-semibold text-orange-600\">\n                âš ï¸ COPY THAT ENTIRE TOKEN! You'll need it in a moment.\n              </p>\n            </CardContent>\n          </Card>\n        </section>\n\n        <section>\n          <div className=\"flex items-center gap-3 mb-4\">\n            <SiDiscord className=\"h-8 w-8 text-[#5865F2]\" />\n            <h2 className=\"text-3xl font-bold\">Part 2: Discord Bot</h2>\n          </div>\n\n          <Card className=\"mb-4\" data-testid=\"card-discord-step-1\">\n            <CardHeader>\n              <CardTitle>Step 1: Create Discord Application</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">1. Visit:</span>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  asChild\n                  data-testid=\"button-discord-dev-portal\"\n                >\n                  <a href=\"https://discord.com/developers/applications\" target=\"_blank\" rel=\"noopener noreferrer\">\n                    Discord Developer Portal\n                    <ExternalLink className=\"h-3 w-3 ml-1\" />\n                  </a>\n                </Button>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">2. Click \"New Application\"</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">3. Name: <code className=\"bg-muted px-2 py-1 rounded\">Rug Killer Alpha Bot</code></span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">4. Agree to terms â†’ Click \"Create\"</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"mb-4\" data-testid=\"card-discord-step-2\">\n            <CardHeader>\n              <CardTitle>Step 2: Get Application ID (Client ID)</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <p className=\"text-sm\">You'll see the \"General Information\" page</p>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">1. Find \"APPLICATION ID\"</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">2. Click \"Copy\" button next to it</span>\n              </div>\n              <p className=\"text-sm font-semibold text-orange-600\">\n                âš ï¸ SAVE THIS ID! You'll need it for Replit secrets.\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"mb-4\" data-testid=\"card-discord-step-3\">\n            <CardHeader>\n              <CardTitle>Step 3: Create Bot & Get Token</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">1. Click \"Bot\" in left sidebar</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">2. Click \"Reset Token\" â†’ Confirm</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">3. Click \"Copy\" to copy the token</span>\n              </div>\n              <p className=\"text-sm font-semibold text-orange-600\">\n                âš ï¸ SAVE THIS TOKEN! You can only see it once!\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"mb-4\" data-testid=\"card-discord-step-4\">\n            <CardHeader>\n              <CardTitle>Step 4: Enable Intents</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <p className=\"text-sm\">Scroll down on the Bot page to \"Privileged Gateway Intents\"</p>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">1. âœ… Enable \"MESSAGE CONTENT INTENT\"</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm\">2. Click \"Save Changes\" at bottom</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"mb-4 bg-primary/5 border-primary\" data-testid=\"card-discord-invite\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <SiDiscord className=\"h-6 w-6 text-[#5865F2]\" />\n                Invite Discord Bot to Your Server\n              </CardTitle>\n              <CardDescription>\n                Add the Solana Rug Killer bot to your Discord server instantly\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <p className=\"text-sm\">\n                Click the button below to invite the bot to your Discord server. You'll need \"Manage Server\" permissions.\n              </p>\n              <Button\n                variant=\"default\"\n                size=\"lg\"\n                asChild\n                className=\"w-full sm:w-auto\"\n                data-testid=\"button-invite-discord-bot\"\n              >\n                <a \n                  href=\"https://discord.com/oauth2/authorize?client_id=1437952073319714879&scope=bot&permissions=3072\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                >\n                  <SiDiscord className=\"h-5 w-5 mr-2\" />\n                  Invite Discord Bot\n                  <ExternalLink className=\"h-4 w-4 ml-2\" />\n                </a>\n              </Button>\n              <div className=\"text-xs text-muted-foreground space-y-1\">\n                <p>â€¢ Bot permissions: Read Messages, Send Messages, Embed Links</p>\n                <p>â€¢ After inviting, use <code className=\"bg-muted px-1 py-0.5 rounded\">/execute</code> to analyze tokens</p>\n              </div>\n            </CardContent>\n          </Card>\n        </section>\n\n        <section>\n          <div className=\"mb-4\">\n            <h2 className=\"text-3xl font-bold mb-2\">Part 3: Add Secrets to Replit</h2>\n            <p className=\"text-muted-foreground\">Now configure your Replit project with the bot credentials</p>\n          </div>\n\n          <Card data-testid=\"card-replit-secrets\">\n            <CardHeader>\n              <CardTitle>Required Secrets</CardTitle>\n              <CardDescription>Add these in Replit â†’ Secrets (ðŸ”’ icon in left sidebar)</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between\">\n                  <code className=\"text-sm font-semibold\">TELEGRAM_BOT_TOKEN</code>\n                  <Badge>Required</Badge>\n                </div>\n                <p className=\"text-xs text-muted-foreground\">Paste the token from BotFather (Part 1, Step 3)</p>\n              </div>\n\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between\">\n                  <code className=\"text-sm font-semibold\">TELEGRAM_BOT_URL</code>\n                  <Badge>Required</Badge>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <code className=\"flex-1 bg-muted px-3 py-2 rounded text-xs\">https://t.me/RugKillerAlphaBot</code>\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={() => copyToClipboard(\"https://t.me/RugKillerAlphaBot\", \"tg-url\")}\n                    data-testid=\"button-copy-telegram-url\"\n                  >\n                    {copiedStep === \"tg-url\" ? <CheckCircle className=\"h-4 w-4\" /> : <Copy className=\"h-4 w-4\" />}\n                  </Button>\n                </div>\n                <p className=\"text-xs text-muted-foreground\">(Use your actual bot username if different)</p>\n              </div>\n\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between\">\n                  <code className=\"text-sm font-semibold\">DISCORD_BOT_TOKEN</code>\n                  <Badge>Required</Badge>\n                </div>\n                <p className=\"text-xs text-muted-foreground\">Paste the token from Discord Developer Portal (Part 2, Step 3)</p>\n              </div>\n\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between\">\n                  <code className=\"text-sm font-semibold\">DISCORD_CLIENT_ID</code>\n                  <Badge>Required</Badge>\n                </div>\n                <p className=\"text-xs text-muted-foreground\">Paste the Application ID from Discord Developer Portal (Part 2, Step 2)</p>\n              </div>\n            </CardContent>\n          </Card>\n        </section>\n\n        <Card className=\"bg-green-500/10 border-green-500\" data-testid=\"card-done\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <CheckCircle className=\"h-6 w-6 text-green-500\" />\n              You're Done!\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            <p className=\"text-sm\">\n              After adding the secrets, your Replit app will auto-restart and both bots will start automatically!\n            </p>\n            <p className=\"text-sm\">\n              Check the logs for: <code className=\"bg-muted px-2 py-1 rounded text-xs\">âœ… Telegram bot started</code>\n            </p>\n            <p className=\"text-sm font-semibold\">\n              Bot invite links will appear in the website header/footer for subscribed users.\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":17028},"client/src/pages/features.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  Shield, \n  TrendingUp, \n  Zap, \n  Eye, \n  Lock, \n  Droplet, \n  Users, \n  AlertTriangle,\n  CheckCircle,\n  Flame,\n  Wallet,\n  Bot,\n  Bell,\n  Coins\n} from \"lucide-react\";\nimport { SiTelegram, SiDiscord } from \"react-icons/si\";\nimport { Link } from \"wouter\";\n\nexport default function Features() {\n  return (\n    <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n      <div className=\"text-center mb-12\">\n        <h1 className=\"text-5xl font-bold mb-4\" data-testid=\"heading-features\">\n          Complete Rug Pull Protection Suite\n        </h1>\n        <p className=\"text-xl text-muted-foreground max-w-3xl mx-auto\">\n          Multi-source security analysis, AI-powered blacklist, real-time alpha alerts, and premium bot access. \n          Everything you need to trade Solana safely.\n        </p>\n      </div>\n\n      <section className=\"mb-16\">\n        <div className=\"text-center mb-8\">\n          <Badge className=\"mb-4\" data-testid=\"badge-core-analysis\">Core Features</Badge>\n          <h2 className=\"text-3xl font-bold mb-2\">Comprehensive Token Analysis</h2>\n          <p className=\"text-muted-foreground\">Multi-source data aggregation combining RugCheck, GoPlus, DexScreener, and Jupiter</p>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          <Card data-testid=\"card-feature-authorities\">\n            <CardHeader>\n              <Lock className=\"h-8 w-8 mb-2 text-primary\" />\n              <CardTitle>Authority Checks</CardTitle>\n              <CardDescription>Mint & freeze authority monitoring</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-2 text-sm text-muted-foreground\">\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Detects active mint authority (inflation risk)</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Identifies freeze authority (wallet lock risk)</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Verifies authority revocation status</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-feature-holders\">\n            <CardHeader>\n              <Users className=\"h-8 w-8 mb-2 text-primary\" />\n              <CardTitle>Holder Analysis</CardTitle>\n              <CardDescription>Top holder concentration & distribution</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-2 text-sm text-muted-foreground\">\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Top 10 & Top 20 holder breakdown</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Whale concentration warnings</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Total unique holder count</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-feature-liquidity\">\n            <CardHeader>\n              <Droplet className=\"h-8 w-8 mb-2 text-primary\" />\n              <CardTitle>Liquidity Pool Analysis</CardTitle>\n              <CardDescription>LP status, burn percentage & depth</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-2 text-sm text-muted-foreground\">\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>LP lock/burn verification</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Total liquidity amount (USD)</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Rug pull liquidity risk scoring</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-feature-rugcheck\">\n            <CardHeader>\n              <Shield className=\"h-8 w-8 mb-2 text-primary\" />\n              <CardTitle>RugCheck Integration</CardTitle>\n              <CardDescription>Community-driven risk scores</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-2 text-sm text-muted-foreground\">\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>0-100 risk score from rugcheck.xyz</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Detailed risk factor breakdown</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Market manipulation detection</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-feature-goplus\">\n            <CardHeader>\n              <Eye className=\"h-8 w-8 mb-2 text-primary\" />\n              <CardTitle>GoPlus Security</CardTitle>\n              <CardDescription>Honeypot & contract scanning</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-2 text-sm text-muted-foreground\">\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Honeypot detection (can't sell check)</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>High sell tax identification</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Hidden owner flags</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-feature-market-data\">\n            <CardHeader>\n              <TrendingUp className=\"h-8 w-8 mb-2 text-primary\" />\n              <CardTitle>Real-Time Market Data</CardTitle>\n              <CardDescription>DexScreener & Jupiter pricing</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-2 text-sm text-muted-foreground\">\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Live price, volume, market cap</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>24h price change tracking</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>DEX liquidity aggregation</span>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n\n      <section className=\"mb-16\">\n        <div className=\"text-center mb-8\">\n          <Badge className=\"mb-4\" data-testid=\"badge-ai-blacklist\">AI-Powered</Badge>\n          <h2 className=\"text-3xl font-bold mb-2\">Automated Blacklist System</h2>\n          <p className=\"text-muted-foreground\">6 detection rules analyzing suspicious wallet behavior</p>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <Card data-testid=\"card-blacklist-detection\">\n            <CardHeader>\n              <AlertTriangle className=\"h-8 w-8 mb-2 text-orange-500\" />\n              <CardTitle>Automated Detection Rules</CardTitle>\n              <CardDescription>Real-time analysis of wallet patterns</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div>\n                <p className=\"font-semibold text-sm mb-1\">ðŸ¯ Honeypot Detection</p>\n                <p className=\"text-xs text-muted-foreground\">Flags wallets deploying unsellable tokens</p>\n              </div>\n              <div>\n                <p className=\"font-semibold text-sm mb-1\">ðŸ’¸ High Sell Tax</p>\n                <p className=\"text-xs text-muted-foreground\">Identifies tokens with {'>'}  20% sell fees</p>\n              </div>\n              <div>\n                <p className=\"font-semibold text-sm mb-1\">ðŸ”“ Suspicious Authorities</p>\n                <p className=\"text-xs text-muted-foreground\">Detects active mint/freeze on launched tokens</p>\n              </div>\n              <div>\n                <p className=\"font-semibold text-sm mb-1\">ðŸ§¼ Wash Trading</p>\n                <p className=\"text-xs text-muted-foreground\">Catches fake volume patterns</p>\n              </div>\n              <div>\n                <p className=\"font-semibold text-sm mb-1\">Coordinated Pump Groups</p>\n                <p className=\"text-xs text-muted-foreground\">Identifies coordinated pump schemes</p>\n              </div>\n              <div>\n                <p className=\"font-semibold text-sm mb-1\">ðŸŽ¯ Multiple Violations</p>\n                <p className=\"text-xs text-muted-foreground\">Tracks repeat offenders automatically</p>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-blacklist-reporting\">\n            <CardHeader>\n              <Shield className=\"h-8 w-8 mb-2 text-red-500\" />\n              <CardTitle>Evidence & Reporting</CardTitle>\n              <CardDescription>Transparent flagging with proof</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <p className=\"text-sm text-muted-foreground\">\n                Every blacklist entry includes:\n              </p>\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span>Severity score (0-100)</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span>Violation type breakdown</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span>Evidence (token addresses, transaction hashes)</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span>Timestamp of detection</span>\n                </div>\n              </div>\n              <div className=\"mt-4 p-3 bg-muted rounded\">\n                <p className=\"text-xs font-semibold mb-1\">API Access</p>\n                <code className=\"text-xs\">GET /api/blacklist/check/:wallet</code>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n\n      <section className=\"mb-16\">\n        <div className=\"text-center mb-8\">\n          <Badge className=\"mb-4\" data-testid=\"badge-alpha-alerts\">Premium</Badge>\n          <h2 className=\"text-3xl font-bold mb-2\">Alpha Alerts System</h2>\n          <p className=\"text-muted-foreground\">Real-time monitoring of influential wallets and new launches</p>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-6\">\n          <Card data-testid=\"card-alpha-callers\">\n            <CardHeader>\n              <Flame className=\"h-8 w-8 mb-2 text-orange-500\" />\n              <CardTitle>Smart Money Tracking</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <p className=\"text-sm text-muted-foreground\">\n                Monitor wallet activity from influential traders:\n              </p>\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span>Configurable wallet watchlist</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span>Real-time transaction monitoring</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span>Instant buy/sell notifications</span>\n                </div>\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-3\">\n                Auto-pings Discord/Telegram when monitored wallets trade\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-pumpfun-monitor\">\n            <CardHeader>\n              <Zap className=\"h-8 w-8 mb-2 text-yellow-500\" />\n              <CardTitle>Pump.fun WebSocket</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <p className=\"text-sm text-muted-foreground\">\n                Real-time new token launch monitoring:\n              </p>\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span>WebSocket connection to pump.fun</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span>Instant notifications for new launches</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span>Quality filtering before alert</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-quality-filter\">\n            <CardHeader>\n              <Shield className=\"h-8 w-8 mb-2 text-green-500\" />\n              <CardTitle>Quality Filtering</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <p className=\"text-sm text-muted-foreground\">\n                Alerts only sent if token passes:\n              </p>\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span>RugCheck score {'>'}  85</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span>Not flagged as honeypot</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                  <span>Liquidity {'>'}  $5,000</span>\n                </div>\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-3\">\n                Only high-quality gems make it through\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n\n      <section className=\"mb-16\">\n        <div className=\"text-center mb-8\">\n          <Badge className=\"mb-4\" data-testid=\"badge-bots\">Automation</Badge>\n          <h2 className=\"text-3xl font-bold mb-2\">Telegram & Discord Bots</h2>\n          <p className=\"text-muted-foreground\">Full analysis directly in your favorite messaging app</p>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-6 max-w-4xl mx-auto\">\n          <Card data-testid=\"card-telegram-features\">\n            <CardHeader>\n              <div className=\"flex items-center gap-2 mb-2\">\n                <SiTelegram className=\"h-8 w-8 text-[#0088cc]\" />\n                <CardTitle>Telegram Bot</CardTitle>\n              </div>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div>\n                <code className=\"text-sm font-semibold\">/execute [token]</code>\n                <p className=\"text-xs text-muted-foreground mt-1\">Full 52-metric analysis</p>\n              </div>\n              <div>\n                <code className=\"text-sm font-semibold\">/first20 [token]</code>\n                <p className=\"text-xs text-muted-foreground mt-1\">Top 20 holder breakdown</p>\n              </div>\n              <div>\n                <code className=\"text-sm font-semibold\">/devtorture [token]</code>\n                <p className=\"text-xs text-muted-foreground mt-1\">Dev wallet history</p>\n              </div>\n              <div>\n                <code className=\"text-sm font-semibold\">/blacklist [wallet]</code>\n                <p className=\"text-xs text-muted-foreground mt-1\">Check scam flags</p>\n              </div>\n              <div className=\"pt-2\">\n                <p className=\"text-xs text-muted-foreground\">\n                  ðŸ’¡ Tip: Send any token address for quick analysis\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-discord-features\">\n            <CardHeader>\n              <div className=\"flex items-center gap-2 mb-2\">\n                <SiDiscord className=\"h-8 w-8 text-[#5865F2]\" />\n                <CardTitle>Discord Bot</CardTitle>\n              </div>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div>\n                <code className=\"text-sm font-semibold\">/execute [token]</code>\n                <p className=\"text-xs text-muted-foreground mt-1\">Rich embeds with color-coded risk</p>\n              </div>\n              <div>\n                <code className=\"text-sm font-semibold\">/first20 [token]</code>\n                <p className=\"text-xs text-muted-foreground mt-1\">Holder concentration report</p>\n              </div>\n              <div>\n                <code className=\"text-sm font-semibold\">/devtorture [token]</code>\n                <p className=\"text-xs text-muted-foreground mt-1\">Transaction history tracking</p>\n              </div>\n              <div>\n                <code className=\"text-sm font-semibold\">/blacklist [wallet]</code>\n                <p className=\"text-xs text-muted-foreground mt-1\">Scammer verification</p>\n              </div>\n              <div className=\"pt-2\">\n                <p className=\"text-xs text-muted-foreground\">\n                  ðŸŽ¨ Beautiful embeds with red/yellow/green risk indicators\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"text-center mt-6\">\n          <Link href=\"/bot-setup\">\n            <Button size=\"lg\" data-testid=\"button-setup-bots\">\n              <Bot className=\"h-5 w-5 mr-2\" />\n              Set Up Bots Now\n            </Button>\n          </Link>\n        </div>\n      </section>\n\n      <section className=\"mb-16\">\n        <div className=\"text-center mb-8\">\n          <Badge className=\"mb-4\" data-testid=\"badge-payments\">Flexible</Badge>\n          <h2 className=\"text-3xl font-bold mb-2\">Multiple Payment Options</h2>\n          <p className=\"text-muted-foreground\">Subscribe with cards, crypto, or redeem codes</p>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-6\">\n          <Card data-testid=\"card-whop-payments\">\n            <CardHeader>\n              <Coins className=\"h-8 w-8 mb-2 text-green-500\" />\n              <CardTitle>Whop Subscriptions</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2 text-sm text-muted-foreground\">\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Credit/debit card payments</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Individual, Group, Lifetime tiers</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>7-day free trial included</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-crypto-payments\">\n            <CardHeader>\n              <Wallet className=\"h-8 w-8 mb-2 text-purple-500\" />\n              <CardTitle>Crypto Payments (SOL)</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2 text-sm text-muted-foreground\">\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Pay with Solana (SOL)</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>6 confirmation safety</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Full audit trail</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-redemption-codes\">\n            <CardHeader>\n              <Shield className=\"h-8 w-8 mb-2 text-blue-500\" />\n              <CardTitle>Redemption Codes</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2 text-sm text-muted-foreground\">\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Lifetime access codes</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Usage limits & expiration</span>\n              </div>\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                <span>Transaction-safe redemption</span>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n\n      <div className=\"text-center py-12 bg-primary/5 rounded-lg\">\n        <h2 className=\"text-3xl font-bold mb-4\">Ready to Trade Safely?</h2>\n        <p className=\"text-muted-foreground mb-6 max-w-2xl mx-auto\">\n          Get instant access to all features with our 7-day free trial. No credit card required for trial.\n        </p>\n        <div className=\"flex gap-4 justify-center\">\n          <Link href=\"/pricing\">\n            <Button size=\"lg\" data-testid=\"button-view-pricing-cta\">\n              View Pricing Plans\n            </Button>\n          </Link>\n          <Link href=\"/documentation\">\n            <Button size=\"lg\" variant=\"outline\" data-testid=\"button-view-docs-cta\">\n              View Documentation\n            </Button>\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":24477},"client/src/components/contract-address.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Copy, Check } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { CONTRACT_ADDRESS } from \"@/constants\";\n\ninterface ContractAddressProps {\n  className?: string;\n  showLabel?: boolean;\n}\n\nexport function ContractAddress({ className = \"\", showLabel = true }: ContractAddressProps) {\n  const [copied, setCopied] = useState(false);\n  const { toast } = useToast();\n  const CA = CONTRACT_ADDRESS;\n\n  const copyToClipboard = async () => {\n    try {\n      await navigator.clipboard.writeText(CA);\n      setCopied(true);\n      toast({\n        title: \"Copied!\",\n        description: \"Contract address copied to clipboard\",\n      });\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      toast({\n        title: \"Failed to copy\",\n        description: \"Please copy manually\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <Card className={className} data-testid=\"card-contract-address\">\n      <CardContent className=\"p-4\">\n        <div className=\"space-y-2\">\n          {showLabel && (\n            <div className=\"text-sm font-semibold text-muted-foreground\">\n              Official Contract Address\n            </div>\n          )}\n          <div className=\"flex items-center gap-2\">\n            <code \n              className=\"flex-1 text-sm font-mono bg-muted px-3 py-2 rounded break-all\"\n              data-testid=\"text-contract-address\"\n            >\n              {CA}\n            </code>\n            <Button\n              size=\"icon\"\n              variant=\"outline\"\n              onClick={copyToClipboard}\n              data-testid=\"button-copy-ca\"\n            >\n              {copied ? (\n                <Check className=\"h-4 w-4 text-green-500\" />\n              ) : (\n                <Copy className=\"h-4 w-4\" />\n              )}\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2035},".github/ISSUE_TEMPLATE/feature_request.md":{"content":"---\nname: Feature request\nabout: Suggest an idea for this project\ntitle: '[FEATURE] '\nlabels: enhancement\nassignees: ''\n---\n\n**Is your feature request related to a problem? Please describe.**\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\n\n**Describe the solution you'd like**\nA clear and concise description of what you want to happen.\n\n**Describe alternatives you've considered**\nA clear and concise description of any alternative solutions or features you've considered.\n\n**Which tier would benefit from this feature?**\n- [ ] Free tier\n- [ ] Individual tier\n- [ ] Group tier\n- [ ] Lifetime/Token holders\n- [ ] All tiers\n\n**Additional context**\nAdd any other context, mockups, or screenshots about the feature request here.\n\n**Would you be willing to contribute?**\n- [ ] Yes, I can submit a PR for this feature\n- [ ] I can help test this feature\n- [ ] I can provide more details/feedback\n- [ ] No, just suggesting\n","size_bytes":962},".github/ISSUE_TEMPLATE/bug_report.md":{"content":"---\nname: Bug report\nabout: Create a report to help us improve\ntitle: '[BUG] '\nlabels: bug\nassignees: ''\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n1. Go to '...'\n2. Click on '....'\n3. Scroll down to '....'\n4. See error\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n\n**Screenshots**\nIf applicable, add screenshots to help explain your problem.\n\n**Environment (please complete the following information):**\n - OS: [e.g. macOS, Windows, Linux]\n - Browser [e.g. chrome, safari]\n - Version [e.g. 1.0.0]\n - Node.js version [e.g. 18.0.0]\n\n**Token Address (if applicable)**\nIf this bug is related to token analysis, please provide the token address:\n```\n[Token address here]\n```\n\n**Additional context**\nAdd any other context about the problem here.\n\n**Logs**\nIf applicable, paste relevant error logs or console output:\n```\n[Logs here]\n```\n","size_bytes":959},"DISCORD_BOT_SETUP.md":{"content":"# Discord Bot Setup Guide\n\n## Quick Setup Checklist\n\nYour Discord bot is **RugKillerAlphaBot** with Application ID: `1437952073319714879`\n\n### âœ… Step 1: Enable Bot in Discord Developer Portal\n\n1. Go to [Discord Developer Portal](https://discord.com/developers/applications)\n2. Select your application (RugKillerAlphaBot - ID: 1437952073319714879)\n3. Navigate to **Bot** section (left sidebar)\n4. Scroll down to **\"Privileged Gateway Intents\"**\n5. **OPTIONAL** (only if you want to add message-based commands in the future):\n   - Toggle ON **Message Content Intent**\n   - Toggle ON **Server Members Intent** (if you need member events)\n\n**Note:** The bot currently uses **slash commands** which don't require privileged intents. The basic `Guilds` intent is all that's needed.\n\n### âœ… Step 2: Invite Bot to Your Server\n\nUse this invite link (replace YOUR_CLIENT_ID with `1437952073319714879`):\n\n```\nhttps://discord.com/api/oauth2/authorize?client_id=1437952073319714879&permissions=277025770496&scope=bot%20applications.commands\n```\n\n**Permissions included:**\n- Send Messages\n- Embed Links\n- Read Message History\n- Use Slash Commands\n- Add Reactions\n\n### âœ… Step 3: Verify Environment Variables\n\nMake sure these are set in Replit Secrets:\n\n```bash\nDISCORD_BOT_TOKEN=your-bot-token-here\nDISCORD_CLIENT_ID=1437952073319714879\nDISCORD_PUBLIC_KEY=78e4e4e211267262d640e1b019c769940c58d46cd8ec3d15043c27832d38bc84\n```\n\n### âœ… Step 4: Test the Bot\n\nOnce the bot is running, you can test it in your Discord server:\n\n1. Type `/` in any channel\n2. You should see the RugKillerAlphaBot commands:\n   - `/execute` - Full 52-metric rug detection scan\n   - `/first20` - Top 20 holder concentration analysis\n   - `/devtorture` - Developer wallet history tracking\n   - `/blacklist` - Check if wallet is flagged\n\n## Available Commands\n\n### `/execute <token_address>`\n**Full Token Analysis**\n\nPerforms comprehensive 52-metric rug detection including:\n- Risk score (0-100) with color-coded levels\n- Mint & freeze authority checks\n- Top holder concentration\n- Liquidity pool status and LP burn percentage\n- Red flags and warnings\n- Links to Rugcheck, DexScreener, and BubbleMaps\n\n**Example:**\n```\n/execute 2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\n```\n\n### `/first20 <token_address>`\n**Holder Analysis**\n\nShows detailed breakdown of top 20 holders:\n- Wallet addresses (truncated for readability)\n- Token balance\n- Percentage of total supply\n- Top 10 and Top 20 concentration percentages\n- Holder distribution chart\n\n**Example:**\n```\n/first20 2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\n```\n\n### `/devtorture <token_address>`\n**Developer Wallet History**\n\nTracks developer wallet activity:\n- Previous token launches\n- Success/failure rate\n- Rug pull history\n- Pattern recognition\n- Creator wallet credibility score\n\n**Example:**\n```\n/devtorture 2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\n```\n\n### `/blacklist <wallet_address>`\n**Blacklist Check**\n\nChecks if a wallet is flagged in our AI-powered blacklist:\n- Severity level (0-100)\n- Flag types (honeypot creator, wash trading, etc.)\n- Evidence and reasoning\n- Related scam tokens\n- Historical activity\n\n**Example:**\n```\n/blacklist AbCd1234EfGh5678IjKl9012MnOp3456QrSt7890UvWx\n```\n\n## Troubleshooting\n\n### Bot Not Responding\n\n1. **Check bot is online** - Look for green status in Discord server\n2. **Verify permissions** - Bot needs Send Messages and Use Slash Commands\n3. **Re-invite bot** - Use the invite link above with fresh permissions\n4. **Check logs** - Restart the Replit application and check console\n\n### Commands Not Showing\n\n1. **Wait 1-2 minutes** - Slash commands take time to propagate\n2. **Restart Discord** - Completely close and reopen Discord app\n3. **Re-register commands** - Restart the Replit application\n4. **Check scope** - Make sure you invited with `applications.commands` scope\n\n### \"Used disallowed intents\" Error\n\nThis error means you're requesting privileged intents that aren't enabled in the Developer Portal.\n\n**Solution:**\n- The bot has been updated to only use `Guilds` intent (no privileged intents needed)\n- If you see this error, restart the Replit application after enabling the intent in Discord Developer Portal\n\n## Rich Embed Features\n\nAll bot responses use **rich embeds** with:\n\n- **Color-coding** based on risk level:\n  - ðŸŸ¢ Green (0-30): LOW risk\n  - ðŸŸ¡ Yellow (31-60): MODERATE risk\n  - ðŸŸ  Orange (61-80): HIGH risk\n  - ðŸ”´ Red (81-100): EXTREME risk\n\n- **Organized sections** with clear headers\n- **Inline fields** for compact information display\n- **Timestamps** on all responses\n- **External links** to additional resources\n\n## Rate Limiting\n\nDiscord enforces rate limits on bot commands:\n- **5 commands per 5 seconds** per user\n- **50 commands per 10 seconds** per guild\n\nIf you hit rate limits, wait a few seconds before trying again.\n\n## Support\n\nFor bot issues:\n- **GitHub Issues**: Report bugs and request features\n- **Discord Community**: Get help from other users\n- **Email**: legal@yourwebsite.com\n\n## Links\n\n- **Discord Developer Portal**: https://discord.com/developers/applications\n- **Bot Invite**: https://discord.com/api/oauth2/authorize?client_id=1437952073319714879&permissions=277025770496&scope=bot%20applications.commands\n- **Main Documentation**: See [BOT_SETUP_GUIDE.md](./BOT_SETUP_GUIDE.md)\n- **Terms of Service**: https://yourwebsite.com/terms\n- **Privacy Policy**: https://yourwebsite.com/privacy\n","size_bytes":5418},"client/src/pages/terms.tsx":{"content":"import { Header } from \"@/components/header-new\";\nimport { Footer } from \"@/components/footer\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { AlertTriangle } from \"lucide-react\";\n\nexport default function Terms() {\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n      \n      <main className=\"flex-1\">\n        <div className=\"max-w-4xl mx-auto px-6 py-12\">\n          <div className=\"space-y-8\">\n            <div className=\"text-center space-y-4\">\n              <h1 className=\"text-4xl font-bold\" data-testid=\"heading-terms\">Terms of Service</h1>\n              <p className=\"text-muted-foreground\">Last Updated: November 11, 2025</p>\n            </div>\n\n            <Alert>\n              <AlertTriangle className=\"h-4 w-4\" />\n              <AlertDescription>\n                Please read these Terms of Service carefully before using Solana Rug Killer. \n                By accessing or using our service, you agree to be bound by these terms.\n              </AlertDescription>\n            </Alert>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>1. Acceptance of Terms</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  By accessing and using Solana Rug Killer (\"Service\", \"we\", \"us\", or \"our\"), you accept \n                  and agree to be bound by the terms and provision of this agreement. If you do not agree \n                  to these Terms of Service, please do not use our Service.\n                </p>\n                <p>\n                  We reserve the right to modify these terms at any time. Continued use of the Service \n                  following any changes shall constitute your consent to such changes.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>2. Description of Service</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  Solana Rug Killer is a token analysis platform that provides information and risk \n                  assessments for Solana SPL tokens. Our Service aggregates data from multiple sources \n                  including:\n                </p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Rugcheck.xyz - Community-driven risk scores</li>\n                  <li>GoPlus Security - Honeypot detection and security scanning</li>\n                  <li>DexScreener - Market data and trading information</li>\n                  <li>Jupiter Aggregator - Price verification and liquidity data</li>\n                  <li>Solana blockchain - On-chain token analysis</li>\n                </ul>\n                <p>\n                  The Service includes web application access, Telegram bot, Discord bot, AI-powered \n                  blacklist, and alpha alert features.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>3. NOT FINANCIAL ADVICE</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <div className=\"bg-destructive/10 border border-destructive p-4 rounded-md\">\n                  <p className=\"font-semibold text-destructive\">IMPORTANT DISCLAIMER:</p>\n                  <p className=\"mt-2\">\n                    Solana Rug Killer provides informational analysis only. Our Service is NOT financial \n                    advice, investment advice, trading advice, or a recommendation to buy, sell, or hold \n                    any cryptocurrency or token.\n                  </p>\n                </div>\n                <p>\n                  You acknowledge and agree that:\n                </p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>All investment decisions are made at your own risk</li>\n                  <li>You are solely responsible for your own investment research and decisions</li>\n                  <li>We do not guarantee the accuracy, completeness, or timeliness of any information</li>\n                  <li>Past performance is not indicative of future results</li>\n                  <li>Cryptocurrency trading involves substantial risk of loss</li>\n                  <li>You should consult with a qualified financial advisor before making investment decisions</li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>4. Risk Score Disclaimer</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  Our risk scoring system (0-100) is an automated analysis based on publicly available \n                  blockchain data and third-party API responses. You acknowledge that:\n                </p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Risk scores are estimates and may contain errors or inaccuracies</li>\n                  <li>A low risk score does not guarantee a token is safe</li>\n                  <li>A high risk score does not mean a token is definitively a scam</li>\n                  <li>Scammers may manipulate on-chain data to appear legitimate</li>\n                  <li>New attack vectors and scam techniques are constantly evolving</li>\n                  <li>Third-party data sources may be unavailable, outdated, or incorrect</li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>5. AI Blacklist and Detection</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  Our AI-powered blacklist system uses automated rules to detect suspicious wallets and \n                  potential scams. You acknowledge that:\n                </p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Automated detection may produce false positives or false negatives</li>\n                  <li>Wallets may be incorrectly flagged as malicious</li>\n                  <li>Malicious wallets may not be detected by our system</li>\n                  <li>The blacklist is not comprehensive and should not be your only due diligence</li>\n                  <li>We are not responsible for any losses resulting from blacklist information</li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>6. Alpha Alerts and Smart Money Tracking</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  Our alpha alert system monitors wallet activity and new token launches. You understand that:\n                </p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Alerts are informational only and not trading recommendations</li>\n                  <li>Following \"smart money\" wallets does not guarantee profits</li>\n                  <li>Tracked wallets may engage in manipulative or illegal activity</li>\n                  <li>New token launches may be scams or rug pulls</li>\n                  <li>By the time you receive an alert, market conditions may have changed</li>\n                  <li>We do not endorse or verify any tokens mentioned in alerts</li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>7. Subscription and Payments</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  Our Service offers multiple subscription tiers (Individual, Group, Lifetime) processed \n                  through Whop and cryptocurrency payments. You agree that:\n                </p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Free trial access is limited to 7 days with no credit card required</li>\n                  <li>Paid subscriptions renew automatically unless cancelled</li>\n                  <li>Cryptocurrency payments are non-refundable once confirmed on-chain</li>\n                  <li>We reserve the right to modify pricing with 30 days notice</li>\n                  <li>Token-gated access (10M+ $ANTIRUG) requires maintaining the minimum balance</li>\n                  <li>Subscription codes are single-use unless otherwise specified</li>\n                  <li>All sales are final unless otherwise required by law</li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>8. User Conduct</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>You agree NOT to:</p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Use the Service for any illegal or unauthorized purpose</li>\n                  <li>Attempt to gain unauthorized access to our systems or data</li>\n                  <li>Abuse, harass, or threaten other users or our staff</li>\n                  <li>Spam bot commands or abuse rate limits</li>\n                  <li>Share subscription credentials or access codes publicly</li>\n                  <li>Reverse engineer, decompile, or disassemble any part of the Service</li>\n                  <li>Use automated tools to scrape or download our data</li>\n                  <li>Resell or redistribute our Service without permission</li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>9. Third-Party Services</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  Our Service integrates with third-party APIs and services (Rugcheck, GoPlus, DexScreener, \n                  Jupiter, Replit Auth, Whop, Telegram, Discord). You acknowledge that:\n                </p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>We are not responsible for the availability or accuracy of third-party services</li>\n                  <li>Third-party services have their own terms of service and privacy policies</li>\n                  <li>We may discontinue integration with third-party services at any time</li>\n                  <li>Service disruptions may occur due to third-party API limitations or outages</li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>10. Intellectual Property</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  The Service and its original content, features, and functionality are owned by Solana \n                  Rug Killer and are protected by international copyright, trademark, patent, trade secret, \n                  and other intellectual property laws.\n                </p>\n                <p>\n                  Our open-source code is licensed under the MIT License. Commercial use requires compliance \n                  with the license terms.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>11. Limitation of Liability</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <div className=\"bg-destructive/10 border border-destructive p-4 rounded-md\">\n                  <p className=\"font-semibold text-destructive\">MAXIMUM LIABILITY:</p>\n                  <p className=\"mt-2\">\n                    TO THE MAXIMUM EXTENT PERMITTED BY LAW, SOLANA RUG KILLER SHALL NOT BE LIABLE FOR ANY \n                    INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, OR ANY LOSS OF \n                    PROFITS OR REVENUES, WHETHER INCURRED DIRECTLY OR INDIRECTLY, OR ANY LOSS OF DATA, \n                    USE, GOODWILL, OR OTHER INTANGIBLE LOSSES RESULTING FROM:\n                  </p>\n                </div>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Your use or inability to use the Service</li>\n                  <li>Any conduct or content of any third party on the Service</li>\n                  <li>Unauthorized access, use, or alteration of your data</li>\n                  <li>Investment losses resulting from information provided by the Service</li>\n                  <li>Rug pulls, scams, or fraudulent tokens you interact with</li>\n                  <li>Errors, inaccuracies, or omissions in our analysis or data</li>\n                </ul>\n                <p>\n                  Our total liability shall not exceed the amount you paid for the Service in the past 12 months.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>12. Warranty Disclaimer</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  THE SERVICE IS PROVIDED ON AN \"AS IS\" AND \"AS AVAILABLE\" BASIS WITHOUT WARRANTIES OF ANY \n                  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO WARRANTIES OF MERCHANTABILITY, \n                  FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT.\n                </p>\n                <p>\n                  We do not warrant that:\n                </p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>The Service will be uninterrupted, timely, secure, or error-free</li>\n                  <li>The information provided will be accurate, reliable, or correct</li>\n                  <li>Any defects or errors will be corrected</li>\n                  <li>The Service will meet your specific requirements</li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>13. Indemnification</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  You agree to indemnify, defend, and hold harmless Solana Rug Killer, its officers, \n                  directors, employees, contractors, and agents from any claims, liabilities, damages, \n                  losses, costs, or expenses (including reasonable attorneys' fees) arising from:\n                </p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Your use or misuse of the Service</li>\n                  <li>Your violation of these Terms of Service</li>\n                  <li>Your violation of any rights of another party</li>\n                  <li>Your violation of any applicable laws or regulations</li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>14. Termination</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  We reserve the right to terminate or suspend your account and access to the Service \n                  immediately, without prior notice or liability, for any reason, including:\n                </p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Breach of these Terms of Service</li>\n                  <li>Fraudulent, abusive, or illegal activity</li>\n                  <li>Extended non-payment of subscription fees</li>\n                  <li>Request by law enforcement or government agency</li>\n                </ul>\n                <p>\n                  Upon termination, your right to use the Service will cease immediately.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>15. Governing Law</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  These Terms shall be governed by and construed in accordance with the laws of the \n                  jurisdiction in which Solana Rug Killer operates, without regard to its conflict \n                  of law provisions.\n                </p>\n                <p>\n                  Any disputes arising from these Terms or the Service shall be resolved through binding \n                  arbitration in accordance with the rules of the American Arbitration Association.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>16. Changes to Terms</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  We reserve the right to modify or replace these Terms at any time. If a revision is \n                  material, we will provide at least 30 days notice prior to any new terms taking effect.\n                </p>\n                <p>\n                  Continued use of the Service after changes become effective constitutes acceptance of \n                  the revised Terms.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>17. Contact Information</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  If you have any questions about these Terms of Service, please contact us:\n                </p>\n                <ul className=\"space-y-2\">\n                  <li><strong>Email:</strong> legal@yourwebsite.com</li>\n                  <li><strong>Discord:</strong> Join our community server</li>\n                  <li><strong>Telegram:</strong> Contact via our bot</li>\n                  <li><strong>GitHub:</strong> https://github.com/drixindustries/rugkillleronsol</li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Alert>\n              <AlertDescription>\n                By using Solana Rug Killer, you acknowledge that you have read, understood, and agree to \n                be bound by these Terms of Service. If you do not agree, please discontinue use of the \n                Service immediately.\n              </AlertDescription>\n            </Alert>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":19176},"client/src/components/header-new.tsx":{"content":"import { Shield, Plus, Wallet, Check, User, LogOut, Settings, Menu } from \"lucide-react\";\nimport { SiTelegram, SiDiscord, SiGithub } from \"react-icons/si\";\nimport { Button } from \"@/components/ui/button\";\nimport { Sheet, SheetContent, SheetTrigger, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport {\n  NavigationMenu,\n  NavigationMenuContent,\n  NavigationMenuItem,\n  NavigationMenuLink,\n  NavigationMenuList,\n  NavigationMenuTrigger,\n} from \"@/components/ui/navigation-menu\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Link, useLocation } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useWallet } from \"@/hooks/useWallet\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport type { User as UserType } from \"@shared/schema\";\nimport { navigationConfig } from \"./navigation-config\";\nimport { useState } from \"react\";\n\ninterface HeaderProps {\n  onNewAnalysis?: () => void;\n}\n\ninterface BotInviteLinks {\n  telegram?: string;\n  discord?: string;\n  message?: string;\n}\n\nexport function Header({ onNewAnalysis }: HeaderProps) {\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const { data: botLinks } = useQuery<BotInviteLinks>({\n    queryKey: ['/api/bot/invite-links'],\n    retry: false,\n    refetchOnWindowFocus: false,\n  });\n  \n  const { walletAddress, connection, isConnecting, connectWallet, disconnectWallet } = useWallet();\n  const { user } = useAuth();\n\n  return (\n    <header className=\"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n      <div className=\"max-w-7xl mx-auto px-4 lg:px-6\">\n        {/* Main Navigation Bar */}\n        <div className=\"flex h-14 items-center justify-between\">\n          {/* Left: Logo */}\n          <div className=\"flex items-center gap-6\">\n            <Link href=\"/\" className=\"flex items-center gap-2 hover:opacity-80 transition-opacity\">\n              <Shield className=\"h-6 w-6 text-primary\" />\n              <span className=\"font-bold text-lg hidden sm:inline\">Solana Rug Killer</span>\n              <span className=\"font-bold text-lg sm:hidden\">SRK</span>\n            </Link>\n\n            {/* Desktop Navigation Menu */}\n            <div className=\"hidden lg:block\">\n              <NavigationMenu>\n                <NavigationMenuList>\n                  {navigationConfig.map((section) => (\n                    <NavigationMenuItem key={section.title}>\n                      <NavigationMenuTrigger className=\"text-sm\">\n                        {section.title}\n                      </NavigationMenuTrigger>\n                      <NavigationMenuContent>\n                        <ul className=\"grid w-[400px] gap-3 p-4\">\n                          {section.items.map((item) => (\n                            <li key={item.href}>\n                              <NavigationMenuLink asChild>\n                                <Link \n                                  href={item.href}\n                                  className=\"block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground\"\n                                  data-testid={`nav-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}\n                                >\n                                  <div className=\"text-sm font-medium leading-none\">{item.title}</div>\n                                  {item.description && (\n                                    <p className=\"line-clamp-2 text-sm leading-snug text-muted-foreground\">\n                                      {item.description}\n                                    </p>\n                                  )}\n                                </Link>\n                              </NavigationMenuLink>\n                            </li>\n                          ))}\n                        </ul>\n                      </NavigationMenuContent>\n                    </NavigationMenuItem>\n                  ))}\n                </NavigationMenuList>\n              </NavigationMenu>\n            </div>\n          </div>\n\n          {/* Right: Actions */}\n          <div className=\"flex items-center gap-2\">\n            {/* Social Links - Hidden on mobile to reduce clutter */}\n            <Button \n              variant=\"ghost\"\n              size=\"icon\"\n              asChild\n              className=\"hidden md:inline-flex min-h-[44px] min-w-[44px]\"\n              data-testid=\"button-github\"\n            >\n              <a href=\"https://github.com/drixindustries/rugkillleronsol\" target=\"_blank\" rel=\"noopener noreferrer\" title=\"View on GitHub\" aria-label=\"View project on GitHub\">\n                <SiGithub className=\"h-5 w-5\" />\n              </a>\n            </Button>\n            \n            {botLinks?.telegram && (\n              <Button \n                variant=\"ghost\"\n                size=\"icon\"\n                asChild\n                className=\"hidden md:inline-flex min-h-[44px] min-w-[44px]\"\n                data-testid=\"button-telegram-bot\"\n              >\n                <a href={botLinks.telegram} target=\"_blank\" rel=\"noopener noreferrer\" title=\"Join Telegram Bot\" aria-label=\"Join Telegram bot\">\n                  <SiTelegram className=\"h-5 w-5\" />\n                </a>\n              </Button>\n            )}\n            \n            {botLinks?.discord && (\n              <Button \n                variant=\"ghost\"\n                size=\"icon\"\n                asChild\n                className=\"hidden md:inline-flex min-h-[44px] min-w-[44px]\"\n                data-testid=\"button-discord-bot\"\n              >\n                <a href={botLinks.discord} target=\"_blank\" rel=\"noopener noreferrer\" title=\"Join Discord Bot\" aria-label=\"Join Discord bot\">\n                  <SiDiscord className=\"h-5 w-5\" />\n                </a>\n              </Button>\n            )}\n\n            {/* Wallet Connect */}\n            {walletAddress ? (\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button \n                    variant=\"outline\"\n                    size=\"sm\"\n                    className=\"hidden md:inline-flex\"\n                    data-testid=\"button-wallet-menu\"\n                  >\n                    {connection?.isEligible && (\n                      <Check className=\"h-4 w-4 mr-1 text-green-500\" />\n                    )}\n                    <Wallet className=\"h-4 w-4 mr-1\" />\n                    {walletAddress.slice(0, 4)}...{walletAddress.slice(-4)}\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\">\n                  <DropdownMenuLabel>Wallet Connected</DropdownMenuLabel>\n                  <DropdownMenuSeparator />\n                  <div className=\"px-2 py-1.5 text-sm\">\n                    <p className=\"font-mono text-xs text-muted-foreground\">\n                      {walletAddress.slice(0, 16)}...\n                    </p>\n                    {connection?.tokenBalance !== undefined && (\n                      <p className=\"text-xs mt-1\">\n                        Balance: {connection.tokenBalance.toLocaleString()} $ANTIRUG\n                      </p>\n                    )}\n                    {connection?.isEligible && (\n                      <p className=\"text-xs text-green-500 mt-1\">\n                        âœ“ Premium Access Active\n                      </p>\n                    )}\n                  </div>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem onClick={disconnectWallet}>\n                    Disconnect\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            ) : (\n              <Button \n                variant=\"outline\"\n                size=\"sm\"\n                onClick={connectWallet}\n                disabled={isConnecting}\n                className=\"hidden md:inline-flex\"\n                data-testid=\"button-connect-wallet\"\n              >\n                <Wallet className=\"h-4 w-4 mr-1\" />\n                {isConnecting ? \"Connecting...\" : \"Connect\"}\n              </Button>\n            )}\n\n            {/* New Analysis Button */}\n            {onNewAnalysis && (\n              <Button \n                onClick={onNewAnalysis}\n                size=\"sm\"\n                className=\"hidden md:inline-flex\"\n                data-testid=\"button-new-analysis\"\n              >\n                <Plus className=\"h-4 w-4 mr-1\" />\n                New Scan\n              </Button>\n            )}\n\n            {/* User Menu */}\n            {user && <UserMenu user={user as UserType} />}\n\n            {/* Mobile Menu Button */}\n            <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\n              <SheetTrigger asChild>\n                <Button \n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"lg:hidden\"\n                  data-testid=\"button-mobile-menu\"\n                  aria-label=\"Open menu\"\n                >\n                  <Menu className=\"h-5 w-5\" />\n                </Button>\n              </SheetTrigger>\n              <SheetContent side=\"right\" className=\"w-[300px] sm:w-[400px]\">\n                <SheetHeader>\n                  <SheetTitle>Menu</SheetTitle>\n                </SheetHeader>\n                <div className=\"mt-6 flex flex-col space-y-6\">\n                  {navigationConfig.map((section) => (\n                    <div key={section.title} className=\"space-y-3\">\n                      <h3 className=\"font-semibold text-sm text-muted-foreground\">{section.title}</h3>\n                      <div className=\"space-y-2\">\n                        {section.items.map((item) => (\n                          <Link \n                            key={item.href} \n                            href={item.href}\n                            className=\"block rounded-md p-2 hover:bg-accent transition-colors\"\n                            onClick={() => setMobileMenuOpen(false)}\n                            data-testid={`mobile-nav-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}\n                          >\n                            <div className=\"font-medium text-sm\">{item.title}</div>\n                            {item.description && (\n                              <p className=\"text-xs text-muted-foreground mt-1\">{item.description}</p>\n                            )}\n                          </Link>\n                        ))}\n                      </div>\n                    </div>\n                  ))}\n\n                  {/* Mobile Actions */}\n                  <div className=\"space-y-2 pt-4 border-t\">\n                    {walletAddress ? (\n                      <Button \n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"w-full justify-start\"\n                        onClick={disconnectWallet}\n                      >\n                        <Wallet className=\"h-4 w-4 mr-2\" />\n                        Disconnect Wallet\n                      </Button>\n                    ) : (\n                      <Button \n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"w-full justify-start\"\n                        onClick={connectWallet}\n                        disabled={isConnecting}\n                      >\n                        <Wallet className=\"h-4 w-4 mr-2\" />\n                        Connect Wallet\n                      </Button>\n                    )}\n                    \n                    {onNewAnalysis && (\n                      <Button \n                        onClick={() => {\n                          onNewAnalysis();\n                          setMobileMenuOpen(false);\n                        }}\n                        size=\"sm\"\n                        className=\"w-full justify-start\"\n                      >\n                        <Plus className=\"h-4 w-4 mr-2\" />\n                        New Scan\n                      </Button>\n                    )}\n                  </div>\n\n                  {/* Social Links Mobile */}\n                  <div className=\"flex gap-2 pt-4 border-t\">\n                    <Button \n                      variant=\"outline\"\n                      size=\"icon\"\n                      asChild\n                    >\n                      <a href=\"https://github.com/drixindustries/rugkillleronsol\" target=\"_blank\" rel=\"noopener noreferrer\" title=\"GitHub\" aria-label=\"View project on GitHub\">\n                        <SiGithub className=\"h-4 w-4\" />\n                      </a>\n                    </Button>\n                    {botLinks?.telegram && (\n                      <Button \n                        variant=\"outline\"\n                        size=\"icon\"\n                        asChild\n                      >\n                        <a href={botLinks.telegram} target=\"_blank\" rel=\"noopener noreferrer\" title=\"Telegram\" aria-label=\"Join Telegram bot\">\n                          <SiTelegram className=\"h-4 w-4\" />\n                        </a>\n                      </Button>\n                    )}\n                    {botLinks?.discord && (\n                      <Button \n                        variant=\"outline\"\n                        size=\"icon\"\n                        asChild\n                      >\n                        <a href={botLinks.discord} target=\"_blank\" rel=\"noopener noreferrer\" title=\"Discord\" aria-label=\"Join Discord bot\">\n                          <SiDiscord className=\"h-4 w-4\" />\n                        </a>\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              </SheetContent>\n            </Sheet>\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n}\n\ninterface UserMenuProps {\n  user: UserType;\n}\n\nfunction UserMenu({ user }: UserMenuProps) {\n  const [, setLocation] = useLocation();\n  const { data: adminCheck } = useQuery<{ isAdmin: boolean }>({\n    queryKey: ['/api/admin/check'],\n    retry: false,\n  });\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button \n          variant=\"ghost\"\n          size=\"sm\"\n          data-testid=\"button-user-menu\"\n        >\n          <User className=\"h-4 w-4 mr-1\" />\n          <span className=\"hidden sm:inline\">{user.email?.split('@')[0] || 'Account'}</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\">\n        <DropdownMenuLabel>My Account</DropdownMenuLabel>\n        <DropdownMenuSeparator />\n        <div className=\"px-2 py-1.5 text-sm\">\n          <p className=\"text-xs text-muted-foreground\">\n            {user.email}\n          </p>\n        </div>\n        <DropdownMenuSeparator />\n        {adminCheck?.isAdmin && (\n          <>\n            <DropdownMenuItem onClick={() => setLocation('/admin')}>\n              <Settings className=\"h-4 w-4 mr-2\" />\n              Admin Dashboard\n            </DropdownMenuItem>\n            <DropdownMenuSeparator />\n          </>\n        )}\n        <DropdownMenuItem \n          onClick={() => window.location.href = '/api/logout'}\n          data-testid=\"button-logout\"\n        >\n          <LogOut className=\"h-4 w-4 mr-2\" />\n          Log Out\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","size_bytes":15419},"BOT_TESTING_GUIDE.md":{"content":"# Bot Testing Guide\n\n## âœ… Both Bots Are Live!\n\n### Telegram Bot: @RugKillerAlphaBot\n- **Status**: âœ… Running\n- **Username**: `@RugKillerAlphaBot`\n- **Bot ID**: 8506172883\n\n### Discord Bot: RugKillerAlphaBot#4069\n- **Status**: âœ… Running\n- **Application ID**: 1437952073319714879\n- **Slash Commands**: âœ… Registered\n\n---\n\n## ðŸ§ª Testing Commands\n\n### Test Token Addresses\n\nUse the official **$ANTIRUG** contract address for testing:\n```\n2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\n```\n\nOther popular Solana tokens for testing:\n- **SOL**: `So11111111111111111111111111111111111111112`\n- **USDC**: `EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v`\n- **Bonk**: `DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263`\n\n---\n\n## Telegram Bot Commands\n\n### `/execute <token_address>`\nFull 52-metric rug detection scan with:\n- Risk score (0-100)\n- Mint & freeze authority\n- Top holder concentration\n- Liquidity analysis\n- Red flags\n\n**Test:**\n```\n/execute 2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\n```\n\n### `/first20 <token_address>`\nDetailed top 20 holder analysis with:\n- Holder addresses\n- Token balances\n- Percentage distribution\n- Concentration metrics\n\n**Test:**\n```\n/first20 2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\n```\n\n### `/devtorture <token_address>`\nDeveloper wallet history tracking:\n- Previous launches\n- Success/failure rate\n- Rug pull patterns\n\n**Test:**\n```\n/devtorture 2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\n```\n\n### `/blacklist <wallet_address>`\nCheck if wallet is flagged in blacklist:\n- Severity score\n- Flag reasons\n- Evidence\n\n**Test:**\n```\n/blacklist 2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\n```\n\n### `/help`\nDisplay all available commands\n\n### Quick Analysis (No Command)\nJust paste a Solana token address (32-44 characters) and the bot will auto-analyze it!\n\n**Test:**\n```\n2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\n```\n\n---\n\n## Discord Bot Commands\n\n### `/execute token_address:<address>`\nSame as Telegram, but with rich Discord embeds:\n- Color-coded by risk level\n- Embedded thumbnails\n- Interactive buttons\n\n**Test:**\n```\n/execute token_address:2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\n```\n\n### `/first20 token_address:<address>`\nHolder analysis with Discord formatting\n\n**Test:**\n```\n/first20 token_address:2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\n```\n\n### `/devtorture token_address:<address>`\nDeveloper history with Discord rich embeds\n\n**Test:**\n```\n/devtorture token_address:2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\n```\n\n### `/blacklist wallet_address:<address>`\nBlacklist check with Discord formatting\n\n**Test:**\n```\n/blacklist wallet_address:2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\n```\n\n---\n\n## Expected Bot Behaviors\n\n### âœ… Successful Analysis\n- Response within 2-5 seconds\n- Color-coded risk indicators (GREEN/YELLOW/ORANGE/RED)\n- Detailed metrics and holder data\n- Links to external resources (Rugcheck, DexScreener, BubbleMaps)\n\n### âš ï¸ Rate Limiting\nIf you scan too quickly:\n- **Telegram**: \"â±ï¸ Please wait before scanning again (rate limited)\"\n- **Discord**: Deferred reply with rate limit message\n\n### âŒ Invalid Address\nIf you provide an invalid address:\n- **Telegram**: \"âŒ Invalid token address. Please provide a valid Solana address.\"\n- **Discord**: \"âŒ Error executing command. Please check the address and try again.\"\n\n### ðŸ” No Data Found\nIf token doesn't exist or has no data:\n- Partial analysis with available information\n- Warning messages about missing data sources\n\n---\n\n## Testing Checklist\n\n### Telegram Bot Tests\n- [ ] `/help` command shows all commands\n- [ ] `/execute` with $ANTIRUG address returns analysis\n- [ ] `/first20` shows top holders\n- [ ] `/devtorture` shows developer history\n- [ ] `/blacklist` checks wallet flags\n- [ ] Pasting raw address triggers auto-analysis\n- [ ] Invalid address shows error message\n- [ ] Bot responds in under 5 seconds\n- [ ] Markdown formatting displays correctly\n- [ ] External links are clickable\n\n### Discord Bot Tests\n- [ ] Slash commands appear in command menu\n- [ ] `/execute` returns color-coded embed\n- [ ] `/first20` shows holder breakdown\n- [ ] `/devtorture` displays dev history\n- [ ] `/blacklist` shows flags with severity\n- [ ] Embeds have proper colors based on risk\n- [ ] Timestamps appear on all responses\n- [ ] Links open correctly\n- [ ] Bot handles rate limiting gracefully\n- [ ] Error messages are user-friendly\n\n---\n\n## Troubleshooting\n\n### Telegram Bot Not Responding\n\n1. **Check bot is running**:\n   ```bash\n   curl -s \"https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/getMe\"\n   ```\n   Should return: `{\"ok\":true,\"result\":{\"username\":\"RugKillerAlphaBot\"...}}`\n\n2. **Start a chat**: Send `/start` to @RugKillerAlphaBot\n\n3. **Check logs**: Look for \"âœ… Telegram bot started successfully\" in console\n\n### Discord Bot Not Responding\n\n1. **Check bot is online**: Green status in Discord server members list\n\n2. **Verify permissions**:\n   - Send Messages âœ…\n   - Embed Links âœ…\n   - Use Slash Commands âœ…\n\n3. **Re-invite bot**:\n   ```\n   https://discord.com/api/oauth2/authorize?client_id=1437952073319714879&permissions=277025770496&scope=bot%20applications.commands\n   ```\n\n4. **Check logs**: Look for \"âœ… Discord bot logged in as RugKillerAlphaBot#4069\"\n\n### Commands Not Working\n\n1. **Wait for propagation**: Slash commands take 1-2 minutes to register globally\n2. **Restart Discord**: Close and reopen the Discord app\n3. **Check command syntax**: Make sure you're using the correct format\n4. **Verify subscription**: Some commands may require active subscription\n\n---\n\n## API Integration Testing\n\nThe bots are integrated with the following external APIs. You can verify they're working:\n\n### Rugcheck.xyz\n- Provides: Risk scores, liquidity analysis\n- Test: `/execute` should show RugCheck score and link\n\n### GoPlus Security\n- Provides: Honeypot detection, security flags\n- Test: `/execute` should show security warnings if any\n\n### DexScreener\n- Provides: Market data, price, volume\n- Test: Links to DexScreener should open correctly\n\n### BubbleMaps\n- Provides: Holder visualization\n- Test: BubbleMaps link should show holder distribution\n\n---\n\n## Quality Protection Metrics\n\n### What to Verify in Each Scan\n\n**Authority Checks:**\n- âœ… Mint authority revoked = SAFER\n- âŒ Mint authority active = CAN INFLATE SUPPLY\n- âœ… Freeze authority revoked = SAFER\n- âŒ Freeze authority active = CAN LOCK WALLETS\n\n**Holder Distribution:**\n- âœ… Top 10 < 30% = HEALTHY\n- âš ï¸ Top 10 30-50% = MODERATE RISK\n- âŒ Top 10 > 50% = HIGH CONCENTRATION RISK\n\n**Liquidity Pool:**\n- âœ… 100% burned = LOCKED FOREVER\n- âœ… 90-99% burned = MOSTLY SAFE\n- âš ï¸ 50-90% burned = MODERATE RISK\n- âŒ < 50% burned = RUG PULL RISK\n\n**Red Flags:**\n- Zero or very few red flags = SAFER\n- Multiple red flags = INVESTIGATE FURTHER\n- Critical red flags (honeypot, high sell tax) = AVOID\n\n---\n\n## Success Criteria\n\nYour bots are working correctly if:\n\n1. âœ… Both bots respond to commands within 5 seconds\n2. âœ… Risk scores are calculated and displayed (0-100)\n3. âœ… Color coding matches risk levels\n4. âœ… External links work and open correct pages\n5. âœ… Error handling is graceful and informative\n6. âœ… Rate limiting prevents spam\n7. âœ… Markdown/embeds format correctly\n8. âœ… All 4 main commands work on both platforms\n9. âœ… Help command provides clear guidance\n10. âœ… Auto-detection works for pasted addresses (Telegram)\n\n---\n\n## Legal & Compliance\n\n**Bot Links:**\n- **Terms of Service**: https://yourwebsite.com/terms\n- **Privacy Policy**: https://yourwebsite.com/privacy\n\nBots automatically reference these legal documents in their help commands.\n\n---\n\n## Support\n\nIf you encounter issues:\n- **GitHub**: https://github.com/drixindustries/rugkillleronsol/issues\n- **Discord Server**: Join for community support\n- **Email**: support@yourwebsite.com\n\n---\n\n**Happy Testing! ðŸŽ‰**\n\nRemember: These bots are designed to protect users from rug pulls. Every scan helps make the Solana ecosystem safer!\n","size_bytes":7939},".github/pull_request_template.md":{"content":"# Pull Request\n\n## Description\n<!-- Provide a detailed description of your changes -->\n\n## Type of Change\n<!-- Mark the relevant option with an 'x' -->\n\n- [ ] Bug fix (non-breaking change which fixes an issue)\n- [ ] New feature (non-breaking change which adds functionality)\n- [ ] Breaking change (fix or feature that would cause existing functionality to not work as expected)\n- [ ] Documentation update\n- [ ] Performance improvement\n- [ ] Code refactoring\n- [ ] Dependency update\n\n## Related Issue\n<!-- Link to the issue this PR addresses -->\nCloses #(issue number)\n\n## Changes Made\n<!-- List the specific changes you made -->\n\n- \n- \n- \n\n## Testing\n<!-- Describe the tests you ran and how to reproduce them -->\n\n- [ ] I have tested this change locally\n- [ ] I have added tests that prove my fix is effective or that my feature works\n- [ ] All new and existing tests pass\n- [ ] I have tested on multiple browsers (if frontend change)\n\n### Test Configuration:\n- Node.js version:\n- OS:\n- Browser (if applicable):\n\n## Screenshots (if applicable)\n<!-- Add screenshots to help explain your changes -->\n\n## Checklist\n<!-- Mark completed items with an 'x' -->\n\n- [ ] My code follows the style guidelines of this project\n- [ ] I have performed a self-review of my own code\n- [ ] I have commented my code, particularly in hard-to-understand areas\n- [ ] I have made corresponding changes to the documentation\n- [ ] My changes generate no new warnings or errors\n- [ ] I have checked my code and corrected any misspellings\n- [ ] I have updated the README.md if needed\n- [ ] I have updated the CHANGELOG.md if needed\n\n## Additional Notes\n<!-- Add any additional notes or context about the PR -->\n","size_bytes":1684},"docs/API.md":{"content":"# API Documentation\n\nThis document describes the REST API endpoints available in Solana Rug Killer.\n\n## Base URL\n\n```\nhttp://localhost:5000/api\n```\n\n## Authentication\n\nMost endpoints require authentication via session cookies. Users must be logged in through Replit Auth.\n\n### Login\n```http\nGET /api/login\n```\n\nRedirects to Replit Auth login page.\n\n### Logout\n```http\nGET /api/logout\n```\n\nLogs out the current user and clears session.\n\n### Get Current User\n```http\nGET /api/user\n```\n\nReturns the currently authenticated user.\n\n**Response:**\n```json\n{\n  \"id\": \"user-id\",\n  \"email\": \"user@example.com\",\n  \"replitUserId\": \"replit-user-id\",\n  \"subscriptionTier\": \"individual\",\n  \"subscriptionStatus\": \"active\"\n}\n```\n\n## Token Analysis\n\n### Analyze Token\n```http\nPOST /api/analyze\n```\n\nPerforms comprehensive analysis of a Solana token.\n\n**Request Body:**\n```json\n{\n  \"tokenAddress\": \"2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\"\n}\n```\n\n**Response:**\n```json\n{\n  \"tokenAddress\": \"2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt\",\n  \"riskScore\": 45,\n  \"riskLevel\": \"MEDIUM\",\n  \"analyzedAt\": 1699564800000,\n  \"metadata\": {\n    \"name\": \"Solana Rug Killer\",\n    \"symbol\": \"ANTIRUG\",\n    \"decimals\": 9,\n    \"supply\": 1000000000\n  },\n  \"mintAuthority\": {\n    \"hasAuthority\": false,\n    \"isRevoked\": true\n  },\n  \"freezeAuthority\": {\n    \"hasAuthority\": false,\n    \"isRevoked\": true\n  },\n  \"topHolders\": [...],\n  \"liquidityPool\": {...},\n  \"rugcheckData\": {...},\n  \"goplusData\": {...},\n  \"dexscreenerData\": {...}\n}\n```\n\n## Subscription Management\n\n### Get Subscription Status\n```http\nGET /api/subscription/status\n```\n\nReturns the current user's subscription status.\n\n**Response:**\n```json\n{\n  \"tier\": \"individual\",\n  \"status\": \"active\",\n  \"validUntil\": \"2024-12-31T23:59:59Z\",\n  \"features\": [\"unlimited_scans\", \"bot_access\"]\n}\n```\n\n### Create Checkout Session\n```http\nPOST /api/subscription/checkout\n```\n\nCreates a Stripe checkout session for subscription.\n\n**Request Body:**\n```json\n{\n  \"tier\": \"individual\"\n}\n```\n\n**Response:**\n```json\n{\n  \"sessionId\": \"cs_test_123456\",\n  \"url\": \"https://checkout.stripe.com/...\"\n}\n```\n\n## Wallet Connections\n\n### Connect Wallet\n```http\nPOST /api/wallet/connect\n```\n\nConnects a Solana wallet to the user's account.\n\n**Request Body:**\n```json\n{\n  \"walletAddress\": \"AbCd1234EfGh5678...\",\n  \"signature\": \"base58-encoded-signature\",\n  \"message\": \"message-that-was-signed\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"walletAddress\": \"AbCd1234EfGh5678...\",\n  \"tokenBalance\": 15000000,\n  \"isEligible\": true\n}\n```\n\n### Get Wallet Status\n```http\nGET /api/wallet/status\n```\n\nReturns the status of connected wallet.\n\n**Response:**\n```json\n{\n  \"connected\": true,\n  \"walletAddress\": \"AbCd1234EfGh5678...\",\n  \"tokenBalance\": 15000000,\n  \"isEligible\": true,\n  \"lastChecked\": 1699564800000\n}\n```\n\n## Blacklist\n\n### Get Blacklisted Wallets\n```http\nGET /api/blacklist\n```\n\nReturns list of blacklisted wallets.\n\n**Query Parameters:**\n- `limit` - Number of results (default: 100)\n- `offset` - Pagination offset (default: 0)\n- `severity` - Filter by severity (min value)\n\n**Response:**\n```json\n{\n  \"wallets\": [\n    {\n      \"walletAddress\": \"BadActor123...\",\n      \"labelType\": \"honeypot_creator\",\n      \"severity\": 90,\n      \"evidence\": \"Created token with 99% sell tax\",\n      \"source\": \"rules_engine\",\n      \"createdAt\": 1699564800000\n    }\n  ],\n  \"total\": 1234,\n  \"hasMore\": true\n}\n```\n\n### Check Wallet\n```http\nGET /api/blacklist/:walletAddress\n```\n\nChecks if a specific wallet is blacklisted.\n\n**Response:**\n```json\n{\n  \"isBlacklisted\": true,\n  \"flags\": [\n    {\n      \"labelType\": \"honeypot_creator\",\n      \"severity\": 90,\n      \"evidence\": \"Created token with 99% sell tax\",\n      \"createdAt\": 1699564800000\n    }\n  ]\n}\n```\n\n## Subscription Codes\n\n### Redeem Code\n```http\nPOST /api/codes/redeem\n```\n\nRedeems a subscription code for lifetime access.\n\n**Request Body:**\n```json\n{\n  \"code\": \"LIFETIME-ABC-123\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Code redeemed successfully\",\n  \"tier\": \"lifetime\",\n  \"expiresAt\": null\n}\n```\n\n## Bot Management\n\n### Get Bot Invite Links\n```http\nGET /api/bot/invite-links\n```\n\nReturns invite links for Telegram and Discord bots.\n\n**Response:**\n```json\n{\n  \"telegram\": \"https://t.me/YourBot\",\n  \"discord\": \"https://discord.com/api/oauth2/authorize?...\"\n}\n```\n\n## Admin Endpoints\n\nAll admin endpoints require the user's email to be in the `ADMIN_EMAILS` environment variable.\n\n### Check Admin Status\n```http\nGET /api/admin/check\n```\n\n**Response:**\n```json\n{\n  \"isAdmin\": true\n}\n```\n\n### Generate Subscription Code\n```http\nPOST /api/admin/codes/generate\n```\n\n**Request Body:**\n```json\n{\n  \"tier\": \"lifetime\",\n  \"maxUses\": 1,\n  \"expiresAt\": \"2024-12-31T23:59:59Z\",\n  \"description\": \"Giveaway winner\"\n}\n```\n\n**Response:**\n```json\n{\n  \"code\": \"LIFETIME-XYZ-789\",\n  \"tier\": \"lifetime\",\n  \"maxUses\": 1,\n  \"currentUses\": 0,\n  \"expiresAt\": \"2024-12-31T23:59:59Z\"\n}\n```\n\n### Creator Wallet Balance\n```http\nGET /api/admin/wallet/balance\n```\n\nReturns the balance of the creator wallet.\n\n**Response:**\n```json\n{\n  \"balance\": 1.5,\n  \"publicKey\": \"CreatorWallet123...\"\n}\n```\n\n## Error Responses\n\nAll endpoints return errors in the following format:\n\n```json\n{\n  \"error\": \"Error message describing what went wrong\"\n}\n```\n\n### Common Status Codes\n\n- `200` - Success\n- `201` - Created\n- `400` - Bad Request (invalid input)\n- `401` - Unauthorized (not logged in)\n- `403` - Forbidden (insufficient permissions)\n- `404` - Not Found\n- `429` - Too Many Requests (rate limited)\n- `500` - Internal Server Error\n\n## Rate Limiting\n\nAPI endpoints are rate-limited based on subscription tier:\n\n- **Free Tier**: 10 requests per minute\n- **Individual**: 60 requests per minute\n- **Group**: 120 requests per minute\n- **Lifetime**: 200 requests per minute\n\n## WebSocket Endpoints\n\n### Alpha Alerts\n```\nws://localhost:5000/api/ws/alerts\n```\n\nSubscribes to real-time alpha alerts (smart money transactions, new launches, quality gems).\n\n**Message Format:**\n```json\n{\n  \"type\": \"smart_money_buy\",\n  \"wallet\": \"SmartMoney123...\",\n  \"token\": \"NewToken456...\",\n  \"amount\": 100,\n  \"timestamp\": 1699564800000\n}\n```\n\n## SDK Examples\n\n### JavaScript/TypeScript\n```typescript\n// Analyze a token\nconst response = await fetch('/api/analyze', {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify({ \n    tokenAddress: '2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt' \n  })\n});\nconst analysis = await response.json();\n```\n\n### Python\n```python\nimport requests\n\n# Analyze a token\nresponse = requests.post(\n    'http://localhost:5000/api/analyze',\n    json={'tokenAddress': '2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt'}\n)\nanalysis = response.json()\n```\n\n## Support\n\nFor API support:\n- GitHub Issues: [Create an issue](https://github.com/drixindustries/rugkillleronsol/issues)\n- Discord: [Join our server](https://discord.gg/yourinvite)\n- Email: support@yourwebsite.com\n","size_bytes":6927},"README.md":{"content":"# ðŸ›¡ï¸ Solana Rug Killer\n\n![License](https://img.shields.io/badge/license-MIT-blue.svg)\n![Solana](https://img.shields.io/badge/Solana-14F195?style=flat&logo=solana&logoColor=white)\n![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=flat&logo=typescript&logoColor=white)\n\n**Protect yourself from Solana rug pulls with real-time analysis and AI-powered scam detection.**\n\nSolana Rug Killer is a comprehensive web application that analyzes Solana SPL tokens for potential rug pull risks. It provides real-time alerts for new PumpFun launches, smart money wallet activity, and automated scam detection powered by AI.\n\n## ðŸŒŸ Features\n\n### Core Analysis\n- **52-Metric Rug Detection** - Comprehensive token analysis with risk scoring (0-100)\n- **Multi-Source Intelligence** - Integrates Rugcheck, GoPlus Security, DexScreener, and Jupiter\n- **Authority Checks** - Detects mint/freeze authority status and risks\n- **Holder Analysis** - Tracks top 20 holders and concentration metrics\n- **Liquidity Assessment** - Real-time liquidity pool status and health checks\n\n### AI-Powered Blacklist System\n- **6 Automated Detection Rules** - Identifies honeypots, high sell taxes, suspicious authorities, wash trading, coordinated pumps, and more\n- **52+ Risk Metrics** - Comprehensive analysis of scam patterns\n- **Severity Scoring** - Weighted risk assessment with evidence tracking\n- **Automatic Flagging** - Real-time wallet blacklist updates\n\n### Alpha Alerts (Premium)\n- **Smart Money Tracking** - Monitor influential wallet activity from configurable watchlists\n- **PumpFun WebSocket** - Real-time new token launch notifications\n- **Quality Filtering** - Auto-filters by RugCheck score, honeypot status, and liquidity\n- **Discord/Telegram Alerts** - Instant notifications to your channels\n\n### Bot Integration\n- **Telegram Bot** - Full command suite with instant token analysis\n- **Discord Bot** - Rich embeds with color-coded risk levels\n- **Available Commands**:\n  - `/execute [token]` - Full 52-metric rug detection scan\n  - `/first20 [token]` - Top 20 holder concentration analysis\n  - `/devtorture [token]` - Developer wallet history tracking\n  - `/blacklist [wallet]` - Check if wallet is flagged for scams\n\n### Access Control\n- **Whop Integration** - Subscription management with Individual, Group, and Lifetime tiers\n- **Token-Gated Access** - Hold 10M+ $ANTIRUG tokens for lifetime access\n- **Crypto Payments** - Solana-only with 6 confirmations and audit trails\n- **Subscription Codes** - Redeemable lifetime access codes with transaction safety\n\n## ðŸš€ Official Token\n\n**Solana Rug Killer ($ANTIRUG)**\n- **Contract Address**: `2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt`\n- **Blockchain**: Solana\n- **Deployment**: Launched via Pump.fun platform\n\n## ðŸ“‹ Prerequisites\n\n- Node.js 18+ and npm\n- PostgreSQL database (Neon recommended)\n- Solana RPC endpoint (Helius, QuickNode, or Alchemy recommended)\n- Whop account for subscription management\n- Optional: Telegram Bot Token and Discord Bot Token\n\n## âš™ï¸ Installation\n\n1. **Clone the repository**\n```bash\ngit clone https://github.com/drixindustries/rugkillleronsol.git\ncd rugkillleronsol\n```\n\n2. **Install dependencies**\n```bash\nnpm install\n```\n\n3. **Set up environment variables**\n\nCreate a `.env` file in the root directory with the following variables:\n\n```env\n# Database\nDATABASE_URL=postgresql://user:password@host:5432/dbname\n\n# Solana RPC\nSOLANA_RPC_URL=https://your-rpc-endpoint.com\n\n# Session Secret\nSESSION_SECRET=your-random-secret-here\n\n# Whop Integration\nWHOP_API_KEY=your-whop-api-key\nWHOP_APP_ID=your-whop-app-id\nWHOP_COMPANY_ID=your-whop-company-id\nWHOP_PLAN_ID_INDIVIDUAL=plan-id-for-individual\nWHOP_PLAN_ID_GROUP=plan-id-for-group\n\n# Stripe (Optional)\nSTRIPE_SECRET_KEY=your-stripe-secret-key\nVITE_STRIPE_PUBLIC_KEY=your-stripe-public-key\n\n# Telegram Bot (Optional)\nTELEGRAM_BOT_TOKEN=your-telegram-bot-token\n\n# Discord Bot (Optional)\nDISCORD_BOT_TOKEN=your-discord-bot-token\n\n# Admin Access\nADMIN_EMAILS=admin@example.com,admin2@example.com\n\n# Creator Wallet (Admin Only)\nCREATOR_WALLET_PRIVATE_KEY=your-wallet-private-key\n```\n\n4. **Set up the database**\n```bash\nnpm run db:push\n```\n\n5. **Start the development server**\n```bash\nnpm run dev\n```\n\nThe application will be available at `http://localhost:5000`\n\n## ðŸ”§ Configuration\n\n### Solana RPC Providers\nFor best performance, use a premium RPC provider:\n- [Helius](https://helius.dev) - Recommended for production\n- [QuickNode](https://quicknode.com) - Enterprise-grade infrastructure\n- [Alchemy](https://alchemy.com) - Free tier available\n\n### Bot Setup\nSee [BOT_SETUP_GUIDE.md](./BOT_SETUP_GUIDE.md) for detailed instructions on setting up Telegram and Discord bots.\n\n## ðŸ“š Documentation\n\n- [Bot Setup Guide](./BOT_SETUP_GUIDE.md) - Complete guide for Telegram and Discord bot configuration\n- [API Documentation](./docs/API.md) - REST API endpoints and usage\n- [Contributing Guidelines](./CONTRIBUTING.md) - How to contribute to the project\n- [Security Policy](./SECURITY.md) - Security guidelines and vulnerability reporting\n\n## âš–ï¸ Legal\n\n- **Terms of Service**: https://yourwebsite.com/terms\n- **Privacy Policy**: https://yourwebsite.com/privacy\n\nThese legal documents are available in-app at `/terms` and `/privacy` routes for user and bot reference.\n\n## ðŸ—ï¸ Tech Stack\n\n**Frontend:**\n- React + TypeScript\n- Vite for build tooling\n- Wouter for routing\n- TanStack Query for data fetching\n- Shadcn UI + Tailwind CSS for styling\n- Recharts for data visualization\n\n**Backend:**\n- Express.js with TypeScript\n- PostgreSQL with Drizzle ORM\n- Solana Web3.js\n- Passport.js for authentication\n- BullMQ for job queues\n\n**Integrations:**\n- Replit Auth for user authentication\n- Whop for subscription management\n- Stripe for payment processing\n- Rugcheck.xyz for risk scores\n- GoPlus Security for scam detection\n- DexScreener for market data\n- Jupiter for price verification\n\n## ðŸ›£ï¸ Roadmap\n\n- [ ] Mobile app (iOS/Android)\n- [ ] Advanced charting with TradingView\n- [ ] Portfolio tracking and alerts\n- [ ] Multi-chain support (Ethereum, BSC, Base)\n- [ ] NFT collection analysis\n- [ ] Social sentiment analysis integration\n- [ ] Machine learning models for pattern detection\n\n## ðŸ¤ Contributing\n\nWe welcome contributions! Please see our [Contributing Guidelines](./CONTRIBUTING.md) for details.\n\n1. Fork the repository\n2. Create your feature branch (`git checkout -b feature/AmazingFeature`)\n3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)\n4. Push to the branch (`git push origin feature/AmazingFeature`)\n5. Open a Pull Request\n\n## ðŸ“„ License\n\nThis project is licensed under the MIT License - see the [LICENSE](./LICENSE) file for details.\n\n## âš ï¸ Disclaimer\n\nThis tool is for educational and informational purposes only. It does not constitute financial advice. Always do your own research before investing in any cryptocurrency. The developers are not responsible for any financial losses incurred from using this software.\n\n## ðŸ”— Links\n\n- **Website**: [https://yourwebsite.com](https://yourwebsite.com)\n- **Token Contract**: `2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt`\n- **Telegram**: [Join our community](https://t.me/yourgroup)\n- **Discord**: [Join our server](https://discord.gg/yourinvite)\n- **Twitter**: [@YourHandle](https://twitter.com/yourhandle)\n\n## ðŸ’¬ Support\n\nFor support, please:\n- Open an issue on GitHub\n- Join our [Discord server](https://discord.gg/yourinvite)\n- Email us at support@yourwebsite.com\n\n## ðŸ™ Acknowledgments\n\n- Solana Foundation for the amazing blockchain platform\n- Rugcheck.xyz for pioneering token risk analysis\n- The open-source community for incredible tools and libraries\n\n---\n\nMade with â¤ï¸ for the Solana community\n","size_bytes":7743},"SECURITY.md":{"content":"# Security Policy\n\n## Official Token Information\n\n**IMPORTANT**: The only official Solana Rug Killer token is:\n- **Contract Address**: `2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt`\n- **Symbol**: $ANTIRUG\n- **Blockchain**: Solana\n\n**Beware of scams**: Any other contract addresses claiming to be Solana Rug Killer are fraudulent. Always verify the contract address above before purchasing.\n\n## Supported Versions\n\nWe release patches for security vulnerabilities in the following versions:\n\n| Version | Supported          |\n| ------- | ------------------ |\n| 1.x.x   | :white_check_mark: |\n| < 1.0   | :x:                |\n\n## Reporting a Vulnerability\n\nWe take the security of Solana Rug Killer seriously. If you believe you have found a security vulnerability, please report it to us as described below.\n\n### Please Do Not:\n\n- Open a public GitHub issue for security vulnerabilities\n- Disclose the vulnerability publicly before it has been addressed\n\n### Please Do:\n\n1. **Email us directly** at security@yourwebsite.com with:\n   - Type of vulnerability\n   - Full paths of source file(s) related to the vulnerability\n   - Location of the affected source code (tag/branch/commit or direct URL)\n   - Step-by-step instructions to reproduce the issue\n   - Proof-of-concept or exploit code (if possible)\n   - Impact of the issue, including how an attacker might exploit it\n\n2. **Allow us time to respond** - We aim to respond within 48 hours and will keep you informed of our progress\n\n3. **Give us reasonable time to fix** - We will work to patch critical vulnerabilities as quickly as possible\n\n## What to Expect\n\n1. **Acknowledgment** - We will acknowledge receipt of your vulnerability report within 48 hours\n2. **Communication** - We will keep you informed about our progress addressing the vulnerability\n3. **Credit** - If you wish, we will credit you in our security advisory when we disclose the vulnerability\n4. **Fix Timeline** - We aim to patch critical vulnerabilities within 7 days and other vulnerabilities within 30 days\n\n## Security Best Practices\n\nWhen deploying Solana Rug Killer, follow these security best practices:\n\n### Environment Variables\n- Never commit `.env` files to version control\n- Use strong, random values for `SESSION_SECRET`\n- Rotate API keys regularly\n- Use separate keys for development and production\n\n### Database Security\n- Use SSL/TLS connections to your PostgreSQL database\n- Implement regular database backups\n- Use strong passwords for database users\n- Limit database user permissions to only what's necessary\n\n### API Security\n- Enable rate limiting in production\n- Use HTTPS in production (enforced by Replit Deployments)\n- Implement proper CORS policies\n- Validate all user input\n\n### Wallet Security\n- Never log or expose private keys\n- Store the `CREATOR_WALLET_PRIVATE_KEY` as a Replit secret\n- Use hardware wallets for production creator wallets\n- Implement multi-signature wallets for high-value operations\n\n### Bot Security\n- Keep bot tokens secret and rotate them if exposed\n- Limit bot permissions to only what's necessary\n- Implement rate limiting for bot commands\n- Monitor bot usage for abuse\n\n### Subscription Security\n- Validate all Whop webhooks using signature verification\n- Implement idempotency for payment processing\n- Use atomic database transactions for subscription changes\n- Log all subscription modifications for audit trails\n\n## Known Security Considerations\n\n### Smart Contract Interactions\nThis application reads from the Solana blockchain but does not execute transactions on behalf of users (except for the creator wallet). Users are responsible for:\n- Verifying transaction details before signing\n- Securing their own private keys\n- Understanding the risks of connecting wallets to web applications\n\n### Third-Party APIs\nThis application integrates with third-party APIs:\n- Rugcheck.xyz\n- GoPlus Security\n- DexScreener\n- Jupiter\n\nUsers should be aware that:\n- We cannot guarantee the security of these external services\n- API responses are validated but should not be the sole basis for investment decisions\n- Rate limiting may affect service availability\n\n### AI Blacklist System\nThe AI-powered blacklist system is automated and may produce false positives. Users should:\n- Verify blacklist flags independently\n- Not rely solely on automated detection\n- Report false positives for investigation\n\n## Bug Bounty Program\n\nWe currently do not have a formal bug bounty program, but we appreciate and acknowledge security researchers who help us maintain the security of Solana Rug Killer. If you report a valid security vulnerability, we will:\n\n- Publicly acknowledge your contribution (if you wish)\n- Provide a detailed write-up of the fix\n- Consider offering $RUGK tokens as a thank you (amount at our discretion)\n\n## Security Updates\n\nSecurity updates will be:\n- Released as soon as possible after a vulnerability is confirmed\n- Announced in our GitHub releases\n- Communicated to users via Discord/Telegram announcements\n- Documented in our changelog\n\n## Contact\n\nFor security concerns, contact:\n- **Email**: security@yourwebsite.com\n- **PGP Key**: [Available on request]\n- **Response Time**: Within 48 hours\n\nFor general support:\n- **GitHub Issues**: For non-security bugs and features\n- **Discord**: For community support\n- **Email**: support@yourwebsite.com\n\nThank you for helping keep Solana Rug Killer and our users safe!\n","size_bytes":5398},"CONTRIBUTING.md":{"content":"# Contributing to Solana Rug Killer\n\nFirst off, thank you for considering contributing to Solana Rug Killer! It's people like you that make this tool better for the entire Solana community.\n\n## Official Token\n\n**Solana Rug Killer ($ANTIRUG)**\n- **Contract Address**: `2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt`\n- **Blockchain**: Solana\n\nAll references to the official token in code and documentation should use this contract address.\n\n## Code of Conduct\n\nThis project and everyone participating in it is governed by respect, professionalism, and constructive collaboration. By participating, you are expected to uphold this code.\n\n## How Can I Contribute?\n\n### Reporting Bugs\n\nBefore creating bug reports, please check the existing issues to avoid duplicates. When you create a bug report, include as many details as possible:\n\n- **Use a clear and descriptive title**\n- **Describe the exact steps to reproduce the problem**\n- **Provide specific examples** - Include links to files or GitHub projects, or copy/pasteable snippets\n- **Describe the behavior you observed** and explain what you expected to see instead\n- **Include screenshots or animated GIFs** if possible\n- **Include your environment details** - OS, Node.js version, browser, etc.\n\n### Suggesting Enhancements\n\nEnhancement suggestions are tracked as GitHub issues. When creating an enhancement suggestion, include:\n\n- **A clear and descriptive title**\n- **A detailed description of the proposed functionality**\n- **Examples of how this enhancement would be used**\n- **Why this enhancement would be useful** to most users\n\n### Pull Requests\n\n1. **Fork the repo** and create your branch from `main`\n2. **Follow the coding standards** outlined below\n3. **Write clear commit messages** - Use present tense (\"Add feature\" not \"Added feature\")\n4. **Test your changes** - Ensure all existing tests pass and add new tests if needed\n5. **Update documentation** - Update README.md, code comments, and other docs as needed\n6. **Keep pull requests focused** - One feature/fix per PR\n\n## Development Process\n\n### Setting Up Your Development Environment\n\n1. Clone your fork:\n```bash\ngit clone https://github.com/your-username/rugkillleronsol.git\ncd rugkillleronsol\n```\n\n2. Install dependencies:\n```bash\nnpm install\n```\n\n3. Set up environment variables (see README.md)\n\n4. Start the development server:\n```bash\nnpm run dev\n```\n\n### Project Structure\n\n```\nsolana-rug-killer/\nâ”œâ”€â”€ client/              # Frontend React application\nâ”‚   â”œâ”€â”€ src/\nâ”‚   â”‚   â”œâ”€â”€ components/  # Reusable UI components\nâ”‚   â”‚   â”œâ”€â”€ pages/       # Page components\nâ”‚   â”‚   â”œâ”€â”€ lib/         # Utility functions\nâ”‚   â”‚   â””â”€â”€ hooks/       # Custom React hooks\nâ”œâ”€â”€ server/              # Backend Express application\nâ”‚   â”œâ”€â”€ routes.ts        # API route handlers\nâ”‚   â”œâ”€â”€ storage.ts       # Database interface\nâ”‚   â”œâ”€â”€ token-analysis.ts # Token analysis logic\nâ”‚   â””â”€â”€ bots/            # Telegram/Discord bot logic\nâ”œâ”€â”€ shared/              # Shared types and schemas\nâ”‚   â””â”€â”€ schema.ts        # Database schema and types\nâ””â”€â”€ docs/                # Documentation files\n```\n\n### Coding Standards\n\n#### TypeScript\n- Use TypeScript for all new code\n- Define types/interfaces for all function parameters and return values\n- Avoid `any` type - use proper typing or `unknown`\n- Use const assertions where appropriate\n\n#### React/Frontend\n- Use functional components with hooks\n- Keep components focused and single-purpose\n- Use TypeScript interfaces for component props\n- Follow the existing pattern for forms (react-hook-form + zod)\n- Add data-testid attributes to interactive elements\n\n#### Backend\n- Keep route handlers thin - business logic goes in separate modules\n- Use the storage interface for all database operations\n- Validate all input using Zod schemas\n- Return appropriate HTTP status codes\n- Include error handling in all async functions\n\n#### Database\n- Never modify the database schema manually\n- Add migrations using Drizzle Kit: `npm run db:generate`\n- Test migrations locally before committing\n- Include both up and down migrations\n\n#### Git Commit Messages\n- Use the present tense (\"Add feature\" not \"Added feature\")\n- Use the imperative mood (\"Move cursor to...\" not \"Moves cursor to...\")\n- Limit the first line to 72 characters\n- Reference issues and pull requests liberally after the first line\n\nExample:\n```\nAdd holder concentration chart to dashboard\n\n- Implement Recharts pie chart component\n- Add tooltip with detailed holder information\n- Update dashboard layout to accommodate new chart\n\nCloses #123\n```\n\n### Testing\n\nBefore submitting a pull request:\n\n1. **Run the linter:**\n```bash\nnpm run lint\n```\n\n2. **Check TypeScript types:**\n```bash\nnpm run typecheck\n```\n\n3. **Test the application manually:**\n   - Test the feature you added/modified\n   - Check that existing functionality still works\n   - Test on multiple browsers if UI changes\n\n### Documentation\n\n- Update README.md if you change setup instructions\n- Add JSDoc comments to all exported functions\n- Update API documentation for new/changed endpoints\n- Include inline comments for complex logic\n\n## Financial Contributions\n\nWe also welcome financial contributions through:\n- Holding $RUGK tokens\n- Subscribing to premium tiers\n- Sponsoring specific features\n\n## Questions?\n\nDon't hesitate to ask questions! You can:\n- Open an issue with the \"question\" label\n- Join our Discord server\n- Email the maintainers\n\n## License\n\nBy contributing, you agree that your contributions will be licensed under the MIT License.\n","size_bytes":5617},"client/src/components/navigation-config.ts":{"content":"// Navigation configuration shared between desktop and mobile layouts\nexport interface NavItem {\n  title: string;\n  href: string;\n  description?: string;\n}\n\nexport interface NavSection {\n  title: string;\n  items: NavItem[];\n}\n\nexport const navigationConfig: NavSection[] = [\n  {\n    title: \"Tools\",\n    items: [\n      {\n        title: \"Analytics Dashboard\",\n        href: \"/analytics\",\n        description: \"Market intelligence and risk insights\"\n      },\n      {\n        title: \"Portfolio Tracker\",\n        href: \"/portfolio\",\n        description: \"Track holdings, transactions, and P&L\"\n      },\n      {\n        title: \"Price Alerts\",\n        href: \"/alerts\",\n        description: \"Get notified when prices hit your targets\"\n      },\n      {\n        title: \"Token Comparison\",\n        href: \"/compare\",\n        description: \"Compare multiple tokens side-by-side\"\n      },\n      {\n        title: \"Watchlist\",\n        href: \"/watchlist\",\n        description: \"Track and share your favorite tokens\"\n      }\n    ]\n  },\n  {\n    title: \"Community\",\n    items: [\n      {\n        title: \"Leaderboard\",\n        href: \"/leaderboard\",\n        description: \"Top contributors and reputation rankings\"\n      },\n      {\n        title: \"My Profile\",\n        href: \"/profile/me\",\n        description: \"View and edit your community profile\"\n      },\n      {\n        title: \"Browse Shared Watchlists\",\n        href: \"/watchlist#shared\",\n        description: \"Discover community curated token lists\"\n      }\n    ]\n  },\n  {\n    title: \"Product\",\n    items: [\n      {\n        title: \"Features\",\n        href: \"/features\",\n        description: \"Comprehensive token analysis and risk detection\"\n      },\n      {\n        title: \"Pricing\",\n        href: \"/pricing\",\n        description: \"Individual, Group, and Lifetime plans\"\n      },\n      {\n        title: \"Subscription\",\n        href: \"/subscription\",\n        description: \"Manage your current subscription\"\n      }\n    ]\n  },\n  {\n    title: \"Automations\",\n    items: [\n      {\n        title: \"Bot Setup\",\n        href: \"/bot-setup\",\n        description: \"Telegram & Discord bot configuration\"\n      },\n      {\n        title: \"Bot Usage Guide\",\n        href: \"/bot-guide\",\n        description: \"Complete command reference with examples\"\n      },\n      {\n        title: \"Alpha Alerts\",\n        href: \"/features#alpha-alerts\",\n        description: \"Smart money tracking and new launches\"\n      }\n    ]\n  },\n  {\n    title: \"Resources\",\n    items: [\n      {\n        title: \"Documentation\",\n        href: \"/documentation\",\n        description: \"Complete guides and API docs\"\n      },\n      {\n        title: \"About\",\n        href: \"/about\",\n        description: \"Learn about Solana Rug Killer\"\n      },\n      {\n        title: \"Terms\",\n        href: \"/terms\",\n        description: \"Terms of Service\"\n      },\n      {\n        title: \"Privacy\",\n        href: \"/privacy\",\n        description: \"Privacy Policy\"\n      },\n      {\n        title: \"Admin: Moderation\",\n        href: \"/admin/moderation\",\n        description: \"Review reports and manage flagged content\"\n      }\n    ]\n  }\n];\n","size_bytes":3104},"client/src/pages/privacy.tsx":{"content":"import { Header } from \"@/components/header-new\";\nimport { Footer } from \"@/components/footer\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Shield } from \"lucide-react\";\n\nexport default function Privacy() {\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n      \n      <main className=\"flex-1\">\n        <div className=\"max-w-4xl mx-auto px-6 py-12\">\n          <div className=\"space-y-8\">\n            <div className=\"text-center space-y-4\">\n              <h1 className=\"text-4xl font-bold\" data-testid=\"heading-privacy\">Privacy Policy</h1>\n              <p className=\"text-muted-foreground\">Last Updated: November 11, 2025</p>\n            </div>\n\n            <Alert>\n              <Shield className=\"h-4 w-4\" />\n              <AlertDescription>\n                At Solana Rug Killer, we take your privacy seriously. This Privacy Policy explains how \n                we collect, use, disclose, and safeguard your information.\n              </AlertDescription>\n            </Alert>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>1. Information We Collect</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <h3 className=\"font-semibold text-foreground\">1.1 Personal Information</h3>\n                <p>When you use Solana Rug Killer, we may collect:</p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li><strong>Account Information:</strong> Email address, username (via Replit Auth)</li>\n                  <li><strong>Authentication Data:</strong> OAuth tokens from Google, GitHub, X (Twitter), or Apple</li>\n                  <li><strong>Wallet Addresses:</strong> Solana wallet addresses you connect for token-gated access</li>\n                  <li><strong>Payment Information:</strong> Processed securely by Whop (we don't store card details)</li>\n                  <li><strong>Cryptocurrency Transactions:</strong> On-chain payment records (publicly visible on Solana blockchain)</li>\n                </ul>\n\n                <h3 className=\"font-semibold text-foreground mt-6\">1.2 Usage Data</h3>\n                <p>We automatically collect information about your use of the Service:</p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li><strong>Token Analysis History:</strong> Tokens you've analyzed and search queries</li>\n                  <li><strong>Bot Interactions:</strong> Commands you use on Telegram and Discord bots</li>\n                  <li><strong>Subscription Data:</strong> Current tier, status, and subscription history</li>\n                  <li><strong>Device Information:</strong> Browser type, operating system, IP address</li>\n                  <li><strong>Log Data:</strong> Access times, pages viewed, errors encountered</li>\n                </ul>\n\n                <h3 className=\"font-semibold text-foreground mt-6\">1.3 Blockchain Data</h3>\n                <p>We collect publicly available blockchain data including:</p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Token metadata, supply, and authority information</li>\n                  <li>Holder distributions and wallet balances</li>\n                  <li>Transaction histories and trading patterns</li>\n                  <li>Liquidity pool data and market information</li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>2. How We Use Your Information</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>We use the information we collect to:</p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li><strong>Provide the Service:</strong> Token analysis, risk scoring, bot commands, alerts</li>\n                  <li><strong>Process Payments:</strong> Manage subscriptions and verify token holdings</li>\n                  <li><strong>Authenticate Users:</strong> Secure login and access control</li>\n                  <li><strong>Improve the Service:</strong> Analyze usage patterns and fix bugs</li>\n                  <li><strong>Send Notifications:</strong> Alpha alerts, subscription updates, security notices</li>\n                  <li><strong>Prevent Fraud:</strong> Detect abuse, spam, and unauthorized access</li>\n                  <li><strong>Comply with Legal Obligations:</strong> Respond to lawful requests and enforce our Terms</li>\n                  <li><strong>Communicate with You:</strong> Customer support and important updates</li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>3. How We Share Your Information</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>We may share your information with:</p>\n                \n                <h3 className=\"font-semibold text-foreground mt-4\">3.1 Third-Party Service Providers</h3>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li><strong>Replit Auth:</strong> Authentication and account management</li>\n                  <li><strong>Whop:</strong> Subscription payment processing</li>\n                  <li><strong>Telegram/Discord:</strong> Bot functionality and message delivery</li>\n                  <li><strong>Rugcheck, GoPlus, DexScreener, Jupiter:</strong> Token analysis data</li>\n                  <li><strong>RPC Providers (Helius, QuickNode, Alchemy):</strong> Blockchain data access</li>\n                </ul>\n\n                <h3 className=\"font-semibold text-foreground mt-4\">3.2 Legal Requirements</h3>\n                <p>We may disclose your information if required by law or in response to:</p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Subpoenas, court orders, or legal processes</li>\n                  <li>Requests from law enforcement or government agencies</li>\n                  <li>Protection of our rights, property, or safety</li>\n                  <li>Prevention of fraud, security issues, or technical problems</li>\n                </ul>\n\n                <h3 className=\"font-semibold text-foreground mt-4\">3.3 Business Transfers</h3>\n                <p>\n                  In the event of a merger, acquisition, or sale of assets, your information may be \n                  transferred to the acquiring entity.\n                </p>\n\n                <h3 className=\"font-semibold text-foreground mt-4\">3.4 With Your Consent</h3>\n                <p>\n                  We may share information with third parties when you explicitly consent to such sharing.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>4. Data Retention</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>We retain your information for as long as necessary to:</p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Provide the Service and maintain your account</li>\n                  <li>Comply with legal obligations (typically 7 years for financial records)</li>\n                  <li>Resolve disputes and enforce our Terms of Service</li>\n                  <li>Prevent fraud and abuse</li>\n                </ul>\n                <p>\n                  When you delete your account, we will delete or anonymize your personal information \n                  within 30 days, except where retention is required by law.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>5. Data Security</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>We implement security measures to protect your information:</p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li><strong>Encryption:</strong> HTTPS/TLS for data transmission, encrypted database storage</li>\n                  <li><strong>Access Controls:</strong> Role-based permissions and admin-only features</li>\n                  <li><strong>Secure Sessions:</strong> HTTP-only cookies with session expiration</li>\n                  <li><strong>Environment Secrets:</strong> API keys and private keys stored securely in Replit Secrets</li>\n                  <li><strong>Regular Audits:</strong> Security reviews and dependency updates</li>\n                  <li><strong>Rate Limiting:</strong> Protection against brute force and DDoS attacks</li>\n                </ul>\n                <p>\n                  However, no method of transmission over the Internet is 100% secure. We cannot \n                  guarantee absolute security of your information.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>6. Cookies and Tracking</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>We use cookies and similar tracking technologies:</p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li><strong>Session Cookies:</strong> Maintain your logged-in state (essential)</li>\n                  <li><strong>Analytics:</strong> Understand how users interact with the Service</li>\n                  <li><strong>Preferences:</strong> Remember your settings and preferences</li>\n                </ul>\n                <p>\n                  You can control cookies through your browser settings, but disabling essential cookies \n                  may affect Service functionality.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>7. Your Privacy Rights</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>Depending on your location, you may have the following rights:</p>\n                \n                <h3 className=\"font-semibold text-foreground mt-4\">7.1 Access and Portability</h3>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Request a copy of your personal information</li>\n                  <li>Export your data in a machine-readable format</li>\n                </ul>\n\n                <h3 className=\"font-semibold text-foreground mt-4\">7.2 Correction and Deletion</h3>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Update or correct inaccurate information</li>\n                  <li>Delete your account and associated data</li>\n                </ul>\n\n                <h3 className=\"font-semibold text-foreground mt-4\">7.3 Objection and Restriction</h3>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Object to processing of your information</li>\n                  <li>Restrict how we use your data</li>\n                  <li>Opt-out of marketing communications</li>\n                </ul>\n\n                <h3 className=\"font-semibold text-foreground mt-4\">7.4 How to Exercise Your Rights</h3>\n                <p>\n                  To exercise any of these rights, contact us at privacy@yourwebsite.com. We will respond \n                  within 30 days.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>8. Children's Privacy</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  Solana Rug Killer is not intended for users under 18 years of age. We do not knowingly \n                  collect personal information from children under 18.\n                </p>\n                <p>\n                  If you are a parent or guardian and believe your child has provided us with personal \n                  information, please contact us immediately. We will delete such information promptly.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>9. International Data Transfers</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  Your information may be transferred to and processed in countries other than your country \n                  of residence. These countries may have different data protection laws.\n                </p>\n                <p>\n                  By using the Service, you consent to the transfer of your information to the United States \n                  and other countries where we or our service providers operate.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>10. Third-Party Links</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  Our Service may contain links to third-party websites and services (DexScreener, BubbleMaps, \n                  Solscan, etc.). We are not responsible for the privacy practices of these third parties.\n                </p>\n                <p>\n                  We encourage you to read the privacy policies of any third-party services you use.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>11. California Privacy Rights (CCPA)</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>If you are a California resident, you have additional rights under the CCPA:</p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Right to know what personal information is collected, used, and shared</li>\n                  <li>Right to delete personal information (with certain exceptions)</li>\n                  <li>Right to opt-out of the sale of personal information (we do not sell your data)</li>\n                  <li>Right to non-discrimination for exercising your privacy rights</li>\n                </ul>\n                <p>\n                  To exercise these rights, contact us at privacy@yourwebsite.com with \"CCPA Request\" in \n                  the subject line.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>12. European Privacy Rights (GDPR)</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>If you are in the European Economic Area (EEA), you have rights under the GDPR:</p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Right of access to your personal data</li>\n                  <li>Right to rectification of inaccurate data</li>\n                  <li>Right to erasure (\"right to be forgotten\")</li>\n                  <li>Right to restrict processing</li>\n                  <li>Right to data portability</li>\n                  <li>Right to object to processing</li>\n                  <li>Right to withdraw consent</li>\n                  <li>Right to lodge a complaint with a supervisory authority</li>\n                </ul>\n                <p>\n                  We process your data based on: (1) your consent, (2) contractual necessity, (3) legal \n                  obligations, or (4) legitimate interests.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>13. Do Not Track Signals</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  We do not currently respond to \"Do Not Track\" (DNT) browser signals. We treat all users \n                  the same regardless of DNT settings.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>14. Changes to This Privacy Policy</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  We may update this Privacy Policy from time to time. We will notify you of material \n                  changes by:\n                </p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li>Posting the new Privacy Policy on this page</li>\n                  <li>Updating the \"Last Updated\" date</li>\n                  <li>Sending an email notification (for significant changes)</li>\n                  <li>Displaying a prominent notice on the Service</li>\n                </ul>\n                <p>\n                  Your continued use of the Service after changes become effective constitutes acceptance \n                  of the revised Privacy Policy.\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>15. Contact Us</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground\">\n                <p>\n                  If you have questions or concerns about this Privacy Policy or our data practices, \n                  please contact us:\n                </p>\n                <ul className=\"space-y-2\">\n                  <li><strong>Email:</strong> privacy@yourwebsite.com</li>\n                  <li><strong>Legal Inquiries:</strong> legal@yourwebsite.com</li>\n                  <li><strong>Discord:</strong> Join our community server</li>\n                  <li><strong>Telegram:</strong> Contact via our bot</li>\n                  <li><strong>GitHub:</strong> https://github.com/drixindustries/rugkillleronsol/issues</li>\n                </ul>\n              </CardContent>\n            </Card>\n\n            <Alert>\n              <AlertDescription>\n                By using Solana Rug Killer, you acknowledge that you have read and understood this Privacy \n                Policy and consent to the collection, use, and disclosure of your information as described.\n              </AlertDescription>\n            </Alert>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":18893},"server/known-addresses.ts":{"content":"// Known Solana addresses that should be excluded from holder concentration calculations\n// These are exchanges, bundling bots, and protocol-owned addresses that don't represent individual whales\n\nimport { PublicKey } from '@solana/web3.js';\nimport { TOKEN_PROGRAM_ID, ASSOCIATED_TOKEN_PROGRAM_ID } from '@solana/spl-token';\n\nexport interface KnownAddress {\n  address: string;\n  label: string;\n  type: 'exchange' | 'protocol' | 'bundler' | 'vault';\n  source: string;\n}\n\n// Centralized Exchange Addresses\nexport const KNOWN_EXCHANGES: KnownAddress[] = [\n  // Binance\n  {\n    address: '5tzFkiKscXHK5ZXCGbXZxdw7gTjjD1mBwuoFbhUvuAi9',\n    label: 'Binance 2',\n    type: 'exchange',\n    source: 'Solscan labeled'\n  },\n  {\n    address: '5tzL3DfsF8i36KeUCjtzWP9zqS6zWjYhR76VA4Y5CzzJ',\n    label: 'Binance 1',\n    type: 'exchange',\n    source: 'Solscan labeled'\n  },\n  {\n    address: 'H8sMJSCQxfKiFTCfDR3DUYexta7Kxymr2gF3LceH44uR',\n    label: 'Binance 3',\n    type: 'exchange',\n    source: 'Solscan labeled'\n  },\n  // Coinbase\n  {\n    address: 'GJRs4FwHtemZ5ZE9x3FNvJ8TMwitKTh21yxdRPqn7npE',\n    label: 'Coinbase Hot Wallet 2',\n    type: 'exchange',\n    source: 'Solscan labeled'\n  },\n  // OKX\n  {\n    address: 'is6MTRHEgyFLNTfYcuV4QBWLjrZBfmhVNYR6ccgr8KV',\n    label: 'OKX Hot Wallet',\n    type: 'exchange',\n    source: 'Solscan labeled'\n  },\n  // Bybit\n  {\n    address: 'AC5RDfQFmDS1deWZos921JfqscXdByf8BKHs5ACWjtW2',\n    label: 'Bybit Hot Wallet',\n    type: 'exchange',\n    source: 'Solscan labeled'\n  },\n  // Gate.io\n  {\n    address: 'u6PJ8DtQuPFnfmwHbGFULQ4u4EgjDiyYKjVEsynXq2w',\n    label: 'Gate.io',\n    type: 'exchange',\n    source: 'Solscan labeled'\n  },\n  // MEXC\n  {\n    address: 'ASTyfSima4LLAdDgoFGkgqoKowG1LZFDr9fAQrg7iaJZ',\n    label: 'MEXC',\n    type: 'exchange',\n    source: 'Solscan labeled'\n  },\n  // FTX (defunct, historical holdings)\n  {\n    address: '6ZRCB7AAqGre6c72PRz3MHLC73VMYvJ8bi9KHf1HFpNk',\n    label: 'FTX Cold Storage',\n    type: 'exchange',\n    source: 'Solscan labeled'\n  },\n  // User verified exchange\n  {\n    address: '4xJLmpojrDeXEnfDoeG9UdHXozY2Qn48ZyiPyRhabAN3',\n    label: 'Exchange Wallet',\n    type: 'exchange',\n    source: 'User verified'\n  },\n  // Add more as they become publicly known\n];\n\n// DeFi Protocol Addresses (Staking pools, vaults, etc.)\nexport const KNOWN_PROTOCOLS: KnownAddress[] = [\n  // Raydium\n  {\n    address: '5Q544fKrFoe6tsEbD7S8EmxGTJYAKtTVhAW5Q5pge4j1',\n    label: 'Raydium Authority V4',\n    type: 'protocol',\n    source: 'Solscan labeled'\n  },\n  // Orca\n  {\n    address: '3xQ5vZfpcjLhFWKHNFzJP8SJmBLqpN9Sq5q5K2JmvPuG',\n    label: 'Orca Whirlpool',\n    type: 'protocol',\n    source: 'Solscan labeled'\n  },\n  // Meteora\n  {\n    address: 'LBUZKhRxPF3XUpBCjp4YzTKgLccjZhTSDM9YuVaPwxo',\n    label: 'Meteora Pool',\n    type: 'protocol',\n    source: 'Solscan labeled'\n  },\n];\n\n// Pump.fun Official Addresses\nexport const PUMPFUN_ADDRESSES: KnownAddress[] = [\n  {\n    address: 'Ce6TQqeHC9p8KetsN6JsjHK7UTZk7nasjjnr7XxXp9F1',\n    label: 'Pump.fun Fee Receiver',\n    type: 'protocol',\n    source: 'Pump.fun documentation'\n  },\n  {\n    address: 'CebN5WGQ4jvEPvsVU4EoHEpgzq1VV7AbicfhtW4xC9iM',\n    label: 'Pump.fun Program Authority',\n    type: 'protocol',\n    source: 'Pump.fun documentation'\n  },\n];\n\n// Pump.fun Program ID for bonding curve derivation\nexport const PUMPFUN_PROGRAM_ID = '6EF8rrecthR5Dkzon8Nwu78hRvfCKubJ14M5uBEwF6P';\n\n// Bundler/Volume Bot Known Patterns\n// These are addresses known to be used by bundling services\nexport const KNOWN_BUNDLERS: KnownAddress[] = [\n  // Common bundling service addresses will be added as discovered\n  // Typically identified by wash trading patterns and same-block purchases\n];\n\n// Combine all known addresses\nexport const ALL_KNOWN_ADDRESSES: KnownAddress[] = [\n  ...KNOWN_EXCHANGES,\n  ...KNOWN_PROTOCOLS,\n  ...PUMPFUN_ADDRESSES,\n  ...KNOWN_BUNDLERS,\n];\n\n// Quick lookup for address filtering\nexport const KNOWN_ADDRESS_SET = new Set(\n  ALL_KNOWN_ADDRESSES.map(a => a.address)\n);\n\n/**\n * Check if an address is a known exchange/protocol/bundler\n */\nexport function isKnownAddress(address: string): boolean {\n  return KNOWN_ADDRESS_SET.has(address);\n}\n\n/**\n * Get details about a known address\n */\nexport function getKnownAddressInfo(address: string): KnownAddress | undefined {\n  return ALL_KNOWN_ADDRESSES.find(a => a.address === address);\n}\n\n// Memoization cache for bonding curve addresses\nconst bondingCurveCache = new Map<string, string>();\nconst associatedBondingCurveCache = new Map<string, string>();\n\n/**\n * Calculate the pump.fun bonding curve address for a given token mint\n * This is a PDA (Program Derived Address) specific to each token\n * Results are memoized for performance\n */\nexport function getPumpFunBondingCurveAddress(mintAddress: string): string | null {\n  // Check cache first\n  if (bondingCurveCache.has(mintAddress)) {\n    return bondingCurveCache.get(mintAddress)!;\n  }\n  \n  try {\n    const mint = new PublicKey(mintAddress);\n    const pumpProgram = new PublicKey(PUMPFUN_PROGRAM_ID);\n    \n    const [bondingCurve] = PublicKey.findProgramAddressSync(\n      [\n        Buffer.from('bonding-curve'),\n        mint.toBuffer()\n      ],\n      pumpProgram\n    );\n    \n    const address = bondingCurve.toString();\n    bondingCurveCache.set(mintAddress, address);\n    return address;\n  } catch (error) {\n    console.error('Error calculating pump.fun bonding curve address:', error);\n    return null;\n  }\n}\n\n/**\n * Calculate the associated bonding curve token account for a given mint\n * This account holds the actual tokens locked in the bonding curve\n * Results are memoized for performance\n */\nexport function getPumpFunAssociatedBondingCurveAddress(mintAddress: string): string | null {\n  // Check cache first\n  if (associatedBondingCurveCache.has(mintAddress)) {\n    return associatedBondingCurveCache.get(mintAddress)!;\n  }\n  \n  try {\n    const mint = new PublicKey(mintAddress);\n    const pumpProgram = new PublicKey(PUMPFUN_PROGRAM_ID);\n    \n    // First get the bonding curve PDA\n    const [bondingCurve] = PublicKey.findProgramAddressSync(\n      [\n        Buffer.from('bonding-curve'),\n        mint.toBuffer()\n      ],\n      pumpProgram\n    );\n    \n    // Then get the associated token account\n    const [associatedBondingCurve] = PublicKey.findProgramAddressSync(\n      [\n        bondingCurve.toBuffer(),\n        TOKEN_PROGRAM_ID.toBuffer(),\n        mint.toBuffer()\n      ],\n      ASSOCIATED_TOKEN_PROGRAM_ID\n    );\n    \n    const address = associatedBondingCurve.toString();\n    associatedBondingCurveCache.set(mintAddress, address);\n    return address;\n  } catch (error) {\n    console.error('Error calculating pump.fun associated bonding curve address:', error);\n    return null;\n  }\n}\n\n/**\n * Detect potential bundled wallets by analyzing transaction timing\n * Bundlers typically execute multiple buys in the same block (0.4s window)\n */\nexport interface BundleDetectionResult {\n  isBundled: boolean;\n  bundleWallets: string[];\n  bundleSize: number;\n  sameBlockCount: number;\n}\n\n/**\n * Analyze holders for bundling patterns\n * Returns addresses that appear to be part of a bundle\n */\nexport function detectBundledWallets(\n  holders: Array<{ address: string; percentage: number }>,\n  transactionData?: Array<{ address: string; blockHeight: number; timestamp: number }>\n): string[] {\n  const bundledAddresses: string[] = [];\n  \n  // If we don't have transaction data, use pattern-based detection\n  if (!transactionData) {\n    // Pattern 1: Multiple holders with suspiciously similar percentages\n    const percentageGroups = new Map<string, string[]>();\n    holders.forEach(holder => {\n      // Round to 2 decimals for grouping\n      const roundedPct = holder.percentage.toFixed(2);\n      if (!percentageGroups.has(roundedPct)) {\n        percentageGroups.set(roundedPct, []);\n      }\n      percentageGroups.get(roundedPct)!.push(holder.address);\n    });\n    \n    // If 3+ holders have exact same percentage, likely bundled\n    percentageGroups.forEach(addresses => {\n      if (addresses.length >= 3) {\n        bundledAddresses.push(...addresses);\n      }\n    });\n    \n    return bundledAddresses;\n  }\n  \n  // With transaction data, detect same-block purchases\n  const blockGroups = new Map<number, string[]>();\n  transactionData.forEach(tx => {\n    if (!blockGroups.has(tx.blockHeight)) {\n      blockGroups.set(tx.blockHeight, []);\n    }\n    blockGroups.get(tx.blockHeight)!.push(tx.address);\n  });\n  \n  // Find blocks with 10+ simultaneous purchases (strong bundle signal)\n  blockGroups.forEach(addresses => {\n    if (addresses.length >= 10) {\n      bundledAddresses.push(...addresses);\n    }\n  });\n  \n  return bundledAddresses;\n}\n","size_bytes":8657},"client/src/components/bundle-visualization-chart.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { PieChart, Pie, Cell, ResponsiveContainer, Legend, Tooltip } from \"recharts\";\nimport type { HolderFilteringMetadata } from \"@shared/schema\";\nimport { Users, Droplet, Building2, Network, AlertTriangle } from \"lucide-react\";\n\ninterface BundleVisualizationChartProps {\n  filtering: HolderFilteringMetadata;\n  totalHolders: number;\n}\n\nexport function BundleVisualizationChart({ filtering, totalHolders }: BundleVisualizationChartProps) {\n  // Clamp to prevent negative values when totalHolders is low\n  const legitHolders = Math.max(totalHolders - filtering.totals.total, 0);\n\n  const data = [\n    {\n      name: \"Legitimate Holders\",\n      value: legitHolders,\n      color: \"hsl(var(--chart-1))\",\n      icon: Users,\n      description: \"Regular token holders\"\n    },\n    {\n      name: \"LP Addresses\",\n      value: filtering.totals.lp,\n      color: \"hsl(var(--chart-2))\",\n      icon: Droplet,\n      description: \"Liquidity pools excluded from analysis\"\n    },\n    {\n      name: \"Exchange Wallets\",\n      value: filtering.totals.exchanges,\n      color: \"hsl(var(--chart-3))\",\n      icon: Building2,\n      description: \"Centralized exchange wallets\"\n    },\n    {\n      name: \"Protocol Addresses\",\n      value: filtering.totals.protocols,\n      color: \"hsl(var(--chart-4))\",\n      icon: Network,\n      description: \"DeFi protocol contracts\"\n    },\n    {\n      name: \"Bundled Wallets\",\n      value: filtering.totals.bundled,\n      color: \"hsl(var(--destructive))\",\n      icon: AlertTriangle,\n      description: \"Suspicious coordinated wallets\"\n    }\n  ].filter(item => item.value > 0);\n\n  const CustomTooltip = ({ active, payload }: any) => {\n    if (active && payload && payload.length) {\n      const data = payload[0].payload;\n      // Guard against division by zero\n      const percentage = totalHolders > 0 ? ((data.value / totalHolders) * 100).toFixed(2) : '0.00';\n      \n      return (\n        <Card className=\"p-3\">\n          <div className=\"flex items-center gap-2 mb-1\">\n            <data.icon className=\"h-4 w-4\" />\n            <span className=\"font-semibold\">{data.name}</span>\n          </div>\n          <p className=\"text-sm text-muted-foreground mb-1\">{data.description}</p>\n          <p className=\"text-lg font-bold\">{data.value.toLocaleString()} holders</p>\n          <p className=\"text-xs text-muted-foreground\">\n            {percentage}% of total\n          </p>\n        </Card>\n      );\n    }\n    return null;\n  };\n\n  const renderLegend = (props: any) => {\n    const { payload } = props;\n    return (\n      <div className=\"flex flex-wrap gap-3 justify-center mt-4\">\n        {payload.map((entry: any, index: number) => {\n          const IconComponent = entry.payload.icon;\n          return (\n            <div key={`legend-${index}`} className=\"flex items-center gap-2\">\n              <div \n                className=\"w-3 h-3 rounded-sm\" \n                style={{ backgroundColor: entry.color }}\n              />\n              <IconComponent className=\"h-3 w-3 text-muted-foreground\" />\n              <span className=\"text-sm text-muted-foreground\">\n                {entry.value}: <span className=\"font-semibold text-foreground\">{entry.payload.value}</span>\n              </span>\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  return (\n    <Card data-testid=\"card-bundle-visualization\">\n      <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n        <CardTitle>Holder Distribution Analysis</CardTitle>\n        {filtering.totals.bundled > 0 && filtering.bundledDetection && (\n          <div className=\"flex items-center gap-2\">\n            {filtering.bundledDetection.bundleSupplyPct !== undefined && (\n              <Badge \n                variant=\"outline\" \n                className=\"bg-orange-500/10 text-orange-600 border-orange-500/20 flex items-center gap-1\"\n                data-testid=\"badge-bundle-percentage\"\n              >\n                <AlertTriangle className=\"h-3 w-3\" />\n                {filtering.bundledDetection.bundleSupplyPct.toFixed(2)}% Supply\n              </Badge>\n            )}\n            <Badge variant=\"destructive\" className=\"flex items-center gap-1\" data-testid=\"badge-bundle-warning\">\n              <AlertTriangle className=\"h-3 w-3\" />\n              {filtering.totals.bundled} Wallet{filtering.totals.bundled > 1 ? 's' : ''}\n            </Badge>\n          </div>\n        )}\n      </CardHeader>\n      <CardContent>\n        <div className=\"h-[300px]\">\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <PieChart>\n              <Pie\n                data={data}\n                cx=\"50%\"\n                cy=\"50%\"\n                labelLine={false}\n                label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(1)}%`}\n                outerRadius={80}\n                fill=\"#8884d8\"\n                dataKey=\"value\"\n              >\n                {data.map((entry, index) => (\n                  <Cell key={`cell-${index}`} fill={entry.color} />\n                ))}\n              </Pie>\n              <Tooltip content={<CustomTooltip />} />\n              <Legend content={renderLegend} />\n            </PieChart>\n          </ResponsiveContainer>\n        </div>\n\n        {/* Summary Stats */}\n        <div className=\"mt-6 pt-6 border-t grid grid-cols-2 gap-4\">\n          <div>\n            <p className=\"text-sm text-muted-foreground\">Total Holders</p>\n            <p className=\"text-2xl font-bold\" data-testid=\"text-total-holders\">\n              {totalHolders.toLocaleString()}\n            </p>\n          </div>\n          <div>\n            <p className=\"text-sm text-muted-foreground\">Filtered Addresses</p>\n            <p className=\"text-2xl font-bold\" data-testid=\"text-filtered-count\">\n              {filtering.totals.total.toLocaleString()}\n            </p>\n          </div>\n          <div>\n            <p className=\"text-sm text-muted-foreground\">Legitimate Holders</p>\n            <p className=\"text-2xl font-bold text-green-600\" data-testid=\"text-legit-holders\">\n              {legitHolders.toLocaleString()}\n            </p>\n          </div>\n          {filtering.totals.bundled > 0 && (\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Suspicious Bundles</p>\n              <p className=\"text-2xl font-bold text-destructive\" data-testid=\"text-bundle-count\">\n                {filtering.totals.bundled.toLocaleString()}\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* Bundle Detection Details */}\n        {filtering.totals.bundled > 0 && filtering.bundledDetection && (\n          <div className=\"mt-4 p-4 rounded-lg bg-destructive/10 border border-destructive/20\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <AlertTriangle className=\"h-4 w-4 text-destructive\" />\n              <h4 className=\"font-semibold text-sm\">Bundle Detection Alert</h4>\n              <Badge \n                variant={filtering.bundledDetection.confidence === 'high' ? 'destructive' : 'secondary'}\n                data-testid=\"badge-confidence\"\n              >\n                {filtering.bundledDetection.confidence} confidence\n              </Badge>\n            </div>\n            <p className=\"text-sm text-muted-foreground\" data-testid=\"text-bundle-details\">\n              {filtering.bundledDetection.details}\n            </p>\n            <p className=\"text-xs text-muted-foreground mt-2\">\n              Detection strategy: {filtering.bundledDetection.strategy}\n            </p>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":7690},"client/src/components/holder-filtering-card.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ChevronDown, Filter, Info } from \"lucide-react\";\nimport { useState } from \"react\";\nimport type { HolderFilteringMetadata } from \"@shared/schema\";\n\ninterface HolderFilteringCardProps {\n  filtering: HolderFilteringMetadata;\n}\n\nexport function HolderFilteringCard({ filtering }: HolderFilteringCardProps) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const getCategoryBadgeVariant = (count: number) => {\n    if (count === 0) return \"outline\" as const;\n    if (count >= 10) return \"destructive\" as const;\n    return \"secondary\" as const;\n  };\n\n  const getConfidenceBadgeVariant = (confidence: 'low' | 'medium' | 'high') => {\n    if (confidence === 'high') return \"destructive\" as const;\n    if (confidence === 'medium') return \"default\" as const;\n    return \"outline\" as const;\n  };\n\n  const getTypeLabel = (type: string) => {\n    switch (type) {\n      case 'lp': return 'Liquidity Pool';\n      case 'exchange': return 'Exchange';\n      case 'protocol': return 'DeFi Protocol';\n      case 'bundled': return 'Bundled Wallet';\n      default: return type;\n    }\n  };\n\n  const totalFiltered = filtering.totals.total;\n\n  return (\n    <Card data-testid=\"card-holder-filtering\">\n      <CardHeader>\n        <div className=\"flex items-start justify-between gap-4\">\n          <div className=\"space-y-1\">\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Filter className=\"h-4 w-4\" />\n              Holder Filtering\n            </CardTitle>\n            <CardDescription>\n              {totalFiltered} {totalFiltered === 1 ? 'address' : 'addresses'} excluded from concentration calculations\n            </CardDescription>\n          </div>\n          {totalFiltered > 0 && (\n            <Badge variant={totalFiltered >= 20 ? \"destructive\" : \"secondary\"} data-testid=\"badge-total-filtered\">\n              {totalFiltered}\n            </Badge>\n          )}\n        </div>\n      </CardHeader>\n      \n      <CardContent className=\"space-y-4\">\n        {/* Summary Grid */}\n        <div className=\"grid grid-cols-2 gap-3\">\n          <div className=\"flex items-center justify-between p-3 bg-muted rounded-md\" data-testid=\"filter-category-lp\">\n            <span className=\"text-sm text-muted-foreground\">LP Addresses</span>\n            <Badge variant={getCategoryBadgeVariant(filtering.totals.lp)}>\n              {filtering.totals.lp}\n            </Badge>\n          </div>\n          \n          <div className=\"flex items-center justify-between p-3 bg-muted rounded-md\" data-testid=\"filter-category-exchanges\">\n            <span className=\"text-sm text-muted-foreground\">Exchanges</span>\n            <Badge variant={getCategoryBadgeVariant(filtering.totals.exchanges)}>\n              {filtering.totals.exchanges}\n            </Badge>\n          </div>\n          \n          <div className=\"flex items-center justify-between p-3 bg-muted rounded-md\" data-testid=\"filter-category-protocols\">\n            <span className=\"text-sm text-muted-foreground\">Protocols</span>\n            <Badge variant={getCategoryBadgeVariant(filtering.totals.protocols)}>\n              {filtering.totals.protocols}\n            </Badge>\n          </div>\n          \n          <div className=\"flex items-center justify-between p-3 bg-muted rounded-md\" data-testid=\"filter-category-bundled\">\n            <span className=\"text-sm text-muted-foreground\">Bundled</span>\n            <Badge variant={getCategoryBadgeVariant(filtering.totals.bundled)}>\n              {filtering.totals.bundled}\n            </Badge>\n          </div>\n        </div>\n\n        {/* Bundle Detection Info */}\n        {filtering.bundledDetection && filtering.totals.bundled > 0 && (\n          <div className=\"flex items-start gap-2 p-3 bg-orange-500/10 border border-orange-500/20 rounded-md\">\n            <Info className=\"h-4 w-4 text-orange-500 mt-0.5 flex-shrink-0\" />\n            <div className=\"space-y-1 flex-1\">\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm font-medium text-orange-600 dark:text-orange-400\">Bundle Detection</span>\n                <Badge variant={getConfidenceBadgeVariant(filtering.bundledDetection.confidence)} className=\"text-xs\">\n                  {filtering.bundledDetection.confidence} confidence\n                </Badge>\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                {filtering.bundledDetection.details}\n              </p>\n              <p className=\"text-xs text-muted-foreground\">\n                Strategy: {filtering.bundledDetection.strategy}\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* Info Box */}\n        <div className=\"flex items-start gap-2 p-3 bg-muted rounded-md\">\n          <Info className=\"h-4 w-4 text-muted-foreground mt-0.5 flex-shrink-0\" />\n          <p className=\"text-xs text-muted-foreground\">\n            These addresses are automatically excluded from top holder concentration calculations to provide more accurate whale analysis.\n          </p>\n        </div>\n\n        {/* Expandable Address List */}\n        {totalFiltered > 0 && (\n          <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n            <CollapsibleTrigger className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors w-full\" data-testid=\"button-toggle-filtered-addresses\">\n              <ChevronDown className={`h-4 w-4 transition-transform ${isOpen ? 'rotate-180' : ''}`} />\n              <span>View {totalFiltered} filtered {totalFiltered === 1 ? 'address' : 'addresses'}</span>\n            </CollapsibleTrigger>\n            \n            <CollapsibleContent className=\"mt-3\">\n              <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n                {filtering.excluded.map((addr, index) => (\n                  <div \n                    key={index}\n                    className=\"flex items-start justify-between gap-2 p-2 bg-muted rounded-md text-xs\"\n                    data-testid={`filtered-address-${index}`}\n                  >\n                    <div className=\"flex-1 min-w-0 space-y-1\">\n                      <code className=\"font-mono text-xs break-all\">\n                        {addr.address}\n                      </code>\n                      {addr.label && (\n                        <p className=\"text-muted-foreground\">{addr.label}</p>\n                      )}\n                      <p className=\"text-muted-foreground italic\">{addr.reason}</p>\n                    </div>\n                    <Badge variant=\"outline\" className=\"text-xs flex-shrink-0\">\n                      {getTypeLabel(addr.type)}\n                    </Badge>\n                  </div>\n                ))}\n              </div>\n            </CollapsibleContent>\n          </Collapsible>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":7054},"CHANGELOG.md":{"content":"# Changelog\n\nAll notable changes to the Solana Rug Killer project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n---\n\n## [Unreleased]\n\n### Added\n- **Rick Bot Features (Nov 2024 - COMPLETE)**:\n  - **BREAKING CHANGE: Risk Scoring Reversal**: Changed from 0=safe/100=dangerous to 0=dangerous/100=safe (Rick Bot standard)\n    - Core scoring formula inverted: returns `100 - rawScore`\n    - Updated all threshold logic: GREEN (70-100), YELLOW (40-70), ORANGE (20-40), RED (0-20)\n    - Fixed AI blacklist rules to use new scale (score <= 20 = extreme risk)\n    - Updated frontend color coding across all components\n    - Error fallback returns riskScore: 0 (most dangerous) for safety\n  - **Birdeye API Integration**: Enhanced market data with optional BIRDEYE_API_KEY\n    - getBirdeyeOverview() - real-time price, market cap, liquidity, LP burn status\n    - getBirdeyePriceHistory() - historical price data for trend analysis\n    - getBirdeyeTopHolders() - top 20 holder distribution with sniper detection\n    - Graceful error handling for rate limits (works without API key)\n  - **Pump.fun Direct API**: Dedicated pump.fun token detection\n    - Detects pump.fun launches and extracts dev bought percentage\n    - Tracks bonding curve progress for graduation monitoring\n    - Safe defaults for non-pump.fun tokens\n  - **AI Verdict System**: Rick Bot style intelligent recommendations\n    - Natural language ratings: 10/10, 7/10, 5/10, 3/10\n    - Contextual verdicts: \"MOON SHOT\", \"HIGH RISK/HIGH REWARD\", \"PROCEED WITH CAUTION\", \"RUG CITY\"\n    - Considers risk score, authorities, LP status, and market cap\n    - Integrated into token analysis response\n  - **Enhanced Bot Formatting**: Professional Rick Bot style output\n    - Telegram & Discord bots now display Contract Address prominently (ðŸ“‹ section)\n    - Rick Bot emoji sections: ðŸ’° PRICE, ðŸ›¡ï¸ RISK, ðŸ” SECURITY, ðŸŽ¯ PUMP.FUN, ðŸ‘› HOLDERS, ðŸ¤– AI VERDICT, ðŸ”— QUICK LINKS\n    - Color-coded risk levels matching new scoring scale\n    - Clear, actionable recommendations for traders\n  - **Improved Error Handling**:\n    - Specific messaging for 429 rate limits from Solana RPC\n    - Invalid address detection with helpful error messages\n    - Graceful degradation when APIs are unavailable\n    - Safe fallback to highest risk level on failures\n- **Advanced Analytics Dashboard (Option C - COMPLETE)**:\n  - **Market Overview**: Summary statistics (total analyzed, rugs detected, avg risk score, active alerts), top 10 trending tokens with risk scores and analyze buttons, risk distribution visualization\n  - **Historical Tracking**: Time-series charts showing token performance over configurable timeframes (7d/30d/90d), supports any token address input, responsive line/bar charts with tooltips\n  - **Risk Insights**: Aggregate rug pull statistics (7-day and 30-day periods), common red flag analysis with pie chart visualization, detection rate metrics\n  - **Hot Tokens**: Real-time feed of newly launched/high-volume tokens (auto-refresh every 30s), comprehensive token stats with quick analyze buttons, limit 20 tokens\n  - **Performance Metrics**: Success rates and false positive analysis (7-day and 30-day), coverage metrics showing detection accuracy, system performance KPIs\n  - **Database Tables**: token_snapshots (historical data), trending_tokens (hot tokens feed), risk_statistics (aggregate metrics)\n  - **Background Workers**: Snapshot collector (every 5 mins), trending calculator (every 5 mins), risk aggregator (daily)\n  - **5 Analytics API Endpoints**: /market-overview, /historical/:tokenAddress, /risk-insights, /hot-tokens, /performance\n  - **195+ data-testid attributes** for comprehensive test coverage across all analytics sections\n  - Navigation menu updated with Analytics Dashboard link in Tools section\n  - All numeric displays use Number() wrapping for safe formatting\n  - Loading states for all sections with skeleton UI\n  - Mobile-responsive design with card-based layouts\n- **Testing Infrastructure (Option A)**:\n  - 32 comprehensive unit tests for `server/solana-analyzer.ts` covering risk scoring, bundle detection, holder filtering, and API resilience (429 rate limits, timeouts)\n  - 15+ integration tests using Supertest for API endpoints\n  - 16 end-to-end tests using Playwright for frontend flows (token search, bundle visualization, auto-refresh, risk indicators)\n  - Test fixtures and mocking utilities with deterministic Solana data\n  - Jest configuration with separate coverage directories (unit: 92%, integration, global: 70%)\n  - Playwright configuration with Chromium/Firefox/WebKit support\n  - Mock builder pattern for flexible test scenarios\n- **User Features (Option B)**:\n  - **Portfolio Tracker**: Track holdings, transactions, and P&L with weighted-average cost basis\n    - Weighted-average cost basis calculation using decimal.js for precision\n    - Row-level locking (SELECT FOR UPDATE) for transactional integrity\n    - Support for buy/sell/airdrop transaction types\n    - Real-time unrealized P&L calculation via price cache integration\n    - Realized P&L tracking across all transactions\n    - Comprehensive transaction history with filtering by token\n    - Safe numeric formatting with Number() wrapping to prevent display errors\n    - Client-side validation preventing negative quantities and malformed inputs\n    - Complete data-testid coverage for testing\n  - **Price Alerts**: Get notified when prices hit your targets\n    - Four alert types: price_above, price_below, percent_change, percent_drop\n    - BullMQ worker for periodic alert monitoring (every 60 seconds)\n    - Price cache integration (15-30s TTL) for efficient monitoring\n    - Configurable lookback windows for percentage-based alerts\n    - Alert persistence with lastPrice tracking (toFixed(8) precision)\n    - Active/inactive toggle for alert management\n    - Email notifications when alerts trigger (ready for integration)\n    - Safe numeric formatting preventing exponential notation\n    - Client-side validation for token addresses (length >= 32) and target values\n    - Complete data-testid coverage for testing\n  - **Token Comparison**: Compare multiple tokens side-by-side\n    - Batch analysis of up to 10 tokens simultaneously\n    - Side-by-side comparison of risk scores, holder metrics, and market data\n    - Mobile-responsive design with card-based layout\n    - Desktop table view for detailed analysis\n    - Safe numeric formatting for all metrics\n    - Complete data-testid coverage for testing\n  - **Price Cache Infrastructure**:\n    - Batch price fetching with 15-30s TTL caching\n    - DexScreener and Jupiter integration for accurate pricing\n    - Automatic cache invalidation and refresh\n    - Support for multi-token queries via POST /api/prices\n- Bundle percentage detection (DevsNightmarePro style) - calculates % of supply controlled by bundled wallets\n- Auto-refresh functionality - automatically re-analyzes tokens every 5 minutes\n- Orange UI highlighting for bundle warnings in MetricsGrid component\n- Comprehensive bundle visualization pie chart with interactive tooltips\n- Navigation menu enhancements with \"Tools\" section for Portfolio, Alerts, and Comparison\n- This CHANGELOG.md file to track all changes\n\n### Deferred\n- **Social Features & Community (Option D)**: Token comments, community risk votes, user profiles & reputation, social sharing, watchlist sharing, token reports - deferred to future implementation\n- **Mobile Optimization (Option E)**: PWA support, push notifications, mobile navigation, performance optimizations - deferred to future implementation\n\n### Fixed\n- Pump.fun LP detection now handles both `pump_fun` and `pump_fun_amm` market types\n- LP burn percentage calculation for pump.fun tokens (now uses `lpLockedPct` instead of `lpBurn`)\n- Liquidity status logic - tokens with >=90% locked liquidity now correctly show as SAFE\n- Bundle percentage display logic - only shows prominent metric when bundles are detected\n\n### Changed\n- **GitHub Actions CI/CD Pipeline Enhanced**:\n  - Split into separate jobs: lint/typecheck, unit tests, integration tests, e2e tests, build, security scan\n  - Codecov integration for test coverage tracking\n  - Playwright test reports uploaded as artifacts\n  - Process cleanup to prevent hung CI runners (10-15 minute timeouts)\n  - Separate coverage directories to prevent overwriting\n- MetricsGrid component now shows \"Bundle Supply % (DevsNightmare)\" metric when bundles detected\n- Updated market type detection to use prefix matching (`startsWith('pump_fun')`) instead of exact match\n- Enhanced holder filtering to expose bundle supply percentage in API response\n- Improved documentation in replit.md with pump_fun_amm market type handling\n- Exported Express app from server/index.ts for integration testing\n\n---\n\n## [1.0.0] - 2024-11-12\n\n### Initial Release Features\n\n#### Core Analysis\n- Multi-source token analysis (Rugcheck, GoPlus, DexScreener, Jupiter)\n- Real-time holder count using `getProgramAccounts` RPC method\n- Authority checks (mint/freeze)\n- Top holder concentration analysis\n- Transaction history timeline\n- 0-100 risk scoring with red flags\n\n#### Advanced Holder Filtering\n- Multi-layered filtering system excluding non-whale addresses:\n  - LP Addresses (DEX pairs, bonding curves, token accounts)\n  - Known Exchanges (CEX wallets, DeFi protocol addresses)\n  - Bundled Wallets (coordinated purchase detection)\n- Interactive pie chart visualization\n- Transparency API field exposing all filtered addresses\n- Confidence-based alerts with edge-case protection\n\n#### Market Data Integration\n- Complete market metrics from DexScreener (price, market cap, FDV, volume, transactions)\n- Accurate holder counts (not just top 20)\n- Pump.fun liquidity detection with lpLockedPct support\n- Real-time USD liquidity values\n- Token metadata from DexScreener for pump.fun tokens\n\n#### Authentication & Payments\n- Replit Auth integration (Google, GitHub, X, Apple, email/password)\n- Whop subscription management (Individual, Group, Lifetime plans)\n- 1-week free trial for all plans\n- Crypto payments (Solana only) with 6 confirmations\n- Subscription codes with redemption system\n- Admin access control via ADMIN_EMAILS\n\n#### Bots & Alerts\n- Telegram bot with token analysis commands\n- Discord bot with rich embeds\n- Live alpha alerts for:\n  - Smart money wallet signals\n  - New pump.fun launches (WebSocket)\n  - Quality-filtered gems (RugCheck >85, liquidity >$5K)\n\n#### AI Blacklist System\n- Rules-based detection engine with 6 automated rules\n- Analyzes 52+ risk metrics\n- Honeypot detection\n- High sell tax identification\n- Suspicious authority flagging\n- Wash trading pattern detection\n\n#### Creator Wallet\n- Admin-only pump.fun creator wallet management\n- Earn 0.05% of trading volume rewards\n- Secure one-time private key generation\n- Phantom wallet integration\n- Balance monitoring\n\n---\n\n## Version History\n\n### Key Milestones\n\n**November 2024 - Data Accuracy Improvements**\n- Implemented complete market data integration\n- Added actual holder count calculation\n- Enhanced holder filtering with bundle detection\n- Fixed pump.fun liquidity detection\n- Added bundle visualization\n\n**October 2024 - Initial Development**\n- Core token analysis engine\n- Multi-source data aggregation\n- Basic risk scoring\n- UI/UX foundation\n\n---\n\n## Contributing\n\nWhen adding to this changelog:\n1. Add unreleased changes to the `[Unreleased]` section\n2. Follow the format: Added, Changed, Deprecated, Removed, Fixed, Security\n3. Move unreleased items to a versioned release when deploying\n4. Use present tense (\"Add feature\" not \"Added feature\")\n5. Reference issue numbers when applicable\n\n---\n\n## Support\n\n- **Documentation**: See [replit.md](./replit.md)\n- **Issues**: Report bugs via GitHub Issues\n- **Token**: $ANTIRUG - `2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt`\n- **Website**: https://rugkilleronsol.org\n","size_bytes":12027},"client/src/pages/watchlist.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Header } from \"@/components/header-new\";\nimport { Footer } from \"@/components/footer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Loader2, Plus, Trash2, Star, Share2, Copy, Twitter, Send, Users, Heart } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport type { WatchlistEntry, SharedWatchlist } from \"@shared/schema\";\n\nexport default function Watchlist() {\n  const { toast } = useToast();\n  const { isAuthenticated } = useAuth();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [tokenAddress, setTokenAddress] = useState(\"\");\n  const [label, setLabel] = useState(\"\");\n  const [shareModalOpen, setShareModalOpen] = useState(false);\n  const [isPublic, setIsPublic] = useState(false);\n  const [shareLink, setShareLink] = useState(\"\");\n\n  const { data: watchlist, isLoading } = useQuery<WatchlistEntry[]>({\n    queryKey: [\"/api/watchlist\"],\n  });\n\n  const addMutation = useMutation({\n    mutationFn: async (data: { tokenAddress: string; label?: string }) => {\n      const response = await apiRequest(\"POST\", \"/api/watchlist\", data);\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/watchlist\"] });\n      toast({\n        title: \"Success\",\n        description: \"Token added to watchlist\",\n      });\n      setIsDialogOpen(false);\n      setTokenAddress(\"\");\n      setLabel(\"\");\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message.includes(\"409\") \n          ? \"This token is already in your watchlist\"\n          : \"Failed to add token to watchlist\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const removeMutation = useMutation({\n    mutationFn: async (tokenAddress: string) => {\n      await apiRequest(\"DELETE\", `/api/watchlist/${tokenAddress}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/watchlist\"] });\n      toast({\n        title: \"Success\",\n        description: \"Token removed from watchlist\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to remove token from watchlist\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleAddToken = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!tokenAddress.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a token address\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (tokenAddress.length < 32 || tokenAddress.length > 44) {\n      toast({\n        title: \"Error\",\n        description: \"Invalid token address format\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    addMutation.mutate({\n      tokenAddress: tokenAddress.trim(),\n      label: label.trim() || undefined,\n    });\n  };\n\n  const handleRemoveToken = (address: string) => {\n    removeMutation.mutate(address);\n  };\n\n  const truncateAddress = (address: string) => {\n    return `${address.slice(0, 8)}...${address.slice(-8)}`;\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n      \n      <main className=\"flex-1\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8\">\n          <div className=\"space-y-6 sm:space-y-8\">\n            <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n              <div>\n                <h1 className=\"text-3xl sm:text-4xl font-bold flex items-center gap-2\">\n                  <Star className=\"w-8 h-8 text-primary\" />\n                  My Watchlist\n                </h1>\n                <p className=\"text-base sm:text-lg text-muted-foreground mt-2\">\n                  Track your favorite tokens and monitor their activity\n                </p>\n              </div>\n              \n              <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n                <DialogTrigger asChild>\n                  <Button data-testid=\"button-add-watchlist\">\n                    <Plus className=\"w-4 h-4 mr-2\" />\n                    Add Token\n                  </Button>\n                </DialogTrigger>\n                <DialogContent data-testid=\"dialog-add-watchlist\">\n                  <DialogHeader>\n                    <DialogTitle>Add Token to Watchlist</DialogTitle>\n                    <DialogDescription>\n                      Enter the Solana token address you want to track\n                    </DialogDescription>\n                  </DialogHeader>\n                  <form onSubmit={handleAddToken}>\n                    <div className=\"space-y-4 py-4\">\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"tokenAddress\">\n                          Token Address <span className=\"text-destructive\">*</span>\n                        </Label>\n                        <Input\n                          id=\"tokenAddress\"\n                          placeholder=\"e.g., EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v\"\n                          value={tokenAddress}\n                          onChange={(e) => setTokenAddress(e.target.value)}\n                          data-testid=\"input-token-address\"\n                          disabled={addMutation.isPending}\n                        />\n                      </div>\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"label\">Label (Optional)</Label>\n                        <Input\n                          id=\"label\"\n                          placeholder=\"e.g., USDC, My favorite token\"\n                          value={label}\n                          onChange={(e) => setLabel(e.target.value)}\n                          maxLength={120}\n                          data-testid=\"input-label\"\n                          disabled={addMutation.isPending}\n                        />\n                      </div>\n                    </div>\n                    <DialogFooter>\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={() => setIsDialogOpen(false)}\n                        disabled={addMutation.isPending}\n                        data-testid=\"button-cancel-add\"\n                      >\n                        Cancel\n                      </Button>\n                      <Button\n                        type=\"submit\"\n                        disabled={addMutation.isPending}\n                        data-testid=\"button-submit-add\"\n                      >\n                        {addMutation.isPending && (\n                          <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                        )}\n                        Add to Watchlist\n                      </Button>\n                    </DialogFooter>\n                  </form>\n                </DialogContent>\n              </Dialog>\n            </div>\n\n            <Card data-testid=\"card-watchlist\">\n              <CardHeader>\n                <CardTitle>Tracked Tokens</CardTitle>\n                <CardDescription>\n                  Tokens you're currently monitoring\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                {isLoading ? (\n                  <div className=\"flex items-center justify-center py-12\">\n                    <Loader2 className=\"w-8 h-8 animate-spin text-muted-foreground\" />\n                  </div>\n                ) : !watchlist || watchlist.length === 0 ? (\n                  <div className=\"text-center py-12\" data-testid=\"empty-state\">\n                    <Star className=\"w-16 h-16 mx-auto text-muted-foreground mb-4\" />\n                    <h3 className=\"text-lg font-semibold mb-2\">No tokens in watchlist</h3>\n                    <p className=\"text-muted-foreground mb-4\">\n                      Start tracking tokens by adding them to your watchlist\n                    </p>\n                    <Button\n                      onClick={() => setIsDialogOpen(true)}\n                      data-testid=\"button-add-first-token\"\n                    >\n                      <Plus className=\"w-4 h-4 mr-2\" />\n                      Add Your First Token\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"overflow-x-auto\">\n                    <Table>\n                      <TableHeader>\n                        <TableRow>\n                          <TableHead>Token Address</TableHead>\n                          <TableHead>Label</TableHead>\n                          <TableHead>Added Date</TableHead>\n                          <TableHead className=\"text-right\">Actions</TableHead>\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {watchlist.map((entry) => (\n                          <TableRow key={entry.id} data-testid={`row-watchlist-${entry.id}`}>\n                            <TableCell className=\"font-mono text-sm\">\n                              <span className=\"hidden sm:inline\" data-testid={`text-address-full-${entry.id}`}>\n                                {entry.tokenAddress}\n                              </span>\n                              <span className=\"sm:hidden\" data-testid={`text-address-truncated-${entry.id}`}>\n                                {truncateAddress(entry.tokenAddress)}\n                              </span>\n                            </TableCell>\n                            <TableCell data-testid={`text-label-${entry.id}`}>\n                              {entry.label || (\n                                <span className=\"text-muted-foreground italic\">No label</span>\n                              )}\n                            </TableCell>\n                            <TableCell data-testid={`text-date-${entry.id}`}>\n                              {entry.createdAt \n                                ? format(new Date(entry.createdAt), 'MMM d, yyyy')\n                                : 'Unknown'}\n                            </TableCell>\n                            <TableCell className=\"text-right\">\n                              <Button\n                                variant=\"ghost\"\n                                size=\"icon\"\n                                onClick={() => handleRemoveToken(entry.tokenAddress)}\n                                disabled={removeMutation.isPending}\n                                data-testid={`button-remove-${entry.id}`}\n                                aria-label=\"Remove from watchlist\"\n                              >\n                                <Trash2 className=\"w-4 h-4 text-destructive\" />\n                              </Button>\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </main>\n      \n      <Footer />\n    </div>\n  );\n}\n","size_bytes":11816},"tests/integration/README.md":{"content":"# API Integration Tests\n\n## Overview\n\nThis directory contains comprehensive integration tests for the Express API server using Supertest.\n\n## Test File\n\n- `api-routes.test.ts` - Complete integration tests for `/api/analyze-token` endpoint\n\n## Test Coverage\n\n### Success Cases âœ…\n- Complete token analysis for valid pump.fun tokens\n- Market data inclusion from DexScreener\n- Bundle detection and reporting\n- Proper holder data formatting with ranks and percentages\n- Risk score calculation based on multiple factors\n\n### Error Cases âœ…\n- Missing tokenAddress (400)\n- Empty tokenAddress (400)\n- Token address too short (400)\n- Token address too long (400)\n- Invalid token address format (500)\n- External API failures\n- Non-existent tokens\n\n### Response Structure Validation âœ…\n- All required fields present\n- Timestamp in Unix milliseconds format\n- RedFlags with proper severity levels\n- Holder filtering metadata included\n\n### Special Token Types âœ…\n- Pump.fun token identification\n- High holder concentration handling\n\n## Test Features\n\n- âœ… Uses Supertest for HTTP testing\n- âœ… Mocks all external Solana/API calls using nock\n- âœ… Imports app from server/index.ts (refactored to export)\n- âœ… Uses fixtures from `tests/fixtures/solana/token-fixtures.ts`\n- âœ… Uses mocks from `tests/utils/solana-mocks.ts`\n- âœ… Tests both success (200) and error (400, 500) responses\n- âœ… Verifies response JSON structure matches expected schema\n\n## Running the Tests\n\n### Known Issue - Jest Haste Map\n\nThere is currently an environment-specific issue with Jest's haste map and Bun's package cache structure that affects all tests in this Replit environment. This is not a code issue but an environmental configuration issue.\n\n### Workaround\n\nTo run these tests in a local environment or CI/CD:\n\n```bash\n# Clear jest cache\nnpx jest --clearCache\n\n# Run integration tests\nnpx jest tests/integration/api-routes.test.ts --verbose\n\n# Or run all tests\nnpx jest\n```\n\n### Alternative Testing\n\nThe tests can also be validated by:\n1. Manual API testing with tools like Postman or curl\n2. Running in a Docker container with a clean node_modules\n3. Using a different test runner like Vitest\n\n## Test Structure\n\nEach test follows the AAA pattern:\n- **Arrange**: Mock external APIs with nock\n- **Act**: Make HTTP request with supertest\n- **Assert**: Verify response structure and data\n\n## Example\n\n```typescript\nit('should return 200 and complete analysis for valid pump.fun token', async () => {\n  // Arrange: Mock all external API calls\n  mockCompleteAnalysis(PUMP_FUN_TOKEN.address, 'safe');\n\n  // Act: Make request with supertest\n  const response = await request(app)\n    .post('/api/analyze-token')\n    .send({ tokenAddress: PUMP_FUN_TOKEN.address })\n    .expect('Content-Type', /json/)\n    .expect(200);\n\n  // Assert: Verify response structure and data\n  expect(response.body).toHaveProperty('tokenAddress');\n  expect(response.body).toHaveProperty('riskScore');\n  // ... more assertions\n});\n```\n\n## Dependencies\n\n- `supertest` - HTTP testing\n- `nock` - HTTP mocking\n- `jest` - Test runner\n- `@types/supertest` - TypeScript types\n- `@types/jest` - TypeScript types\n\n## Notes\n\n- All external API calls are mocked to ensure deterministic tests\n- Tests use fixtures for consistent test data\n- Server is properly cleaned up after all tests complete\n- Each test has its own isolated mock setup/teardown\n","size_bytes":3381},"tests/integration/setup.ts":{"content":"import { clearAllMocks } from '../utils/solana-mocks';\n\nbeforeEach(() => {\n  clearAllMocks();\n});\n\nafterEach(() => {\n  clearAllMocks();\n});\n\nafterAll(() => {\n  clearAllMocks();\n});\n","size_bytes":181},"jest.config.ts":{"content":"import type { Config } from '@jest/types';\n\nconst config: Config.InitialOptions = {\n  testPathIgnorePatterns: [\n    '/node_modules/',\n    '/.cache/',\n    '/dist/',\n    '/coverage/',\n  ],\n  modulePathIgnorePatterns: [\n    '<rootDir>/.cache/',\n    '<rootDir>/dist/',\n    '<rootDir>/coverage/',\n    '<rootDir>/node_modules/',\n  ],\n  watchPathIgnorePatterns: [\n    '<rootDir>/.cache/',\n    '<rootDir>/dist/',\n    '<rootDir>/coverage/',\n    '<rootDir>/node_modules/',\n  ],\n  haste: {\n    enableSymlinks: false,\n    forceNodeFilesystemAPI: true,\n    throwOnModuleCollision: false,\n  },\n  transformIgnorePatterns: [\n    'node_modules/',\n    '\\\\.cache/',\n    '\\\\.pnp\\\\.[^\\\\\\/]+$',\n  ],\n  projects: [\n    {\n      displayName: 'server',\n      testEnvironment: 'node',\n      testMatch: ['<rootDir>/server/**/*.test.ts'],\n      preset: 'ts-jest',\n      globals: {\n        'ts-jest': {\n          tsconfig: '<rootDir>/tsconfig.test.json',\n        },\n      },\n      moduleNameMapper: {\n        '^@/(.*)$': '<rootDir>/server/$1',\n        '^@shared/(.*)$': '<rootDir>/shared/$1',\n      },\n      collectCoverageFrom: [\n        'server/**/*.ts',\n        '!server/**/*.test.ts',\n        '!server/**/*.d.ts',\n        '!server/vite.ts',\n        '!server/index.ts',\n      ],\n      coverageDirectory: '<rootDir>/coverage/unit',\n      coverageThreshold: {\n        'server/solana-analyzer.ts': {\n          statements: 85,\n          branches: 85,\n          functions: 85,\n          lines: 85,\n        },\n        global: {\n          statements: 70,\n          branches: 65,\n          functions: 70,\n          lines: 70,\n        },\n      },\n    },\n    {\n      displayName: 'integration',\n      testEnvironment: 'node',\n      testMatch: ['<rootDir>/tests/integration/**/*.test.ts'],\n      preset: 'ts-jest',\n      globals: {\n        'ts-jest': {\n          tsconfig: '<rootDir>/tsconfig.test.json',\n        },\n      },\n      moduleNameMapper: {\n        '^@/(.*)$': '<rootDir>/server/$1',\n        '^@shared/(.*)$': '<rootDir>/shared/$1',\n      },\n      setupFilesAfterEnv: ['<rootDir>/tests/integration/setup.ts'],\n      testTimeout: 30000,\n      coverageDirectory: '<rootDir>/coverage/integration',\n    },\n  ],\n  collectCoverage: true,\n  coverageDirectory: '<rootDir>/coverage',\n  coverageReporters: ['text', 'lcov', 'html'],\n};\n\nexport default config;\n","size_bytes":2321},"server/workers/alert-worker.ts":{"content":"import { storage } from \"../storage\";\nimport { priceService } from \"../services/price-service\";\nimport type { PriceAlert } from \"@shared/schema\";\n\n/**\n * Price Alert Worker\n * Monitors active price alerts and triggers them when conditions are met\n * \n * NOTE: This is designed to be called periodically (every 1-5 minutes)\n * In production, use BullMQ with a cron job or setInterval\n */\n\nexport interface AlertEvaluation {\n  alert: PriceAlert;\n  triggered: boolean;\n  currentPrice: number | null;\n  reason?: string;\n}\n\nexport class AlertWorker {\n  private isRunning = false;\n  private intervalId?: NodeJS.Timeout;\n\n  /**\n   * Start the alert worker with periodic checks\n   * @param intervalMs - Check interval in milliseconds (default: 60000 = 1 minute)\n   */\n  start(intervalMs: number = 60000) {\n    if (this.isRunning) {\n      console.log(\"Alert worker already running\");\n      return;\n    }\n\n    console.log(`Starting alert worker (checking every ${intervalMs}ms)`);\n    this.isRunning = true;\n\n    // Run immediately\n    this.checkAlerts().catch(console.error);\n\n    // Then run periodically\n    this.intervalId = setInterval(() => {\n      this.checkAlerts().catch(console.error);\n    }, intervalMs);\n  }\n\n  /**\n   * Stop the alert worker\n   */\n  stop() {\n    if (this.intervalId) {\n      clearInterval(this.intervalId);\n      this.intervalId = undefined;\n    }\n    this.isRunning = false;\n    console.log(\"Alert worker stopped\");\n  }\n\n  /**\n   * Check all active alerts and trigger those that meet conditions\n   */\n  async checkAlerts(): Promise<AlertEvaluation[]> {\n    try {\n      // Get all active alerts\n      const alerts = await storage.getActivePriceAlerts();\n      \n      if (alerts.length === 0) {\n        return [];\n      }\n\n      console.log(`Checking ${alerts.length} active alerts...`);\n\n      // Evaluate each alert\n      const evaluations = await Promise.all(\n        alerts.map(alert => this.evaluateAlert(alert))\n      );\n\n      // Trigger alerts that meet conditions\n      const triggered = evaluations.filter(e => e.triggered);\n      if (triggered.length > 0) {\n        console.log(`Triggered ${triggered.length} alerts`);\n        \n        await Promise.all(\n          triggered.map(async (evaluation) => {\n            if (evaluation.currentPrice !== null) {\n              await storage.triggerAlert(evaluation.alert.id, evaluation.currentPrice);\n              console.log(`Alert ${evaluation.alert.id} triggered: ${evaluation.reason}`);\n            }\n          })\n        );\n      }\n\n      return evaluations;\n    } catch (error) {\n      console.error(\"Error checking alerts:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Evaluate a single alert against current price\n   */\n  private async evaluateAlert(alert: PriceAlert): Promise<AlertEvaluation> {\n    try {\n      // Get current price from cache\n      const priceData = await priceService.getPrice(alert.tokenAddress);\n      \n      if (!priceData?.priceUsd) {\n        return {\n          alert,\n          triggered: false,\n          currentPrice: null,\n          reason: \"Price data unavailable\",\n        };\n      }\n\n      const currentPrice = priceData.priceUsd;\n      const targetValue = parseFloat(alert.targetValue);\n\n      // Update last checked price with fixed precision (avoid exponential notation)\n      await storage.updatePriceAlert(alert.id, { lastPrice: currentPrice.toFixed(8) });\n\n      // Evaluate condition based on alert type\n      let triggered = false;\n      let reason = \"\";\n\n      switch (alert.alertType) {\n        case 'price_above':\n          triggered = currentPrice > targetValue;\n          reason = triggered ? `Price $${currentPrice.toFixed(4)} exceeded target $${targetValue.toFixed(4)}` : \"\";\n          break;\n\n        case 'price_below':\n          triggered = currentPrice < targetValue;\n          reason = triggered ? `Price $${currentPrice.toFixed(4)} fell below target $${targetValue.toFixed(4)}` : \"\";\n          break;\n\n        case 'percent_change':\n        case 'percent_drop':\n          // For percent-based alerts, we need historical price\n          // For now, use lastPrice as baseline (simplified)\n          if (alert.lastPrice) {\n            const lastPrice = parseFloat(alert.lastPrice);\n            const percentChange = ((currentPrice - lastPrice) / lastPrice) * 100;\n            \n            if (alert.alertType === 'percent_change') {\n              triggered = Math.abs(percentChange) >= targetValue;\n              reason = triggered ? `Price changed ${percentChange.toFixed(2)}% (threshold: ${targetValue}%)` : \"\";\n            } else {\n              // percent_drop\n              triggered = percentChange <= -targetValue;\n              reason = triggered ? `Price dropped ${percentChange.toFixed(2)}% (threshold: -${targetValue}%)` : \"\";\n            }\n          }\n          break;\n\n        default:\n          console.warn(`Unknown alert type: ${alert.alertType}`);\n      }\n\n      return {\n        alert,\n        triggered,\n        currentPrice,\n        reason,\n      };\n    } catch (error) {\n      console.error(`Error evaluating alert ${alert.id}:`, error);\n      return {\n        alert,\n        triggered: false,\n        currentPrice: null,\n        reason: `Evaluation error: ${error instanceof Error ? error.message : 'Unknown'}`,\n      };\n    }\n  }\n}\n\n// Singleton instance\nexport const alertWorker = new AlertWorker();\n\n// Auto-start in production (disabled for development to avoid noise)\nif (process.env.NODE_ENV === 'production') {\n  // Check every 2 minutes in production\n  alertWorker.start(120000);\n}\n","size_bytes":5544},"tests/utils/solana-mocks.ts":{"content":"import nock from 'nock';\nimport {\n  DEXSCREENER_DATA_PUMP,\n  RUGCHECK_DATA_PUMP,\n  RUGCHECK_DATA_WITH_BUNDLES,\n  GOPLUS_DATA_SAFE,\n  GOPLUS_DATA_RISKY,\n} from '../fixtures/solana/token-fixtures';\n\n/**\n * Mock Solana RPC responses\n */\nexport function mockSolanaRPC() {\n  // Mock getAccountInfo for token accounts\n  nock('https://api.mainnet-beta.solana.com')\n    .persist()\n    .post('/', (body: any) => {\n      return body.method === 'getAccountInfo';\n    })\n    .reply(200, {\n      jsonrpc: '2.0',\n      result: {\n        value: {\n          data: ['', 'base64'],\n          executable: false,\n          lamports: 2039280,\n          owner: 'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA',\n          rentEpoch: 361,\n        },\n      },\n      id: 1,\n    });\n\n  // Mock getProgramAccounts for holder count\n  nock('https://api.mainnet-beta.solana.com')\n    .persist()\n    .post('/', (body: any) => {\n      return body.method === 'getProgramAccounts';\n    })\n    .reply(200, {\n      jsonrpc: '2.0',\n      result: new Array(1557).fill(null).map((_, i) => ({\n        account: {\n          data: ['', 'base64'],\n          executable: false,\n          lamports: 2039280,\n          owner: 'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA',\n          rentEpoch: 361,\n        },\n        pubkey: `Holder${i}AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA`,\n      })),\n      id: 1,\n    });\n}\n\n/**\n * Mock DexScreener API\n */\nexport function mockDexScreener(tokenAddress: string, variant: 'pump' | 'bundle' = 'pump') {\n  const data = variant === 'pump' ? DEXSCREENER_DATA_PUMP : DEXSCREENER_DATA_PUMP;\n  \n  nock('https://api.dexscreener.com')\n    .get(`/latest/dex/tokens/${tokenAddress}`)\n    .reply(200, data);\n}\n\n/**\n * Mock Rugcheck API\n */\nexport function mockRugcheck(tokenAddress: string, variant: 'safe' | 'bundles' = 'safe') {\n  const data = variant === 'safe' ? RUGCHECK_DATA_PUMP : RUGCHECK_DATA_WITH_BUNDLES;\n  \n  nock('https://api.rugcheck.xyz')\n    .get(`/v1/tokens/${tokenAddress}/report`)\n    .reply(200, data);\n}\n\n/**\n * Mock GoPlus Security API\n */\nexport function mockGoPlus(tokenAddress: string, variant: 'safe' | 'risky' = 'safe') {\n  const data = variant === 'safe' ? GOPLUS_DATA_SAFE : GOPLUS_DATA_RISKY;\n  \n  nock('https://api.gopluslabs.io')\n    .get(`/api/v1/token_security/solana`)\n    .query({ contract_addresses: tokenAddress })\n    .reply(200, data);\n}\n\n/**\n * Mock all external APIs for a complete token analysis\n */\nexport function mockCompleteAnalysis(\n  tokenAddress: string,\n  variant: 'safe' | 'bundles' | 'risky' = 'safe'\n) {\n  mockSolanaRPC();\n  mockDexScreener(tokenAddress, variant === 'bundles' ? 'bundle' : 'pump');\n  mockRugcheck(tokenAddress, variant === 'bundles' ? 'bundles' : 'safe');\n  mockGoPlus(tokenAddress, variant === 'risky' ? 'risky' : 'safe');\n}\n\n/**\n * Clear all mocks\n */\nexport function clearAllMocks() {\n  nock.cleanAll();\n}\n\n/**\n * Builder pattern for creating custom mock responses\n */\nexport class MockBuilder {\n  private mocks: Array<() => void> = [];\n\n  withDexScreener(tokenAddress: string, data: any) {\n    this.mocks.push(() => {\n      nock('https://api.dexscreener.com')\n        .get(`/latest/dex/tokens/${tokenAddress}`)\n        .reply(200, data);\n    });\n    return this;\n  }\n\n  withRugcheck(tokenAddress: string, data: any) {\n    this.mocks.push(() => {\n      nock('https://api.rugcheck.xyz')\n        .get(`/v1/tokens/${tokenAddress}/report`)\n        .reply(200, data);\n    });\n    return this;\n  }\n\n  withGoPlus(tokenAddress: string, data: any) {\n    this.mocks.push(() => {\n      nock('https://api.gopluslabs.io')\n        .get(`/api/v1/token_security/solana`)\n        .query({ contract_addresses: tokenAddress })\n        .reply(200, data);\n    });\n    return this;\n  }\n\n  build() {\n    this.mocks.forEach(mock => mock());\n  }\n}\n","size_bytes":3763},"playwright.config.ts":{"content":"import { defineConfig, devices } from '@playwright/test';\n\nexport default defineConfig({\n  testDir: './tests/e2e',\n  fullyParallel: true,\n  forbidOnly: !!process.env.CI,\n  retries: process.env.CI ? 2 : 0,\n  workers: process.env.CI ? 1 : undefined,\n  reporter: [\n    ['html'],\n    ['list'],\n    ['json', { outputFile: 'test-results/results.json' }],\n  ],\n  use: {\n    baseURL: 'http://localhost:5000',\n    trace: 'on-first-retry',\n    screenshot: 'only-on-failure',\n    video: 'retain-on-failure',\n  },\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n    {\n      name: 'firefox',\n      use: { ...devices['Desktop Firefox'] },\n    },\n    {\n      name: 'webkit',\n      use: { ...devices['Desktop Safari'] },\n    },\n  ],\n  webServer: {\n    command: 'npm run dev',\n    url: 'http://localhost:5000',\n    reuseExistingServer: !process.env.CI,\n    timeout: 120000,\n  },\n});\n","size_bytes":914},"client/src/pages/portfolio.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Plus, Trash2, TrendingUp, TrendingDown, DollarSign } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { PortfolioPosition, PortfolioTransaction } from \"@shared/schema\";\n\nexport default function Portfolio() {\n  const { toast } = useToast();\n  const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\n  const [selectedToken, setSelectedToken] = useState<string | null>(null);\n\n  // Fetch positions\n  const { data: positions = [], isLoading } = useQuery<PortfolioPosition[]>({\n    queryKey: ['/api/portfolio/positions'],\n  });\n\n  // Fetch transactions for selected token\n  const { data: transactions = [] } = useQuery<PortfolioTransaction[]>({\n    queryKey: ['/api/portfolio/transactions', selectedToken],\n    queryFn: async () => {\n      const url = selectedToken \n        ? `/api/portfolio/transactions?tokenAddress=${selectedToken}`\n        : '/api/portfolio/transactions';\n      const res = await fetch(url, { credentials: 'include' });\n      if (!res.ok) throw new Error('Failed to fetch transactions');\n      return res.json();\n    },\n    enabled: !!selectedToken,\n  });\n\n  // Add transaction mutation\n  const addTransaction = useMutation({\n    mutationFn: async (data: any) => {\n      return apiRequest('/api/portfolio/transactions', {\n        method: 'POST',\n        body: JSON.stringify(data),\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/portfolio/positions'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/portfolio/transactions'] });\n      setIsAddDialogOpen(false);\n      toast({ title: \"Transaction recorded\", description: \"Your portfolio has been updated\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  // Delete position mutation\n  const deletePosition = useMutation({\n    mutationFn: async (tokenAddress: string) => {\n      return apiRequest(`/api/portfolio/positions/${tokenAddress}`, { method: 'DELETE' });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/portfolio/positions'] });\n      toast({ title: \"Position deleted\", description: \"Position removed from portfolio\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const formData = new FormData(e.currentTarget);\n    \n    // Validate token address\n    const tokenAddress = formData.get('tokenAddress') as string;\n    if (!tokenAddress || tokenAddress.trim().length < 32) {\n      toast({ \n        title: \"Invalid Token Address\", \n        description: \"Token address must be at least 32 characters\", \n        variant: \"destructive\" \n      });\n      return;\n    }\n    \n    // Parse and validate quantity\n    const quantityStr = formData.get('quantity') as string;\n    if (!quantityStr) {\n      toast({ title: \"Error\", description: \"Quantity is required\", variant: \"destructive\" });\n      return;\n    }\n    const quantity = parseFloat(quantityStr);\n    if (isNaN(quantity)) {\n      toast({ title: \"Invalid Quantity\", description: \"Please enter a valid number for quantity\", variant: \"destructive\" });\n      return;\n    }\n    if (quantity <= 0) {\n      toast({ title: \"Invalid Quantity\", description: \"Quantity must be greater than zero\", variant: \"destructive\" });\n      return;\n    }\n    \n    // Parse and validate price (optional but must be valid if provided)\n    let priceUsd: number | undefined;\n    const priceStr = formData.get('priceUsd') as string;\n    if (priceStr && priceStr !== '') {\n      priceUsd = parseFloat(priceStr);\n      if (isNaN(priceUsd)) {\n        toast({ title: \"Invalid Price\", description: \"Please enter a valid number for price\", variant: \"destructive\" });\n        return;\n      }\n      if (priceUsd < 0) {\n        toast({ title: \"Invalid Price\", description: \"Price cannot be negative\", variant: \"destructive\" });\n        return;\n      }\n    }\n    \n    // Parse and validate fee (optional but must be valid if provided)\n    let feeUsd: number | undefined;\n    const feeStr = formData.get('feeUsd') as string;\n    if (feeStr && feeStr !== '') {\n      feeUsd = parseFloat(feeStr);\n      if (isNaN(feeUsd)) {\n        toast({ title: \"Invalid Fee\", description: \"Please enter a valid number for fee\", variant: \"destructive\" });\n        return;\n      }\n      if (feeUsd < 0) {\n        toast({ title: \"Invalid Fee\", description: \"Fee cannot be negative\", variant: \"destructive\" });\n        return;\n      }\n    }\n    \n    addTransaction.mutate({\n      tokenAddress: tokenAddress.trim(),\n      txType: formData.get('txType') as string,\n      quantity,\n      priceUsd,\n      feeUsd,\n      note: formData.get('note') as string || undefined,\n    });\n  };\n\n  // Calculate portfolio totals\n  const totalValue = positions.reduce((sum, p) => {\n    const qty = Number(p.quantity || 0);\n    const price = Number(p.latestPriceUsd || 0);\n    return sum + (qty * price);\n  }, 0);\n\n  const totalPnl = positions.reduce((sum, p) => {\n    return sum + Number(p.unrealizedPnlUsd || 0) + Number(p.realizedPnlUsd || 0);\n  }, 0);\n\n  return (\n    <div className=\"container mx-auto p-6 space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"title-portfolio\">Portfolio Tracker</h1>\n          <p className=\"text-muted-foreground\">Track your holdings, transactions, and P&L</p>\n        </div>\n        <Dialog open={isAddDialogOpen} onOpenChange={setIsAddDialogOpen}>\n          <DialogTrigger asChild>\n            <Button data-testid=\"button-add-transaction\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Add Transaction\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Record Transaction</DialogTitle>\n              <DialogDescription>\n                Add a buy, sell, or other transaction to your portfolio\n              </DialogDescription>\n            </DialogHeader>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"tokenAddress\">Token Address</Label>\n                <Input id=\"tokenAddress\" name=\"tokenAddress\" required data-testid=\"input-token-address\" />\n              </div>\n              <div>\n                <Label htmlFor=\"txType\">Type</Label>\n                <Select name=\"txType\" required>\n                  <SelectTrigger data-testid=\"select-tx-type\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"buy\">Buy</SelectItem>\n                    <SelectItem value=\"sell\">Sell</SelectItem>\n                    <SelectItem value=\"airdrop\">Airdrop</SelectItem>\n                    <SelectItem value=\"manual_adjust\">Manual Adjust</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label htmlFor=\"quantity\">Quantity</Label>\n                <Input id=\"quantity\" name=\"quantity\" type=\"number\" step=\"any\" required data-testid=\"input-quantity\" />\n              </div>\n              <div>\n                <Label htmlFor=\"priceUsd\">Price USD (required for buy/sell)</Label>\n                <Input id=\"priceUsd\" name=\"priceUsd\" type=\"number\" step=\"any\" data-testid=\"input-price\" />\n              </div>\n              <div>\n                <Label htmlFor=\"feeUsd\">Fee USD</Label>\n                <Input id=\"feeUsd\" name=\"feeUsd\" type=\"number\" step=\"any\" data-testid=\"input-fee\" />\n              </div>\n              <div>\n                <Label htmlFor=\"note\">Note</Label>\n                <Input id=\"note\" name=\"note\" data-testid=\"input-note\" />\n              </div>\n              <Button type=\"submit\" className=\"w-full\" disabled={addTransaction.isPending} data-testid=\"button-submit-transaction\">\n                {addTransaction.isPending ? \"Recording...\" : \"Record Transaction\"}\n              </Button>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Value</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-value\">\n              ${Number(totalValue || 0).toFixed(2)}\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total P&L</CardTitle>\n            {totalPnl >= 0 ? <TrendingUp className=\"h-4 w-4 text-green-500\" /> : <TrendingDown className=\"h-4 w-4 text-red-500\" />}\n          </CardHeader>\n          <CardContent>\n            <div className={`text-2xl font-bold ${totalPnl >= 0 ? 'text-green-500' : 'text-red-500'}`} data-testid=\"text-total-pnl\">\n              ${Number(totalPnl || 0).toFixed(2)}\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Positions</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-position-count\">{positions.length}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Holdings</CardTitle>\n          <CardDescription>Your current token positions</CardDescription>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <p className=\"text-muted-foreground\">Loading positions...</p>\n          ) : positions.length === 0 ? (\n            <p className=\"text-muted-foreground\" data-testid=\"text-empty-portfolio\">No positions yet. Add a transaction to get started.</p>\n          ) : (\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Token</TableHead>\n                  <TableHead className=\"text-right\">Quantity</TableHead>\n                  <TableHead className=\"text-right\">Avg Cost</TableHead>\n                  <TableHead className=\"text-right\">Current Price</TableHead>\n                  <TableHead className=\"text-right\">Value</TableHead>\n                  <TableHead className=\"text-right\">Unrealized P&L</TableHead>\n                  <TableHead className=\"text-right\">Realized P&L</TableHead>\n                  <TableHead className=\"text-right\">Actions</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {positions.map((position) => {\n                  const quantity = Number(position.quantity || 0);\n                  const avgCost = Number(position.avgCostUsd || 0);\n                  const currentPrice = Number(position.latestPriceUsd || 0);\n                  const value = quantity * currentPrice;\n                  const unrealizedPnl = Number(position.unrealizedPnlUsd || 0);\n                  const realizedPnl = Number(position.realizedPnlUsd || 0);\n                  const pnlPct = Number(position.pnlPct || 0);\n\n                  return (\n                    <TableRow key={position.id} data-testid={`row-position-${position.tokenAddress}`}>\n                      <TableCell className=\"font-mono text-xs\" data-testid={`cell-token-${position.tokenAddress}`}>\n                        {position.tokenAddress.slice(0, 8)}...\n                      </TableCell>\n                      <TableCell className=\"text-right\" data-testid={`cell-quantity-${position.tokenAddress}`}>\n                        {Number(quantity || 0).toFixed(4)}\n                      </TableCell>\n                      <TableCell className=\"text-right\" data-testid={`cell-avg-cost-${position.tokenAddress}`}>\n                        ${Number(avgCost || 0).toFixed(4)}\n                      </TableCell>\n                      <TableCell className=\"text-right\" data-testid={`cell-current-price-${position.tokenAddress}`}>\n                        ${Number(currentPrice || 0).toFixed(4)}\n                      </TableCell>\n                      <TableCell className=\"text-right\" data-testid={`cell-value-${position.tokenAddress}`}>\n                        ${Number(value || 0).toFixed(2)}\n                      </TableCell>\n                      <TableCell className={`text-right ${unrealizedPnl >= 0 ? 'text-green-500' : 'text-red-500'}`} data-testid={`cell-unrealized-pnl-${position.tokenAddress}`}>\n                        ${Number(unrealizedPnl || 0).toFixed(2)} ({Number(pnlPct || 0).toFixed(2)}%)\n                      </TableCell>\n                      <TableCell className={`text-right ${realizedPnl >= 0 ? 'text-green-500' : 'text-red-500'}`} data-testid={`cell-realized-pnl-${position.tokenAddress}`}>\n                        ${Number(realizedPnl || 0).toFixed(2)}\n                      </TableCell>\n                      <TableCell className=\"text-right\">\n                        <div className=\"flex gap-2 justify-end\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => setSelectedToken(position.tokenAddress)}\n                            data-testid={`button-view-transactions-${position.tokenAddress}`}\n                          >\n                            View Txs\n                          </Button>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => deletePosition.mutate(position.tokenAddress)}\n                            data-testid={`button-delete-${position.tokenAddress}`}\n                          >\n                            <Trash2 className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                      </TableCell>\n                    </TableRow>\n                  );\n                })}\n              </TableBody>\n            </Table>\n          )}\n        </CardContent>\n      </Card>\n\n      {selectedToken && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Transaction History</CardTitle>\n            <CardDescription>Transactions for {selectedToken.slice(0, 8)}...</CardDescription>\n          </CardHeader>\n          <CardContent>\n            {transactions.length === 0 ? (\n              <p className=\"text-muted-foreground\">No transactions found</p>\n            ) : (\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Date</TableHead>\n                    <TableHead>Type</TableHead>\n                    <TableHead className=\"text-right\">Quantity</TableHead>\n                    <TableHead className=\"text-right\">Price</TableHead>\n                    <TableHead className=\"text-right\">Fee</TableHead>\n                    <TableHead>Note</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {transactions.map((tx) => (\n                    <TableRow key={tx.id} data-testid={`row-transaction-${tx.id}`}>\n                      <TableCell data-testid={`cell-tx-date-${tx.id}`}>\n                        {new Date(tx.executedAt!).toLocaleDateString()}\n                      </TableCell>\n                      <TableCell data-testid={`cell-tx-type-${tx.id}`}>\n                        <Badge data-testid={`badge-tx-type-${tx.id}`}>{tx.txType}</Badge>\n                      </TableCell>\n                      <TableCell className=\"text-right\" data-testid={`cell-tx-quantity-${tx.id}`}>\n                        {Number(tx.quantity || 0).toFixed(4)}\n                      </TableCell>\n                      <TableCell className=\"text-right\" data-testid={`cell-tx-price-${tx.id}`}>\n                        {tx.priceUsd ? `$${Number(tx.priceUsd || 0).toFixed(4)}` : '-'}\n                      </TableCell>\n                      <TableCell className=\"text-right\" data-testid={`cell-tx-fee-${tx.id}`}>\n                        {tx.feeUsd ? `$${Number(tx.feeUsd || 0).toFixed(4)}` : '-'}\n                      </TableCell>\n                      <TableCell data-testid={`cell-tx-note-${tx.id}`}>{tx.note || '-'}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            )}\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n","size_bytes":17575},"server/solana-analyzer.test.ts":{"content":"import { SolanaTokenAnalyzer } from './solana-analyzer';\nimport { PublicKey } from '@solana/web3.js';\nimport {\n  mockCompleteAnalysis,\n  mockDexScreener,\n  mockRugcheck,\n  mockGoPlus,\n  mockSolanaRPC,\n  clearAllMocks,\n  MockBuilder,\n} from '../tests/utils/solana-mocks';\nimport {\n  PUMP_FUN_TOKEN,\n  BUNDLE_TOKEN,\n  REGULAR_TOKEN,\n  HOLDERS_PUMP_FUN,\n  HOLDERS_WITH_BUNDLES,\n  DEXSCREENER_DATA_PUMP,\n  RUGCHECK_DATA_PUMP,\n  RUGCHECK_DATA_WITH_BUNDLES,\n  GOPLUS_DATA_SAFE,\n  GOPLUS_DATA_RISKY,\n} from '../tests/fixtures/solana/token-fixtures';\n\n// Mock external dependencies\njest.mock('@solana/web3.js', () => {\n  const actual = jest.requireActual('@solana/web3.js');\n  return {\n    ...actual,\n    Connection: jest.fn().mockImplementation(() => ({\n      getAccountInfo: jest.fn(),\n      getProgramAccounts: jest.fn(),\n      getTokenLargestAccounts: jest.fn(),\n      getSignaturesForAddress: jest.fn(),\n    })),\n  };\n});\n\njest.mock('@solana/spl-token', () => ({\n  getMint: jest.fn(),\n  TOKEN_PROGRAM_ID: 'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA',\n}));\n\ndescribe('SolanaTokenAnalyzer', () => {\n  let analyzer: SolanaTokenAnalyzer;\n\n  beforeEach(() => {\n    clearAllMocks();\n    analyzer = new SolanaTokenAnalyzer();\n  });\n\n  afterEach(() => {\n    clearAllMocks();\n  });\n\n  describe('analyzeToken', () => {\n    it('should correctly analyze pump.fun token with locked liquidity', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      // Mock mint info\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      // Mock holder data\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_PUMP_FUN.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      // Mock holder count\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue(\n        new Array(1557).fill(null).map((_, i) => ({\n          account: {\n            data: Buffer.alloc(165),\n          },\n          pubkey: new PublicKey(`Holder${i}AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA`),\n        }))\n      );\n\n      // Mock transactions\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      // Mock external APIs\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n      mockRugcheck(PUMP_FUN_TOKEN.address, 'safe');\n      mockGoPlus(PUMP_FUN_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      expect(result.tokenAddress).toBe(PUMP_FUN_TOKEN.address);\n      expect(result.mintAuthority.isRevoked).toBe(true);\n      expect(result.freezeAuthority.isRevoked).toBe(true);\n      expect(result.liquidityPool.isLocked).toBe(true);\n      expect(result.liquidityPool.burnPercentage).toBeGreaterThanOrEqual(90);\n      expect(result.liquidityPool.status).toBe('SAFE');\n      expect(result.riskLevel).toBe('LOW');\n    });\n\n    it('should detect bundled wallets and calculate bundle percentage', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      // Mock mint info\n      getMint.mockResolvedValue({\n        address: new PublicKey(BUNDLE_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(BUNDLE_TOKEN.supply),\n        decimals: BUNDLE_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      // Mock holder data with bundles\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_WITH_BUNDLES.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      // Mock external APIs\n      mockDexScreener(BUNDLE_TOKEN.address, 'bundle');\n      mockRugcheck(BUNDLE_TOKEN.address, 'bundles');\n      mockGoPlus(BUNDLE_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(BUNDLE_TOKEN.address);\n\n      expect(result.holderFiltering.bundledDetection).toBeDefined();\n      expect(result.holderFiltering.totals.bundled).toBeGreaterThan(0);\n      expect(result.holderFiltering.bundledDetection?.bundleSupplyPct).toBeGreaterThan(0);\n      expect(result.holderFiltering.bundledDetection?.confidence).toBeDefined();\n      expect(['low', 'medium', 'high']).toContain(result.holderFiltering.bundledDetection?.confidence);\n    });\n\n    it('should filter out LP addresses from holder concentration', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_PUMP_FUN.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n      mockRugcheck(PUMP_FUN_TOKEN.address, 'safe');\n      mockGoPlus(PUMP_FUN_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      expect(result.holderFiltering.totals.lp).toBeGreaterThan(0);\n      expect(result.liquidityPool.lpAddresses).toBeDefined();\n      expect(result.liquidityPool.lpAddresses?.length).toBeGreaterThan(0);\n      \n      // Verify LP addresses were excluded from top holders\n      const lpAddresses = result.liquidityPool.lpAddresses || [];\n      const topHolderAddresses = result.topHolders.map(h => h.address);\n      lpAddresses.forEach(lpAddr => {\n        expect(topHolderAddresses).not.toContain(lpAddr);\n      });\n    });\n\n    it('should filter out known exchange addresses', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      // Add a known exchange address to holders\n      const holdersWithExchange = [\n        ...HOLDERS_PUMP_FUN,\n        {\n          address: '5tzFkiKscXHK5ZXCGbXZxdw7gTjjD1mBwuoFbhUvuAi9', // Binance from known-addresses\n          balance: 50000000,\n          percentage: 5.0,\n        },\n      ];\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: holdersWithExchange.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n      mockRugcheck(PUMP_FUN_TOKEN.address, 'safe');\n      mockGoPlus(PUMP_FUN_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      // Verify exchange address was excluded\n      const topHolderAddresses = result.topHolders.map(h => h.address);\n      expect(topHolderAddresses).not.toContain('5tzFkiKscXHK5ZXCGbXZxdw7gTjjD1mBwuoFbhUvuAi9');\n      \n      // Verify it was added to excluded addresses\n      const excludedExchanges = result.holderFiltering.excluded.filter(e => e.type === 'exchange');\n      expect(excludedExchanges.length).toBeGreaterThan(0);\n    });\n\n    it('should detect pump_fun market type', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: [],\n      });\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n      mockRugcheck(PUMP_FUN_TOKEN.address, 'safe');\n      mockGoPlus(PUMP_FUN_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      // Pump.fun tokens should have locked liquidity, not burned\n      expect(result.liquidityPool.isLocked).toBe(true);\n      expect(result.rugcheckData?.markets?.[0]?.marketType).toBe('pump_fun');\n    });\n\n    it('should detect pump_fun_amm market type', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: [],\n      });\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      // Custom rugcheck data with pump_fun_amm market type\n      const rugcheckDataPumpAMM = {\n        ...RUGCHECK_DATA_PUMP,\n        markets: [\n          {\n            ...RUGCHECK_DATA_PUMP.markets[0],\n            marketType: 'pump_fun_amm',\n          },\n        ],\n      };\n\n      new MockBuilder()\n        .withDexScreener(PUMP_FUN_TOKEN.address, DEXSCREENER_DATA_PUMP)\n        .withRugcheck(PUMP_FUN_TOKEN.address, rugcheckDataPumpAMM)\n        .withGoPlus(PUMP_FUN_TOKEN.address, GOPLUS_DATA_SAFE)\n        .build();\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      // pump_fun_amm should also be detected as pump.fun variant\n      expect(result.liquidityPool.isLocked).toBe(true);\n      expect(result.rugcheckData?.markets?.[0]?.marketType).toBe('pump_fun_amm');\n    });\n\n    it('should handle error when mint account is invalid', async () => {\n      const { getMint } = require('@solana/spl-token');\n\n      getMint.mockRejectedValue(new Error('Invalid mint address'));\n\n      const result = await analyzer.analyzeToken('InvalidAddress123456789');\n\n      expect(result.riskScore).toBe(100);\n      expect(result.riskLevel).toBe('EXTREME');\n      expect(result.redFlags).toHaveLength(1);\n      expect(result.redFlags[0].title).toBe('Analysis Failed');\n      expect(result.redFlags[0].description).toContain('Invalid mint address');\n    });\n\n    it('should handle RPC rate limit errors gracefully', async () => {\n      const { getMint } = require('@solana/spl-token');\n\n      getMint.mockRejectedValue(new Error('429 Too Many Requests'));\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      expect(result.riskScore).toBe(100);\n      expect(result.riskLevel).toBe('EXTREME');\n      expect(result.redFlags[0].description).toContain('429 Too Many Requests');\n    });\n\n    it('should fallback to Rugcheck data when on-chain holder fetch fails', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      // Simulate on-chain holder fetch failure\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockRejectedValue(\n        new Error('RPC call failed')\n      );\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n      mockRugcheck(PUMP_FUN_TOKEN.address, 'safe');\n      mockGoPlus(PUMP_FUN_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      // Should have holders from Rugcheck fallback\n      expect(result.topHolders.length).toBeGreaterThan(0);\n      expect(result.holderCount).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Risk Scoring', () => {\n    it('should calculate low risk score for safe token', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null, // Revoked\n        freezeAuthority: null, // Revoked\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_PUMP_FUN.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue(\n        new Array(2000).fill(null).map(() => ({\n          account: { data: Buffer.alloc(165) },\n          pubkey: new PublicKey('Test1234567890123456789012345678901234567'),\n        }))\n      );\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n      mockRugcheck(PUMP_FUN_TOKEN.address, 'safe');\n      mockGoPlus(PUMP_FUN_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      expect(result.riskScore).toBeLessThan(30);\n      expect(result.riskLevel).toBe('LOW');\n    });\n\n    it('should calculate high risk score for token with mint authority', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(BUNDLE_TOKEN.address),\n        mintAuthority: new PublicKey('DevAuthority1234567890123456789012345678'), // Not revoked\n        freezeAuthority: null,\n        supply: BigInt(BUNDLE_TOKEN.supply),\n        decimals: BUNDLE_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_WITH_BUNDLES.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(BUNDLE_TOKEN.address, 'bundle');\n      mockRugcheck(BUNDLE_TOKEN.address, 'bundles');\n      mockGoPlus(BUNDLE_TOKEN.address, 'risky');\n\n      const result = await analyzer.analyzeToken(BUNDLE_TOKEN.address);\n\n      expect(result.riskScore).toBeGreaterThanOrEqual(30);\n      expect(result.mintAuthority.hasAuthority).toBe(true);\n      expect(result.redFlags.some(f => f.type === 'mint_authority')).toBe(true);\n    });\n\n    it('should add critical risk flag for extreme holder concentration', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      // Create holders with extreme concentration (one whale owns 85%)\n      const extremeHolders = [\n        {\n          address: 'ExtremeWhale1234567890123456789012345678',\n          balance: 850000000,\n          percentage: 85.0,\n        },\n        {\n          address: 'SmallHolder11234567890123456789012345678',\n          balance: 150000000,\n          percentage: 15.0,\n        },\n      ];\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(BUNDLE_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(1000000000),\n        decimals: 6,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: extremeHolders.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(BUNDLE_TOKEN.address, 'bundle');\n      \n      // Rugcheck with no LP data to ensure holder concentration is accurate\n      const rugcheckNoLP = {\n        ...RUGCHECK_DATA_WITH_BUNDLES,\n        markets: [],\n      };\n      \n      new MockBuilder()\n        .withDexScreener(BUNDLE_TOKEN.address, DEXSCREENER_DATA_PUMP)\n        .withRugcheck(BUNDLE_TOKEN.address, rugcheckNoLP)\n        .withGoPlus(BUNDLE_TOKEN.address, GOPLUS_DATA_SAFE)\n        .build();\n\n      const result = await analyzer.analyzeToken(BUNDLE_TOKEN.address);\n\n      const concentrationFlag = result.redFlags.find(f => f.type === 'holder_concentration');\n      expect(concentrationFlag).toBeDefined();\n      expect(concentrationFlag?.severity).toBe('critical');\n      expect(result.riskScore).toBeGreaterThanOrEqual(30);\n    });\n\n    it('should add medium risk flag for low holder count', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_PUMP_FUN.slice(0, 3).map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      // Only 50 holders total\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue(\n        new Array(50).fill(null).map(() => ({\n          account: { data: Buffer.alloc(165) },\n          pubkey: new PublicKey('Test1234567890123456789012345678901234567'),\n        }))\n      );\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n      mockRugcheck(PUMP_FUN_TOKEN.address, 'safe');\n      mockGoPlus(PUMP_FUN_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      const lowHoldersFlag = result.redFlags.find(\n        f => f.title === 'Low Holder Count'\n      );\n      expect(lowHoldersFlag).toBeDefined();\n      expect(lowHoldersFlag?.severity).toBe('medium');\n    });\n  });\n\n  describe('Liquidity Analysis', () => {\n    it('should detect locked liquidity for pump.fun tokens', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({ value: [] });\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n      mockRugcheck(PUMP_FUN_TOKEN.address, 'safe');\n      mockGoPlus(PUMP_FUN_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      expect(result.liquidityPool.isLocked).toBe(true);\n      expect(result.liquidityPool.burnPercentage).toBeGreaterThanOrEqual(90);\n      expect(result.liquidityPool.status).toBe('SAFE');\n    });\n\n    it('should detect burned liquidity for regular tokens', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(BUNDLE_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(BUNDLE_TOKEN.supply),\n        decimals: BUNDLE_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({ value: [] });\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(BUNDLE_TOKEN.address, 'bundle');\n      mockRugcheck(BUNDLE_TOKEN.address, 'bundles');\n      mockGoPlus(BUNDLE_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(BUNDLE_TOKEN.address);\n\n      expect(result.liquidityPool.isBurned).toBe(true);\n      expect(result.liquidityPool.burnPercentage).toBeGreaterThanOrEqual(95);\n    });\n\n    it('should mark risky liquidity when burn percentage is low', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(BUNDLE_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(BUNDLE_TOKEN.supply),\n        decimals: BUNDLE_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({ value: [] });\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      // Custom rugcheck with low burn percentage\n      const rugcheckLowBurn = {\n        ...RUGCHECK_DATA_WITH_BUNDLES,\n        markets: [\n          {\n            ...RUGCHECK_DATA_WITH_BUNDLES.markets[0],\n            lpBurn: 25, // Low burn percentage\n            lp: null,\n          },\n        ],\n      };\n\n      new MockBuilder()\n        .withDexScreener(BUNDLE_TOKEN.address, DEXSCREENER_DATA_PUMP)\n        .withRugcheck(BUNDLE_TOKEN.address, rugcheckLowBurn)\n        .withGoPlus(BUNDLE_TOKEN.address, GOPLUS_DATA_SAFE)\n        .build();\n\n      const result = await analyzer.analyzeToken(BUNDLE_TOKEN.address);\n\n      expect(result.liquidityPool.status).toBe('RISKY');\n      expect(result.liquidityPool.burnPercentage).toBe(25);\n      \n      const liquidityFlag = result.redFlags.find(f => f.type === 'low_liquidity');\n      expect(liquidityFlag).toBeDefined();\n    });\n\n    it('should handle missing liquidity data gracefully', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({ value: [] });\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      // No rugcheck data, no DexScreener data\n      new MockBuilder()\n        .withDexScreener(PUMP_FUN_TOKEN.address, { pairs: [] })\n        .withRugcheck(PUMP_FUN_TOKEN.address, { ...RUGCHECK_DATA_PUMP, markets: [] })\n        .withGoPlus(PUMP_FUN_TOKEN.address, GOPLUS_DATA_SAFE)\n        .build();\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      expect(result.liquidityPool.status).toBe('UNKNOWN');\n    });\n  });\n\n  describe('Bundle Detection', () => {\n    it('should calculate bundle supply percentage correctly', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(BUNDLE_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(BUNDLE_TOKEN.supply),\n        decimals: BUNDLE_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_WITH_BUNDLES.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(BUNDLE_TOKEN.address, 'bundle');\n      mockRugcheck(BUNDLE_TOKEN.address, 'bundles');\n      mockGoPlus(BUNDLE_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(BUNDLE_TOKEN.address);\n\n      const bundleDetection = result.holderFiltering.bundledDetection;\n      expect(bundleDetection).toBeDefined();\n      \n      // Bundle1, Bundle2, Bundle3 from HOLDERS_WITH_BUNDLES all have ~2%, ~1%, ~0.89%\n      // Total should be around 3.89%\n      expect(bundleDetection?.bundleSupplyPct).toBeGreaterThan(0);\n      expect(bundleDetection?.bundleSupplyPct).toBeLessThanOrEqual(100);\n    });\n\n    it('should set high confidence for large bundle groups', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      // Create a large bundle (6 wallets with same percentage)\n      const largeBundle = [\n        { address: 'Bundle1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA', balance: 20000000, percentage: 2.0 },\n        { address: 'Bundle2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA', balance: 20000000, percentage: 2.0 },\n        { address: 'Bundle3AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA', balance: 20000000, percentage: 2.0 },\n        { address: 'Bundle4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA', balance: 20000000, percentage: 2.0 },\n        { address: 'Bundle5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA', balance: 20000000, percentage: 2.0 },\n        { address: 'Bundle6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA', balance: 20000000, percentage: 2.0 },\n        { address: 'Regular1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA', balance: 880000000, percentage: 88.0 },\n      ];\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(BUNDLE_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(1000000000),\n        decimals: 6,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: largeBundle.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(BUNDLE_TOKEN.address, 'bundle');\n      mockRugcheck(BUNDLE_TOKEN.address, 'bundles');\n      mockGoPlus(BUNDLE_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(BUNDLE_TOKEN.address);\n\n      expect(result.holderFiltering.bundledDetection?.confidence).toBe('high');\n      expect(result.holderFiltering.totals.bundled).toBeGreaterThanOrEqual(5);\n    });\n\n    it('should set medium confidence for moderate bundle groups', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(BUNDLE_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(BUNDLE_TOKEN.supply),\n        decimals: BUNDLE_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_WITH_BUNDLES.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(BUNDLE_TOKEN.address, 'bundle');\n      mockRugcheck(BUNDLE_TOKEN.address, 'bundles');\n      mockGoPlus(BUNDLE_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(BUNDLE_TOKEN.address);\n\n      // HOLDERS_WITH_BUNDLES has 3 bundled wallets, should be medium confidence\n      expect(result.holderFiltering.bundledDetection?.confidence).toBe('medium');\n    });\n\n    it('should not set bundled detection when no bundles detected', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_PUMP_FUN.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n      mockRugcheck(PUMP_FUN_TOKEN.address, 'safe');\n      mockGoPlus(PUMP_FUN_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      expect(result.holderFiltering.bundledDetection).toBeUndefined();\n      expect(result.holderFiltering.totals.bundled).toBe(0);\n    });\n  });\n\n  describe('Market Data', () => {\n    it('should build market data from DexScreener primary pair', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({ value: [] });\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n      mockRugcheck(PUMP_FUN_TOKEN.address, 'safe');\n      mockGoPlus(PUMP_FUN_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      expect(result.marketData).toBeDefined();\n      expect(result.marketData?.source).toBe('dexscreener');\n      expect(result.marketData?.priceUsd).toBeDefined();\n      expect(result.marketData?.liquidityUsd).toBeDefined();\n      expect(result.marketData?.volume24h).toBeDefined();\n    });\n\n    it('should handle missing market data gracefully', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({ value: [] });\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      // Empty DexScreener data\n      new MockBuilder()\n        .withDexScreener(PUMP_FUN_TOKEN.address, { pairs: [] })\n        .withRugcheck(PUMP_FUN_TOKEN.address, RUGCHECK_DATA_PUMP)\n        .withGoPlus(PUMP_FUN_TOKEN.address, GOPLUS_DATA_SAFE)\n        .build();\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      expect(result.marketData).toBeUndefined();\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle DexScreener API failure', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({ value: [] });\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      // Mock failed DexScreener call\n      const nock = require('nock');\n      nock('https://api.dexscreener.com')\n        .get(`/latest/dex/tokens/${PUMP_FUN_TOKEN.address}`)\n        .reply(500, { error: 'Internal Server Error' });\n\n      mockRugcheck(PUMP_FUN_TOKEN.address, 'safe');\n      mockGoPlus(PUMP_FUN_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      // Should still complete analysis without DexScreener data\n      expect(result.dexscreenerData).toBeUndefined();\n      expect(result.riskScore).toBeDefined();\n    });\n\n    it('should handle Rugcheck API failure', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_PUMP_FUN.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n      \n      // Mock failed Rugcheck call\n      const nock = require('nock');\n      nock('https://api.rugcheck.xyz')\n        .get(`/v1/tokens/${PUMP_FUN_TOKEN.address}/report`)\n        .reply(404, { error: 'Not found' });\n\n      mockGoPlus(PUMP_FUN_TOKEN.address, 'safe');\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      // Should still complete with on-chain holder data\n      expect(result.rugcheckData).toBeUndefined();\n      expect(result.topHolders.length).toBeGreaterThan(0);\n    });\n\n    it('should handle GoPlus API failure', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({ value: [] });\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n      mockRugcheck(PUMP_FUN_TOKEN.address, 'safe');\n      \n      // Mock failed GoPlus call\n      const nock = require('nock');\n      nock('https://api.gopluslabs.io')\n        .get('/api/v1/token_security/solana')\n        .query({ contract_addresses: PUMP_FUN_TOKEN.address })\n        .reply(500, { error: 'Service unavailable' });\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      // Should still complete without GoPlus data\n      expect(result.goplusData).toBeUndefined();\n      expect(result.riskScore).toBeDefined();\n    });\n\n    it('should handle all external API failures gracefully', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_PUMP_FUN.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      // Mock all external APIs to fail\n      const nock = require('nock');\n      nock('https://api.dexscreener.com')\n        .get(`/latest/dex/tokens/${PUMP_FUN_TOKEN.address}`)\n        .reply(500);\n      nock('https://api.rugcheck.xyz')\n        .get(`/v1/tokens/${PUMP_FUN_TOKEN.address}/report`)\n        .reply(500);\n      nock('https://api.gopluslabs.io')\n        .get('/api/v1/token_security/solana')\n        .query(true)\n        .reply(500);\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      // Should still provide basic analysis from on-chain data\n      expect(result.tokenAddress).toBe(PUMP_FUN_TOKEN.address);\n      expect(result.topHolders.length).toBeGreaterThan(0);\n      expect(result.riskScore).toBeDefined();\n      expect(result.riskLevel).toBeDefined();\n    });\n  });\n\n  describe('API Resilience Tests', () => {\n    it('should handle Rugcheck API 429 rate limit response gracefully', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_PUMP_FUN.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      // Mock successful DexScreener and GoPlus\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n      mockGoPlus(PUMP_FUN_TOKEN.address, 'safe');\n\n      // Mock Rugcheck API 429 rate limit\n      const nock = require('nock');\n      nock('https://api.rugcheck.xyz')\n        .get(`/v1/tokens/${PUMP_FUN_TOKEN.address}/report`)\n        .reply(429, {\n          error: 'Too Many Requests',\n          message: 'Rate limit exceeded. Please try again later.',\n          retryAfter: 60,\n        });\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      // Should complete analysis without Rugcheck data\n      expect(result.tokenAddress).toBe(PUMP_FUN_TOKEN.address);\n      expect(result.rugcheckData).toBeUndefined();\n      expect(result.riskScore).toBeDefined();\n      expect(result.riskLevel).toBeDefined();\n      // Should still have data from other sources\n      expect(result.dexscreenerData).toBeDefined();\n      expect(result.goplusData).toBeDefined();\n      expect(result.topHolders.length).toBeGreaterThan(0);\n    });\n\n    it('should handle GoPlus API timeout scenario gracefully', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_PUMP_FUN.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      // Mock successful DexScreener and Rugcheck\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n      mockRugcheck(PUMP_FUN_TOKEN.address, 'safe');\n\n      // Mock GoPlus API timeout (using delay to simulate timeout)\n      const nock = require('nock');\n      nock('https://api.gopluslabs.io')\n        .get('/api/v1/token_security/solana')\n        .query({ contract_addresses: PUMP_FUN_TOKEN.address })\n        .delayConnection(30000)\n        .reply(200, GOPLUS_DATA_SAFE);\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      // Should complete analysis without waiting for GoPlus timeout\n      expect(result.tokenAddress).toBe(PUMP_FUN_TOKEN.address);\n      expect(result.riskScore).toBeDefined();\n      expect(result.riskLevel).toBeDefined();\n      // Should have data from other sources\n      expect(result.dexscreenerData).toBeDefined();\n      expect(result.rugcheckData).toBeDefined();\n      expect(result.topHolders.length).toBeGreaterThan(0);\n    });\n\n    it('should handle combined API failures with graceful degradation', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_PUMP_FUN.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue(\n        new Array(1557).fill(null).map((_, i) => ({\n          account: {\n            data: Buffer.alloc(165),\n          },\n          pubkey: new PublicKey(`Holder${i}AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA`),\n        }))\n      );\n\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      // Mock different failure scenarios for different APIs\n      const nock = require('nock');\n      \n      // Rugcheck: 429 rate limit\n      nock('https://api.rugcheck.xyz')\n        .get(`/v1/tokens/${PUMP_FUN_TOKEN.address}/report`)\n        .reply(429, { error: 'Rate limit exceeded' });\n\n      // GoPlus: Network error\n      nock('https://api.gopluslabs.io')\n        .get('/api/v1/token_security/solana')\n        .query({ contract_addresses: PUMP_FUN_TOKEN.address })\n        .replyWithError({ code: 'ECONNREFUSED', message: 'Connection refused' });\n\n      // DexScreener: Server error\n      nock('https://api.dexscreener.com')\n        .get(`/latest/dex/tokens/${PUMP_FUN_TOKEN.address}`)\n        .reply(503, { error: 'Service temporarily unavailable' });\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      // Should still provide analysis based on on-chain data only\n      expect(result.tokenAddress).toBe(PUMP_FUN_TOKEN.address);\n      expect(result.topHolders.length).toBeGreaterThan(0);\n      expect(result.holderCount).toBe(1557);\n      expect(result.riskScore).toBeDefined();\n      expect(result.riskLevel).toBeDefined();\n      \n      // External API data should be undefined due to failures\n      expect(result.rugcheckData).toBeUndefined();\n      expect(result.goplusData).toBeUndefined();\n      expect(result.dexscreenerData).toBeUndefined();\n      \n      // Should still have valid mint authority analysis from on-chain data\n      expect(result.mintAuthority.isRevoked).toBe(true);\n      expect(result.freezeAuthority.isRevoked).toBe(true);\n    });\n\n    it('should handle partial API success with some failures', async () => {\n      const { getMint } = require('@solana/spl-token');\n      const { Connection } = require('@solana/web3.js');\n\n      getMint.mockResolvedValue({\n        address: new PublicKey(PUMP_FUN_TOKEN.address),\n        mintAuthority: null,\n        freezeAuthority: null,\n        supply: BigInt(PUMP_FUN_TOKEN.supply),\n        decimals: PUMP_FUN_TOKEN.decimals,\n        isInitialized: true,\n      });\n\n      Connection.prototype.getTokenLargestAccounts = jest.fn().mockResolvedValue({\n        value: HOLDERS_PUMP_FUN.map(h => ({\n          address: new PublicKey(h.address),\n          amount: BigInt(h.balance),\n        })),\n      });\n\n      Connection.prototype.getProgramAccounts = jest.fn().mockResolvedValue([]);\n      Connection.prototype.getSignaturesForAddress = jest.fn().mockResolvedValue([]);\n\n      // Mock partial success: DexScreener succeeds, others fail\n      mockDexScreener(PUMP_FUN_TOKEN.address, 'pump');\n\n      const nock = require('nock');\n      nock('https://api.rugcheck.xyz')\n        .get(`/v1/tokens/${PUMP_FUN_TOKEN.address}/report`)\n        .reply(500, { error: 'Internal server error' });\n\n      nock('https://api.gopluslabs.io')\n        .get('/api/v1/token_security/solana')\n        .query({ contract_addresses: PUMP_FUN_TOKEN.address })\n        .reply(429, { error: 'Too many requests' });\n\n      const result = await analyzer.analyzeToken(PUMP_FUN_TOKEN.address);\n\n      // Should have analysis with partial external data\n      expect(result.tokenAddress).toBe(PUMP_FUN_TOKEN.address);\n      expect(result.dexscreenerData).toBeDefined();\n      expect(result.rugcheckData).toBeUndefined();\n      expect(result.goplusData).toBeUndefined();\n      expect(result.riskScore).toBeDefined();\n      expect(result.riskLevel).toBeDefined();\n    });\n  });\n});\n","size_bytes":47552},"tests/e2e/token-analysis.spec.ts":{"content":"import { test, expect } from '@playwright/test';\nimport type { TokenAnalysisResponse } from '../../shared/schema';\n\n// Mock token addresses\nconst VALID_TOKEN = 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v';\nconst INVALID_TOKEN = 'invalid';\n\n// Mock response for a safe token\nconst mockSafeTokenResponse: TokenAnalysisResponse = {\n  tokenAddress: VALID_TOKEN,\n  riskScore: 15,\n  riskLevel: 'LOW',\n  analyzedAt: Date.now(),\n  mintAuthority: {\n    hasAuthority: false,\n    authorityAddress: null,\n    isRevoked: true,\n  },\n  freezeAuthority: {\n    hasAuthority: false,\n    authorityAddress: null,\n    isRevoked: true,\n  },\n  metadata: {\n    name: 'USD Coin',\n    symbol: 'USDC',\n    decimals: 6,\n    supply: 1000000000000,\n    logoUri: 'https://example.com/usdc.png',\n    hasMetadata: true,\n    isMutable: false,\n  },\n  holderCount: 5000,\n  topHolders: [\n    { rank: 1, address: '5Q544fKrFoe6tsEbD7S8EmxGTJYAKtTVhAW5Q5pge4j1', balance: 100000000, percentage: 10 },\n    { rank: 2, address: '36ybJdLRJdPRTLBbxsy5aVbHqCvCxdMz1Xw1mP9bTBPA', balance: 50000000, percentage: 5 },\n  ],\n  topHolderConcentration: 15,\n  holderFiltering: {\n    totals: {\n      lp: 2,\n      exchanges: 5,\n      protocols: 3,\n      bundled: 0,\n      total: 10,\n    },\n    excluded: [],\n  },\n  liquidityPool: {\n    exists: true,\n    isLocked: true,\n    isBurned: true,\n    totalLiquidity: 5000000,\n    status: 'SAFE',\n    burnPercentage: 100,\n    lpMintAddress: 'LPMintAddress123',\n    lpReserve: 1000000,\n    actualSupply: 1000000,\n    lpAddresses: ['LP1Address', 'LP2Address'],\n  },\n  recentTransactions: [],\n  suspiciousActivityDetected: false,\n  redFlags: [],\n  creationDate: Date.now() - 86400000 * 365,\n};\n\n// Mock response for a high-risk token with bundles\nconst mockHighRiskBundledResponse: TokenAnalysisResponse = {\n  tokenAddress: 'HighRiskToken123456789012345678901234',\n  riskScore: 85,\n  riskLevel: 'EXTREME',\n  analyzedAt: Date.now(),\n  mintAuthority: {\n    hasAuthority: true,\n    authorityAddress: 'MintAuth123',\n    isRevoked: false,\n  },\n  freezeAuthority: {\n    hasAuthority: true,\n    authorityAddress: 'FreezeAuth123',\n    isRevoked: false,\n  },\n  metadata: {\n    name: 'Suspicious Token',\n    symbol: 'SUS',\n    decimals: 9,\n    supply: 1000000000000000,\n    hasMetadata: true,\n    isMutable: true,\n  },\n  holderCount: 150,\n  topHolders: [\n    { rank: 1, address: 'Bundle1Address', balance: 400000000000000, percentage: 40 },\n    { rank: 2, address: 'Bundle2Address', balance: 300000000000000, percentage: 30 },\n  ],\n  topHolderConcentration: 70,\n  holderFiltering: {\n    totals: {\n      lp: 1,\n      exchanges: 0,\n      protocols: 0,\n      bundled: 15,\n      total: 16,\n    },\n    excluded: [\n      {\n        address: 'Bundle1Address',\n        type: 'bundled',\n        reason: 'Same block funding',\n      },\n    ],\n    bundledDetection: {\n      strategy: 'sameBlock',\n      confidence: 'high',\n      details: 'Detected 15 wallets funded from the same source in the same block',\n      bundleSupplyPct: 45.5,\n      bundledSupplyAmount: 455000000000000,\n    },\n  },\n  liquidityPool: {\n    exists: true,\n    isLocked: false,\n    isBurned: false,\n    totalLiquidity: 5000,\n    status: 'RISKY',\n    burnPercentage: 0,\n    lpAddresses: ['LPAddr1'],\n  },\n  recentTransactions: [],\n  suspiciousActivityDetected: true,\n  redFlags: [\n    {\n      type: 'mint_authority',\n      severity: 'critical',\n      title: 'Mint Authority Active',\n      description: 'Token has active mint authority which allows unlimited token creation',\n    },\n    {\n      type: 'freeze_authority',\n      severity: 'critical',\n      title: 'Freeze Authority Active',\n      description: 'Token has active freeze authority which can freeze user wallets',\n    },\n    {\n      type: 'holder_concentration',\n      severity: 'high',\n      title: 'High Holder Concentration',\n      description: 'Top 10 holders control 70% of the supply',\n    },\n  ],\n  creationDate: Date.now() - 86400000,\n};\n\n// Mock response for a moderate risk token\nconst mockModerateRiskResponse: TokenAnalysisResponse = {\n  ...mockSafeTokenResponse,\n  riskScore: 45,\n  riskLevel: 'MODERATE',\n  topHolderConcentration: 35,\n  redFlags: [\n    {\n      type: 'holder_concentration',\n      severity: 'medium',\n      title: 'Moderate Holder Concentration',\n      description: 'Top 10 holders control 35% of the supply',\n    },\n  ],\n};\n\n// Mock response for a high risk token (no bundles)\nconst mockHighRiskResponse: TokenAnalysisResponse = {\n  ...mockSafeTokenResponse,\n  riskScore: 72,\n  riskLevel: 'HIGH',\n  mintAuthority: {\n    hasAuthority: true,\n    authorityAddress: 'MintAuth456',\n    isRevoked: false,\n  },\n  redFlags: [\n    {\n      type: 'mint_authority',\n      severity: 'critical',\n      title: 'Mint Authority Active',\n      description: 'Token has active mint authority',\n    },\n  ],\n};\n\ntest.describe('Token Analysis Flow', () => {\n  test('should display the landing page correctly', async ({ page }) => {\n    await page.goto('/');\n    \n    // Check for main heading\n    await expect(page.getByRole('heading', { name: 'Solana Rug Detector' })).toBeVisible();\n    \n    // Check for description text\n    await expect(page.getByText(/Analyze Solana tokens for rug pull risks/)).toBeVisible();\n    \n    // Check for official contract address\n    await expect(page.getByTestId('text-contract-address')).toBeVisible();\n    await expect(page.getByTestId('button-copy-contract')).toBeVisible();\n    \n    // Check for token input\n    await expect(page.getByTestId('input-token-address')).toBeVisible();\n    await expect(page.getByTestId('button-analyze')).toBeVisible();\n  });\n\n  test('should analyze token and display safe results', async ({ page }) => {\n    // Mock API response with slight delay to simulate network\n    await page.route('**/api/analyze-token', async (route) => {\n      await new Promise(resolve => setTimeout(resolve, 500));\n      await route.fulfill({\n        status: 200,\n        contentType: 'application/json',\n        body: JSON.stringify(mockSafeTokenResponse),\n      });\n    });\n\n    await page.goto('/');\n    \n    // Fill in token address\n    await page.getByTestId('input-token-address').fill(VALID_TOKEN);\n    \n    // Click analyze button\n    await page.getByTestId('button-analyze').click();\n    \n    // Wait for results to load\n    await expect(page.getByTestId('card-risk-score')).toBeVisible({ timeout: 10000 });\n    \n    // Verify risk score is displayed\n    await expect(page.getByTestId('text-risk-score')).toBeVisible();\n    \n    // Verify risk level\n    await expect(page.getByTestId('text-risk-level')).toContainText('LOW RISK');\n    \n    // Verify no critical alerts for safe token\n    await expect(page.getByTestId('card-no-alerts')).toBeVisible();\n    \n    // Verify metrics are displayed\n    await expect(page.getByTestId('metric-total-supply')).toBeVisible();\n    await expect(page.getByTestId('metric-holder-count')).toBeVisible();\n    await expect(page.getByTestId('metric-concentration')).toBeVisible();\n    await expect(page.getByTestId('metric-liquidity')).toBeVisible();\n  });\n\n  test('should show bundle percentage metric when bundles detected', async ({ page }) => {\n    // Mock API response with bundled wallets\n    await page.route('**/api/analyze-token', async (route) => {\n      await route.fulfill({\n        status: 200,\n        contentType: 'application/json',\n        body: JSON.stringify(mockHighRiskBundledResponse),\n      });\n    });\n\n    await page.goto('/');\n    \n    await page.getByTestId('input-token-address').fill('BundledToken123456789012345678901234');\n    await page.getByTestId('button-analyze').click();\n    \n    // Wait for results\n    await expect(page.getByTestId('card-risk-score')).toBeVisible({ timeout: 10000 });\n    \n    // Verify bundle percentage metric is displayed\n    await expect(page.getByTestId('metric-bundle-percentage')).toBeVisible();\n    await expect(page.getByTestId('metric-bundle-percentage-value')).toContainText('45.50%');\n    \n    // Verify bundle visualization chart is displayed\n    await expect(page.getByTestId('card-bundle-visualization')).toBeVisible();\n    \n    // Verify bundle warning badge\n    await expect(page.getByTestId('badge-bundle-warning')).toBeVisible();\n    await expect(page.getByTestId('badge-bundle-warning')).toContainText('15 Wallets');\n    \n    // Verify bundle percentage badge\n    await expect(page.getByTestId('badge-bundle-percentage')).toBeVisible();\n    await expect(page.getByTestId('badge-bundle-percentage')).toContainText('45.50% Supply');\n    \n    // Verify bundle detection details\n    await expect(page.getByTestId('badge-confidence')).toBeVisible();\n    await expect(page.getByTestId('badge-confidence')).toContainText('high confidence');\n    \n    // Verify bundled wallets alert\n    await expect(page.getByTestId('alert-bundled_wallets')).toBeVisible();\n  });\n\n  test('should display bundle visualization chart with correct data', async ({ page }) => {\n    await page.route('**/api/analyze-token', async (route) => {\n      await route.fulfill({\n        status: 200,\n        contentType: 'application/json',\n        body: JSON.stringify(mockHighRiskBundledResponse),\n      });\n    });\n\n    await page.goto('/');\n    \n    await page.getByTestId('input-token-address').fill('BundledToken123456789012345678901234');\n    await page.getByTestId('button-analyze').click();\n    \n    await expect(page.getByTestId('card-bundle-visualization')).toBeVisible({ timeout: 10000 });\n    \n    // Verify chart summary stats\n    await expect(page.getByTestId('text-total-holders')).toContainText('150');\n    await expect(page.getByTestId('text-filtered-count')).toContainText('16');\n    await expect(page.getByTestId('text-bundle-count')).toContainText('15');\n  });\n\n  test('should display correct risk indicators for different risk levels', async ({ page }) => {\n    test.setTimeout(90000); // Increase timeout for multiple iterations\n    \n    const riskLevels = [\n      { response: mockSafeTokenResponse, level: 'LOW RISK', score: '15', token: 'SafeToken1' },\n      { response: mockModerateRiskResponse, level: 'MODERATE RISK', score: '45', token: 'ModToken1' },\n      { response: mockHighRiskResponse, level: 'HIGH RISK', score: '72', token: 'HighRisk1' },\n      { response: mockHighRiskBundledResponse, level: 'EXTREME RISK', score: '85', token: 'Extreme1' },\n    ];\n\n    for (const { response, level, score, token } of riskLevels) {\n      // Clear previous routes and add new one for each iteration\n      await page.unroute('**/api/analyze-token');\n      await page.route('**/api/analyze-token', async (route) => {\n        await new Promise(resolve => setTimeout(resolve, 300));\n        await route.fulfill({\n          status: 200,\n          contentType: 'application/json',\n          body: JSON.stringify(response),\n        });\n      });\n\n      await page.goto('/');\n      \n      await page.getByTestId('input-token-address').fill(`${token}123456789012345678901234`);\n      await page.getByTestId('button-analyze').click({ timeout: 10000 });\n      \n      await expect(page.getByTestId('card-risk-score')).toBeVisible({ timeout: 15000 });\n      \n      // Verify risk level\n      await expect(page.getByTestId('text-risk-level')).toContainText(level, { timeout: 5000 });\n      \n      // Verify risk score (animation completes)\n      await page.waitForTimeout(1500); // Wait for animation\n      await expect(page.getByTestId('text-risk-score')).toContainText(score);\n    }\n  });\n\n  test('should handle invalid token address errors', async ({ page }) => {\n    await page.goto('/');\n    \n    // Test empty input\n    await page.getByTestId('button-analyze').click();\n    await expect(page.getByTestId('text-error')).toContainText('Please enter a token address');\n    \n    // Test invalid format\n    await page.getByTestId('input-token-address').fill(INVALID_TOKEN);\n    await page.getByTestId('button-analyze').click();\n    await expect(page.getByTestId('text-error')).toContainText('Invalid Solana address format');\n  });\n\n  test('should handle API error gracefully', async ({ page }) => {\n    // Mock API error response\n    await page.route('**/api/analyze-token', async (route) => {\n      await route.fulfill({\n        status: 500,\n        contentType: 'application/json',\n        body: JSON.stringify({ message: 'Internal server error' }),\n      });\n    });\n\n    await page.goto('/');\n    \n    await page.getByTestId('input-token-address').fill(VALID_TOKEN);\n    await page.getByTestId('button-analyze').click();\n    \n    // Wait for error message to appear\n    await expect(page.getByText('Analysis Failed')).toBeVisible({ timeout: 10000 });\n  });\n\n  test('should show loading state during analysis', async ({ page }) => {\n    let resolveResponse: any;\n    const responsePromise = new Promise((resolve) => {\n      resolveResponse = resolve;\n    });\n\n    await page.route('**/api/analyze-token', async (route) => {\n      await responsePromise;\n      await route.fulfill({\n        status: 200,\n        contentType: 'application/json',\n        body: JSON.stringify(mockSafeTokenResponse),\n      });\n    });\n\n    await page.goto('/');\n    \n    await page.getByTestId('input-token-address').fill(VALID_TOKEN);\n    await page.getByTestId('button-analyze').click();\n    \n    // Verify loading state\n    await expect(page.getByTestId('button-analyze')).toBeDisabled();\n    await expect(page.getByTestId('button-analyze')).toHaveText('Analyzing...');\n    await expect(page.getByTestId('input-token-address')).toBeDisabled();\n    \n    // Verify skeleton loaders\n    await expect(page.locator('.animate-pulse').first()).toBeVisible();\n    \n    // Resolve the response\n    resolveResponse();\n    \n    // Wait for results\n    await expect(page.getByTestId('card-risk-score')).toBeVisible({ timeout: 10000 });\n    \n    // Verify loading state is gone\n    await expect(page.getByTestId('button-analyze')).toBeEnabled();\n    await expect(page.getByTestId('button-analyze')).toHaveText('Analyze');\n  });\n\n  test('should auto-refresh analysis after 5 minutes', async ({ page }) => {\n    let callCount = 0;\n    \n    await page.route('**/api/analyze-token', async (route) => {\n      callCount++;\n      await route.fulfill({\n        status: 200,\n        contentType: 'application/json',\n        body: JSON.stringify({\n          ...mockSafeTokenResponse,\n          analyzedAt: Date.now(),\n        }),\n      });\n    });\n\n    await page.goto('/');\n    \n    await page.getByTestId('input-token-address').fill(VALID_TOKEN);\n    await page.getByTestId('button-analyze').click();\n    \n    // Wait for initial analysis\n    await expect(page.getByTestId('card-risk-score')).toBeVisible({ timeout: 10000 });\n    expect(callCount).toBe(1);\n    \n    // Fast-forward time by 5 minutes (300,000 ms)\n    await page.evaluate(() => {\n      // Trigger the auto-refresh by advancing time\n      const interval = 300000; // 5 minutes\n      const event = new Event('interval');\n      setTimeout(() => {\n        window.dispatchEvent(event);\n      }, 100);\n    });\n    \n    // Manually advance time in the page context\n    await page.waitForTimeout(100);\n    await page.evaluate(() => {\n      // Force a re-render by simulating the interval\n      const now = Date.now();\n      // This will trigger the useEffect interval\n    });\n    \n    // Note: Auto-refresh testing is complex in Playwright due to setTimeout/setInterval\n    // In a real scenario, you might want to expose a manual refresh method for testing\n    // or use page.clock.fastForward() if available in your Playwright version\n  });\n\n  test('should allow clicking example tokens', async ({ page }) => {\n    await page.route('**/api/analyze-token', async (route) => {\n      await route.fulfill({\n        status: 200,\n        contentType: 'application/json',\n        body: JSON.stringify(mockSafeTokenResponse),\n      });\n    });\n\n    await page.goto('/');\n    \n    // Click USDC example\n    await page.getByTestId('button-example-usdc').click();\n    \n    // Verify input is filled\n    await expect(page.getByTestId('input-token-address')).toHaveValue('EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v');\n  });\n\n  test('should display critical alerts for high-risk tokens', async ({ page }) => {\n    await page.route('**/api/analyze-token', async (route) => {\n      await new Promise(resolve => setTimeout(resolve, 300));\n      await route.fulfill({\n        status: 200,\n        contentType: 'application/json',\n        body: JSON.stringify(mockHighRiskBundledResponse),\n      });\n    });\n\n    await page.goto('/');\n    \n    await page.getByTestId('input-token-address').fill('HighRiskToken123456789012345678901234');\n    await page.getByTestId('button-analyze').click();\n    \n    await expect(page.getByTestId('card-risk-score')).toBeVisible({ timeout: 15000 });\n    \n    // Verify critical alerts are displayed\n    await expect(page.getByTestId('alert-mint_authority')).toBeVisible();\n    await expect(page.getByTestId('alert-freeze_authority')).toBeVisible();\n    await expect(page.getByTestId('alert-holder_concentration')).toBeVisible();\n    await expect(page.getByTestId('alert-bundled_wallets')).toBeVisible();\n    \n    // Verify alert content\n    await expect(page.getByTestId('alert-mint_authority')).toContainText('Mint Authority Active');\n    await expect(page.getByTestId('alert-freeze_authority')).toContainText('Freeze Authority Active');\n  });\n\n  test('should display token metadata correctly', async ({ page }) => {\n    await page.route('**/api/analyze-token', async (route) => {\n      await new Promise(resolve => setTimeout(resolve, 300));\n      await route.fulfill({\n        status: 200,\n        contentType: 'application/json',\n        body: JSON.stringify(mockSafeTokenResponse),\n      });\n    });\n\n    await page.goto('/');\n    \n    await page.getByTestId('input-token-address').fill(VALID_TOKEN);\n    await page.getByTestId('button-analyze').click();\n    \n    await expect(page.getByTestId('card-risk-score')).toBeVisible({ timeout: 15000 });\n    \n    // Verify metadata is displayed - use more specific selectors to avoid strict mode violation\n    await expect(page.getByText('USD Coin')).toBeVisible();\n    // Use testid to be more specific since USDC appears in multiple places\n    await expect(page.getByTestId('text-token-symbol')).toContainText('USDC');\n  });\n\n  test('should display top holders table when data available', async ({ page }) => {\n    await page.route('**/api/analyze-token', async (route) => {\n      await route.fulfill({\n        status: 200,\n        contentType: 'application/json',\n        body: JSON.stringify(mockSafeTokenResponse),\n      });\n    });\n\n    await page.goto('/');\n    \n    await page.getByTestId('input-token-address').fill(VALID_TOKEN);\n    await page.getByTestId('button-analyze').click();\n    \n    await expect(page.getByTestId('card-risk-score')).toBeVisible({ timeout: 10000 });\n    \n    // Verify top holders table is present (if visible in viewport)\n    // Note: May need to scroll to see it\n    await page.evaluate(() => window.scrollTo(0, document.body.scrollHeight));\n    await page.waitForTimeout(500);\n  });\n\n  test('should handle new analysis button correctly', async ({ page }) => {\n    await page.route('**/api/analyze-token', async (route) => {\n      await route.fulfill({\n        status: 200,\n        contentType: 'application/json',\n        body: JSON.stringify(mockSafeTokenResponse),\n      });\n    });\n\n    await page.goto('/');\n    \n    await page.getByTestId('input-token-address').fill(VALID_TOKEN);\n    await page.getByTestId('button-analyze').click();\n    \n    await expect(page.getByTestId('card-risk-score')).toBeVisible({ timeout: 10000 });\n    \n    // Check if \"New Analysis\" button appears in header (might be viewport dependent)\n    const newAnalysisButton = page.getByRole('button', { name: /new analysis/i });\n    \n    // Click it if visible\n    if (await newAnalysisButton.isVisible()) {\n      await newAnalysisButton.click();\n      \n      // Verify we're back to input state\n      await expect(page.getByRole('heading', { name: 'Solana Rug Detector' })).toBeVisible();\n    }\n  });\n});\n\ntest.describe('Token Analysis - Visual Regression', () => {\n  test('should match screenshot for safe token analysis', async ({ page }) => {\n    await page.route('**/api/analyze-token', async (route) => {\n      await new Promise(resolve => setTimeout(resolve, 300));\n      await route.fulfill({\n        status: 200,\n        contentType: 'application/json',\n        body: JSON.stringify(mockSafeTokenResponse),\n      });\n    });\n\n    await page.goto('/');\n    \n    await page.getByTestId('input-token-address').fill(VALID_TOKEN);\n    await page.getByTestId('button-analyze').click();\n    \n    await expect(page.getByTestId('card-risk-score')).toBeVisible({ timeout: 15000 });\n    \n    // Wait for animations to complete\n    await page.waitForTimeout(2000);\n    \n    // Take screenshot (only on failure by default, configured in playwright.config.ts)\n    await expect(page).toHaveScreenshot('safe-token-analysis.png', {\n      fullPage: true,\n      maxDiffPixels: 100,\n    });\n  });\n\n  test('should match screenshot for high-risk bundled token', async ({ page }) => {\n    await page.route('**/api/analyze-token', async (route) => {\n      await new Promise(resolve => setTimeout(resolve, 300));\n      await route.fulfill({\n        status: 200,\n        contentType: 'application/json',\n        body: JSON.stringify(mockHighRiskBundledResponse),\n      });\n    });\n\n    await page.goto('/');\n    \n    await page.getByTestId('input-token-address').fill('HighRiskToken123456789012345678901234');\n    await page.getByTestId('button-analyze').click();\n    \n    await expect(page.getByTestId('card-risk-score')).toBeVisible({ timeout: 15000 });\n    \n    // Wait for animations to complete\n    await page.waitForTimeout(2000);\n    \n    await expect(page).toHaveScreenshot('high-risk-bundled-token.png', {\n      fullPage: true,\n      maxDiffPixels: 100,\n    });\n  });\n});\n","size_bytes":21900},"tests/integration/api-routes.test.ts":{"content":"import request from 'supertest';\nimport { app } from '../../server/index';\nimport {\n  mockCompleteAnalysis,\n  mockDexScreener,\n  mockRugcheck,\n  mockGoPlus,\n  mockSolanaRPC,\n  clearAllMocks,\n} from '../utils/solana-mocks';\nimport {\n  PUMP_FUN_TOKEN,\n  BUNDLE_TOKEN,\n  DEXSCREENER_DATA_PUMP,\n  RUGCHECK_DATA_PUMP,\n  RUGCHECK_DATA_WITH_BUNDLES,\n  GOPLUS_DATA_SAFE,\n} from '../fixtures/solana/token-fixtures';\nimport { registerRoutes } from '../../server/routes';\n\ndescribe('API Integration Tests', () => {\n  let server: any;\n\n  beforeAll(async () => {\n    server = await registerRoutes(app);\n  });\n\n  afterAll(async () => {\n    if (server) {\n      await new Promise<void>((resolve) => {\n        server.close(() => resolve());\n      });\n    }\n  });\n\n  beforeEach(() => {\n    clearAllMocks();\n  });\n\n  afterEach(() => {\n    clearAllMocks();\n  });\n\n  describe('POST /api/analyze-token', () => {\n    describe('Success Cases', () => {\n      it('should return 200 and complete analysis for valid pump.fun token', async () => {\n        // Mock all external API calls\n        mockCompleteAnalysis(PUMP_FUN_TOKEN.address, 'safe');\n\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: PUMP_FUN_TOKEN.address })\n          .expect('Content-Type', /json/)\n          .expect(200);\n\n        // Verify response structure\n        expect(response.body).toHaveProperty('tokenAddress');\n        expect(response.body.tokenAddress).toBe(PUMP_FUN_TOKEN.address);\n        \n        expect(response.body).toHaveProperty('riskScore');\n        expect(typeof response.body.riskScore).toBe('number');\n        expect(response.body.riskScore).toBeGreaterThanOrEqual(0);\n        expect(response.body.riskScore).toBeLessThanOrEqual(10000);\n        \n        expect(response.body).toHaveProperty('riskLevel');\n        expect(['LOW', 'MODERATE', 'HIGH', 'EXTREME']).toContain(response.body.riskLevel);\n        \n        expect(response.body).toHaveProperty('analyzedAt');\n        expect(typeof response.body.analyzedAt).toBe('number');\n        \n        // Verify authority checks\n        expect(response.body).toHaveProperty('mintAuthority');\n        expect(response.body.mintAuthority).toHaveProperty('hasAuthority');\n        expect(response.body.mintAuthority).toHaveProperty('isRevoked');\n        \n        expect(response.body).toHaveProperty('freezeAuthority');\n        expect(response.body.freezeAuthority).toHaveProperty('hasAuthority');\n        expect(response.body.freezeAuthority).toHaveProperty('isRevoked');\n        \n        // Verify metadata\n        expect(response.body).toHaveProperty('metadata');\n        expect(response.body.metadata).toHaveProperty('name');\n        expect(response.body.metadata).toHaveProperty('symbol');\n        expect(response.body.metadata).toHaveProperty('decimals');\n        expect(response.body.metadata).toHaveProperty('supply');\n        \n        // Verify holder analysis\n        expect(response.body).toHaveProperty('holderCount');\n        expect(typeof response.body.holderCount).toBe('number');\n        \n        expect(response.body).toHaveProperty('topHolders');\n        expect(Array.isArray(response.body.topHolders)).toBe(true);\n        \n        expect(response.body).toHaveProperty('topHolderConcentration');\n        expect(typeof response.body.topHolderConcentration).toBe('number');\n        \n        // Verify liquidity data\n        expect(response.body).toHaveProperty('liquidityPool');\n        expect(response.body.liquidityPool).toHaveProperty('exists');\n        expect(response.body.liquidityPool).toHaveProperty('status');\n        \n        // Verify transactions\n        expect(response.body).toHaveProperty('recentTransactions');\n        expect(Array.isArray(response.body.recentTransactions)).toBe(true);\n        \n        expect(response.body).toHaveProperty('suspiciousActivityDetected');\n        expect(typeof response.body.suspiciousActivityDetected).toBe('boolean');\n        \n        // Verify risk assessment\n        expect(response.body).toHaveProperty('redFlags');\n        expect(Array.isArray(response.body.redFlags)).toBe(true);\n        \n        // Verify blacklist info is added\n        expect(response.body).toHaveProperty('blacklistInfo');\n        expect(response.body.blacklistInfo).toHaveProperty('mintAuthority');\n        expect(response.body.blacklistInfo).toHaveProperty('freezeAuthority');\n        expect(response.body.blacklistInfo).toHaveProperty('token');\n      });\n\n      it('should include market data when available from DexScreener', async () => {\n        mockCompleteAnalysis(PUMP_FUN_TOKEN.address, 'safe');\n\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: PUMP_FUN_TOKEN.address })\n          .expect(200);\n\n        // Verify market data structure\n        expect(response.body).toHaveProperty('marketData');\n        if (response.body.marketData) {\n          expect(response.body.marketData).toHaveProperty('priceUsd');\n          expect(response.body.marketData).toHaveProperty('volume24h');\n          expect(response.body.marketData).toHaveProperty('priceChange24h');\n          expect(response.body.marketData).toHaveProperty('liquidity');\n          expect(response.body.marketData).toHaveProperty('marketCap');\n          expect(response.body.marketData).toHaveProperty('fdv');\n        }\n      });\n\n      it('should detect and report bundled wallets', async () => {\n        // Mock with bundle detection\n        mockCompleteAnalysis(BUNDLE_TOKEN.address, 'bundles');\n\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: BUNDLE_TOKEN.address })\n          .expect(200);\n\n        // Verify holder filtering data includes bundle information\n        expect(response.body).toHaveProperty('holderFiltering');\n        expect(response.body.holderFiltering).toHaveProperty('bundlePercentage');\n        \n        // Bundle percentage should be greater than 0 when bundles detected\n        if (response.body.holderFiltering.bundlePercentage !== undefined) {\n          expect(response.body.holderFiltering.bundlePercentage).toBeGreaterThan(0);\n        }\n\n        // Should have detected bundled holders\n        expect(response.body.holderFiltering).toHaveProperty('bundledHolderCount');\n        if (response.body.holderFiltering.bundledHolderCount !== undefined) {\n          expect(response.body.holderFiltering.bundledHolderCount).toBeGreaterThan(0);\n        }\n      });\n\n      it('should properly format holder data with ranks and percentages', async () => {\n        mockCompleteAnalysis(PUMP_FUN_TOKEN.address, 'safe');\n\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: PUMP_FUN_TOKEN.address })\n          .expect(200);\n\n        // Verify holder data structure\n        const { topHolders } = response.body;\n        expect(Array.isArray(topHolders)).toBe(true);\n        \n        if (topHolders.length > 0) {\n          const holder = topHolders[0];\n          expect(holder).toHaveProperty('rank');\n          expect(holder).toHaveProperty('address');\n          expect(holder).toHaveProperty('balance');\n          expect(holder).toHaveProperty('percentage');\n          \n          expect(typeof holder.rank).toBe('number');\n          expect(typeof holder.address).toBe('string');\n          expect(typeof holder.balance).toBe('number');\n          expect(typeof holder.percentage).toBe('number');\n          \n          // Percentages should be between 0 and 100\n          expect(holder.percentage).toBeGreaterThanOrEqual(0);\n          expect(holder.percentage).toBeLessThanOrEqual(100);\n        }\n      });\n\n      it('should calculate risk score based on multiple factors', async () => {\n        mockCompleteAnalysis(PUMP_FUN_TOKEN.address, 'safe');\n\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: PUMP_FUN_TOKEN.address })\n          .expect(200);\n\n        // Risk score should be calculated\n        expect(response.body.riskScore).toBeDefined();\n        expect(typeof response.body.riskScore).toBe('number');\n\n        // Risk level should match risk score ranges\n        const { riskScore, riskLevel } = response.body;\n        if (riskScore < 3000) {\n          expect(riskLevel).toBe('LOW');\n        } else if (riskScore < 5000) {\n          expect(riskLevel).toBe('MODERATE');\n        } else if (riskScore < 7500) {\n          expect(riskLevel).toBe('HIGH');\n        } else {\n          expect(riskLevel).toBe('EXTREME');\n        }\n      });\n    });\n\n    describe('Error Cases', () => {\n      it('should return 400 for missing tokenAddress', async () => {\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({})\n          .expect('Content-Type', /json/)\n          .expect(400);\n\n        expect(response.body).toHaveProperty('error');\n        expect(response.body.error).toBe('Invalid request');\n        expect(response.body).toHaveProperty('details');\n        expect(Array.isArray(response.body.details)).toBe(true);\n      });\n\n      it('should return 400 for empty tokenAddress', async () => {\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: '' })\n          .expect('Content-Type', /json/)\n          .expect(400);\n\n        expect(response.body).toHaveProperty('error');\n        expect(response.body.error).toBe('Invalid request');\n      });\n\n      it('should return 400 for tokenAddress that is too short', async () => {\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: 'tooShort' })\n          .expect('Content-Type', /json/)\n          .expect(400);\n\n        expect(response.body).toHaveProperty('error');\n        expect(response.body.error).toBe('Invalid request');\n        expect(response.body).toHaveProperty('details');\n      });\n\n      it('should return 400 for tokenAddress that is too long', async () => {\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ \n            tokenAddress: 'ThisTokenAddressIsWayTooLongToBeValidOnSolanaBlockchain123456789' \n          })\n          .expect('Content-Type', /json/)\n          .expect(400);\n\n        expect(response.body).toHaveProperty('error');\n        expect(response.body.error).toBe('Invalid request');\n      });\n\n      it('should return 500 for invalid token address format', async () => {\n        // Mock Solana RPC but expect it to fail\n        mockSolanaRPC();\n\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: 'InvalidAddress1234567890123456789012' })\n          .expect('Content-Type', /json/)\n          .expect(500);\n\n        expect(response.body).toHaveProperty('error');\n        expect(response.body.error).toBe('Analysis failed');\n        expect(response.body).toHaveProperty('message');\n      });\n\n      it('should handle external API failures gracefully', async () => {\n        // Mock Solana RPC only (other APIs will fail)\n        mockSolanaRPC();\n\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: PUMP_FUN_TOKEN.address })\n          .expect('Content-Type', /json/);\n\n        // Should still return data even if some external APIs fail\n        // The analyzer catches errors and continues with partial data\n        expect(response.statusCode).toBeLessThan(500);\n      });\n\n      it('should return proper error message for non-existent token', async () => {\n        // Don't mock any responses - let APIs return not found\n        const nonExistentAddress = '11111111111111111111111111111111';\n        \n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: nonExistentAddress })\n          .expect('Content-Type', /json/)\n          .expect(500);\n\n        expect(response.body).toHaveProperty('error');\n        expect(response.body).toHaveProperty('message');\n      });\n    });\n\n    describe('Response Structure Validation', () => {\n      it('should always include required fields in successful response', async () => {\n        mockCompleteAnalysis(PUMP_FUN_TOKEN.address, 'safe');\n\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: PUMP_FUN_TOKEN.address })\n          .expect(200);\n\n        // Required top-level fields\n        const requiredFields = [\n          'tokenAddress',\n          'riskScore',\n          'riskLevel',\n          'analyzedAt',\n          'mintAuthority',\n          'freezeAuthority',\n          'metadata',\n          'holderCount',\n          'topHolders',\n          'topHolderConcentration',\n          'holderFiltering',\n          'liquidityPool',\n          'recentTransactions',\n          'suspiciousActivityDetected',\n          'redFlags',\n          'blacklistInfo',\n        ];\n\n        requiredFields.forEach(field => {\n          expect(response.body).toHaveProperty(field);\n        });\n      });\n\n      it('should include timestamp in Unix milliseconds format', async () => {\n        mockCompleteAnalysis(PUMP_FUN_TOKEN.address, 'safe');\n\n        const beforeRequest = Date.now();\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: PUMP_FUN_TOKEN.address })\n          .expect(200);\n        const afterRequest = Date.now();\n\n        expect(response.body.analyzedAt).toBeGreaterThanOrEqual(beforeRequest);\n        expect(response.body.analyzedAt).toBeLessThanOrEqual(afterRequest);\n      });\n\n      it('should format redFlags with proper severity levels', async () => {\n        mockCompleteAnalysis(PUMP_FUN_TOKEN.address, 'safe');\n\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: PUMP_FUN_TOKEN.address })\n          .expect(200);\n\n        const validSeverities = ['low', 'medium', 'high', 'critical'];\n        \n        response.body.redFlags.forEach((flag: any) => {\n          expect(flag).toHaveProperty('type');\n          expect(flag).toHaveProperty('severity');\n          expect(flag).toHaveProperty('title');\n          expect(flag).toHaveProperty('description');\n          expect(validSeverities).toContain(flag.severity);\n        });\n      });\n\n      it('should include holder filtering metadata', async () => {\n        mockCompleteAnalysis(PUMP_FUN_TOKEN.address, 'safe');\n\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: PUMP_FUN_TOKEN.address })\n          .expect(200);\n\n        expect(response.body.holderFiltering).toHaveProperty('totalFiltered');\n        expect(response.body.holderFiltering).toHaveProperty('filterCategories');\n        expect(Array.isArray(response.body.holderFiltering.filterCategories)).toBe(true);\n      });\n    });\n\n    describe('Special Token Types', () => {\n      it('should identify pump.fun tokens correctly', async () => {\n        mockCompleteAnalysis(PUMP_FUN_TOKEN.address, 'safe');\n\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: PUMP_FUN_TOKEN.address })\n          .expect(200);\n\n        // Pump.fun tokens typically have specific characteristics\n        // that should be reflected in the analysis\n        expect(response.body.tokenAddress).toBe(PUMP_FUN_TOKEN.address);\n      });\n\n      it('should handle tokens with high holder concentration', async () => {\n        mockCompleteAnalysis(PUMP_FUN_TOKEN.address, 'safe');\n\n        const response = await request(app)\n          .post('/api/analyze-token')\n          .send({ tokenAddress: PUMP_FUN_TOKEN.address })\n          .expect(200);\n\n        // Verify holder concentration is calculated\n        expect(typeof response.body.topHolderConcentration).toBe('number');\n        expect(response.body.topHolderConcentration).toBeGreaterThanOrEqual(0);\n        expect(response.body.topHolderConcentration).toBeLessThanOrEqual(100);\n\n        // High concentration should potentially trigger risk flags\n        if (response.body.topHolderConcentration > 50) {\n          const hasConcentrationFlag = response.body.redFlags.some(\n            (flag: any) => flag.type === 'holder_concentration'\n          );\n          // May or may not have the flag depending on other factors\n          expect(typeof hasConcentrationFlag).toBe('boolean');\n        }\n      });\n    });\n  });\n});\n","size_bytes":16537},"server/services/price-cache.ts":{"content":"/**\n * Price Cache Service\n * In-memory cache for token prices with TTL and batch fetching\n */\n\ninterface CachedPrice {\n  tokenAddress: string;\n  priceUsd: number;\n  priceNative: number;\n  marketCap: number | null;\n  liquidity: number | null;\n  volume24h: number | null;\n  priceChange24h: number | null;\n  lastUpdated: number; // timestamp\n}\n\ninterface PriceCacheOptions {\n  ttlMs?: number; // Time to live in milliseconds (default: 20000 = 20s)\n  maxSize?: number; // Max cache entries (default: 1000)\n}\n\nexport class PriceCache {\n  private cache: Map<string, CachedPrice> = new Map();\n  private ttlMs: number;\n  private maxSize: number;\n\n  constructor(options: PriceCacheOptions = {}) {\n    this.ttlMs = options.ttlMs || 20000; // 20 seconds default\n    this.maxSize = options.maxSize || 1000;\n  }\n\n  /**\n   * Get cached price for a token\n   * Returns null if not cached or expired\n   */\n  get(tokenAddress: string): CachedPrice | null {\n    const cached = this.cache.get(tokenAddress);\n    \n    if (!cached) {\n      return null;\n    }\n\n    // Check if expired\n    if (Date.now() - cached.lastUpdated > this.ttlMs) {\n      this.cache.delete(tokenAddress);\n      return null;\n    }\n\n    return cached;\n  }\n\n  /**\n   * Get multiple prices at once\n   */\n  getMultiple(tokenAddresses: string[]): Map<string, CachedPrice> {\n    const results = new Map<string, CachedPrice>();\n    \n    for (const address of tokenAddresses) {\n      const cached = this.get(address);\n      if (cached) {\n        results.set(address, cached);\n      }\n    }\n\n    return results;\n  }\n\n  /**\n   * Set price for a token\n   */\n  set(tokenAddress: string, price: Omit<CachedPrice, 'lastUpdated'>): void {\n    // Enforce max size\n    if (this.cache.size >= this.maxSize && !this.cache.has(tokenAddress)) {\n      // Remove oldest entry (first entry in Map)\n      const firstKey = this.cache.keys().next().value;\n      if (firstKey) {\n        this.cache.delete(firstKey);\n      }\n    }\n\n    this.cache.set(tokenAddress, {\n      ...price,\n      lastUpdated: Date.now(),\n    });\n  }\n\n  /**\n   * Set multiple prices at once\n   */\n  setMultiple(prices: Array<Omit<CachedPrice, 'lastUpdated'>>): void {\n    for (const price of prices) {\n      this.set(price.tokenAddress, price);\n    }\n  }\n\n  /**\n   * Check if price is cached and fresh\n   */\n  has(tokenAddress: string): boolean {\n    return this.get(tokenAddress) !== null;\n  }\n\n  /**\n   * Clear cache for specific token\n   */\n  delete(tokenAddress: string): void {\n    this.cache.delete(tokenAddress);\n  }\n\n  /**\n   * Clear entire cache\n   */\n  clear(): void {\n    this.cache.clear();\n  }\n\n  /**\n   * Get all token addresses in the cache\n   * Returns array of token addresses (does not filter by expiry)\n   */\n  getAllTokens(): string[] {\n    return Array.from(this.cache.keys());\n  }\n\n  /**\n   * Get recently updated token addresses\n   * @param minutes - Number of minutes to look back\n   * @returns Array of token addresses updated within the last N minutes\n   */\n  getRecentlyUpdated(minutes: number): string[] {\n    const now = Date.now();\n    const cutoffTime = now - (minutes * 60 * 1000);\n    const recentTokens: string[] = [];\n\n    for (const [address, entry] of Array.from(this.cache.entries())) {\n      if (entry.lastUpdated >= cutoffTime) {\n        recentTokens.push(address);\n      }\n    }\n\n    return recentTokens;\n  }\n\n  /**\n   * Get cache statistics\n   */\n  getStats() {\n    const now = Date.now();\n    let freshEntries = 0;\n    let staleEntries = 0;\n\n    for (const entry of Array.from(this.cache.values())) {\n      if (now - entry.lastUpdated > this.ttlMs) {\n        staleEntries++;\n      } else {\n        freshEntries++;\n      }\n    }\n\n    return {\n      totalEntries: this.cache.size,\n      freshEntries,\n      staleEntries,\n      maxSize: this.maxSize,\n      ttlMs: this.ttlMs,\n    };\n  }\n\n  /**\n   * Cleanup stale entries\n   */\n  cleanup(): number {\n    const now = Date.now();\n    let removed = 0;\n\n    for (const [address, entry] of Array.from(this.cache.entries())) {\n      if (now - entry.lastUpdated > this.ttlMs) {\n        this.cache.delete(address);\n        removed++;\n      }\n    }\n\n    return removed;\n  }\n}\n\n// Global singleton instance\nexport const priceCache = new PriceCache({\n  ttlMs: 20000, // 20 seconds\n  maxSize: 2000, // Support 2000 tokens\n});\n\nexport type { CachedPrice };\n","size_bytes":4331},"server/services/price-service.ts":{"content":"/**\n * Price Service\n * Fetches and normalizes token prices from DexScreener and Jupiter\n */\n\nimport axios from 'axios';\nimport { priceCache, CachedPrice } from './price-cache';\n\ninterface DexScreenerPairData {\n  priceUsd?: string;\n  priceNative?: string;\n  fdv?: number;\n  marketCap?: number;\n  liquidity?: {\n    usd?: number;\n  };\n  volume?: {\n    h24?: number;\n  };\n  priceChange?: {\n    h24?: number;\n  };\n}\n\nexport class PriceService {\n  /**\n   * Get price for a single token (uses cache if available)\n   */\n  async getPrice(tokenAddress: string, options: { useCache?: boolean } = {}): Promise<CachedPrice | null> {\n    const { useCache = true } = options;\n\n    // Try cache first\n    if (useCache) {\n      const cached = priceCache.get(tokenAddress);\n      if (cached) {\n        return cached;\n      }\n    }\n\n    // Fetch from APIs\n    const price = await this.fetchPrice(tokenAddress);\n    \n    if (price) {\n      priceCache.set(tokenAddress, price);\n      return priceCache.get(tokenAddress)!;\n    }\n\n    return null;\n  }\n\n  /**\n   * Get prices for multiple tokens (batch operation with cache)\n   */\n  async getPrices(tokenAddresses: string[], options: { useCache?: boolean } = {}): Promise<Map<string, CachedPrice>> {\n    const { useCache = true } = options;\n    const results = new Map<string, CachedPrice>();\n    const toFetch: string[] = [];\n\n    // Check cache first\n    if (useCache) {\n      const cached = priceCache.getMultiple(tokenAddresses);\n      for (const [address, price] of Array.from(cached.entries())) {\n        results.set(address, price);\n      }\n    }\n\n    // Determine which prices need fetching\n    for (const address of tokenAddresses) {\n      if (!results.has(address)) {\n        toFetch.push(address);\n      }\n    }\n\n    // Fetch missing prices in parallel\n    if (toFetch.length > 0) {\n      const promises = toFetch.map(address => this.fetchPrice(address));\n      const fetched = await Promise.allSettled(promises);\n\n      fetched.forEach((result, index) => {\n        if (result.status === 'fulfilled' && result.value) {\n          const address = toFetch[index];\n          priceCache.set(address, result.value);\n          const cached = priceCache.get(address);\n          if (cached) {\n            results.set(address, cached);\n          }\n        }\n      });\n    }\n\n    return results;\n  }\n\n  /**\n   * Fetch price from external APIs (DexScreener primary, Jupiter fallback)\n   */\n  private async fetchPrice(tokenAddress: string): Promise<Omit<CachedPrice, 'lastUpdated'> | null> {\n    try {\n      // Try DexScreener first\n      const dexPrice = await this.fetchFromDexScreener(tokenAddress);\n      if (dexPrice) {\n        return dexPrice;\n      }\n\n      // Fallback to Jupiter (if needed in future)\n      // const jupiterPrice = await this.fetchFromJupiter(tokenAddress);\n      // if (jupiterPrice) return jupiterPrice;\n\n      return null;\n    } catch (error) {\n      console.error(`[PriceService] Error fetching price for ${tokenAddress}:`, error);\n      return null;\n    }\n  }\n\n  /**\n   * Fetch price from DexScreener API\n   */\n  private async fetchFromDexScreener(tokenAddress: string): Promise<Omit<CachedPrice, 'lastUpdated'> | null> {\n    try {\n      const response = await axios.get(`https://api.dexscreener.com/latest/dex/tokens/${tokenAddress}`, {\n        timeout: 5000,\n      });\n\n      if (response.data?.pairs && response.data.pairs.length > 0) {\n        // Find the pair with highest liquidity\n        const sortedPairs = response.data.pairs.sort(\n          (a: DexScreenerPairData, b: DexScreenerPairData) => \n            (b.liquidity?.usd || 0) - (a.liquidity?.usd || 0)\n        );\n\n        const pair = sortedPairs[0];\n\n        return {\n          tokenAddress,\n          priceUsd: parseFloat(pair.priceUsd || '0'),\n          priceNative: parseFloat(pair.priceNative || '0'),\n          marketCap: pair.marketCap || null,\n          liquidity: pair.liquidity?.usd || null,\n          volume24h: pair.volume?.h24 || null,\n          priceChange24h: pair.priceChange?.h24 || null,\n        };\n      }\n\n      return null;\n    } catch (error) {\n      console.error(`[DexScreener] Error for ${tokenAddress}:`, error);\n      return null;\n    }\n  }\n\n  /**\n   * Refresh prices for multiple tokens (background job use)\n   */\n  async refreshPrices(tokenAddresses: string[]): Promise<void> {\n    console.log(`[PriceService] Refreshing prices for ${tokenAddresses.length} tokens`);\n    await this.getPrices(tokenAddresses, { useCache: false });\n  }\n}\n\n// Global singleton instance\nexport const priceService = new PriceService();\n","size_bytes":4563},"tests/fixtures/solana/token-fixtures.ts":{"content":"/**\n * Deterministic Solana token fixtures for testing\n * Based on real token data but simplified for testing\n */\n\nexport const PUMP_FUN_TOKEN = {\n  address: 'FRVCEaJuS8cuBTWR1JwVu35pBsKmHmt9n4LjSiF4pump',\n  name: 'Test Pump.fun Token',\n  symbol: 'TESTPUMP',\n  decimals: 6,\n  supply: 1000000000,\n  mintAuthority: null,\n  freezeAuthority: null,\n};\n\nexport const BUNDLE_TOKEN = {\n  address: '2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt',\n  name: 'Solana Rug Killer',\n  symbol: 'ANTIRUG',\n  decimals: 6,\n  supply: 1000000000,\n  mintAuthority: null,\n  freezeAuthority: null,\n};\n\nexport const REGULAR_TOKEN = {\n  address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  name: 'USD Coin',\n  symbol: 'USDC',\n  decimals: 6,\n  supply: 42000000000,\n  mintAuthority: null,\n  freezeAuthority: null,\n};\n\nexport const HOLDERS_PUMP_FUN = [\n  {\n    address: '5Q544fKrFoe6tsEbD7S8EmxGTJYAKtTVhAW5Q5pge4j1',\n    balance: 99260000000,\n    percentage: 99.26,\n  },\n  {\n    address: '3ZzBb3QwNnvJBuLXVvLWjcNw7GhKdFp1rk1x7oDH2pump',\n    balance: 500000000,\n    percentage: 0.5,\n  },\n  {\n    address: '7XaWhbL3HBcmjzZ3K8H4vU5qQjYMxZYQpump12345678',\n    balance: 240000000,\n    percentage: 0.24,\n  },\n];\n\nexport const HOLDERS_WITH_BUNDLES = [\n  {\n    address: 'Whale1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA',\n    balance: 100000000,\n    percentage: 10.0,\n    isBundled: false,\n  },\n  {\n    address: 'Bundle1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA',\n    balance: 20000000,\n    percentage: 2.0,\n    isBundled: true,\n  },\n  {\n    address: 'Bundle2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA',\n    balance: 10000000,\n    percentage: 1.0,\n    isBundled: true,\n  },\n  {\n    address: 'Bundle3AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA',\n    balance: 8900000,\n    percentage: 0.89,\n    isBundled: true,\n  },\n  {\n    address: 'Regular1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA',\n    balance: 5000000,\n    percentage: 0.5,\n    isBundled: false,\n  },\n];\n\nexport const DEXSCREENER_DATA_PUMP = {\n  schemaVersion: '1.0.0',\n  pairs: [\n    {\n      chainId: 'solana',\n      dexId: 'raydium',\n      url: 'https://dexscreener.com/solana/test',\n      pairAddress: 'TestPairAddress123456789',\n      baseToken: {\n        address: 'FRVCEaJuS8cuBTWR1JwVu35pBsKmHmt9n4LjSiF4pump',\n        name: 'Test Pump.fun Token',\n        symbol: 'TESTPUMP',\n      },\n      quoteToken: {\n        address: 'So11111111111111111111111111111111111111112',\n        name: 'Wrapped SOL',\n        symbol: 'SOL',\n      },\n      priceNative: '0.00001234',\n      priceUsd: '0.00234',\n      txns: {\n        m5: { buys: 10, sells: 5 },\n        h1: { buys: 100, sells: 50 },\n        h6: { buys: 500, sells: 250 },\n        h24: { buys: 2000, sells: 1000 },\n      },\n      volume: {\n        h24: 50000,\n        h6: 20000,\n        h1: 5000,\n        m5: 1000,\n      },\n      priceChange: {\n        h24: 15.5,\n        h6: 10.2,\n        h1: 5.1,\n        m5: 2.3,\n      },\n      liquidity: {\n        usd: 15000,\n        base: 6410256410,\n        quote: 150,\n      },\n      fdv: 2340000,\n      marketCap: 2340000,\n      pairCreatedAt: Date.now() - 86400000,\n    },\n  ],\n};\n\nexport const RUGCHECK_DATA_PUMP = {\n  mint: 'FRVCEaJuS8cuBTWR1JwVu35pBsKmHmt9n4LjSiF4pump',\n  score: 8500,\n  risks: [],\n  topHolders: HOLDERS_PUMP_FUN.map(h => ({\n    address: h.address,\n    pct: h.percentage,\n  })),\n  markets: [\n    {\n      lp: 'TestLPAddress123456789',\n      marketType: 'pump_fun',\n      lpLockedPct: 99.26,\n      lpBurn: null,\n    },\n  ],\n  fileMeta: {\n    name: 'Test Pump.fun Token',\n    symbol: 'TESTPUMP',\n  },\n};\n\nexport const RUGCHECK_DATA_WITH_BUNDLES = {\n  mint: '2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt',\n  score: 7500,\n  risks: [\n    {\n      name: 'Bundled wallets detected',\n      description: '3 wallets appear to be bundled',\n      level: 'warn',\n      score: 500,\n    },\n  ],\n  topHolders: HOLDERS_WITH_BUNDLES.map(h => ({\n    address: h.address,\n    pct: h.percentage,\n  })),\n  markets: [\n    {\n      lp: 'BundleTestLP123456789',\n      marketType: 'raydium',\n      lpLockedPct: 0,\n      lpBurn: 95.5,\n    },\n  ],\n  fileMeta: {\n    name: 'Solana Rug Killer',\n    symbol: 'ANTIRUG',\n  },\n};\n\nexport const GOPLUS_DATA_SAFE = {\n  code: 1,\n  message: 'OK',\n  result: {\n    FRVCEaJuS8cuBTWR1JwVu35pBsKmHmt9n4LjSiF4pump: {\n      is_honeypot: '0',\n      is_blacklisted: '0',\n      is_open_source: '1',\n      buy_tax: '0',\n      sell_tax: '0',\n      can_take_back_ownership: '0',\n      owner_change_balance: '0',\n      hidden_owner: '0',\n      selfdestruct: '0',\n      is_true_token: '1',\n    },\n  },\n};\n\nexport const GOPLUS_DATA_RISKY = {\n  code: 1,\n  message: 'OK',\n  result: {\n    '2rvVzKqwW7yeF8vbyVgvo7hEqaPvFx7fZudyLcRMxmNt': {\n      is_honeypot: '1',\n      is_blacklisted: '0',\n      is_open_source: '1',\n      buy_tax: '0',\n      sell_tax: '25',\n      can_take_back_ownership: '1',\n      owner_change_balance: '1',\n      hidden_owner: '0',\n      selfdestruct: '0',\n      is_true_token: '1',\n    },\n  },\n};\n","size_bytes":4902},"client/src/pages/alerts.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Plus, Trash2, Bell, BellOff } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { PriceAlert } from \"@shared/schema\";\n\nexport default function Alerts() {\n  const { toast } = useToast();\n  const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\n\n  // Fetch alerts\n  const { data: alerts = [], isLoading } = useQuery<PriceAlert[]>({\n    queryKey: ['/api/alerts'],\n  });\n\n  // Create alert mutation\n  const createAlert = useMutation({\n    mutationFn: async (data: any) => {\n      return apiRequest('/api/alerts', {\n        method: 'POST',\n        body: JSON.stringify(data),\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/alerts'] });\n      setIsAddDialogOpen(false);\n      toast({ title: \"Alert created\", description: \"You'll be notified when conditions are met\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  // Toggle alert mutation\n  const toggleAlert = useMutation({\n    mutationFn: async ({ id, isActive }: { id: string; isActive: boolean }) => {\n      return apiRequest(`/api/alerts/${id}`, {\n        method: 'PATCH',\n        body: JSON.stringify({ isActive }),\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/alerts'] });\n      toast({ title: \"Alert updated\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  // Delete alert mutation\n  const deleteAlert = useMutation({\n    mutationFn: async (id: string) => {\n      return apiRequest(`/api/alerts/${id}`, { method: 'DELETE' });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/alerts'] });\n      toast({ title: \"Alert deleted\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const formData = new FormData(e.currentTarget);\n    \n    // Validate token address\n    const tokenAddress = formData.get('tokenAddress') as string;\n    if (!tokenAddress || tokenAddress.trim().length < 32) {\n      toast({ \n        title: \"Invalid Token Address\", \n        description: \"Token address must be at least 32 characters\", \n        variant: \"destructive\" \n      });\n      return;\n    }\n    \n    // Validate alert type\n    const alertType = formData.get('alertType') as string;\n    if (!alertType) {\n      toast({ title: \"Error\", description: \"Please select an alert type\", variant: \"destructive\" });\n      return;\n    }\n    \n    // Parse and validate target value\n    const targetValueStr = formData.get('targetValue') as string;\n    if (!targetValueStr) {\n      toast({ title: \"Error\", description: \"Target value is required\", variant: \"destructive\" });\n      return;\n    }\n    const targetValue = parseFloat(targetValueStr);\n    if (isNaN(targetValue)) {\n      toast({ \n        title: \"Invalid Target Value\", \n        description: \"Please enter a valid number for target value\", \n        variant: \"destructive\" \n      });\n      return;\n    }\n    if (targetValue <= 0) {\n      toast({ \n        title: \"Invalid Target Value\", \n        description: \"Target value must be greater than zero\", \n        variant: \"destructive\" \n      });\n      return;\n    }\n    \n    const data: any = {\n      tokenAddress: tokenAddress.trim(),\n      alertType,\n      targetValue,\n    };\n\n    // Validate lookback window for percent-based alerts\n    if (alertType === 'percent_change' || alertType === 'percent_drop') {\n      const lookbackStr = formData.get('lookbackWindowMinutes') as string;\n      if (lookbackStr && lookbackStr !== '') {\n        const lookbackMinutes = parseInt(lookbackStr);\n        if (isNaN(lookbackMinutes)) {\n          toast({ \n            title: \"Invalid Lookback Window\", \n            description: \"Please enter a valid number for lookback window\", \n            variant: \"destructive\" \n          });\n          return;\n        }\n        if (lookbackMinutes <= 0) {\n          toast({ \n            title: \"Invalid Lookback Window\", \n            description: \"Lookback window must be greater than zero\", \n            variant: \"destructive\" \n          });\n          return;\n        }\n        data.lookbackWindowMinutes = lookbackMinutes;\n      }\n    }\n    \n    createAlert.mutate(data);\n  };\n\n  const activeCount = alerts.filter(a => a.isActive).length;\n  const triggeredCount = alerts.filter(a => a.triggeredAt).length;\n\n  return (\n    <div className=\"container mx-auto p-6 space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"title-alerts\">Price Alerts</h1>\n          <p className=\"text-muted-foreground\">Get notified when token prices hit your targets</p>\n        </div>\n        <Dialog open={isAddDialogOpen} onOpenChange={setIsAddDialogOpen}>\n          <DialogTrigger asChild>\n            <Button data-testid=\"button-create-alert\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Create Alert\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Create Price Alert</DialogTitle>\n              <DialogDescription>\n                Set up notifications for price movements\n              </DialogDescription>\n            </DialogHeader>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"tokenAddress\">Token Address</Label>\n                <Input id=\"tokenAddress\" name=\"tokenAddress\" required data-testid=\"input-token-address\" />\n              </div>\n              <div>\n                <Label htmlFor=\"alertType\">Alert Type</Label>\n                <Select name=\"alertType\" required>\n                  <SelectTrigger data-testid=\"select-alert-type\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"price_above\">Price Above</SelectItem>\n                    <SelectItem value=\"price_below\">Price Below</SelectItem>\n                    <SelectItem value=\"percent_change\">Percent Change</SelectItem>\n                    <SelectItem value=\"percent_drop\">Percent Drop</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label htmlFor=\"targetValue\">Target Value (price or %)</Label>\n                <Input id=\"targetValue\" name=\"targetValue\" type=\"number\" step=\"any\" required data-testid=\"input-target-value\" />\n              </div>\n              <div>\n                <Label htmlFor=\"lookbackWindowMinutes\">Lookback Window (minutes, for % alerts)</Label>\n                <Input id=\"lookbackWindowMinutes\" name=\"lookbackWindowMinutes\" type=\"number\" defaultValue=\"60\" data-testid=\"input-lookback\" />\n              </div>\n              <Button type=\"submit\" className=\"w-full\" disabled={createAlert.isPending} data-testid=\"button-submit-alert\">\n                {createAlert.isPending ? \"Creating...\" : \"Create Alert\"}\n              </Button>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Alerts</CardTitle>\n            <Bell className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-alerts\">{alerts.length}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Active</CardTitle>\n            <Bell className=\"h-4 w-4 text-green-500\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-500\" data-testid=\"text-active-alerts\">{activeCount}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Triggered</CardTitle>\n            <BellOff className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-triggered-alerts\">{triggeredCount}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Your Alerts</CardTitle>\n          <CardDescription>Manage your price alert notifications</CardDescription>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <p className=\"text-muted-foreground\">Loading alerts...</p>\n          ) : alerts.length === 0 ? (\n            <p className=\"text-muted-foreground\" data-testid=\"text-empty-alerts\">No alerts configured. Create one to get started.</p>\n          ) : (\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Token</TableHead>\n                  <TableHead>Type</TableHead>\n                  <TableHead>Target</TableHead>\n                  <TableHead>Last Price</TableHead>\n                  <TableHead>Status</TableHead>\n                  <TableHead>Created</TableHead>\n                  <TableHead>Actions</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {alerts.map((alert) => {\n                  const isTriggered = !!alert.triggeredAt;\n                  const statusColor = isTriggered ? 'text-muted-foreground' : \n                                     alert.isActive ? 'text-green-500' : 'text-orange-500';\n\n                  return (\n                    <TableRow key={alert.id} data-testid={`row-alert-${alert.id}`}>\n                      <TableCell className=\"font-mono text-xs\" data-testid={`cell-token-${alert.id}`}>\n                        {alert.tokenAddress.slice(0, 8)}...\n                      </TableCell>\n                      <TableCell data-testid={`cell-type-${alert.id}`}>\n                        <Badge variant=\"outline\" data-testid={`badge-type-${alert.id}`}>\n                          {alert.alertType.replace('_', ' ')}\n                        </Badge>\n                      </TableCell>\n                      <TableCell data-testid={`cell-target-${alert.id}`}>\n                        {alert.alertType.includes('percent') \n                          ? `${Number(alert.targetValue || 0).toFixed(1)}%`\n                          : `$${Number(alert.targetValue || 0).toFixed(4)}`}\n                      </TableCell>\n                      <TableCell data-testid={`cell-last-price-${alert.id}`}>\n                        {alert.lastPrice ? `$${Number(alert.lastPrice || 0).toFixed(4)}` : '-'}\n                      </TableCell>\n                      <TableCell className={statusColor} data-testid={`cell-status-${alert.id}`}>\n                        <Badge variant=\"outline\" data-testid={`badge-status-${alert.id}`}>\n                          {isTriggered ? 'Triggered' : alert.isActive ? 'Active' : 'Paused'}\n                        </Badge>\n                      </TableCell>\n                      <TableCell data-testid={`cell-created-${alert.id}`}>\n                        {new Date(alert.createdAt!).toLocaleDateString()}\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"flex gap-2 items-center\">\n                          <Switch\n                            checked={alert.isActive && !isTriggered}\n                            disabled={isTriggered}\n                            onCheckedChange={(checked) => toggleAlert.mutate({ id: alert.id, isActive: checked })}\n                            data-testid={`switch-toggle-${alert.id}`}\n                          />\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => deleteAlert.mutate(alert.id)}\n                            data-testid={`button-delete-${alert.id}`}\n                          >\n                            <Trash2 className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                      </TableCell>\n                    </TableRow>\n                  );\n                })}\n              </TableBody>\n            </Table>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":13600},"client/src/pages/analytics.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  LineChart,\n  Line,\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n} from \"recharts\";\nimport {\n  TrendingUp,\n  AlertTriangle,\n  Activity,\n  Bell,\n  Search,\n  RefreshCw,\n  Target,\n  Shield,\n} from \"lucide-react\";\n\n// Color palette for risk levels\nconst RISK_COLORS = {\n  LOW: \"#10B981\",\n  MODERATE: \"#FFA500\",\n  HIGH: \"#DC2626\",\n  EXTREME: \"#8B0000\",\n};\n\ninterface MarketOverviewData {\n  totalAnalyzed: number;\n  rugsDetected: number;\n  avgRiskScore: number;\n  activeAlerts: number;\n  trending: Array<{\n    tokenAddress: string;\n    score: number;\n    rank: number;\n    volume24h: number | null;\n    velocity: number | null;\n  }>;\n}\n\ninterface HistoricalDataPoint {\n  timestamp: string;\n  priceUsd: number | null;\n  riskScore: number;\n  holderCount: number | null;\n  volume24h: number | null;\n  liquidityUsd: number | null;\n  riskFlags: string[] | null;\n  txCount24h: number | null;\n}\n\ninterface RiskInsightsData {\n  last7Days: {\n    totalAnalyzed: number;\n    rugDetected: number;\n    falsePositives: number;\n    detectionRate: string;\n    commonFlags: Record<string, number>;\n  } | null;\n  last30Days: {\n    totalAnalyzed: number;\n    rugDetected: number;\n    falsePositives: number;\n    detectionRate: string;\n    commonFlags: Record<string, number>;\n  } | null;\n}\n\ninterface HotToken {\n  tokenAddress: string;\n  score: number;\n  rank: number;\n  volume24h: number | null;\n  velocity: number | null;\n  priceUsd: number | null;\n  priceChange24h: number | null;\n  riskScore: number | null;\n  updatedAt: string;\n}\n\ninterface PerformanceData {\n  last7Days: {\n    detectionRate: string;\n    falsePositiveRate: string;\n    coverage: number;\n    avgAnalysisTime: string;\n  } | null;\n  last30Days: {\n    detectionRate: string;\n    falsePositiveRate: string;\n    coverage: number;\n    avgAnalysisTime: string;\n  } | null;\n}\n\nfunction getRiskBadgeVariant(score: number): \"default\" | \"secondary\" | \"destructive\" | \"outline\" {\n  // REVERSED: 70-100 (green), 40-70 (yellow), 20-40 (orange), 0-20 (red)\n  if (score >= 70) return \"default\";\n  if (score >= 40) return \"secondary\";\n  if (score >= 20) return \"outline\";\n  return \"destructive\";\n}\n\nfunction getRiskLevel(score: number): string {\n  // REVERSED: 70-100 (green), 40-70 (yellow), 20-40 (orange), 0-20 (red)\n  if (score >= 70) return \"LOW\";\n  if (score >= 40) return \"MODERATE\";\n  if (score >= 20) return \"HIGH\";\n  return \"EXTREME\";\n}\n\nexport default function Analytics() {\n  const [selectedToken, setSelectedToken] = useState(\"\");\n  const [historicalDays, setHistoricalDays] = useState<7 | 30 | 90>(7);\n  const [hotTokensRefresh, setHotTokensRefresh] = useState(0);\n\n  // Market Overview Query\n  const { data: marketOverview, isLoading: overviewLoading } = useQuery<MarketOverviewData>({\n    queryKey: [\"/api/analytics/market-overview\"],\n  });\n\n  // Historical Data Query\n  const { data: historicalData, isLoading: historicalLoading } = useQuery<{\n    tokenAddress: string;\n    days: number;\n    dataPoints: number;\n    data: HistoricalDataPoint[];\n  }>({\n    queryKey: [\"/api/analytics/historical\", selectedToken, historicalDays],\n    enabled: !!selectedToken && selectedToken.length >= 32,\n  });\n\n  // Risk Insights Query\n  const { data: riskInsights, isLoading: insightsLoading } = useQuery<RiskInsightsData>({\n    queryKey: [\"/api/analytics/risk-insights\"],\n  });\n\n  // Hot Tokens Query (with auto-refresh)\n  const { data: hotTokens, isLoading: hotTokensLoading, refetch: refetchHotTokens } = useQuery<HotToken[]>({\n    queryKey: [\"/api/analytics/hot-tokens\", hotTokensRefresh],\n  });\n\n  // Performance Metrics Query\n  const { data: performance, isLoading: performanceLoading } = useQuery<PerformanceData>({\n    queryKey: [\"/api/analytics/performance\"],\n  });\n\n  // Auto-refresh hot tokens every 30 seconds\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setHotTokensRefresh(prev => prev + 1);\n    }, 30000); // 30 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"container mx-auto px-6 py-8 space-y-8\">\n        {/* Page Header */}\n        <div>\n          <h1 className=\"text-4xl font-bold text-white mb-2\" data-testid=\"text-analytics-title\">\n            Advanced Analytics Dashboard\n          </h1>\n          <p className=\"text-secondary text-lg\" data-testid=\"text-analytics-subtitle\">\n            Real-time market intelligence and risk analysis across the Solana ecosystem\n          </p>\n        </div>\n\n        {/* Market Overview Section */}\n        <div className=\"space-y-4\">\n          <h2 className=\"text-2xl font-semibold text-white\" data-testid=\"text-section-market-overview\">\n            Market Overview\n          </h2>\n          \n          {/* KPI Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            <Card data-testid=\"card-total-analyzed\">\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">Total Analyzed</CardTitle>\n                <Activity className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                {overviewLoading ? (\n                  <Skeleton className=\"h-8 w-20\" />\n                ) : (\n                  <>\n                    <div className=\"text-2xl font-bold\" data-testid=\"text-total-analyzed\">\n                      {marketOverview?.totalAnalyzed.toLocaleString() || 0}\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">Last hour</p>\n                  </>\n                )}\n              </CardContent>\n            </Card>\n\n            <Card data-testid=\"card-rugs-detected\">\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">Rugs Detected</CardTitle>\n                <AlertTriangle className=\"h-4 w-4 text-destructive\" />\n              </CardHeader>\n              <CardContent>\n                {overviewLoading ? (\n                  <Skeleton className=\"h-8 w-20\" />\n                ) : (\n                  <>\n                    <div className=\"text-2xl font-bold text-destructive\" data-testid=\"text-rugs-detected\">\n                      {marketOverview?.rugsDetected.toLocaleString() || 0}\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">All time</p>\n                  </>\n                )}\n              </CardContent>\n            </Card>\n\n            <Card data-testid=\"card-avg-risk-score\">\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">Avg Risk Score</CardTitle>\n                <Shield className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                {overviewLoading ? (\n                  <Skeleton className=\"h-8 w-20\" />\n                ) : (\n                  <>\n                    <div className=\"text-2xl font-bold\" data-testid=\"text-avg-risk-score\">\n                      {marketOverview?.avgRiskScore || 0}\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">0-100 scale</p>\n                  </>\n                )}\n              </CardContent>\n            </Card>\n\n            <Card data-testid=\"card-active-alerts\">\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">Active Alerts</CardTitle>\n                <Bell className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                {overviewLoading ? (\n                  <Skeleton className=\"h-8 w-20\" />\n                ) : (\n                  <>\n                    <div className=\"text-2xl font-bold\" data-testid=\"text-active-alerts\">\n                      {marketOverview?.activeAlerts || 0}\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">Price alerts</p>\n                  </>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Trending Tokens Table */}\n          <Card data-testid=\"card-trending-tokens\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <TrendingUp className=\"h-5 w-5\" />\n                Top Trending Tokens\n              </CardTitle>\n              <CardDescription>Hottest tokens based on volume, velocity, and activity</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {overviewLoading ? (\n                <div className=\"space-y-2\">\n                  {[...Array(5)].map((_, i) => (\n                    <Skeleton key={i} className=\"h-12 w-full\" />\n                  ))}\n                </div>\n              ) : (\n                <div className=\"overflow-x-auto\">\n                  <table className=\"w-full\" data-testid=\"table-trending\">\n                    <thead>\n                      <tr className=\"border-b text-sm text-muted-foreground\">\n                        <th className=\"text-left py-2 px-4\">Rank</th>\n                        <th className=\"text-left py-2 px-4\">Token Address</th>\n                        <th className=\"text-right py-2 px-4\">Risk Score</th>\n                        <th className=\"text-right py-2 px-4\">Volume 24h</th>\n                        <th className=\"text-right py-2 px-4\">Action</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {marketOverview?.trending.slice(0, 10).map((token, index) => (\n                        <tr\n                          key={token.tokenAddress}\n                          className=\"border-b hover-elevate\"\n                          data-testid={`row-trending-${index}`}\n                        >\n                          <td className=\"py-3 px-4\">\n                            <Badge variant=\"outline\">\n                              #{token.rank}\n                            </Badge>\n                          </td>\n                          <td className=\"py-3 px-4 font-mono text-sm\" data-testid={`text-trending-token-${index}`}>\n                            {token.tokenAddress.slice(0, 8)}...{token.tokenAddress.slice(-8)}\n                          </td>\n                          <td className=\"py-3 px-4 text-right\">\n                            <Badge variant=\"outline\" data-testid={`badge-risk-${index}`}>\n                              Score: {Number(token.score).toFixed(2)}\n                            </Badge>\n                          </td>\n                          <td className=\"py-3 px-4 text-right\" data-testid={`text-volume-${index}`}>\n                            ${Number(token.volume24h || 0).toLocaleString(undefined, { maximumFractionDigits: 0 })}\n                          </td>\n                          <td className=\"py-3 px-4 text-right\">\n                            <Button\n                              size=\"sm\"\n                              variant=\"ghost\"\n                              onClick={() => window.open(`/?token=${token.tokenAddress}`, '_blank')}\n                              data-testid={`button-analyze-trending-${index}`}\n                            >\n                              Analyze\n                            </Button>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Historical Tracking Section */}\n        <div className=\"space-y-4\">\n          <h2 className=\"text-2xl font-semibold text-white\" data-testid=\"text-section-historical\">\n            Historical Tracking\n          </h2>\n\n          <Card data-testid=\"card-historical-tracking\">\n            <CardHeader>\n              <CardTitle>Token Price & Risk Timeline</CardTitle>\n              <CardDescription>Track price movements and risk score changes over time</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {/* Token Input */}\n              <div className=\"flex gap-4 flex-wrap\">\n                <div className=\"flex-1 min-w-[300px]\">\n                  <div className=\"relative\">\n                    <Search className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\n                    <Input\n                      placeholder=\"Enter token address (32-44 characters)\"\n                      value={selectedToken}\n                      onChange={(e) => setSelectedToken(e.target.value)}\n                      className=\"pl-10\"\n                      data-testid=\"input-token-address\"\n                    />\n                  </div>\n                </div>\n\n                {/* Timeframe Selector */}\n                <Tabs\n                  value={historicalDays.toString()}\n                  onValueChange={(v) => setHistoricalDays(parseInt(v) as 7 | 30 | 90)}\n                  data-testid=\"select-timeframe\"\n                >\n                  <TabsList>\n                    <TabsTrigger value=\"7\" data-testid=\"tab-7d\">7 Days</TabsTrigger>\n                    <TabsTrigger value=\"30\" data-testid=\"tab-30d\">30 Days</TabsTrigger>\n                    <TabsTrigger value=\"90\" data-testid=\"tab-90d\">90 Days</TabsTrigger>\n                  </TabsList>\n                </Tabs>\n              </div>\n\n              {/* Charts */}\n              {selectedToken && selectedToken.length >= 32 ? (\n                historicalLoading ? (\n                  <Skeleton className=\"h-[400px] w-full\" />\n                ) : historicalData && historicalData.data.length > 0 ? (\n                  <div className=\"space-y-6\" data-testid=\"chart-historical\">\n                    {/* Price Chart */}\n                    <div data-testid=\"chart-price\">\n                      <h4 className=\"text-sm font-medium mb-2\">Price (USD)</h4>\n                      <ResponsiveContainer width=\"100%\" height={200}>\n                        <LineChart data={historicalData.data}>\n                          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#2A2A2A\" />\n                          <XAxis\n                            dataKey=\"timestamp\"\n                            tickFormatter={(val) => new Date(val).toLocaleDateString()}\n                            stroke=\"#666\"\n                          />\n                          <YAxis stroke=\"#666\" />\n                          <Tooltip\n                            contentStyle={{ backgroundColor: \"#1A1A1A\", border: \"1px solid #2A2A2A\" }}\n                            labelStyle={{ color: \"#fff\" }}\n                          />\n                          <Line\n                            type=\"monotone\"\n                            dataKey=\"priceUsd\"\n                            stroke=\"#FF6B2C\"\n                            strokeWidth={2}\n                            dot={false}\n                          />\n                        </LineChart>\n                      </ResponsiveContainer>\n                    </div>\n\n                    {/* Risk Score Chart */}\n                    <div data-testid=\"chart-risk-score\">\n                      <h4 className=\"text-sm font-medium mb-2\">Risk Score</h4>\n                      <ResponsiveContainer width=\"100%\" height={200}>\n                        <LineChart data={historicalData.data}>\n                          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#2A2A2A\" />\n                          <XAxis\n                            dataKey=\"timestamp\"\n                            tickFormatter={(val) => new Date(val).toLocaleDateString()}\n                            stroke=\"#666\"\n                          />\n                          <YAxis stroke=\"#666\" domain={[0, 100]} />\n                          <Tooltip\n                            contentStyle={{ backgroundColor: \"#1A1A1A\", border: \"1px solid #2A2A2A\" }}\n                            labelStyle={{ color: \"#fff\" }}\n                          />\n                          <Line\n                            type=\"monotone\"\n                            dataKey=\"riskScore\"\n                            stroke=\"#DC2626\"\n                            strokeWidth={2}\n                            dot={false}\n                          />\n                        </LineChart>\n                      </ResponsiveContainer>\n                    </div>\n\n                    <div className=\"text-sm text-muted-foreground\" data-testid=\"text-data-points\">\n                      Showing {historicalData.dataPoints} data points over {historicalData.days} days\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"text-center py-12 text-muted-foreground\" data-testid=\"text-no-historical-data\">\n                    No historical data available for this token. Try analyzing it first.\n                  </div>\n                )\n              ) : (\n                <div className=\"text-center py-12 text-muted-foreground\" data-testid=\"text-enter-token\">\n                  Enter a valid token address to view historical data\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Risk Insights Section */}\n        <div className=\"space-y-4\">\n          <h2 className=\"text-2xl font-semibold text-white\" data-testid=\"text-section-risk-insights\">\n            Risk Insights\n          </h2>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Common Flags Chart */}\n            <Card data-testid=\"card-common-flags\">\n              <CardHeader>\n                <CardTitle>Common Risk Flags (30 Days)</CardTitle>\n                <CardDescription>Most frequently detected risk indicators</CardDescription>\n              </CardHeader>\n              <CardContent>\n                {insightsLoading ? (\n                  <Skeleton className=\"h-[300px] w-full\" />\n                ) : riskInsights?.last30Days?.commonFlags ? (\n                  <ResponsiveContainer width=\"100%\" height={300} data-testid=\"chart-common-flags\">\n                    <BarChart\n                      data={Object.entries(riskInsights.last30Days.commonFlags).map(([flag, count]) => ({\n                        flag: flag.replace(/_/g, \" \").toUpperCase(),\n                        count,\n                      }))}\n                      layout=\"horizontal\"\n                    >\n                      <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#2A2A2A\" />\n                      <XAxis type=\"number\" stroke=\"#666\" />\n                      <YAxis dataKey=\"flag\" type=\"category\" stroke=\"#666\" width={150} />\n                      <Tooltip\n                        contentStyle={{ backgroundColor: \"#1A1A1A\", border: \"1px solid #2A2A2A\" }}\n                      />\n                      <Bar dataKey=\"count\" fill=\"#FF6B2C\" />\n                    </BarChart>\n                  </ResponsiveContainer>\n                ) : (\n                  <div className=\"text-center py-12 text-muted-foreground\" data-testid=\"text-no-insights\">\n                    No risk data available yet\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Detection Stats */}\n            <Card data-testid=\"card-detection-stats\">\n              <CardHeader>\n                <CardTitle>Detection Statistics</CardTitle>\n                <CardDescription>Performance metrics over different time windows</CardDescription>\n              </CardHeader>\n              <CardContent>\n                {insightsLoading ? (\n                  <Skeleton className=\"h-[300px] w-full\" />\n                ) : (\n                  <div className=\"space-y-6\">\n                    {riskInsights?.last7Days && (\n                      <div data-testid=\"stats-7d\">\n                        <h4 className=\"text-sm font-medium mb-3\">Last 7 Days</h4>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <div>\n                            <p className=\"text-xs text-muted-foreground\">Total Analyzed</p>\n                            <p className=\"text-xl font-bold\" data-testid=\"text-7d-total\">\n                              {Number(riskInsights.last7Days.totalAnalyzed).toLocaleString()}\n                            </p>\n                          </div>\n                          <div>\n                            <p className=\"text-xs text-muted-foreground\">Rugs Detected</p>\n                            <p className=\"text-xl font-bold text-destructive\" data-testid=\"text-7d-rugs\">\n                              {Number(riskInsights.last7Days.rugDetected)}\n                            </p>\n                          </div>\n                          <div>\n                            <p className=\"text-xs text-muted-foreground\">Detection Rate</p>\n                            <p className=\"text-xl font-bold\" data-testid=\"text-7d-rate\">\n                              {Number(riskInsights.last7Days.detectionRate).toFixed(2)}%\n                            </p>\n                          </div>\n                          <div>\n                            <p className=\"text-xs text-muted-foreground\">False Positives</p>\n                            <p className=\"text-xl font-bold\" data-testid=\"text-7d-false-positives\">\n                              {Number(riskInsights.last7Days.falsePositives)}\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n\n                    {riskInsights?.last30Days && (\n                      <div data-testid=\"stats-30d\">\n                        <h4 className=\"text-sm font-medium mb-3\">Last 30 Days</h4>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <div>\n                            <p className=\"text-xs text-muted-foreground\">Total Analyzed</p>\n                            <p className=\"text-xl font-bold\" data-testid=\"text-30d-total\">\n                              {Number(riskInsights.last30Days.totalAnalyzed).toLocaleString()}\n                            </p>\n                          </div>\n                          <div>\n                            <p className=\"text-xs text-muted-foreground\">Rugs Detected</p>\n                            <p className=\"text-xl font-bold text-destructive\" data-testid=\"text-30d-rugs\">\n                              {Number(riskInsights.last30Days.rugDetected)}\n                            </p>\n                          </div>\n                          <div>\n                            <p className=\"text-xs text-muted-foreground\">Detection Rate</p>\n                            <p className=\"text-xl font-bold\" data-testid=\"text-30d-rate\">\n                              {Number(riskInsights.last30Days.detectionRate).toFixed(2)}%\n                            </p>\n                          </div>\n                          <div>\n                            <p className=\"text-xs text-muted-foreground\">False Positives</p>\n                            <p className=\"text-xl font-bold\" data-testid=\"text-30d-false-positives\">\n                              {Number(riskInsights.last30Days.falsePositives)}\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n\n        {/* Hot Tokens Feed Section */}\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-2xl font-semibold text-white\" data-testid=\"text-section-hot-tokens\">\n              Hot Tokens Feed\n            </h2>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => refetchHotTokens()}\n              disabled={hotTokensLoading}\n              data-testid=\"button-refresh-hot-tokens\"\n            >\n              <RefreshCw className={`h-4 w-4 mr-2 ${hotTokensLoading ? \"animate-spin\" : \"\"}`} />\n              Refresh\n            </Button>\n          </div>\n\n          <Card data-testid=\"card-hot-tokens\">\n            <CardHeader>\n              <CardDescription>Top trending tokens updated every 30 seconds</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {hotTokensLoading ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {[...Array(6)].map((_, i) => (\n                    <Skeleton key={i} className=\"h-32 w-full\" />\n                  ))}\n                </div>\n              ) : hotTokens && hotTokens.length > 0 ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {hotTokens.slice(0, 20).map((token) => (\n                    <Card\n                      key={token.tokenAddress}\n                      className=\"hover-elevate cursor-pointer\"\n                      data-testid={`card-hot-token-${token.rank}`}\n                    >\n                      <CardHeader className=\"pb-3\">\n                        <div className=\"flex items-center justify-between\">\n                          <Badge variant=\"outline\" data-testid={`badge-hot-rank-${token.rank}`}>\n                            #{token.rank}\n                          </Badge>\n                          {token.riskScore !== null && (\n                            <Badge\n                              variant={getRiskBadgeVariant(token.riskScore)}\n                              data-testid={`badge-hot-risk-${token.rank}`}\n                            >\n                              {getRiskLevel(token.riskScore)}\n                            </Badge>\n                          )}\n                        </div>\n                        <CardTitle className=\"text-sm font-mono truncate\" data-testid={`text-hot-token-name-${token.rank}`}>\n                          {token.tokenAddress.slice(0, 12)}...\n                        </CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"space-y-2\">\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-muted-foreground\">Price</span>\n                          <span className=\"font-semibold\" data-testid={`text-hot-price-${token.rank}`}>\n                            ${Number(token.priceUsd || 0).toFixed(6)}\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-muted-foreground\">24h Change</span>\n                          <span\n                            className={`font-semibold ${\n                              (token.priceChange24h || 0) >= 0 ? \"text-green-500\" : \"text-red-500\"\n                            }`}\n                            data-testid={`text-hot-change-${token.rank}`}\n                          >\n                            {token.priceChange24h !== null\n                              ? `${token.priceChange24h > 0 ? \"+\" : \"\"}${Number(token.priceChange24h).toFixed(2)}%`\n                              : \"N/A\"}\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-muted-foreground\">Volume</span>\n                          <span className=\"font-semibold\" data-testid={`text-hot-volume-${token.rank}`}>\n                            ${Number(token.volume24h || 0).toLocaleString(undefined, { maximumFractionDigits: 0 })}\n                          </span>\n                        </div>\n                        <Button\n                          size=\"sm\"\n                          className=\"w-full mt-2\"\n                          variant=\"outline\"\n                          onClick={() => window.open(`/?token=${token.tokenAddress}`, '_blank')}\n                          data-testid={`button-analyze-hot-${token.rank}`}\n                        >\n                          Analyze\n                        </Button>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-12 text-muted-foreground\" data-testid=\"text-no-hot-tokens\">\n                  No trending tokens available yet. Start analyzing tokens to populate this feed.\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Performance Metrics Section */}\n        <div className=\"space-y-4\">\n          <h2 className=\"text-2xl font-semibold text-white\" data-testid=\"text-section-performance\">\n            Performance Metrics\n          </h2>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* 7-Day Performance */}\n            <Card data-testid=\"card-performance-7d\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Target className=\"h-5 w-5\" />\n                  7-Day Performance\n                </CardTitle>\n                <CardDescription>Detection accuracy and system metrics</CardDescription>\n              </CardHeader>\n              <CardContent>\n                {performanceLoading ? (\n                  <Skeleton className=\"h-[200px] w-full\" />\n                ) : performance?.last7Days ? (\n                  <div className=\"space-y-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div className=\"text-center p-4 bg-muted/20 rounded-md\">\n                        <p className=\"text-sm text-muted-foreground mb-1\">Accuracy Rate</p>\n                        <p className=\"text-3xl font-bold text-green-500\" data-testid=\"text-7d-accuracy\">\n                          {Number(performance.last7Days.detectionRate).toFixed(2)}%\n                        </p>\n                      </div>\n                      <div className=\"text-center p-4 bg-muted/20 rounded-md\">\n                        <p className=\"text-sm text-muted-foreground mb-1\">False Positives</p>\n                        <p className=\"text-3xl font-bold text-amber-500\" data-testid=\"text-7d-false-positives\">\n                          {Number(performance.last7Days.falsePositiveRate).toFixed(2)}%\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">Coverage</p>\n                        <p className=\"text-xl font-bold\" data-testid=\"text-7d-coverage\">\n                          {Number(performance.last7Days.coverage).toLocaleString()}\n                        </p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">Avg Analysis Time</p>\n                        <p className=\"text-xl font-bold\" data-testid=\"text-7d-time\">\n                          {performance.last7Days.avgAnalysisTime}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"text-center py-12 text-muted-foreground\" data-testid=\"text-no-perf-7d\">\n                    No performance data available\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* 30-Day Performance */}\n            <Card data-testid=\"card-performance-30d\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Target className=\"h-5 w-5\" />\n                  30-Day Performance\n                </CardTitle>\n                <CardDescription>Long-term detection accuracy and system metrics</CardDescription>\n              </CardHeader>\n              <CardContent>\n                {performanceLoading ? (\n                  <Skeleton className=\"h-[200px] w-full\" />\n                ) : performance?.last30Days ? (\n                  <div className=\"space-y-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div className=\"text-center p-4 bg-muted/20 rounded-md\">\n                        <p className=\"text-sm text-muted-foreground mb-1\">Accuracy Rate</p>\n                        <p className=\"text-3xl font-bold text-green-500\" data-testid=\"text-30d-accuracy\">\n                          {Number(performance.last30Days.detectionRate).toFixed(2)}%\n                        </p>\n                      </div>\n                      <div className=\"text-center p-4 bg-muted/20 rounded-md\">\n                        <p className=\"text-sm text-muted-foreground mb-1\">False Positives</p>\n                        <p className=\"text-3xl font-bold text-amber-500\" data-testid=\"text-30d-false-positives\">\n                          {Number(performance.last30Days.falsePositiveRate).toFixed(2)}%\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">Coverage</p>\n                        <p className=\"text-xl font-bold\" data-testid=\"text-30d-coverage\">\n                          {Number(performance.last30Days.coverage).toLocaleString()}\n                        </p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">Avg Analysis Time</p>\n                        <p className=\"text-xl font-bold\" data-testid=\"text-30d-time\">\n                          {performance.last30Days.avgAnalysisTime}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"text-center py-12 text-muted-foreground\" data-testid=\"text-no-perf-30d\">\n                    No performance data available\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":34848},"client/src/pages/admin/moderation.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Header } from \"@/components/header-new\";\nimport { Footer } from \"@/components/footer\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Shield, AlertTriangle, CheckCircle, XCircle, Flag } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport type { TokenReport, TokenComment } from \"@shared/schema\";\n\nexport default function Moderation() {\n  const { toast } = useToast();\n  const [selectedReport, setSelectedReport] = useState<TokenReport | null>(null);\n  const [reviewNotes, setReviewNotes] = useState(\"\");\n  const [isReviewDialogOpen, setIsReviewDialogOpen] = useState(false);\n\n  // Check if user is admin\n  const { data: adminCheck } = useQuery<{ isAdmin: boolean }>({\n    queryKey: [\"/api/admin/check\"],\n  });\n\n  const { data: pendingReports = [], isLoading: loadingReports } = useQuery<TokenReport[]>({\n    queryKey: [\"/api/reports/pending\"],\n    enabled: adminCheck?.isAdmin === true,\n  });\n\n  const { data: flaggedComments = [], isLoading: loadingComments } = useQuery<TokenComment[]>({\n    queryKey: [\"/api/comments/flagged\"],\n    enabled: adminCheck?.isAdmin === true,\n  });\n\n  const reviewReportMutation = useMutation({\n    mutationFn: async (data: { id: string; status: string; reviewNotes?: string }) => {\n      const response = await apiRequest(\"PUT\", `/api/reports/${data.id}/review`, {\n        status: data.status,\n        reviewNotes: data.reviewNotes,\n      });\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/reports/pending\"] });\n      toast({\n        title: \"Success\",\n        description: \"Report reviewed successfully\",\n      });\n      setIsReviewDialogOpen(false);\n      setSelectedReport(null);\n      setReviewNotes(\"\");\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to review report\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const openReviewDialog = (report: TokenReport) => {\n    setSelectedReport(report);\n    setReviewNotes(\"\");\n    setIsReviewDialogOpen(true);\n  };\n\n  const handleApprove = () => {\n    if (selectedReport) {\n      reviewReportMutation.mutate({\n        id: selectedReport.id,\n        status: \"approved\",\n        reviewNotes: reviewNotes || undefined,\n      });\n    }\n  };\n\n  const handleDismiss = () => {\n    if (selectedReport) {\n      reviewReportMutation.mutate({\n        id: selectedReport.id,\n        status: \"dismissed\",\n        reviewNotes: reviewNotes || undefined,\n      });\n    }\n  };\n\n  const getSeverityBadge = (severity: number) => {\n    if (severity >= 4) return { label: \"Critical\", variant: \"destructive\" as const };\n    if (severity >= 3) return { label: \"High\", variant: \"default\" as const };\n    if (severity >= 2) return { label: \"Medium\", variant: \"secondary\" as const };\n    return { label: \"Low\", variant: \"outline\" as const };\n  };\n\n  if (!adminCheck?.isAdmin) {\n    return (\n      <div className=\"min-h-screen flex flex-col bg-background\">\n        <Header />\n        <main className=\"flex-1 flex items-center justify-center\">\n          <Card>\n            <CardHeader>\n              <CardTitle data-testid=\"text-access-denied\">Access Denied</CardTitle>\n              <CardDescription>\n                You don't have permission to access this page. Admin access required.\n              </CardDescription>\n            </CardHeader>\n          </Card>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n\n      <main className=\"flex-1\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8\">\n          <div className=\"space-y-6\">\n            {/* Header */}\n            <div>\n              <h1 className=\"text-3xl sm:text-4xl font-bold flex items-center gap-2\">\n                <Shield className=\"w-8 h-8 text-primary\" />\n                Moderation\n              </h1>\n              <p className=\"text-base sm:text-lg text-muted-foreground mt-2\">\n                Review reports and manage flagged content\n              </p>\n            </div>\n\n            {/* Moderation Tabs */}\n            <Tabs defaultValue=\"reports\" className=\"space-y-6\">\n              <TabsList data-testid=\"tabs-moderation\">\n                <TabsTrigger value=\"reports\" data-testid=\"tab-reports\">\n                  Pending Reports ({pendingReports.length})\n                </TabsTrigger>\n                <TabsTrigger value=\"comments\" data-testid=\"tab-comments\">\n                  Flagged Comments ({flaggedComments.length})\n                </TabsTrigger>\n              </TabsList>\n\n              {/* Pending Reports Tab */}\n              <TabsContent value=\"reports\">\n                <Card data-testid=\"card-pending-reports\">\n                  <CardHeader>\n                    <CardTitle>Pending Reports</CardTitle>\n                    <CardDescription>\n                      Token reports awaiting moderation review\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    {loadingReports ? (\n                      <div className=\"text-center py-12\" data-testid=\"text-loading-reports\">\n                        Loading reports...\n                      </div>\n                    ) : pendingReports.length === 0 ? (\n                      <div className=\"text-center py-12 text-muted-foreground\" data-testid=\"text-no-reports\">\n                        No pending reports\n                      </div>\n                    ) : (\n                      <Table>\n                        <TableHeader>\n                          <TableRow>\n                            <TableHead>Token</TableHead>\n                            <TableHead>Type</TableHead>\n                            <TableHead>Severity</TableHead>\n                            <TableHead>Submitted</TableHead>\n                            <TableHead className=\"text-right\">Actions</TableHead>\n                          </TableRow>\n                        </TableHeader>\n                        <TableBody>\n                          {pendingReports.map((report, index) => {\n                            const severityBadge = getSeverityBadge(report.severity);\n\n                            return (\n                              <TableRow key={report.id} data-testid={`report-${index}`}>\n                                <TableCell className=\"font-mono text-sm\" data-testid={`report-token-${index}`}>\n                                  {report.tokenAddress.slice(0, 8)}...\n                                </TableCell>\n                                <TableCell>\n                                  <Badge variant=\"outline\" data-testid={`report-type-${index}`}>\n                                    {report.reportType}\n                                  </Badge>\n                                </TableCell>\n                                <TableCell>\n                                  <Badge variant={severityBadge.variant} data-testid={`report-severity-${index}`}>\n                                    {severityBadge.label}\n                                  </Badge>\n                                </TableCell>\n                                <TableCell className=\"text-sm text-muted-foreground\" data-testid={`report-time-${index}`}>\n                                  {report.createdAt && format(new Date(report.createdAt), \"PPp\")}\n                                </TableCell>\n                                <TableCell className=\"text-right\">\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    onClick={() => openReviewDialog(report)}\n                                    data-testid={`button-review-${index}`}\n                                  >\n                                    Review\n                                  </Button>\n                                </TableCell>\n                              </TableRow>\n                            );\n                          })}\n                        </TableBody>\n                      </Table>\n                    )}\n                  </CardContent>\n                </Card>\n              </TabsContent>\n\n              {/* Flagged Comments Tab */}\n              <TabsContent value=\"comments\">\n                <Card data-testid=\"card-flagged-comments\">\n                  <CardHeader>\n                    <CardTitle>Flagged Comments</CardTitle>\n                    <CardDescription>\n                      Comments flagged by community members\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    {loadingComments ? (\n                      <div className=\"text-center py-12\" data-testid=\"text-loading-comments\">\n                        Loading comments...\n                      </div>\n                    ) : flaggedComments.length === 0 ? (\n                      <div className=\"text-center py-12 text-muted-foreground\" data-testid=\"text-no-comments\">\n                        No flagged comments\n                      </div>\n                    ) : (\n                      <div className=\"space-y-4\">\n                        {flaggedComments.map((comment, index) => (\n                          <div\n                            key={comment.id}\n                            className=\"p-4 border rounded-lg space-y-2\"\n                            data-testid={`comment-${index}`}\n                          >\n                            <div className=\"flex items-start justify-between\">\n                              <div className=\"flex-1\">\n                                <p className=\"text-sm\" data-testid={`comment-content-${index}`}>\n                                  {comment.commentText}\n                                </p>\n                                <div className=\"flex items-center gap-2 mt-2 text-xs text-muted-foreground\">\n                                  <span data-testid={`comment-token-${index}`}>\n                                    Token: {comment.tokenAddress.slice(0, 8)}...\n                                  </span>\n                                  {comment.createdAt && (\n                                    <span data-testid={`comment-time-${index}`}>\n                                      â€¢ {format(new Date(comment.createdAt), \"PP\")}\n                                    </span>\n                                  )}\n                                </div>\n                              </div>\n                              <Badge variant=\"destructive\" className=\"ml-4\" data-testid={`comment-flag-${index}`}>\n                                <Flag className=\"w-3 h-3 mr-1\" />\n                                Flagged\n                              </Badge>\n                            </div>\n                            <div className=\"flex items-center gap-2 pt-2\">\n                              <Button size=\"sm\" variant=\"outline\" data-testid={`button-comment-approve-${index}`}>\n                                <CheckCircle className=\"w-4 h-4 mr-1\" />\n                                Approve\n                              </Button>\n                              <Button size=\"sm\" variant=\"destructive\" data-testid={`button-comment-delete-${index}`}>\n                                <XCircle className=\"w-4 h-4 mr-1\" />\n                                Delete\n                              </Button>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n              </TabsContent>\n            </Tabs>\n          </div>\n        </div>\n      </main>\n\n      {/* Review Dialog */}\n      <Dialog open={isReviewDialogOpen} onOpenChange={setIsReviewDialogOpen}>\n        <DialogContent data-testid=\"dialog-review-report\">\n          <DialogHeader>\n            <DialogTitle>Review Report</DialogTitle>\n            <DialogDescription>\n              Review this token report and take action\n            </DialogDescription>\n          </DialogHeader>\n\n          {selectedReport && (\n            <div className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <div className=\"text-sm\">\n                  <span className=\"font-semibold\">Token:</span>\n                  <span className=\"ml-2 font-mono\" data-testid=\"dialog-report-token\">\n                    {selectedReport.tokenAddress}\n                  </span>\n                </div>\n                <div className=\"text-sm\">\n                  <span className=\"font-semibold\">Type:</span>\n                  <Badge variant=\"outline\" className=\"ml-2\" data-testid=\"dialog-report-type\">\n                    {selectedReport.reportType}\n                  </Badge>\n                </div>\n                <div className=\"text-sm\">\n                  <span className=\"font-semibold\">Severity:</span>\n                  <Badge\n                    variant={getSeverityBadge(selectedReport.severity).variant}\n                    className=\"ml-2\"\n                    data-testid=\"dialog-report-severity\"\n                  >\n                    {getSeverityBadge(selectedReport.severity).label}\n                  </Badge>\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <div className=\"font-semibold text-sm\">Evidence:</div>\n                <div className=\"p-3 bg-muted rounded-md text-sm\" data-testid=\"dialog-report-evidence\">\n                  {selectedReport.evidence}\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <label htmlFor=\"review-notes\" className=\"text-sm font-semibold\">\n                  Review Notes (Optional)\n                </label>\n                <Textarea\n                  id=\"review-notes\"\n                  value={reviewNotes}\n                  onChange={(e) => setReviewNotes(e.target.value)}\n                  placeholder=\"Add notes about your decision...\"\n                  rows={3}\n                  data-testid=\"textarea-review-notes\"\n                />\n              </div>\n            </div>\n          )}\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={handleDismiss}\n              disabled={reviewReportMutation.isPending}\n              data-testid=\"button-dismiss-report\"\n            >\n              <XCircle className=\"w-4 h-4 mr-2\" />\n              Dismiss\n            </Button>\n            <Button\n              onClick={handleApprove}\n              disabled={reviewReportMutation.isPending}\n              data-testid=\"button-approve-report\"\n            >\n              <CheckCircle className=\"w-4 h-4 mr-2\" />\n              {reviewReportMutation.isPending ? \"Processing...\" : \"Approve\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":15649},"server/workers/social-worker.ts":{"content":"import { storage } from \"../storage\";\nimport { socialService } from \"../services/social-service\";\n\nclass SocialWorker {\n  private reputationInterval: NodeJS.Timeout | null = null;\n  private voteAggregationInterval: NodeJS.Timeout | null = null;\n  private moderationInterval: NodeJS.Timeout | null = null;\n\n  start() {\n    console.log(\"Starting social worker background jobs...\");\n\n    this.reputationInterval = setInterval(() => {\n      this.calculateReputations().catch(console.error);\n    }, 60 * 60 * 1000);\n\n    this.voteAggregationInterval = setInterval(() => {\n      this.aggregateVotes().catch(console.error);\n    }, 5 * 60 * 1000);\n\n    this.moderationInterval = setInterval(() => {\n      this.processModeration().catch(console.error);\n    }, 10 * 60 * 1000);\n\n    this.calculateReputations().catch(console.error);\n    this.aggregateVotes().catch(console.error);\n  }\n\n  async calculateReputations() {\n    console.log(\"Calculating user reputations...\");\n    \n    const profiles = await storage.getTopUsers(1000);\n    \n    for (const profile of profiles) {\n      const reputation = await socialService.calculateReputation(profile.userId);\n      await storage.updateUserProfile(profile.userId, {\n        reputationScore: reputation,\n      });\n    }\n    \n    console.log(`Updated reputation for ${profiles.length} users`);\n  }\n\n  async aggregateVotes() {\n    console.log(\"Aggregating community votes...\");\n  }\n\n  async processModeration() {\n    console.log(\"Processing moderation queue...\");\n    \n    const reports = await storage.getPendingReports();\n    console.log(`Found ${reports.length} pending reports`);\n  }\n\n  stop() {\n    if (this.reputationInterval) clearInterval(this.reputationInterval);\n    if (this.voteAggregationInterval) clearInterval(this.voteAggregationInterval);\n    if (this.moderationInterval) clearInterval(this.moderationInterval);\n    console.log(\"Social worker stopped\");\n  }\n}\n\nexport const socialWorker = new SocialWorker();\n","size_bytes":1958},"server/workers/analytics-worker.ts":{"content":"import { storage } from \"../storage\";\nimport { priceCache } from \"../services/price-cache\";\nimport { tokenAnalyzer } from \"../solana-analyzer\";\nimport { getTopFlaggedWallets } from \"../ai-blacklist\";\nimport type { InsertTrendingToken } from \"@shared/schema\";\n\n/**\n * Analytics Worker\n * Collects token snapshots, calculates trending scores, and aggregates risk statistics\n * Designed to run periodically via BullMQ or setInterval\n */\n\nexport class AnalyticsWorker {\n  private isRunning = false;\n  private snapshotIntervalId?: NodeJS.Timeout;\n  private trendingIntervalId?: NodeJS.Timeout;\n  private statsIntervalId?: NodeJS.Timeout;\n\n  /**\n   * Start all analytics workers\n   */\n  start() {\n    if (this.isRunning) {\n      console.log(\"Analytics worker already running\");\n      return;\n    }\n\n    console.log(\"Starting analytics workers...\");\n    this.isRunning = true;\n\n    // Snapshot collector - every 5 minutes\n    this.runSnapshotCollector().catch(console.error);\n    this.snapshotIntervalId = setInterval(() => {\n      this.runSnapshotCollector().catch(console.error);\n    }, 5 * 60 * 1000); // 5 minutes\n\n    // Trending calculator - every 5 minutes\n    this.runTrendingCalculator().catch(console.error);\n    this.trendingIntervalId = setInterval(() => {\n      this.runTrendingCalculator().catch(console.error);\n    }, 5 * 60 * 1000); // 5 minutes\n\n    // Risk statistics aggregator - once daily\n    this.runRiskAggregator().catch(console.error);\n    this.statsIntervalId = setInterval(() => {\n      this.runRiskAggregator().catch(console.error);\n    }, 24 * 60 * 60 * 1000); // 24 hours\n\n    console.log(\"Analytics workers started successfully\");\n  }\n\n  /**\n   * Stop all analytics workers\n   */\n  stop() {\n    if (this.snapshotIntervalId) clearInterval(this.snapshotIntervalId);\n    if (this.trendingIntervalId) clearInterval(this.trendingIntervalId);\n    if (this.statsIntervalId) clearInterval(this.statsIntervalId);\n    \n    this.snapshotIntervalId = undefined;\n    this.trendingIntervalId = undefined;\n    this.statsIntervalId = undefined;\n    this.isRunning = false;\n    \n    console.log(\"Analytics workers stopped\");\n  }\n\n  /**\n   * Snapshot Collector - Captures token data every 5 minutes\n   * Queries tokens from price cache and saves analysis snapshots\n   */\n  private async runSnapshotCollector(): Promise<void> {\n    try {\n      console.log(\"[Snapshot Collector] Starting...\");\n\n      // Get all tokens from price cache (recently analyzed)\n      const recentTokens = priceCache.getRecentlyUpdated(60); // Last 60 minutes\n\n      if (recentTokens.length === 0) {\n        console.log(\"[Snapshot Collector] No recent tokens to snapshot\");\n        return;\n      }\n\n      console.log(`[Snapshot Collector] Processing ${recentTokens.length} tokens`);\n\n      // Process tokens in batches to avoid overwhelming the system\n      const batchSize = 10;\n      for (let i = 0; i < recentTokens.length; i += batchSize) {\n        const batch = recentTokens.slice(i, i + batchSize);\n        \n        await Promise.all(\n          batch.map(async (tokenAddress) => {\n            try {\n              // Get current price data\n              const priceData = priceCache.get(tokenAddress);\n              \n              // Get current analysis (lightweight - from cache if available)\n              const analysis = await tokenAnalyzer.analyzeToken(tokenAddress);\n\n              // Extract transaction count\n              const txCount24h = analysis.marketData?.txns24h\n                ? analysis.marketData.txns24h.buys + analysis.marketData.txns24h.sells\n                : undefined;\n\n              // Save snapshot\n              await storage.saveTokenSnapshot({\n                tokenAddress,\n                priceUsd: priceData?.priceUsd?.toString() || null,\n                riskScore: analysis.riskScore,\n                holderCount: analysis.holderCount,\n                volume24h: priceData?.volume24h?.toString() || null,\n                liquidityUsd: priceData?.liquidity?.toString() || null,\n                riskFlags: analysis.redFlags.map((f: { type: string }) => f.type),\n                txCount24h,\n                analyzerVersion: \"1.0\",\n              });\n            } catch (error) {\n              console.error(`[Snapshot Collector] Error processing ${tokenAddress}:`, error);\n            }\n          })\n        );\n      }\n\n      console.log(`[Snapshot Collector] Completed - ${recentTokens.length} snapshots saved`);\n    } catch (error) {\n      console.error(\"[Snapshot Collector] Fatal error:\", error);\n    }\n  }\n\n  /**\n   * Trending Calculator - Calculates trending scores every 5 minutes\n   * Score formula: volume24h * 0.4 + velocity * 0.3 + analyses * 0.3\n   */\n  private async runTrendingCalculator(): Promise<void> {\n    try {\n      console.log(\"[Trending Calculator] Starting...\");\n\n      // Get all tokens from price cache\n      const allTokens = priceCache.getAllTokens();\n\n      if (allTokens.length === 0) {\n        console.log(\"[Trending Calculator] No tokens to analyze\");\n        return;\n      }\n\n      // Calculate scores for each token\n      const scoredTokens = await Promise.all(\n        allTokens.map(async (tokenAddress) => {\n          const priceData = priceCache.get(tokenAddress);\n          if (!priceData) return null;\n\n          // Get historical data for velocity calculation\n          const historical = await storage.getHistoricalData(tokenAddress, 1); // Last 24h\n          \n          // Calculate velocity (rate of price change)\n          let velocity = 0;\n          if (historical.length >= 2) {\n            const oldest = historical[0];\n            const newest = historical[historical.length - 1];\n            if (oldest.priceUsd && newest.priceUsd) {\n              const oldPrice = parseFloat(oldest.priceUsd);\n              const newPrice = parseFloat(newest.priceUsd);\n              velocity = ((newPrice - oldPrice) / oldPrice) * 100;\n            }\n          }\n\n          // Normalize volume (0-100 scale, assuming max volume of 10M)\n          const volumeScore = Math.min(100, ((priceData.volume24h || 0) / 10_000_000) * 100) * 0.4;\n\n          // Normalize velocity (0-100 scale, cap at +/-500%)\n          const velocityScore = Math.min(100, Math.max(0, ((velocity + 500) / 1000) * 100)) * 0.3;\n\n          // Analysis frequency score (more snapshots = more activity)\n          const analysisScore = Math.min(100, historical.length * 2) * 0.3;\n\n          const totalScore = volumeScore + velocityScore + analysisScore;\n\n          return {\n            tokenAddress,\n            score: totalScore,\n            scoreBreakdown: {\n              volumeScore,\n              velocityScore,\n              analysisScore,\n            },\n            volume24h: priceData.volume24h,\n            velocity,\n          };\n        })\n      );\n\n      // Filter nulls and sort by score\n      const validScores = scoredTokens\n        .filter((t): t is NonNullable<typeof t> => t !== null)\n        .sort((a, b) => b.score - a.score);\n\n      // Take top 50 and assign ranks\n      const top50: InsertTrendingToken[] = validScores.slice(0, 50).map((token, index) => ({\n        tokenAddress: token.tokenAddress,\n        score: token.score.toString(),\n        scoreBreakdown: token.scoreBreakdown,\n        rank: index + 1,\n        volume24h: token.volume24h?.toString(),\n        velocity: token.velocity.toString(),\n      }));\n\n      // Update trending tokens table\n      await storage.updateTrendingScores(top50);\n\n      console.log(`[Trending Calculator] Completed - Top 50 tokens ranked`);\n    } catch (error) {\n      console.error(\"[Trending Calculator] Fatal error:\", error);\n    }\n  }\n\n  /**\n   * Risk Statistics Aggregator - Runs daily\n   * Aggregates risk data from snapshots and blacklist\n   */\n  private async runRiskAggregator(): Promise<void> {\n    try {\n      console.log(\"[Risk Aggregator] Starting...\");\n\n      const now = new Date();\n      const sevenDaysAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n      const thirtyDaysAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n\n      // Get blacklist for rug detection count\n      const blacklist = await getTopFlaggedWallets();\n\n      // Aggregate 7-day stats\n      await this.aggregateRiskWindow(sevenDaysAgo, now, blacklist.length);\n\n      // Aggregate 30-day stats\n      await this.aggregateRiskWindow(thirtyDaysAgo, now, blacklist.length);\n\n      console.log(\"[Risk Aggregator] Completed\");\n    } catch (error) {\n      console.error(\"[Risk Aggregator] Fatal error:\", error);\n    }\n  }\n\n  /**\n   * Helper: Aggregate risk statistics for a time window\n   */\n  private async aggregateRiskWindow(\n    windowStart: Date,\n    windowEnd: Date,\n    rugCount: number\n  ): Promise<void> {\n    // Get all snapshots in window (would need a more efficient query in production)\n    const allSnapshots = await storage.getHistoricalData(\"\", Math.ceil((windowEnd.getTime() - windowStart.getTime()) / (24 * 60 * 60 * 1000)));\n\n    // Count unique tokens\n    const uniqueTokens = new Set(allSnapshots.map(s => s.tokenAddress));\n    const totalAnalyzed = uniqueTokens.size;\n\n    // Count common flags\n    const flagCounts: Record<string, number> = {};\n    for (const snapshot of allSnapshots) {\n      if (snapshot.riskFlags && Array.isArray(snapshot.riskFlags)) {\n        for (const flag of snapshot.riskFlags) {\n          flagCounts[flag] = (flagCounts[flag] || 0) + 1;\n        }\n      }\n    }\n\n    // Save statistics\n    await storage.saveRiskStatistics({\n      windowStart,\n      windowEnd,\n      totalAnalyzed,\n      rugDetected: rugCount,\n      falsePositives: 0, // Would need manual tracking\n      commonFlags: flagCounts,\n    });\n\n    console.log(`[Risk Aggregator] Saved stats for ${windowStart.toISOString()} to ${windowEnd.toISOString()}`);\n  }\n}\n\n// Singleton instance\nexport const analyticsWorker = new AnalyticsWorker();\n","size_bytes":9826},"client/src/pages/leaderboard.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { Header } from \"@/components/header-new\";\nimport { Footer } from \"@/components/footer\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Trophy, Medal, Award, TrendingUp, ChevronLeft, ChevronRight } from \"lucide-react\";\nimport type { UserProfile } from \"@shared/schema\";\n\nexport default function Leaderboard() {\n  const [, navigate] = useLocation();\n  const [timePeriod, setTimePeriod] = useState<\"week\" | \"month\" | \"all\">(\"all\");\n  const [page, setPage] = useState(1);\n  const limit = 50;\n\n  const { data: users = [], isLoading } = useQuery<UserProfile[]>({\n    queryKey: [\"/api/leaderboard\"],\n    queryFn: async () => {\n      const response = await fetch(`/api/leaderboard?limit=${limit}`);\n      return await response.json();\n    },\n  });\n\n  const getRankIcon = (rank: number) => {\n    if (rank === 1) return <Trophy className=\"w-5 h-5 text-yellow-500\" />;\n    if (rank === 2) return <Medal className=\"w-5 h-5 text-gray-400\" />;\n    if (rank === 3) return <Award className=\"w-5 h-5 text-amber-600\" />;\n    return null;\n  };\n\n  const getReputationBadge = (score: number) => {\n    if (score >= 1000) return { label: \"Legend\", variant: \"default\" as const };\n    if (score >= 500) return { label: \"Expert\", variant: \"default\" as const };\n    if (score >= 100) return { label: \"Contributor\", variant: \"secondary\" as const };\n    return { label: \"Newcomer\", variant: \"outline\" as const };\n  };\n\n  const paginatedUsers = users.slice((page - 1) * 25, page * 25);\n  const totalPages = Math.ceil(users.length / 25);\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n\n      <main className=\"flex-1\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8\">\n          <div className=\"space-y-6\">\n            {/* Header */}\n            <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n              <div>\n                <h1 className=\"text-3xl sm:text-4xl font-bold flex items-center gap-2\">\n                  <TrendingUp className=\"w-8 h-8 text-primary\" />\n                  Leaderboard\n                </h1>\n                <p className=\"text-base sm:text-lg text-muted-foreground mt-2\">\n                  Top contributors in the community\n                </p>\n              </div>\n\n              <Select value={timePeriod} onValueChange={(value: any) => setTimePeriod(value)}>\n                <SelectTrigger className=\"w-[180px]\" data-testid=\"select-time-period\">\n                  <SelectValue placeholder=\"Time period\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"week\" data-testid=\"option-week\">This Week</SelectItem>\n                  <SelectItem value=\"month\" data-testid=\"option-month\">This Month</SelectItem>\n                  <SelectItem value=\"all\" data-testid=\"option-all\">All Time</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Leaderboard Table */}\n            <Card data-testid=\"card-leaderboard\">\n              <CardHeader>\n                <CardTitle>Top 50 Users</CardTitle>\n                <CardDescription>\n                  Ranked by reputation score and contributions\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                {isLoading ? (\n                  <div className=\"text-center py-12\" data-testid=\"text-loading\">\n                    Loading leaderboard...\n                  </div>\n                ) : users.length === 0 ? (\n                  <div className=\"text-center py-12 text-muted-foreground\" data-testid=\"text-no-users\">\n                    No users yet\n                  </div>\n                ) : (\n                  <>\n                    <Table>\n                      <TableHeader>\n                        <TableRow>\n                          <TableHead className=\"w-[80px]\">Rank</TableHead>\n                          <TableHead>User</TableHead>\n                          <TableHead>Status</TableHead>\n                          <TableHead className=\"text-right\">Reputation</TableHead>\n                          <TableHead className=\"text-right\">Contributions</TableHead>\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {paginatedUsers.map((user, index) => {\n                          const rank = (page - 1) * 25 + index + 1;\n                          const badge = getReputationBadge(user.reputationScore);\n\n                          return (\n                            <TableRow\n                              key={user.userId}\n                              className=\"cursor-pointer hover-elevate\"\n                              onClick={() => navigate(`/profile/${user.userId}`)}\n                              data-testid={`row-user-${index}`}\n                            >\n                              <TableCell className=\"font-medium\" data-testid={`rank-${index}`}>\n                                <div className=\"flex items-center gap-2\">\n                                  {getRankIcon(rank)}\n                                  <span>#{rank}</span>\n                                </div>\n                              </TableCell>\n                              <TableCell>\n                                <div className=\"flex items-center gap-3\">\n                                  <Avatar className=\"w-8 h-8\" data-testid={`avatar-${index}`}>\n                                    <AvatarFallback>\n                                      {user.username?.charAt(0).toUpperCase() || \"U\"}\n                                    </AvatarFallback>\n                                  </Avatar>\n                                  <span className=\"font-medium\" data-testid={`username-${index}`}>\n                                    {user.username || \"Anonymous\"}\n                                  </span>\n                                </div>\n                              </TableCell>\n                              <TableCell>\n                                <Badge variant={badge.variant} data-testid={`badge-${index}`}>\n                                  {badge.label}\n                                </Badge>\n                              </TableCell>\n                              <TableCell className=\"text-right font-semibold\" data-testid={`reputation-${index}`}>\n                                {Number(user.reputationScore)}\n                              </TableCell>\n                              <TableCell className=\"text-right text-muted-foreground\" data-testid={`contributions-${index}`}>\n                                {Number(user.contributionCount)}\n                              </TableCell>\n                            </TableRow>\n                          );\n                        })}\n                      </TableBody>\n                    </Table>\n\n                    {/* Pagination */}\n                    {totalPages > 1 && (\n                      <div className=\"flex items-center justify-between pt-4\">\n                        <div className=\"text-sm text-muted-foreground\" data-testid=\"text-page-info\">\n                          Page {page} of {totalPages}\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => setPage(Math.max(1, page - 1))}\n                            disabled={page === 1}\n                            data-testid=\"button-prev-page\"\n                          >\n                            <ChevronLeft className=\"w-4 h-4\" />\n                            Previous\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => setPage(Math.min(totalPages, page + 1))}\n                            disabled={page === totalPages}\n                            data-testid=\"button-next-page\"\n                          >\n                            Next\n                            <ChevronRight className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                      </div>\n                    )}\n                  </>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":9041},"client/src/pages/profile.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useRoute } from \"wouter\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Header } from \"@/components/header-new\";\nimport { Footer } from \"@/components/footer\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { User, MessageSquare, ThumbsUp, Flag, Star, Edit2, Trophy, Activity } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport type { UserProfile, UserActivity } from \"@shared/schema\";\n\nexport default function Profile() {\n  const { toast } = useToast();\n  const [, params] = useRoute(\"/profile/:userId\");\n  const userId = params?.userId || \"\";\n\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const [bio, setBio] = useState(\"\");\n  const [isPublic, setIsPublic] = useState(true);\n\n  const { data: profile, isLoading } = useQuery<UserProfile>({\n    queryKey: [\"/api/profile\", userId],\n    enabled: !!userId,\n  });\n\n  const { data: activities = [] } = useQuery<UserActivity[]>({\n    queryKey: [\"/api/profile\", userId, \"activities\"],\n    enabled: !!userId,\n  });\n\n  const updateProfileMutation = useMutation({\n    mutationFn: async (data: { username?: string; bio?: string; isPublic?: boolean }) => {\n      const response = await apiRequest(\"PUT\", \"/api/profile\", data);\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/profile\"] });\n      toast({\n        title: \"Success\",\n        description: \"Profile updated successfully\",\n      });\n      setIsEditDialogOpen(false);\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update profile\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleUpdateProfile = () => {\n    updateProfileMutation.mutate({\n      username: username || undefined,\n      bio: bio || undefined,\n      isPublic,\n    });\n  };\n\n  const openEditDialog = () => {\n    if (profile) {\n      setUsername(profile.username || \"\");\n      setBio(profile.bio || \"\");\n      setIsPublic(profile.isPublic);\n      setIsEditDialogOpen(true);\n    }\n  };\n\n  const getActivityIcon = (type: string) => {\n    switch (type) {\n      case \"comment\":\n        return <MessageSquare className=\"w-4 h-4 text-primary\" />;\n      case \"vote\":\n        return <ThumbsUp className=\"w-4 h-4 text-green-500\" />;\n      case \"report\":\n        return <Flag className=\"w-4 h-4 text-red-500\" />;\n      default:\n        return <Activity className=\"w-4 h-4 text-muted-foreground\" />;\n    }\n  };\n\n  const getReputationBadge = (score: number) => {\n    if (score >= 1000) return { label: \"Legend\", variant: \"default\" as const };\n    if (score >= 500) return { label: \"Expert\", variant: \"default\" as const };\n    if (score >= 100) return { label: \"Contributor\", variant: \"secondary\" as const };\n    return { label: \"Newcomer\", variant: \"outline\" as const };\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex flex-col bg-background\">\n        <Header />\n        <main className=\"flex-1 flex items-center justify-center\">\n          <div data-testid=\"text-loading\">Loading profile...</div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <div className=\"min-h-screen flex flex-col bg-background\">\n        <Header />\n        <main className=\"flex-1 flex items-center justify-center\">\n          <Card>\n            <CardHeader>\n              <CardTitle data-testid=\"text-not-found\">Profile Not Found</CardTitle>\n              <CardDescription>This user profile doesn't exist or is private.</CardDescription>\n            </CardHeader>\n          </Card>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  const reputationBadge = getReputationBadge(profile.reputationScore);\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n\n      <main className=\"flex-1\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8\">\n          <div className=\"grid gap-6 lg:grid-cols-3\">\n            {/* Left Column - Profile Info */}\n            <div className=\"lg:col-span-1 space-y-6\">\n              {/* User Info Card */}\n              <Card data-testid=\"card-profile-info\">\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <User className=\"w-5 h-5\" />\n                      Profile\n                    </CardTitle>\n                    <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n                      <DialogTrigger asChild>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={openEditDialog}\n                          data-testid=\"button-edit-profile\"\n                        >\n                          <Edit2 className=\"w-4 h-4\" />\n                        </Button>\n                      </DialogTrigger>\n                      <DialogContent data-testid=\"dialog-edit-profile\">\n                        <DialogHeader>\n                          <DialogTitle>Edit Profile</DialogTitle>\n                          <DialogDescription>\n                            Update your profile information and privacy settings\n                          </DialogDescription>\n                        </DialogHeader>\n                        <div className=\"space-y-4\">\n                          <div className=\"space-y-2\">\n                            <Label htmlFor=\"username\" data-testid=\"label-username\">\n                              Username\n                            </Label>\n                            <Input\n                              id=\"username\"\n                              value={username}\n                              onChange={(e) => setUsername(e.target.value)}\n                              placeholder=\"Your username\"\n                              data-testid=\"input-username\"\n                            />\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label htmlFor=\"bio\" data-testid=\"label-bio\">\n                              Bio\n                            </Label>\n                            <Textarea\n                              id=\"bio\"\n                              value={bio}\n                              onChange={(e) => setBio(e.target.value)}\n                              placeholder=\"Tell us about yourself...\"\n                              rows={4}\n                              data-testid=\"textarea-bio\"\n                            />\n                          </div>\n                          <div className=\"flex items-center justify-between\">\n                            <Label htmlFor=\"public\" data-testid=\"label-public-profile\">\n                              Public Profile\n                            </Label>\n                            <Switch\n                              id=\"public\"\n                              checked={isPublic}\n                              onCheckedChange={setIsPublic}\n                              data-testid=\"switch-public\"\n                            />\n                          </div>\n                        </div>\n                        <DialogFooter>\n                          <Button\n                            onClick={handleUpdateProfile}\n                            disabled={updateProfileMutation.isPending}\n                            data-testid=\"button-save-profile\"\n                          >\n                            {updateProfileMutation.isPending ? \"Saving...\" : \"Save Changes\"}\n                          </Button>\n                        </DialogFooter>\n                      </DialogContent>\n                    </Dialog>\n                  </div>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"flex flex-col items-center gap-4\">\n                    <Avatar className=\"w-20 h-20\" data-testid=\"avatar-user\">\n                      <AvatarFallback className=\"text-2xl\">\n                        {profile.username?.charAt(0).toUpperCase() || \"U\"}\n                      </AvatarFallback>\n                    </Avatar>\n                    <div className=\"text-center space-y-2\">\n                      <h2 className=\"text-2xl font-bold\" data-testid=\"text-username\">\n                        {profile.username || \"Anonymous\"}\n                      </h2>\n                      <Badge variant={reputationBadge.variant} data-testid=\"badge-reputation\">\n                        <Trophy className=\"w-3 h-3 mr-1\" />\n                        {reputationBadge.label}\n                      </Badge>\n                    </div>\n                  </div>\n\n                  {profile.bio && (\n                    <p className=\"text-sm text-muted-foreground text-center\" data-testid=\"text-bio\">\n                      {profile.bio}\n                    </p>\n                  )}\n\n                  <div className=\"pt-4 border-t space-y-2\">\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-muted-foreground\">Reputation</span>\n                      <span className=\"font-semibold\" data-testid=\"text-reputation-score\">\n                        {Number(profile.reputationScore)}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-muted-foreground\">Contributions</span>\n                      <span className=\"font-semibold\" data-testid=\"text-contribution-count\">\n                        {Number(profile.contributionCount)}\n                      </span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Stats Cards */}\n              <Card data-testid=\"card-stats\">\n                <CardHeader>\n                  <CardTitle className=\"text-base\">Statistics</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                      <MessageSquare className=\"w-4 h-4 text-primary\" />\n                      <span className=\"text-sm text-muted-foreground\">Comments</span>\n                    </div>\n                    <span className=\"font-semibold\" data-testid=\"text-stat-comments\">\n                      {activities.filter((a) => a.activityType === \"comment\").length}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                      <ThumbsUp className=\"w-4 h-4 text-green-500\" />\n                      <span className=\"text-sm text-muted-foreground\">Votes</span>\n                    </div>\n                    <span className=\"font-semibold\" data-testid=\"text-stat-votes\">\n                      {activities.filter((a) => a.activityType === \"vote\").length}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                      <Flag className=\"w-4 h-4 text-red-500\" />\n                      <span className=\"text-sm text-muted-foreground\">Reports</span>\n                    </div>\n                    <span className=\"font-semibold\" data-testid=\"text-stat-reports\">\n                      {activities.filter((a) => a.activityType === \"report\").length}\n                    </span>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Right Column - Activity Feed */}\n            <div className=\"lg:col-span-2\">\n              <Card data-testid=\"card-activity-feed\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Activity className=\"w-5 h-5\" />\n                    Activity Feed\n                  </CardTitle>\n                  <CardDescription>Recent contributions and actions</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {activities.length === 0 ? (\n                    <div className=\"text-center py-12 text-muted-foreground\" data-testid=\"text-no-activity\">\n                      No activity yet\n                    </div>\n                  ) : (\n                    <div className=\"space-y-4\">\n                      {activities.map((activity, index) => (\n                        <div\n                          key={activity.id}\n                          className=\"flex items-start gap-3 p-3 rounded-lg bg-muted/50 hover-elevate\"\n                          data-testid={`activity-${index}`}\n                        >\n                          <div className=\"mt-1\">{getActivityIcon(activity.activityType)}</div>\n                          <div className=\"flex-1 space-y-1\">\n                            <div className=\"flex items-center gap-2\">\n                              <span className=\"font-medium capitalize\" data-testid={`activity-type-${index}`}>\n                                {activity.activityType}\n                              </span>\n                              <Badge variant=\"outline\" size=\"sm\" data-testid={`activity-points-${index}`}>\n                                +{Number(activity.points)} pts\n                              </Badge>\n                            </div>\n                            {activity.targetToken && (\n                              <p className=\"text-sm text-muted-foreground font-mono\" data-testid={`activity-token-${index}`}>\n                                Token: {activity.targetToken.slice(0, 8)}...\n                              </p>\n                            )}\n                            {activity.createdAt && (\n                              <p className=\"text-xs text-muted-foreground\" data-testid={`activity-time-${index}`}>\n                                {format(new Date(activity.createdAt), \"PPp\")}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":15238},"server/services/social-service.ts":{"content":"import { storage } from \"../storage\";\nimport { nanoid } from \"nanoid\";\n\nexport class SocialService {\n  async calculateReputation(userId: string): Promise<number> {\n    return await storage.calculateUserReputation(userId);\n  }\n\n  async aggregateVotes(tokenAddress: string): Promise<void> {\n    const votes = await storage.getCommunityVoteSummary(tokenAddress);\n    \n    if (!votes) {\n      return;\n    }\n\n    const safeWeight = parseFloat(votes.safeWeight?.toString() || \"0\");\n    const riskyWeight = parseFloat(votes.riskyWeight?.toString() || \"0\");\n    const scamWeight = parseFloat(votes.scamWeight?.toString() || \"0\");\n    const totalWeight = safeWeight + riskyWeight + scamWeight;\n\n    if (totalWeight === 0) {\n      return;\n    }\n\n    const safePercent = (safeWeight / totalWeight) * 100;\n    const riskyPercent = (riskyWeight / totalWeight) * 100;\n    const scamPercent = (scamWeight / totalWeight) * 100;\n\n    let consensus: 'safe' | 'risky' | 'scam' | 'mixed' = 'mixed';\n\n    if (safePercent >= 60) {\n      consensus = 'safe';\n    } else if (scamPercent >= 40) {\n      consensus = 'scam';\n    } else if (riskyPercent >= 50) {\n      consensus = 'risky';\n    }\n\n    await storage.upsertVoteSummary({\n      tokenAddress,\n      safeWeight: safeWeight.toString(),\n      riskyWeight: riskyWeight.toString(),\n      scamWeight: scamWeight.toString(),\n      totalVotes: votes.totalVotes,\n      consensus,\n    });\n  }\n\n  generateShareSlug(): string {\n    return nanoid(10);\n  }\n\n  sanitizeContent(text: string): string {\n    return text\n      .replace(/<script[^>]*>.*?<\\/script>/gi, '')\n      .replace(/<iframe[^>]*>.*?<\\/iframe>/gi, '')\n      .replace(/<object[^>]*>.*?<\\/object>/gi, '')\n      .replace(/<embed[^>]*>/gi, '')\n      .replace(/on\\w+=\"[^\"]*\"/gi, '')\n      .replace(/on\\w+='[^']*'/gi, '')\n      .trim();\n  }\n\n  async checkRateLimit(userId: string, action: 'comment' | 'vote' | 'report'): Promise<{ allowed: boolean; remaining: number }> {\n    const limits = {\n      comment: { window: 60 * 60 * 1000, max: 5 },\n      vote: { window: 60 * 1000, max: 10 },\n      report: { window: 60 * 60 * 1000, max: 3 },\n    };\n\n    const limit = limits[action];\n    const activities = await storage.getUserActivities(userId, 100);\n\n    const cutoffTime = Date.now() - limit.window;\n    const recentActions = activities.filter(\n      a => \n        a.activityType === action && \n        a.createdAt && \n        new Date(a.createdAt).getTime() > cutoffTime\n    );\n\n    const count = recentActions.length;\n    const remaining = Math.max(0, limit.max - count);\n\n    return {\n      allowed: count < limit.max,\n      remaining,\n    };\n  }\n\n  async detectSpam(text: string): Promise<boolean> {\n    const spamPatterns = [\n      /https?:\\/\\/[^\\s]+/gi,\n      /\\b(buy|sell|pump|moon|100x|guaranteed)\\b/gi,\n      /(.)\\1{5,}/,\n      /\\b(telegram|discord)\\.(?:com|gg|me)\\//gi,\n    ];\n\n    for (const pattern of spamPatterns) {\n      if (pattern.test(text)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  async awardPoints(userId: string, activityType: string, points: number, targetToken?: string, targetWatchlist?: string): Promise<void> {\n    await storage.recordActivity({\n      userId,\n      activityType: activityType as any,\n      points,\n      targetToken,\n      targetWatchlist,\n    });\n\n    const totalReputation = await storage.calculateUserReputation(userId);\n    \n    const profile = await storage.getUserProfile(userId);\n    if (profile) {\n      await storage.updateUserProfile(userId, {\n        reputationScore: totalReputation,\n        contributionCount: profile.contributionCount + 1,\n      });\n    }\n  }\n}\n\nexport const socialService = new SocialService();\n","size_bytes":3672},"client/src/pages/comparison.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Header } from \"@/components/header-new\";\nimport { Footer } from \"@/components/footer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Loader2, Plus, Trash2, GitCompare, AlertTriangle, TrendingUp, Users, Droplet } from \"lucide-react\";\nimport type { TokenAnalysisResponse, RiskLevel } from \"@shared/schema\";\n\ntype ComparisonResult = TokenAnalysisResponse & {\n  error?: boolean;\n  message?: string;\n};\n\ninterface ComparisonResponse {\n  comparisons: ComparisonResult[];\n  comparedAt: number;\n}\n\nexport default function Comparison() {\n  const { toast } = useToast();\n  const [tokenAddresses, setTokenAddresses] = useState<string[]>([\"\", \"\"]);\n  const [comparisonResults, setComparisonResults] = useState<ComparisonResult[] | null>(null);\n\n  const compareMutation = useMutation({\n    mutationFn: async (addresses: string[]) => {\n      const response = await apiRequest(\"/api/compare-tokens\", {\n        method: \"POST\",\n        body: JSON.stringify({ tokenAddresses: addresses }),\n      });\n      return await response.json() as ComparisonResponse;\n    },\n    onSuccess: (data) => {\n      setComparisonResults(data.comparisons);\n      toast({\n        title: \"Comparison Complete\",\n        description: `Analyzed ${data.comparisons.length} tokens successfully`,\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Comparison Failed\",\n        description: error.message || \"Failed to compare tokens\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleAddTokenInput = () => {\n    if (tokenAddresses.length < 5) {\n      setTokenAddresses([...tokenAddresses, \"\"]);\n    }\n  };\n\n  const handleRemoveTokenInput = (index: number) => {\n    if (tokenAddresses.length > 2) {\n      setTokenAddresses(tokenAddresses.filter((_, i) => i !== index));\n    }\n  };\n\n  const handleTokenAddressChange = (index: number, value: string) => {\n    const newAddresses = [...tokenAddresses];\n    newAddresses[index] = value;\n    setTokenAddresses(newAddresses);\n  };\n\n  const handleCompare = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    const validAddresses = tokenAddresses.filter(addr => addr.trim().length >= 32);\n    \n    if (validAddresses.length < 2) {\n      toast({\n        title: \"Invalid Input\",\n        description: \"Please enter at least 2 valid token addresses\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (validAddresses.length > 5) {\n      toast({\n        title: \"Too Many Tokens\",\n        description: \"Maximum 5 tokens allowed for comparison\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    compareMutation.mutate(validAddresses);\n  };\n\n  const getRiskBadgeVariant = (riskLevel: RiskLevel) => {\n    switch (riskLevel) {\n      case \"LOW\":\n        return \"default\";\n      case \"MODERATE\":\n        return \"secondary\";\n      case \"HIGH\":\n        return \"destructive\";\n      case \"EXTREME\":\n        return \"destructive\";\n      default:\n        return \"outline\";\n    }\n  };\n\n  const getRiskColor = (riskLevel: RiskLevel) => {\n    switch (riskLevel) {\n      case \"LOW\":\n        return \"text-green-500\";\n      case \"MODERATE\":\n        return \"text-yellow-500\";\n      case \"HIGH\":\n        return \"text-orange-500\";\n      case \"EXTREME\":\n        return \"text-red-500\";\n      default:\n        return \"text-muted-foreground\";\n    }\n  };\n\n  const truncateAddress = (address: string) => {\n    return `${address.slice(0, 6)}...${address.slice(-6)}`;\n  };\n\n  const formatNumber = (num: number | null | undefined) => {\n    if (num === null || num === undefined) return \"N/A\";\n    if (num >= 1_000_000) return `${(num / 1_000_000).toFixed(2)}M`;\n    if (num >= 1_000) return `${(num / 1_000).toFixed(2)}K`;\n    return num.toFixed(2);\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n      \n      <main className=\"flex-1\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8\">\n          <div className=\"space-y-6 sm:space-y-8\">\n            <div>\n              <h1 className=\"text-3xl sm:text-4xl font-bold flex items-center gap-2\">\n                <GitCompare className=\"w-8 h-8 text-primary\" />\n                Token Comparison\n              </h1>\n              <p className=\"text-base sm:text-lg text-muted-foreground mt-2\">\n                Compare up to 5 tokens side-by-side to analyze their risk profiles and metrics\n              </p>\n            </div>\n\n            {/* Input Form */}\n            <Card data-testid=\"card-comparison-form\">\n              <CardHeader>\n                <CardTitle>Enter Token Addresses</CardTitle>\n                <CardDescription>\n                  Add 2-5 Solana token addresses to compare\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <form onSubmit={handleCompare} className=\"space-y-4\">\n                  <div className=\"space-y-3\">\n                    {tokenAddresses.map((address, index) => (\n                      <div key={index} className=\"flex gap-2 items-center\">\n                        <div className=\"flex-1\">\n                          <Label htmlFor={`token-${index}`} className=\"sr-only\">\n                            Token {index + 1}\n                          </Label>\n                          <Input\n                            id={`token-${index}`}\n                            placeholder={`Token ${index + 1} address (e.g., EPjFWdd5AufqSSqeM2qN...)`}\n                            value={address}\n                            onChange={(e) => handleTokenAddressChange(index, e.target.value)}\n                            disabled={compareMutation.isPending}\n                            data-testid={`input-token-${index}`}\n                          />\n                        </div>\n                        {tokenAddresses.length > 2 && (\n                          <Button\n                            type=\"button\"\n                            variant=\"outline\"\n                            size=\"icon\"\n                            onClick={() => handleRemoveTokenInput(index)}\n                            disabled={compareMutation.isPending}\n                            data-testid={`button-remove-${index}`}\n                          >\n                            <Trash2 className=\"w-4 h-4\" />\n                          </Button>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n\n                  <div className=\"flex gap-3\">\n                    {tokenAddresses.length < 5 && (\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={handleAddTokenInput}\n                        disabled={compareMutation.isPending}\n                        data-testid=\"button-add-token\"\n                      >\n                        <Plus className=\"w-4 h-4 mr-2\" />\n                        Add Token\n                      </Button>\n                    )}\n                    \n                    <Button\n                      type=\"submit\"\n                      disabled={compareMutation.isPending}\n                      data-testid=\"button-compare\"\n                    >\n                      {compareMutation.isPending ? (\n                        <>\n                          <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                          Analyzing...\n                        </>\n                      ) : (\n                        <>\n                          <GitCompare className=\"w-4 h-4 mr-2\" />\n                          Compare Tokens\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                </form>\n              </CardContent>\n            </Card>\n\n            {/* Results Display */}\n            {comparisonResults && comparisonResults.length > 0 && (\n              <div className=\"space-y-6\">\n                <h2 className=\"text-2xl font-bold\">Comparison Results</h2>\n\n                {/* Side-by-side cards for mobile/tablet */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 lg:hidden\">\n                  {comparisonResults.map((result, index) => (\n                    <Card key={result.tokenAddress} data-testid={`card-result-${index}`}>\n                      <CardHeader className=\"space-y-1 pb-4\">\n                        <div className=\"flex items-start justify-between gap-2\">\n                          <CardTitle className=\"text-base font-mono truncate\">\n                            {truncateAddress(result.tokenAddress)}\n                          </CardTitle>\n                          {!result.error && (\n                            <Badge \n                              variant={getRiskBadgeVariant(result.riskLevel)}\n                              data-testid={`badge-risk-${index}`}\n                            >\n                              {result.riskLevel}\n                            </Badge>\n                          )}\n                        </div>\n                        {result.metadata && (\n                          <p className=\"text-sm text-muted-foreground\">\n                            {result.metadata.symbol} - {result.metadata.name}\n                          </p>\n                        )}\n                      </CardHeader>\n                      <CardContent className=\"space-y-3\">\n                        {result.error ? (\n                          <div className=\"flex items-start gap-2 text-destructive\">\n                            <AlertTriangle className=\"w-4 h-4 mt-0.5\" />\n                            <p className=\"text-sm\">{result.message || \"Analysis failed\"}</p>\n                          </div>\n                        ) : (\n                          <>\n                            <div className=\"space-y-2\">\n                              <div className=\"flex items-center justify-between\">\n                                <span className=\"text-xs text-muted-foreground uppercase tracking-wider\">\n                                  Risk Score\n                                </span>\n                                <span className={`text-xl font-bold ${getRiskColor(result.riskLevel)}`} data-testid={`text-risk-score-${index}`}>\n                                  {Number(result.riskScore || 0).toFixed(0)}\n                                </span>\n                              </div>\n\n                              <div className=\"flex items-center justify-between\">\n                                <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n                                  <Users className=\"w-3 h-3\" />\n                                  <span>Holders</span>\n                                </div>\n                                <span className=\"text-sm font-semibold\" data-testid={`text-holders-${index}`}>\n                                  {formatNumber(result.holderCount)}\n                                </span>\n                              </div>\n\n                              <div className=\"flex items-center justify-between\">\n                                <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n                                  <Droplet className=\"w-3 h-3\" />\n                                  <span>Liquidity</span>\n                                </div>\n                                <span className=\"text-sm font-semibold\" data-testid={`text-liquidity-${index}`}>\n                                  ${formatNumber(result.marketData?.liquidityUsd)}\n                                </span>\n                              </div>\n\n                              {result.marketData?.priceUsd !== null && result.marketData?.priceUsd !== undefined && (\n                                <div className=\"flex items-center justify-between\">\n                                  <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n                                    <TrendingUp className=\"w-3 h-3\" />\n                                    <span>Price</span>\n                                  </div>\n                                  <span className=\"text-sm font-semibold\" data-testid={`text-price-${index}`}>\n                                    ${Number(result.marketData?.priceUsd || 0).toFixed(6)}\n                                  </span>\n                                </div>\n                              )}\n\n                              <div className=\"flex items-center justify-between\">\n                                <span className=\"text-xs text-muted-foreground\">\n                                  Top 10 Hold\n                                </span>\n                                <span className=\"text-sm font-semibold\" data-testid={`text-concentration-${index}`}>\n                                  {Number(result.topHolderConcentration || 0).toFixed(1)}%\n                                </span>\n                              </div>\n                            </div>\n\n                            {result.redFlags.length > 0 && (\n                              <div className=\"pt-2 border-t\">\n                                <p className=\"text-xs text-muted-foreground mb-1\">\n                                  {result.redFlags.length} Risk Flag{result.redFlags.length > 1 ? 's' : ''}\n                                </p>\n                                <div className=\"flex flex-wrap gap-1\">\n                                  {result.redFlags.slice(0, 3).map((flag, flagIndex) => (\n                                    <Badge \n                                      key={flagIndex} \n                                      variant=\"outline\" \n                                      className=\"text-xs\"\n                                      data-testid={`badge-flag-${index}-${flagIndex}`}\n                                    >\n                                      {flag.type.replace(/_/g, ' ')}\n                                    </Badge>\n                                  ))}\n                                </div>\n                              </div>\n                            )}\n                          </>\n                        )}\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n\n                {/* Comparison table for desktop */}\n                <Card className=\"hidden lg:block\" data-testid=\"card-comparison-table\">\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead className=\"w-[180px]\">Metric</TableHead>\n                        {comparisonResults.map((result, index) => (\n                          <TableHead key={result.tokenAddress} className=\"text-center\" data-testid={`header-token-${index}`}>\n                            <div className=\"space-y-1\">\n                              <div className=\"font-mono text-xs\">\n                                {truncateAddress(result.tokenAddress)}\n                              </div>\n                              {result.metadata && (\n                                <div className=\"text-xs text-muted-foreground\">\n                                  {result.metadata.symbol}\n                                </div>\n                              )}\n                            </div>\n                          </TableHead>\n                        ))}\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      <TableRow>\n                        <TableCell className=\"font-medium\">Risk Level</TableCell>\n                        {comparisonResults.map((result, index) => (\n                          <TableCell key={result.tokenAddress} className=\"text-center\" data-testid={`cell-risk-level-${index}`}>\n                            {result.error ? (\n                              <span className=\"text-destructive text-sm\">Error</span>\n                            ) : (\n                              <Badge variant={getRiskBadgeVariant(result.riskLevel)}>\n                                {result.riskLevel}\n                              </Badge>\n                            )}\n                          </TableCell>\n                        ))}\n                      </TableRow>\n\n                      <TableRow>\n                        <TableCell className=\"font-medium\">Risk Score</TableCell>\n                        {comparisonResults.map((result, index) => (\n                          <TableCell key={result.tokenAddress} className=\"text-center\" data-testid={`cell-risk-score-${index}`}>\n                            {result.error ? (\n                              <span className=\"text-muted-foreground\">-</span>\n                            ) : (\n                              <span className={`text-xl font-bold ${getRiskColor(result.riskLevel)}`}>\n                                {Number(result.riskScore || 0).toFixed(0)}\n                              </span>\n                            )}\n                          </TableCell>\n                        ))}\n                      </TableRow>\n\n                      <TableRow>\n                        <TableCell className=\"font-medium\">Holder Count</TableCell>\n                        {comparisonResults.map((result, index) => (\n                          <TableCell key={result.tokenAddress} className=\"text-center\" data-testid={`cell-holders-${index}`}>\n                            {result.error ? (\n                              <span className=\"text-muted-foreground\">-</span>\n                            ) : (\n                              formatNumber(result.holderCount)\n                            )}\n                          </TableCell>\n                        ))}\n                      </TableRow>\n\n                      <TableRow>\n                        <TableCell className=\"font-medium\">Liquidity (USD)</TableCell>\n                        {comparisonResults.map((result, index) => (\n                          <TableCell key={result.tokenAddress} className=\"text-center\" data-testid={`cell-liquidity-${index}`}>\n                            {result.error ? (\n                              <span className=\"text-muted-foreground\">-</span>\n                            ) : (\n                              `$${formatNumber(result.marketData?.liquidityUsd)}`\n                            )}\n                          </TableCell>\n                        ))}\n                      </TableRow>\n\n                      <TableRow>\n                        <TableCell className=\"font-medium\">Price (USD)</TableCell>\n                        {comparisonResults.map((result, index) => (\n                          <TableCell key={result.tokenAddress} className=\"text-center\" data-testid={`cell-price-${index}`}>\n                            {result.error || !result.marketData?.priceUsd ? (\n                              <span className=\"text-muted-foreground\">-</span>\n                            ) : (\n                              `$${Number(result.marketData.priceUsd || 0).toFixed(6)}`\n                            )}\n                          </TableCell>\n                        ))}\n                      </TableRow>\n\n                      <TableRow>\n                        <TableCell className=\"font-medium\">Top 10 Concentration</TableCell>\n                        {comparisonResults.map((result, index) => (\n                          <TableCell key={result.tokenAddress} className=\"text-center\" data-testid={`cell-concentration-${index}`}>\n                            {result.error ? (\n                              <span className=\"text-muted-foreground\">-</span>\n                            ) : (\n                              `${Number(result.topHolderConcentration || 0).toFixed(1)}%`\n                            )}\n                          </TableCell>\n                        ))}\n                      </TableRow>\n\n                      <TableRow>\n                        <TableCell className=\"font-medium\">Risk Flags</TableCell>\n                        {comparisonResults.map((result, index) => (\n                          <TableCell key={result.tokenAddress} className=\"text-center\" data-testid={`cell-flags-${index}`}>\n                            {result.error ? (\n                              <span className=\"text-muted-foreground\">-</span>\n                            ) : (\n                              <span className={result.redFlags.length > 0 ? \"text-orange-500 font-semibold\" : \"\"}>\n                                {result.redFlags.length}\n                              </span>\n                            )}\n                          </TableCell>\n                        ))}\n                      </TableRow>\n                    </TableBody>\n                  </Table>\n                </Card>\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":21353},"server/services/pumpfun-api.ts":{"content":"import axios from 'axios';\n\ninterface PumpFunInfo {\n  isPumpFun: boolean;\n  devBought: number;\n  bondingCurve: number;\n}\n\nexport async function checkPumpFun(tokenAddress: string): Promise<PumpFunInfo> {\n  try {\n    const response = await axios.get(`https://pump.fun/api/token/${tokenAddress}`, {\n      timeout: 5000\n    });\n    \n    if (response.status === 200 && response.data) {\n      return {\n        isPumpFun: true,\n        devBought: response.data.dev_bought || 0,\n        bondingCurve: response.data.progress || 0\n      };\n    }\n  } catch (error) {\n    // Not a pump.fun token or API error\n  }\n  \n  return { isPumpFun: false, devBought: 0, bondingCurve: 0 };\n}\n","size_bytes":668},"server/services/birdeye-api.ts":{"content":"import axios from 'axios';\n\nconst BIRDEYE_API = 'https://public-api.birdeye.so';\nconst API_KEY = process.env.BIRDEYE_API_KEY || '';\n\ninterface BirdeyeOverview {\n  price: number;\n  mc: number;\n  liquidity: number;\n  v24hUSD: number;\n  priceChange24hPercent: number;\n  lpBurned: boolean;\n  twitter?: string;\n  telegram?: string;\n  website?: string;\n}\n\ninterface BirdeyePricePoint {\n  unixTime: number;\n  value: number;\n}\n\ninterface BirdeyeHolder {\n  owner: string;\n  uiAmount: number;\n  percentage: number;\n  tag?: string;\n}\n\nexport async function getBirdeyeOverview(tokenAddress: string): Promise<BirdeyeOverview | null> {\n  if (!API_KEY) {\n    return null;\n  }\n  \n  try {\n    const response = await axios.get(`${BIRDEYE_API}/defi/overview`, {\n      params: { address: tokenAddress },\n      headers: { 'X-API-KEY': API_KEY },\n      timeout: 10000\n    });\n    return response.data?.data || null;\n  } catch (error: any) {\n    if (error.response?.status === 401) {\n      console.error('[Birdeye] Invalid API key');\n    }\n    return null;\n  }\n}\n\nexport async function getBirdeyePriceHistory(tokenAddress: string, days: number = 1): Promise<BirdeyePricePoint[]> {\n  if (!API_KEY) {\n    return [];\n  }\n  \n  try {\n    const timeFrom = Math.floor(Date.now() / 1000) - (days * 86400);\n    const response = await axios.get(`${BIRDEYE_API}/defi/price_history`, {\n      params: { address: tokenAddress, time_from: timeFrom },\n      headers: { 'X-API-KEY': API_KEY },\n      timeout: 10000\n    });\n    return response.data?.data || [];\n  } catch (error: any) {\n    if (error.response?.status === 401) {\n      console.error('[Birdeye] Invalid API key');\n    }\n    return [];\n  }\n}\n\nexport async function getBirdeyeTopHolders(tokenAddress: string): Promise<BirdeyeHolder[]> {\n  if (!API_KEY) {\n    return [];\n  }\n  \n  try {\n    const response = await axios.get(`${BIRDEYE_API}/token/top_holders`, {\n      params: { address: tokenAddress },\n      headers: { 'X-API-KEY': API_KEY },\n      timeout: 10000\n    });\n    return response.data?.data?.slice(0, 20) || [];\n  } catch (error: any) {\n    if (error.response?.status === 401) {\n      console.error('[Birdeye] Invalid API key');\n    }\n    return [];\n  }\n}\n","size_bytes":2189},"server/services/rpc-balancer.ts":{"content":"import { Connection } from \"@solana/web3.js\";\n\ninterface RpcProvider {\n  getUrl: () => string;\n  weight: number;\n  name: string;\n  score: number;\n  fails: number;\n}\n\nconst RPC_PROVIDERS = [\n  { \n    getUrl: () => `https://mainnet.helius-rpc.com/?api-key=${process.env.HELIUS_KEY || \"\"}`,\n    weight: 40, \n    name: \"Helius\" \n  },\n  { \n    getUrl: () => `https://solana-mainnet.g.alchemy.com/v2/${process.env.ALCHEMY_KEY || \"\"}`,\n    weight: 35, \n    name: \"Alchemy\" \n  },\n  { \n    getUrl: () => \"https://rpc.ankr.com/solana\",\n    weight: 15, \n    name: \"Ankr\" \n  },\n  { \n    getUrl: () => \"https://solana-api.projectserum.com\",\n    weight: 10, \n    name: \"Serum\" \n  },\n  { \n    getUrl: () => \"https://api.mainnet-beta.solana.com\",\n    weight: 5, \n    name: \"Public\" \n  },\n];\n\nexport class SolanaRpcBalancer {\n  public providers: RpcProvider[];\n  private totalWeight: number;\n\n  constructor(providers: typeof RPC_PROVIDERS) {\n    this.providers = providers.map(p => ({\n      ...p,\n      score: 100,\n      fails: 0,\n    }));\n    this.totalWeight = providers.reduce((s, p) => s + p.weight, 0);\n  }\n\n  select(): RpcProvider {\n    const healthy = this.providers.filter(p => p.score > 50);\n    if (healthy.length === 0) {\n      console.log('[RPC Balancer] All providers unhealthy, resetting scores');\n      this.providers.forEach(p => p.score = 100);\n      return this.select();\n    }\n    const weighted: RpcProvider[] = [];\n    for (const p of healthy) {\n      for (let i = 0; i < p.weight; i++) {\n        weighted.push(p);\n      }\n    }\n    const selected = weighted[Math.floor(Math.random() * weighted.length)];\n    console.log(`[RPC Balancer] Selected provider: ${selected.name} (score: ${selected.score})`);\n    return selected;\n  }\n\n  getConnection(): Connection {\n    const provider = this.select();\n    const url = provider.getUrl();\n    return new Connection(url, { commitment: \"confirmed\" });\n  }\n\n  getHealthStats() {\n    return this.providers.map(p => ({\n      name: p.name,\n      score: p.score,\n      fails: p.fails,\n      weight: p.weight,\n    }));\n  }\n}\n\n// Export singleton instance\nexport const rpcBalancer = new SolanaRpcBalancer(RPC_PROVIDERS);\n\n// Health check interval - ping all providers every 30 seconds\nsetInterval(() => {\n  rpcBalancer.providers.forEach(async (p) => {\n    try {\n      const url = p.getUrl();\n      const conn = new Connection(url, { commitment: \"confirmed\" });\n      await conn.getSlot();\n      p.score = Math.min(100, p.score + 5);\n    } catch (error) {\n      p.score = Math.max(0, p.score - 10);\n      p.fails++;\n    }\n  });\n}, 30000);\n","size_bytes":2576},"server/services/lp-checker.ts":{"content":"import { Connection, PublicKey } from '@solana/web3.js';\nimport { TOKEN_PROGRAM_ID } from '@solana/spl-token';\n\nexport class LPChecker {\n  private connection: Connection;\n\n  constructor(connection: Connection) {\n    this.connection = connection;\n  }\n\n  async isLPBurned(poolAddress: string): Promise<boolean> {\n    try {\n      const poolPubkey = new PublicKey(poolAddress);\n      \n      const accounts = await this.connection.getTokenLargestAccounts(poolPubkey);\n      \n      if (!accounts || !accounts.value || accounts.value.length === 0) {\n        return false;\n      }\n\n      return accounts.value.every(acc => acc.uiAmount === 0 || acc.uiAmount === null);\n    } catch (error) {\n      console.error(`[LP Checker] Error checking LP burn for ${poolAddress}:`, error);\n      return false;\n    }\n  }\n\n  async isMintRenounced(mintAddress: string): Promise<boolean> {\n    try {\n      const mintPubkey = new PublicKey(mintAddress);\n      \n      const mintInfo = await this.connection.getAccountInfo(mintPubkey);\n      \n      if (!mintInfo) {\n        console.error(`[LP Checker] Mint account not found: ${mintAddress}`);\n        return false;\n      }\n\n      const ownerIsTokenProgram = mintInfo.owner.equals(TOKEN_PROGRAM_ID);\n      \n      return ownerIsTokenProgram;\n    } catch (error) {\n      console.error(`[LP Checker] Error checking mint renounced for ${mintAddress}:`, error);\n      return false;\n    }\n  }\n\n  async checkLPStatus(poolAddress: string, mintAddress: string): Promise<{\n    lpBurned: boolean;\n    mintRenounced: boolean;\n    rugScore: number;\n    warnings: string[];\n  }> {\n    const lpBurned = await this.isLPBurned(poolAddress);\n    const mintRenounced = await this.isMintRenounced(mintAddress);\n    \n    let rugScore = 0;\n    const warnings: string[] = [];\n\n    if (!lpBurned) {\n      rugScore += 40;\n      warnings.push(\"LP NOT BURNED\");\n    }\n    \n    if (!mintRenounced) {\n      rugScore += 30;\n      warnings.push(\"MINT NOT RENOUNCED\");\n    }\n\n    return {\n      lpBurned,\n      mintRenounced,\n      rugScore,\n      warnings,\n    };\n  }\n}\n","size_bytes":2062},"client/public/DEPLOY_ANTIRUG_LOCALLY.js":{"content":"#!/usr/bin/env node\n/**\n * ðŸš€ SECURE ANTIRUGILLER ($ANTIRUG) TOKEN DEPLOYMENT SCRIPT\n * \n * This script runs 100% locally on your machine.\n * Your private keys NEVER leave your computer.\n * \n * What it does:\n * 1. Generates vanity address ending in \"tek\"\n * 2. Deploys RugKiller token to Solana mainnet\n * 3. Gives you the keypair to import into Phantom\n * \n * Requirements:\n * - Node.js 18+\n * - ~0.05-0.1 SOL in your wallet\n */\n\nconst { \n  Connection, \n  Keypair, \n  SystemProgram, \n  Transaction,\n  sendAndConfirmTransaction,\n  LAMPORTS_PER_SOL,\n  PublicKey\n} = require('@solana/web3.js');\n\nconst {\n  TOKEN_PROGRAM_ID,\n  MINT_SIZE,\n  createInitializeMintInstruction,\n  getMinimumBalanceForRentExemptMint,\n  createAssociatedTokenAccountInstruction,\n  getAssociatedTokenAddress,\n  createMintToInstruction,\n} = require('@solana/spl-token');\n\nconst bs58 = require('bs58');\nconst readline = require('readline');\n\n// ============================================\n// CONFIGURATION\n// ============================================\n\nconst TOKEN_CONFIG = {\n  name: 'RugKiller',\n  symbol: 'ANTIRUG',\n  decimals: 9,\n  supply: 1_000_000_000, // 1 billion tokens\n  description: 'The ultimate Solana rug pull detector',\n  vanitySuffix: 'tek', // Address will end in \"tek\"\n};\n\nconst RPC_URL = process.env.SOLANA_RPC_URL || 'https://api.mainnet-beta.solana.com';\nconst connection = new Connection(RPC_URL, 'confirmed');\n\n// ============================================\n// VANITY ADDRESS GENERATOR\n// ============================================\n\nfunction generateVanityAddress(suffix, maxAttempts = 50_000_000) {\n  console.log(`\\nðŸ” Generating vanity address ending in \"${suffix}\"...`);\n  console.log(`â³ This may take 5-15 minutes. Please wait...\\n`);\n  \n  const startTime = Date.now();\n  let attempts = 0;\n  const searchPattern = suffix.toLowerCase();\n  \n  // Progress indicator\n  const progressInterval = setInterval(() => {\n    const elapsed = ((Date.now() - startTime) / 1000).toFixed(0);\n    const rate = (attempts / elapsed).toFixed(0);\n    process.stdout.write(`\\rðŸ”„ Attempts: ${attempts.toLocaleString()} | Rate: ${rate}/s | Time: ${elapsed}s`);\n  }, 1000);\n\n  while (attempts < maxAttempts) {\n    attempts++;\n    \n    const keypair = Keypair.generate();\n    const publicKey = keypair.publicKey.toBase58();\n    const checkKey = publicKey.toLowerCase();\n\n    if (checkKey.endsWith(searchPattern)) {\n      clearInterval(progressInterval);\n      const timeMs = Date.now() - startTime;\n      \n      console.log(`\\n\\nâœ… SUCCESS! Found vanity address in ${attempts.toLocaleString()} attempts`);\n      console.log(`â±ï¸  Time taken: ${(timeMs / 1000).toFixed(1)} seconds\\n`);\n      \n      return {\n        publicKey,\n        secretKey: bs58.encode(keypair.secretKey),\n        keypair,\n        attempts,\n        timeMs,\n      };\n    }\n  }\n\n  clearInterval(progressInterval);\n  console.log(`\\n\\nâŒ Failed to find vanity address after ${maxAttempts.toLocaleString()} attempts`);\n  return null;\n}\n\n// ============================================\n// TOKEN DEPLOYMENT\n// ============================================\n\nasync function deployToken(payerKeypair, mintKeypair) {\n  console.log('\\nðŸ“¦ Deploying $ANTIRUG token to Solana mainnet...\\n');\n  \n  try {\n    // Check balance\n    const balance = await connection.getBalance(payerKeypair.publicKey);\n    const balanceSOL = balance / LAMPORTS_PER_SOL;\n    \n    console.log(`ðŸ’° Wallet balance: ${balanceSOL.toFixed(4)} SOL`);\n    \n    if (balanceSOL < 0.05) {\n      throw new Error(`Insufficient balance. Need at least 0.05 SOL, have ${balanceSOL.toFixed(4)} SOL`);\n    }\n\n    // Get rent-exempt balance\n    const lamports = await getMinimumBalanceForRentExemptMint(connection);\n    console.log(`ðŸ’¸ Rent cost: ${(lamports / LAMPORTS_PER_SOL).toFixed(6)} SOL`);\n\n    // Create mint account\n    const createAccountIx = SystemProgram.createAccount({\n      fromPubkey: payerKeypair.publicKey,\n      newAccountPubkey: mintKeypair.publicKey,\n      space: MINT_SIZE,\n      lamports,\n      programId: TOKEN_PROGRAM_ID,\n    });\n\n    // Initialize mint\n    const initializeMintIx = createInitializeMintInstruction(\n      mintKeypair.publicKey,\n      TOKEN_CONFIG.decimals,\n      payerKeypair.publicKey, // mint authority\n      payerKeypair.publicKey, // freeze authority\n      TOKEN_PROGRAM_ID\n    );\n\n    // Send transaction\n    console.log('ðŸ“¤ Sending create mint transaction...');\n    const transaction = new Transaction().add(createAccountIx, initializeMintIx);\n    \n    const signature = await sendAndConfirmTransaction(\n      connection,\n      transaction,\n      [payerKeypair, mintKeypair],\n      { commitment: 'confirmed' }\n    );\n\n    console.log(`âœ… Token mint created!`);\n    console.log(`ðŸ”— Signature: ${signature}\\n`);\n\n    // Create associated token account\n    const associatedTokenAddress = await getAssociatedTokenAddress(\n      mintKeypair.publicKey,\n      payerKeypair.publicKey\n    );\n\n    const createATAIx = createAssociatedTokenAccountInstruction(\n      payerKeypair.publicKey,\n      associatedTokenAddress,\n      payerKeypair.publicKey,\n      mintKeypair.publicKey\n    );\n\n    // Mint initial supply\n    const mintAmount = TOKEN_CONFIG.supply * Math.pow(10, TOKEN_CONFIG.decimals);\n    const mintToIx = createMintToInstruction(\n      mintKeypair.publicKey,\n      associatedTokenAddress,\n      payerKeypair.publicKey,\n      mintAmount\n    );\n\n    console.log('ðŸ“¤ Minting initial supply...');\n    const mintTx = new Transaction().add(createATAIx, mintToIx);\n    const mintSig = await sendAndConfirmTransaction(\n      connection,\n      mintTx,\n      [payerKeypair],\n      { commitment: 'confirmed' }\n    );\n\n    console.log(`âœ… Minted ${TOKEN_CONFIG.supply.toLocaleString()} $${TOKEN_CONFIG.symbol} tokens!`);\n    console.log(`ðŸ”— Signature: ${mintSig}\\n`);\n\n    return {\n      mintAddress: mintKeypair.publicKey.toBase58(),\n      signature: mintSig,\n    };\n\n  } catch (error) {\n    console.error('\\nâŒ Deployment failed:', error.message);\n    throw error;\n  }\n}\n\n// ============================================\n// USER INPUT\n// ============================================\n\nfunction askQuestion(query) {\n  const rl = readline.createInterface({\n    input: process.stdin,\n    output: process.stdout,\n  });\n\n  return new Promise(resolve => rl.question(query, answer => {\n    rl.close();\n    resolve(answer);\n  }));\n}\n\n// ============================================\n// MAIN SCRIPT\n// ============================================\n\nasync function main() {\n  console.log('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—');\n  console.log('â•‘    ðŸ”¥ ANTIRUGILLER ($ANTIRUG) TOKEN DEPLOYMENT SCRIPT ðŸ”¥   â•‘');\n  console.log('â•‘                                                       â•‘');\n  console.log('â•‘  100% Secure - Your keys never leave your computer   â•‘');\n  console.log('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');\n  \n  console.log('\\nðŸ“‹ Token Configuration:');\n  console.log(`   Name: ${TOKEN_CONFIG.name}`);\n  console.log(`   Symbol: $${TOKEN_CONFIG.symbol}`);\n  console.log(`   Supply: ${TOKEN_CONFIG.supply.toLocaleString()}`);\n  console.log(`   Decimals: ${TOKEN_CONFIG.decimals}`);\n  console.log(`   Vanity: Ending in \"${TOKEN_CONFIG.vanitySuffix}\"`);\n  \n  console.log('\\nðŸ“ Requirements:');\n  console.log('   âœ“ ~5-15 minutes for vanity generation');\n  console.log('   âœ“ 0.05-0.1 SOL to transfer to burner wallet');\n\n  // SECURITY: Generate fresh burner wallet\n  console.log('\\nðŸ” SECURITY: Generating fresh burner wallet for deployment...');\n  console.log('   (Your main wallet stays safe - you\\'ll transfer SOL to this burner)');\n  \n  const payerKeypair = Keypair.generate();\n  const burnerAddress = payerKeypair.publicKey.toBase58();\n  \n  console.log(`\\nâœ… Burner wallet generated: ${burnerAddress}`);\n  console.log(`\\nâš ï¸  ACTION REQUIRED:`);\n  console.log(`   Transfer 0.1 SOL to this address from your main wallet:`);\n  console.log(`   ${burnerAddress}`);\n  console.log('\\n   Use Phantom, Solflare, or any wallet to send SOL.');\n  console.log('   This burner wallet will be used ONLY for deployment.');\n  \n  // Wait for user to transfer SOL\n  await askQuestion('\\nâœ… Press ENTER after you have transferred SOL to the burner wallet... ');\n  \n  // Check balance\n  let balance = await connection.getBalance(payerKeypair.publicKey);\n  let balanceSOL = balance / LAMPORTS_PER_SOL;\n  \n  if (balanceSOL < 0.05) {\n    console.error(`\\nâŒ Insufficient balance: ${balanceSOL.toFixed(4)} SOL`);\n    console.error('   Please transfer at least 0.1 SOL and try again.');\n    process.exit(1);\n  }\n  \n  console.log(`âœ… Balance confirmed: ${balanceSOL.toFixed(4)} SOL`);\n  \n  // Save burner keypair for later reference\n  const burnerPrivateKey = bs58.encode(payerKeypair.secretKey);\n  console.log('\\nðŸ’¾ SAVE THIS BURNER KEYPAIR (optional, for recovery only):');\n  console.log(`   Public:  ${burnerAddress}`);\n  console.log(`   Private: ${burnerPrivateKey}`);\n  console.log('\\n   (You can discard this after deployment - funds will be minimal)')\n\n  // Confirm deployment\n  const confirm = await askQuestion('\\nâš ï¸  Ready to deploy? This will cost ~0.05 SOL. Type \"yes\" to continue: ');\n  \n  if (confirm.toLowerCase() !== 'yes') {\n    console.log('\\nâŒ Deployment cancelled');\n    process.exit(0);\n  }\n\n  // Generate vanity address\n  const vanityResult = generateVanityAddress(TOKEN_CONFIG.vanitySuffix);\n  \n  if (!vanityResult) {\n    console.log('\\nâŒ Failed to generate vanity address. Please try again.');\n    process.exit(1);\n  }\n\n  // Deploy token\n  const deploymentResult = await deployToken(payerKeypair, vanityResult.keypair);\n\n  // SUCCESS!\n  console.log('\\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—');\n  console.log('â•‘           ðŸŽ‰ DEPLOYMENT SUCCESSFUL! ðŸŽ‰                â•‘');\n  console.log('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');\n  \n  console.log('\\nðŸ“ Token Address (Vanity):');\n  console.log(`   ${deploymentResult.mintAddress}`);\n  \n  console.log('\\nðŸ”‘ Token Mint Keypair (SAVE THIS!):');\n  console.log('\\nâš ï¸  WARNING: This is the ONLY time you\\'ll see this private key!');\n  console.log('   Import it into Phantom to control the token and access fees.\\n');\n  console.log(`   Public Key:  ${vanityResult.publicKey}`);\n  console.log(`   Private Key: ${vanityResult.secretKey}`);\n  \n  console.log('\\nðŸ“‹ Next Steps:');\n  console.log('   1. Copy the private key above');\n  console.log('   2. Open Phantom â†’ Settings â†’ \"Import Private Key\"');\n  console.log('   3. Paste the private key');\n  console.log('   4. You now control the $ANTIRUG token!');\n  \n  console.log('\\nðŸ”— View on Blockchain:');\n  console.log(`   Solscan:     https://solscan.io/token/${deploymentResult.mintAddress}`);\n  console.log(`   DexScreener: https://dexscreener.com/solana/${deploymentResult.mintAddress}`);\n  \n  console.log('\\nâœ… Deployment complete! Your token is live on Solana mainnet.');\n}\n\n// Run the script\nmain().catch(console.error);\n","size_bytes":11466},"client/src/pages/bot-guide.tsx":{"content":"import { Header } from \"@/components/header-new\";\nimport { Footer } from \"@/components/footer\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { SiTelegram, SiDiscord } from \"react-icons/si\";\nimport { Bot, Zap, Shield, Users, TrendingUp, AlertTriangle, CheckCircle, Info } from \"lucide-react\";\n\nexport default function BotGuide() {\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n      \n      <main className=\"flex-1\">\n        <div className=\"max-w-6xl mx-auto px-6 py-12\">\n          <div className=\"text-center mb-12\">\n            <div className=\"flex items-center justify-center gap-3 mb-4\">\n              <Bot className=\"h-12 w-12 text-primary\" />\n              <h1 className=\"text-4xl font-bold\" data-testid=\"heading-bot-guide\">Bot Usage Guide</h1>\n            </div>\n            <p className=\"text-lg text-muted-foreground\">\n              Master the Solana Rug Killer bots - comprehensive command reference with examples\n            </p>\n          </div>\n\n          {/* Quick Access Info */}\n          <Card className=\"mb-8 border-primary\" data-testid=\"card-access-info\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Info className=\"h-5 w-5 text-primary\" />\n                Bot Access Information\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"flex items-start gap-3\">\n                <CheckCircle className=\"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0\" />\n                <div>\n                  <p className=\"font-semibold\">Currently Ungated - Public Access</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    All bot features are currently available to everyone with no subscription required. \n                    Use any command instantly after adding the bot!\n                  </p>\n                </div>\n              </div>\n              <div className=\"flex items-start gap-3\">\n                <Zap className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\n                <div>\n                  <p className=\"font-semibold\">Quick Analysis</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Paste any token address directly in chat (no command needed) for instant quick analysis\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Tabs defaultValue=\"telegram\" className=\"mb-8\">\n            <TabsList className=\"grid w-full grid-cols-2\" data-testid=\"tabs-bot-platforms\">\n              <TabsTrigger value=\"telegram\" className=\"flex items-center gap-2\" data-testid=\"tab-telegram\">\n                <SiTelegram className=\"h-4 w-4\" />\n                Telegram Bot\n              </TabsTrigger>\n              <TabsTrigger value=\"discord\" className=\"flex items-center gap-2\" data-testid=\"tab-discord\">\n                <SiDiscord className=\"h-4 w-4\" />\n                Discord Bot\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"telegram\" className=\"space-y-6\">\n              {/* Telegram Overview */}\n              <Card data-testid=\"card-telegram-overview\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <SiTelegram className=\"h-5 w-5 text-[#0088cc]\" />\n                    Telegram Bot Overview\n                  </CardTitle>\n                  <CardDescription>\n                    Get instant token analysis right in your Telegram chats\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Features</h4>\n                    <ul className=\"space-y-2 text-sm text-muted-foreground\">\n                      <li className=\"flex items-start gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <span>5 powerful commands with autocomplete menu (type \"/\" to see all)</span>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <span>Markdown-formatted responses with color-coded risk indicators</span>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <span>Quick links to Solscan, DexScreener, Rugcheck, and more</span>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <span>Smart auto-detection - paste any token address for instant analysis</span>\n                      </li>\n                    </ul>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* /start Command */}\n              <Card data-testid=\"card-telegram-start\">\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"font-mono text-lg\">/start</CardTitle>\n                    <Badge variant=\"secondary\">Welcome</Badge>\n                  </div>\n                  <CardDescription>Display welcome message and available commands</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">What it does</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Shows a friendly welcome message with a list of all available commands and how to use them. \n                      This is the first command to try when you add the bot!\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Usage</h4>\n                    <code className=\"block bg-muted px-4 py-3 rounded font-mono text-sm\">\n                      /start\n                    </code>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Example Response</h4>\n                    <div className=\"bg-muted px-4 py-3 rounded text-sm space-y-2\">\n                      <p>ðŸ›¡ï¸ <strong>Welcome to Solana Rug Killer Bot!</strong></p>\n                      <p className=\"text-muted-foreground\">Your guardian against Solana rug pulls.</p>\n                      <p className=\"text-muted-foreground\">Available commands:</p>\n                      <p className=\"text-muted-foreground\">â€¢ /execute - Full token analysis</p>\n                      <p className=\"text-muted-foreground\">â€¢ /first20 - Top 20 holder breakdown</p>\n                      <p className=\"text-muted-foreground\">â€¢ And more...</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* /execute Command */}\n              <Card data-testid=\"card-telegram-execute\">\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"font-mono text-lg\">/execute [token_address]</CardTitle>\n                    <Badge>Core Analysis</Badge>\n                  </div>\n                  <CardDescription>Comprehensive 52-metric risk analysis of any Solana token</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">What it does</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Performs a deep dive analysis using 52+ risk metrics from Rugcheck, GoPlus Security, \n                      DexScreener, Jupiter, and Birdeye. Returns comprehensive risk score (0-100, where 100=safe), \n                      AI verdict, price data, security checks, holder analysis, and red flags.\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Usage</h4>\n                    <code className=\"block bg-muted px-4 py-3 rounded font-mono text-sm\">\n                      /execute EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v\n                    </code>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">What you'll get</h4>\n                    <ul className=\"space-y-2 text-sm\">\n                      <li className=\"flex items-start gap-2\">\n                        <Shield className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <strong>Risk Score & AI Verdict</strong>\n                          <p className=\"text-muted-foreground\">0-100 safety score with AI-powered recommendation</p>\n                        </div>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <TrendingUp className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <strong>Price & Market Data</strong>\n                          <p className=\"text-muted-foreground\">Current price, 24h volume, market cap, price change</p>\n                        </div>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <Users className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <strong>Holder Analysis</strong>\n                          <p className=\"text-muted-foreground\">Total holders, top 10 concentration, supply distribution</p>\n                        </div>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <AlertTriangle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <strong>Security Checks</strong>\n                          <p className=\"text-muted-foreground\">Mint/freeze authority status, LP burn percentage, Pump.fun data</p>\n                        </div>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <strong>Quick Links</strong>\n                          <p className=\"text-muted-foreground\">Direct links to Solscan, DexScreener, Rugcheck, AXiom, Padre, GMGN, Birdeye</p>\n                        </div>\n                      </li>\n                    </ul>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Example Response Preview</h4>\n                    <div className=\"bg-muted px-4 py-3 rounded text-sm space-y-1 font-mono\">\n                      <p>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</p>\n                      <p>âœ… <strong>USDC (USDC)</strong></p>\n                      <p>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</p>\n                      <p></p>\n                      <p>ðŸ¤– <strong>AI VERDICT</strong></p>\n                      <p>10/10 - ðŸŸ¢ HIGHLY SAFE TOKEN</p>\n                      <p></p>\n                      <p>ðŸ›¡ï¸ <strong>RISK SCORE</strong></p>\n                      <p>Score: <strong>95/100</strong> (LOW)</p>\n                      <p className=\"text-muted-foreground\">Higher = Safer (0=Dangerous, 100=Safe)</p>\n                      <p></p>\n                      <p>ðŸ” <strong>SECURITY</strong></p>\n                      <p>â€¢ Mint: âœ… Revoked</p>\n                      <p>â€¢ Freeze: âœ… Revoked</p>\n                      <p>â€¢ LP Burn: âœ… 100.0%</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* /first20 Command */}\n              <Card data-testid=\"card-telegram-first20\">\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"font-mono text-lg\">/first20 [token_address]</CardTitle>\n                    <Badge>Holder Analysis</Badge>\n                  </div>\n                  <CardDescription>Detailed breakdown of top 20 token holders</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">What it does</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Displays the top 20 wallets holding the token, showing each holder's address and \n                      percentage of total supply. Excludes known exchanges, protocols, and bundlers for \n                      accurate whale detection. Warns if concentration is dangerously high.\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Usage</h4>\n                    <code className=\"block bg-muted px-4 py-3 rounded font-mono text-sm\">\n                      /first20 EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v\n                    </code>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">When to use this</h4>\n                    <ul className=\"space-y-1 text-sm text-muted-foreground\">\n                      <li>â€¢ Checking for whale concentration before buying</li>\n                      <li>â€¢ Identifying if devs/insiders hold too much supply</li>\n                      <li>â€¢ Detecting coordinated wallets (similar percentages)</li>\n                      <li>â€¢ Verifying fair distribution of tokens</li>\n                    </ul>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Example Response</h4>\n                    <div className=\"bg-muted px-4 py-3 rounded text-sm space-y-1 font-mono\">\n                      <p>ðŸ“Š <strong>TOP 20 HOLDERS - USDC</strong></p>\n                      <p></p>\n                      <p>Total Top 10 Concentration: <strong>45.32%</strong></p>\n                      <p></p>\n                      <p>1. `EPjF...Dt1v` - 8.50%</p>\n                      <p>2. `BXcv...9kLm` - 6.20%</p>\n                      <p>3. `9oPq...3nRt` - 5.10%</p>\n                      <p>...</p>\n                      <p></p>\n                      <p>âš ï¸ WARNING: High holder concentration detected!</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* /devtorture Command */}\n              <Card data-testid=\"card-telegram-devtorture\">\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"font-mono text-lg\">/devtorture [token_address]</CardTitle>\n                    <Badge variant=\"destructive\">Security Audit</Badge>\n                  </div>\n                  <CardDescription>Deep dive into developer wallet security and token age</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">What it does</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Performs an aggressive security audit focused on developer control. Checks if mint \n                      authority is active (can dev mint unlimited tokens?), if freeze authority is active \n                      (can dev freeze your wallet?), and displays token age with warnings for very new tokens.\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Usage</h4>\n                    <code className=\"block bg-muted px-4 py-3 rounded font-mono text-sm\">\n                      /devtorture EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v\n                    </code>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">What it checks</h4>\n                    <ul className=\"space-y-2 text-sm\">\n                      <li className=\"flex items-start gap-2\">\n                        <AlertTriangle className=\"h-4 w-4 text-destructive mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <strong>Mint Authority</strong>\n                          <p className=\"text-muted-foreground\">Can the dev create unlimited tokens and dump on holders?</p>\n                        </div>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <AlertTriangle className=\"h-4 w-4 text-destructive mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <strong>Freeze Authority</strong>\n                          <p className=\"text-muted-foreground\">Can the dev freeze your wallet and prevent you from selling?</p>\n                        </div>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <AlertTriangle className=\"h-4 w-4 text-destructive mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <strong>Token Age</strong>\n                          <p className=\"text-muted-foreground\">How old is the token? New tokens (&lt;7 days) are higher risk</p>\n                        </div>\n                      </li>\n                    </ul>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Example Response</h4>\n                    <div className=\"bg-muted px-4 py-3 rounded text-sm space-y-1 font-mono\">\n                      <p>ðŸ”¥ <strong>DEV TORTURE REPORT - SCAMCOIN</strong></p>\n                      <p></p>\n                      <p>Contract: `AbCd...5678`</p>\n                      <p></p>\n                      <p>âŒ <strong>MINT AUTHORITY ACTIVE</strong></p>\n                      <p>Dev can mint unlimited tokens!</p>\n                      <p>Authority: `9xYz...4321`</p>\n                      <p></p>\n                      <p>âŒ <strong>FREEZE AUTHORITY ACTIVE</strong></p>\n                      <p>Dev can freeze accounts!</p>\n                      <p>Authority: `9xYz...4321`</p>\n                      <p></p>\n                      <p>ðŸ“… <strong>AGE</strong>: 2 days</p>\n                      <p>âš ï¸ Very new token - high risk!</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* /blacklist Command */}\n              <Card data-testid=\"card-telegram-blacklist\">\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"font-mono text-lg\">/blacklist [wallet_address]</CardTitle>\n                    <Badge>Blacklist Check</Badge>\n                  </div>\n                  <CardDescription>Check if a wallet is flagged in the AI blacklist database</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">What it does</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Queries the AI-powered blacklist database to see if a wallet has been flagged for \n                      suspicious activity. The AI system automatically detects scammers using 6 detection \n                      rules analyzing honeypots, high taxes, wash trading, and coordinated schemes.\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Usage</h4>\n                    <code className=\"block bg-muted px-4 py-3 rounded font-mono text-sm\">\n                      /blacklist 9xYzAbCd1234567890KlMnOpQrStUvWxYz\n                    </code>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">When to use this</h4>\n                    <ul className=\"space-y-1 text-sm text-muted-foreground\">\n                      <li>â€¢ Before sending SOL to an unknown wallet</li>\n                      <li>â€¢ Checking the developer wallet of a new token</li>\n                      <li>â€¢ Verifying if a whale wallet is legitimate</li>\n                      <li>â€¢ Researching wallets involved in suspicious trades</li>\n                    </ul>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Example Responses</h4>\n                    <div className=\"space-y-3\">\n                      <div>\n                        <p className=\"text-xs font-semibold mb-1\">Clean Wallet:</p>\n                        <div className=\"bg-muted px-4 py-3 rounded text-sm font-mono\">\n                          <p>ðŸ” <strong>BLACKLIST CHECK</strong></p>\n                          <p></p>\n                          <p>Wallet: `9xYz...4321`</p>\n                          <p></p>\n                          <p>âœ… Not currently flagged</p>\n                        </div>\n                      </div>\n                      <div>\n                        <p className=\"text-xs font-semibold mb-1\">Flagged Wallet (future feature):</p>\n                        <div className=\"bg-muted px-4 py-3 rounded text-sm font-mono\">\n                          <p>ðŸ” <strong>BLACKLIST CHECK</strong></p>\n                          <p></p>\n                          <p>Wallet: `ScAm...RuG1`</p>\n                          <p></p>\n                          <p>ðŸš¨ <strong>FLAGGED - SCAMMER</strong></p>\n                          <p>Severity: 90/100</p>\n                          <p>Reason: Honeypot token deployment</p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Quick Analysis Feature */}\n              <Card data-testid=\"card-telegram-quick\">\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle>Quick Analysis (No Command)</CardTitle>\n                    <Badge variant=\"secondary\">Auto-detect</Badge>\n                  </div>\n                  <CardDescription>Just paste a token address for instant compact analysis</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">What it does</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      The bot automatically detects when you paste a Solana address (32-44 characters, no spaces) \n                      and provides a quick compact analysis without needing to type any command. Perfect for \n                      rapid screening of multiple tokens.\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Usage</h4>\n                    <p className=\"text-sm text-muted-foreground mb-2\">Just paste the address:</p>\n                    <code className=\"block bg-muted px-4 py-3 rounded font-mono text-sm\">\n                      EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v\n                    </code>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Example Response</h4>\n                    <div className=\"bg-muted px-4 py-3 rounded text-sm font-mono\">\n                      <p>âœ… <strong>USDC (USDC)</strong></p>\n                      <p></p>\n                      <p>ðŸŽ¯ Risk Score: <strong>95/100</strong> (LOW)</p>\n                      <p>ðŸ“Š Holders: 1,234,567</p>\n                      <p>ðŸ’§ Top 10 Concentration: 45.32%</p>\n                      <p></p>\n                      <p>Use /execute EPjFWdd5... for full analysis</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"discord\" className=\"space-y-6\">\n              {/* Discord Overview */}\n              <Card data-testid=\"card-discord-overview\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <SiDiscord className=\"h-5 w-5 text-[#5865F2]\" />\n                    Discord Bot Overview\n                  </CardTitle>\n                  <CardDescription>\n                    Professional token analysis with rich embeds and slash commands\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Features</h4>\n                    <ul className=\"space-y-2 text-sm text-muted-foreground\">\n                      <li className=\"flex items-start gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <span>Slash commands (/) with autocomplete and descriptions</span>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <span>Rich embeds with color-coded borders (green/yellow/orange/red)</span>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <span>Embedded fields for organized data display</span>\n                      </li>\n                      <li className=\"flex items-start gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <span>Professional formatting perfect for community servers</span>\n                      </li>\n                    </ul>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* /analyze Command */}\n              <Card data-testid=\"card-discord-analyze\">\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"font-mono text-lg\">/analyze token:[address]</CardTitle>\n                    <Badge>Core Analysis</Badge>\n                  </div>\n                  <CardDescription>Full 52-metric risk analysis with rich embed</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">What it does</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Identical analysis to Telegram's /execute but formatted as a beautiful Discord embed \n                      with color-coded borders based on risk level. Returns comprehensive analysis with \n                      organized fields for price, security, holders, and alerts.\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Usage</h4>\n                    <p className=\"text-sm text-muted-foreground mb-2\">Type slash and select the command:</p>\n                    <code className=\"block bg-muted px-4 py-3 rounded font-mono text-sm\">\n                      /analyze token:EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v\n                    </code>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Embed Colors</h4>\n                    <ul className=\"space-y-1 text-sm\">\n                      <li className=\"flex items-center gap-2\">\n                        <div className=\"w-4 h-4 bg-green-500 rounded\"></div>\n                        <span><strong>Green</strong> - Low Risk (70-100)</span>\n                      </li>\n                      <li className=\"flex items-center gap-2\">\n                        <div className=\"w-4 h-4 bg-yellow-500 rounded\"></div>\n                        <span><strong>Yellow</strong> - Moderate Risk (40-70)</span>\n                      </li>\n                      <li className=\"flex items-center gap-2\">\n                        <div className=\"w-4 h-4 bg-orange-500 rounded\"></div>\n                        <span><strong>Orange</strong> - High Risk (20-40)</span>\n                      </li>\n                      <li className=\"flex items-center gap-2\">\n                        <div className=\"w-4 h-4 bg-red-500 rounded\"></div>\n                        <span><strong>Red</strong> - Extreme Risk (0-20)</span>\n                      </li>\n                    </ul>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Embed Fields</h4>\n                    <ul className=\"space-y-1 text-sm text-muted-foreground\">\n                      <li>â€¢ AI Verdict - Rating and recommendation</li>\n                      <li>â€¢ Risk Score - 0-100 safety score with level</li>\n                      <li>â€¢ Price - Current price, volume, market cap, 24h change</li>\n                      <li>â€¢ Security - Mint/freeze status, LP burn percentage</li>\n                      <li>â€¢ Holders - Total count, top 10 concentration</li>\n                      <li>â€¢ Quick Links - Solscan, DexScreener, Rugcheck, etc.</li>\n                    </ul>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* /holders Command */}\n              <Card data-testid=\"card-discord-holders\">\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"font-mono text-lg\">/holders token:[address]</CardTitle>\n                    <Badge>Holder Analysis</Badge>\n                  </div>\n                  <CardDescription>Top 20 holder breakdown with concentration warnings</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">What it does</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Same as Telegram's /first20, formatted as a Discord embed. Shows top 20 wallets \n                      with their percentages, excluding known exchanges and protocols.\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Usage</h4>\n                    <code className=\"block bg-muted px-4 py-3 rounded font-mono text-sm\">\n                      /holders token:EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v\n                    </code>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* /dev Command */}\n              <Card data-testid=\"card-discord-dev\">\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"font-mono text-lg\">/dev token:[address]</CardTitle>\n                    <Badge variant=\"destructive\">Security Audit</Badge>\n                  </div>\n                  <CardDescription>Developer wallet security audit with authority checks</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">What it does</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Same as Telegram's /devtorture, but in Discord embed format. Aggressive security \n                      audit checking mint/freeze authorities and token age.\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Usage</h4>\n                    <code className=\"block bg-muted px-4 py-3 rounded font-mono text-sm\">\n                      /dev token:EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v\n                    </code>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* /check Command */}\n              <Card data-testid=\"card-discord-check\">\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"font-mono text-lg\">/check wallet:[address]</CardTitle>\n                    <Badge>Blacklist Check</Badge>\n                  </div>\n                  <CardDescription>AI blacklist database check for suspicious wallets</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">What it does</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Same as Telegram's /blacklist, formatted as Discord embed. Checks if a wallet \n                      is flagged in the AI-powered blacklist database.\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold mb-2\">Usage</h4>\n                    <code className=\"block bg-muted px-4 py-3 rounded font-mono text-sm\">\n                      /check wallet:9xYzAbCd1234567890KlMnOpQrStUvWxYz\n                    </code>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n\n          {/* Pro Tips Section */}\n          <Card className=\"border-primary\" data-testid=\"card-pro-tips\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Zap className=\"h-5 w-5 text-primary\" />\n                Pro Tips\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid md:grid-cols-2 gap-6\">\n                <div className=\"space-y-3\">\n                  <h4 className=\"font-semibold\">Best Practices</h4>\n                  <ul className=\"space-y-2 text-sm text-muted-foreground\">\n                    <li className=\"flex items-start gap-2\">\n                      <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                      <span>Always check /execute first for comprehensive overview</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                      <span>Use /first20 if you see concerning holder concentration</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                      <span>Run /devtorture on new tokens (&lt;7 days old)</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                      <span>Check dev wallet with /blacklist before buying</span>\n                    </li>\n                  </ul>\n                </div>\n                <div className=\"space-y-3\">\n                  <h4 className=\"font-semibold\">Red Flags to Watch For</h4>\n                  <ul className=\"space-y-2 text-sm text-muted-foreground\">\n                    <li className=\"flex items-start gap-2\">\n                      <AlertTriangle className=\"h-4 w-4 text-destructive mt-0.5 flex-shrink-0\" />\n                      <span>Risk score below 40 (High/Extreme risk)</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <AlertTriangle className=\"h-4 w-4 text-destructive mt-0.5 flex-shrink-0\" />\n                      <span>Top 10 holder concentration above 50%</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <AlertTriangle className=\"h-4 w-4 text-destructive mt-0.5 flex-shrink-0\" />\n                      <span>Active mint or freeze authority</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <AlertTriangle className=\"h-4 w-4 text-destructive mt-0.5 flex-shrink-0\" />\n                      <span>LP burn percentage below 50%</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <AlertTriangle className=\"h-4 w-4 text-destructive mt-0.5 flex-shrink-0\" />\n                      <span>Token age less than 7 days</span>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Community Support */}\n          <Card data-testid=\"card-community\">\n            <CardHeader>\n              <CardTitle>Need Help?</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <p className=\"text-sm text-muted-foreground\">\n                Having trouble with the bots? Check out these resources:\n              </p>\n              <ul className=\"space-y-2 text-sm\">\n                <li className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                  <span>\n                    <a href=\"/bot-setup\" className=\"text-primary hover:underline\">Bot Setup Guide</a> - \n                    Step-by-step instructions for adding the bots\n                  </span>\n                </li>\n                <li className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                  <span>\n                    <a href=\"/documentation\" className=\"text-primary hover:underline\">Full Documentation</a> - \n                    Complete platform guide with PDF download\n                  </span>\n                </li>\n                <li className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\n                  <span>Try /start command in the bot for quick help</span>\n                </li>\n              </ul>\n            </CardContent>\n          </Card>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":38895}},"version":2}